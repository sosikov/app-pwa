(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[179],{869:(he,T,D)=>{"use strict";function v(e){return"function"==typeof e}function M(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const L=M(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function R(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class U{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(v(r))try{r()}catch(o){t=o instanceof L?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{A(o)}catch(s){t=t??[],s instanceof L?t=[...t,...s.errors]:t.push(s)}}if(t)throw new L(t)}}add(t){var n;if(t&&t!==this)if(this.closed)A(t);else{if(t instanceof U){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&R(n,t)}remove(t){const{_finalizers:n}=this;n&&R(n,t),t instanceof U&&t._removeParent(this)}}U.EMPTY=(()=>{const e=new U;return e.closed=!0,e})();const O=U.EMPTY;function N(e){return e instanceof U||e&&"closed"in e&&v(e.remove)&&v(e.add)&&v(e.unsubscribe)}function A(e){v(e)?e():e.unsubscribe()}const k={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},E={setTimeout(e,t,...n){const{delegate:r}=E;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=E;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function _(e){E.setTimeout(()=>{const{onUnhandledError:t}=k;if(!t)throw e;t(e)})}function b(){}const y=d("C",void 0,void 0);function d(e,t,n){return{kind:e,value:t,error:n}}let l=null;function g(e){if(k.useDeprecatedSynchronousErrorHandling){const t=!l;if(t&&(l={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=l;if(l=null,n)throw r}}else e()}class I extends U{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,N(t)&&t.add(this)):this.destination=F}static create(t,n,r){return new q(t,n,r)}next(t){this.isStopped?Q(function h(e){return d("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Q(function m(e){return d("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Q(y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const S=Function.prototype.bind;function x(e,t){return S.call(e,t)}class V{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){J(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){J(r)}else J(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){J(n)}}}class q extends I{constructor(t,n,r){let i;if(super(),v(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&k.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&x(t.next,o),error:t.error&&x(t.error,o),complete:t.complete&&x(t.complete,o)}):i=t}this.destination=new V(i)}}function J(e){k.useDeprecatedSynchronousErrorHandling?function f(e){k.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=e)}(e):_(e)}function Q(e,t){const{onStoppedNotification:n}=k;n&&E.setTimeout(()=>n(e,t))}const F={closed:!0,next:b,error:function re(e){throw e},complete:b},j="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(e){return e}function B(e){return 0===e.length?W:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let Y=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function z(e){return e&&e instanceof I||function $(e){return e&&v(e.next)&&v(e.error)&&v(e.complete)}(e)&&N(e)}(n)?n:new q(n,r,i);return g(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=fe(r))((i,o)=>{const s=new q({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[j](){return this}pipe(...n){return B(n)(this)}toPromise(n){return new(n=fe(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function fe(e){var t;return null!==(t=e??k.Promise)&&void 0!==t?t:Promise}const ee=M(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let se=(()=>{class e extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Re(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ee}next(n){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?O:(this.currentObservers=null,o.push(n),new U(()=>{this.currentObservers=null,R(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Y;return n.source=this,n}}return e.create=(t,n)=>new Re(t,n),e})();class Re extends se{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:O}}class pe extends se{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function Ae(e){return v(e?.lift)}function me(e){return t=>{if(Ae(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(e,t,n,r,i){return new ht(e,t,n,r,i)}class ht extends I{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Se(e,t){return me((n,r)=>{let i=0;n.subscribe(Fe(r,o=>{r.next(e.call(t,o,i++))}))})}function yr(e){return this instanceof yr?(this.v=e,this):new yr(e)}function bp(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function yc(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=e[o](s)).done,s.value)})}}}const vc=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Dp(e){return v(e?.then)}function Ip(e){return v(e[j])}function Tp(e){return Symbol.asyncIterator&&v(e?.[Symbol.asyncIterator])}function Ap(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Mp=function AD(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rp(e){return v(e?.[Mp])}function Pp(e){return function Sp(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(P){r[P]&&(i[P]=function(H){return new Promise(function(G,K){o.push([P,H,G,K])>1||a(P,H)})})}function a(P,H){try{!function u(P){P.value instanceof yr?Promise.resolve(P.value.v).then(c,p):w(o[0][2],P)}(r[P](H))}catch(G){w(o[0][3],G)}}function c(P){a("next",P)}function p(P){a("throw",P)}function w(P,H){P(H),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield yr(n.read());if(i)return yield yr(void 0);yield yield yr(r)}}finally{n.releaseLock()}})}function xp(e){return v(e?.getReader)}function Ot(e){if(e instanceof Y)return e;if(null!=e){if(Ip(e))return function MD(e){return new Y(t=>{const n=e[j]();if(v(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(vc(e))return function RD(e){return new Y(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Dp(e))return function PD(e){return new Y(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,_)})}(e);if(Tp(e))return Op(e);if(Rp(e))return function xD(e){return new Y(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(xp(e))return function OD(e){return Op(Pp(e))}(e)}throw Ap(e)}function Op(e){return new Y(t=>{(function kD(e,t){var n,r,i,o;return function Cp(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(p){try{c(r.next(p))}catch(w){s(w)}}function u(p){try{c(r.throw(p))}catch(w){s(w)}}function c(p){p.done?o(p.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(p.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=bp(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Zn(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function pt(e,t,n=1/0){return v(t)?pt((r,i)=>Se((o,s)=>t(r,o,i,s))(Ot(e(r,i))),n):("number"==typeof t&&(n=t),me((r,i)=>function ND(e,t,n,r,i,o,s,a){const u=[];let c=0,p=0,w=!1;const P=()=>{w&&!u.length&&!c&&t.complete()},H=K=>c<r?G(K):u.push(K),G=K=>{o&&t.next(K),c++;let Z=!1;Ot(n(K,p++)).subscribe(Fe(t,ne=>{i?.(ne),o?H(ne):t.next(ne)},()=>{Z=!0},void 0,()=>{if(Z)try{for(c--;u.length&&c<r;){const ne=u.shift();s?Zn(t,s,()=>G(ne)):G(ne)}P()}catch(ne){t.error(ne)}}))};return e.subscribe(Fe(t,H,()=>{w=!0,P()})),()=>{a?.()}}(r,i,e,n)))}function ci(e=1/0){return pt(W,e)}const Rn=new Y(e=>e.complete());function kp(e){return e&&v(e.schedule)}function _c(e){return e[e.length-1]}function Np(e){return v(_c(e))?e.pop():void 0}function po(e){return kp(_c(e))?e.pop():void 0}function Fp(e,t=0){return me((n,r)=>{n.subscribe(Fe(r,i=>Zn(r,e,()=>r.next(i),t),()=>Zn(r,e,()=>r.complete(),t),i=>Zn(r,e,()=>r.error(i),t)))})}function Lp(e,t=0){return me((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Vp(e,t){if(!e)throw new Error("Iterable cannot be null");return new Y(n=>{Zn(n,t,()=>{const r=e[Symbol.asyncIterator]();Zn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function gt(e,t){return t?function $D(e,t){if(null!=e){if(Ip(e))return function VD(e,t){return Ot(e).pipe(Lp(t),Fp(t))}(e,t);if(vc(e))return function UD(e,t){return new Y(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Dp(e))return function HD(e,t){return Ot(e).pipe(Lp(t),Fp(t))}(e,t);if(Tp(e))return Vp(e,t);if(Rp(e))return function jD(e,t){return new Y(n=>{let r;return Zn(n,t,()=>{r=e[Mp](),Zn(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>v(r?.return)&&r.return()})}(e,t);if(xp(e))return function BD(e,t){return Vp(Pp(e),t)}(e,t)}throw Ap(e)}(e,t):Ot(e)}function wc(...e){const t=po(e),n=function LD(e,t){return"number"==typeof _c(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Ot(r[0]):ci(n)(gt(r,t)):Rn}function ve(...e){return gt(e,po(e))}function Hp(e={}){const{connector:t=(()=>new se),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,u,c=0,p=!1,w=!1;const P=()=>{a?.unsubscribe(),a=void 0},H=()=>{P(),s=u=void 0,p=w=!1},G=()=>{const K=s;H(),K?.unsubscribe()};return me((K,Z)=>{c++,!w&&!p&&P();const ne=u=u??t();Z.add(()=>{c--,0===c&&!w&&!p&&(a=Cc(G,i))}),ne.subscribe(Z),!s&&c>0&&(s=new q({next:X=>ne.next(X),error:X=>{w=!0,P(),a=Cc(H,n,X),ne.error(X)},complete:()=>{p=!0,P(),a=Cc(H,r),ne.complete()}}),Ot(K).subscribe(s))})(o)}}function Cc(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new q({next:()=>{r.unsubscribe(),e()}});return Ot(t(...n)).subscribe(r)}function kt(e,t){return me((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Fe(r,u=>{i?.unsubscribe();let c=0;const p=o++;Ot(e(u,p)).subscribe(i=Fe(r,w=>r.next(t?t(u,w,p,c++):w),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function GD(e,t){return e===t}function We(e){for(let t in e)if(e[t]===We)return t;throw Error("Could not find renamed property on target object.")}function js(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function mt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(mt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ec(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const zD=We({__forward_ref__:We});function Ke(e){return e.__forward_ref__=Ke,e.toString=function(){return mt(this())},e}function Ie(e){return Sc(e)?e():e}function Sc(e){return"function"==typeof e&&e.hasOwnProperty(zD)&&e.__forward_ref__===Ke}function bc(e){return e&&!!e.\u0275providers}class ie extends Error{constructor(t,n){super(function Bs(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function Be(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function Me(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function $s(e,t){throw new ie(-201,!1)}function dn(e,t){null==e&&function $e(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function ye(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function en(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ws(e){return jp(e,Gs)||jp(e,$p)}function jp(e,t){return e.hasOwnProperty(t)?e[t]:null}function Bp(e){return e&&(e.hasOwnProperty(Dc)||e.hasOwnProperty(e0))?e[Dc]:null}const Gs=We({\u0275prov:We}),Dc=We({\u0275inj:We}),$p=We({ngInjectableDef:We}),e0=We({ngInjectorDef:We});var _e=(()=>((_e=_e||{})[_e.Default=0]="Default",_e[_e.Host=1]="Host",_e[_e.Self=2]="Self",_e[_e.SkipSelf=4]="SkipSelf",_e[_e.Optional=8]="Optional",_e))();let Ic;function Bt(e){const t=Ic;return Ic=e,t}function Gp(e,t,n){const r=Ws(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&_e.Optional?null:void 0!==t?t:void $s(mt(e))}const Je=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),go={},Tc="__NG_DI_FLAG__",zs="ngTempTokenPath",n0=/\n/gm,zp="__source";let li;function _r(e){const t=li;return li=e,t}function s0(e,t=_e.Default){if(void 0===li)throw new ie(-203,!1);return null===li?Gp(e,void 0,t):li.get(e,t&_e.Optional?null:void 0,t)}function ge(e,t=_e.Default){return(function Wp(){return Ic}()||s0)(Ie(e),t)}function le(e,t=_e.Default){return ge(e,Ks(t))}function Ks(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ac(e){const t=[];for(let n=0;n<e.length;n++){const r=Ie(e[n]);if(Array.isArray(r)){if(0===r.length)throw new ie(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){const a=r[s],u=a0(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}t.push(ge(i,o))}else t.push(ge(r))}return t}function mo(e,t){return e[Tc]=t,e.prototype[Tc]=t,e}function a0(e){return e[Tc]}function Xn(e){return{toString:e}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),tn=(()=>{return(e=tn||(tn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",tn;var e})();const xn={},Ue=[],Js=We({\u0275cmp:We}),Mc=We({\u0275dir:We}),Rc=We({\u0275pipe:We}),Jp=We({\u0275mod:We}),Yn=We({\u0275fac:We}),yo=We({__NG_ELEMENT_ID__:We}),qp=We({__NG_ENV_ID__:We});function Zp(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Pc(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{const o=i,s=n[++r];Yp(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function Xp(e){return 3===e||4===e||6===e}function Yp(e){return 64===e.charCodeAt(0)}function vo(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Qp(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Qp(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}const eg="ng-template";function l0(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const s=e[r++];if(n&&"class"===o&&-1!==Zp(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function tg(e){return 4===e.type&&e.value!==eg}function d0(e,t,n){return t===(4!==e.type||n?e.value:eg)}function f0(e,t,n){let r=4;const i=e.attrs||[],o=function g0(e){for(let t=0;t<e.length;t++)if(Xp(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!d0(e,u,n)||""===u&&1===t.length){if(_n(r))return!1;s=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!l0(e.attrs,c,n)){if(_n(r))return!1;s=!0}continue}const w=h0(8&r?"class":u,i,tg(e),n);if(-1===w){if(_n(r))return!1;s=!0;continue}if(""!==c){let P;P=w>o?"":i[w+1].toLowerCase();const H=8&r?P:null;if(H&&-1!==Zp(H,c,0)||2&r&&c!==P){if(_n(r))return!1;s=!0}}}}else{if(!s&&!_n(r)&&!_n(u))return!1;if(s&&_n(u))continue;s=!1,r=u|1&r}}return _n(r)||s}function _n(e){return 0==(1&e)}function h0(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function m0(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ng(e,t,n=!1){for(let r=0;r<t.length;r++)if(f0(e,t[r],n))return!0;return!1}function rg(e,t){return e?":not("+t.trim()+")":t}function v0(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!_n(s)&&(t+=rg(o,i),i=""),r=s,o=o||!_n(r);n++}return""!==i&&(t+=rg(o,i)),t}function xc(e){return Xn(()=>{const t=og(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||tn.Emulated,styles:e.styles||Ue,_:null,schemas:e.schemas||null,tView:null,id:""};sg(n);const r=e.dependencies;return n.directiveDefs=qs(r,!1),n.pipeDefs=qs(r,!0),n.id=function I0(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function E0(e){return je(e)||It(e)}function S0(e){return null!==e}function fn(e){return Xn(()=>({type:e.type,bootstrap:e.bootstrap||Ue,declarations:e.declarations||Ue,imports:e.imports||Ue,exports:e.exports||Ue,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function ig(e,t){if(null==e)return xn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function De(e){return Xn(()=>{const t=og(e);return sg(t),t})}function je(e){return e[Js]||null}function It(e){return e[Mc]||null}function Wt(e){return e[Rc]||null}function nn(e,t){const n=e[Jp]||null;if(!n&&!0===t)throw new Error(`Type ${mt(e)} does not have '\u0275mod' property.`);return n}function og(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||xn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Ue,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ig(e.inputs,t),outputs:ig(e.outputs)}}function sg(e){e.features?.forEach(t=>t(e))}function qs(e,t){if(!e)return null;const n=t?Wt:E0;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(S0)}const yt=0,ce=1,Pe=2,et=3,wn=4,_o=5,Tt=6,fi=7,at=8,hi=9,Vr=10,xe=11,wo=12,ag=13,pi=14,ut=15,Co=16,gi=17,On=18,Eo=19,ug=20,wr=21,Qn=22,Zs=23,Xs=24,Ve=25,Oc=1,cg=2,kn=7,mi=9,At=11;function rn(e){return Array.isArray(e)&&"object"==typeof e[Oc]}function Gt(e){return Array.isArray(e)&&!0===e[Oc]}function kc(e){return 0!=(4&e.flags)}function Hr(e){return e.componentOffset>-1}function Qs(e){return 1==(1&e.flags)}function Cn(e){return!!e.template}function Nc(e){return 0!=(512&e[Pe])}function Ur(e,t){return e.hasOwnProperty(Yn)?e[Yn]:null}let x0=Je.WeakRef??class P0{constructor(t){this.ref=t}deref(){return this.ref}},k0=0,Nn=null,ea=!1;function Et(e){const t=Nn;return Nn=e,t}class pg{constructor(){this.id=k0++,this.ref=function O0(e){return new x0(e)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[t,n]of this.producers){const r=n.producerNode.deref();if(void 0!==r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(t),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const t=ea;ea=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();void 0!==i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{ea=t}}producerAccessed(){if(ea)throw new Error("");if(null===Nn)return;let t=Nn.producers.get(this.id);void 0===t?(t={consumerNode:Nn.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Nn.trackingVersion},Nn.producers.set(this.id,t),this.consumers.set(Nn.id,t)):(t.seenValueVersion=this.valueVersion,t.atTrackingVersion=Nn.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Nn?.consumerAllowSignalWrites}producerPollStatus(t){return this.valueVersion!==t||(this.onProducerUpdateValueVersion(),this.valueVersion!==t)}}let gg=null;const yg=()=>{};class V0 extends pg{constructor(t,n,r){super(),this.watch=t,this.schedule=n,this.dirty=!1,this.cleanupFn=yg,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const t=Et(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=yg,this.watch(this.registerOnCleanup)}finally{Et(t)}}cleanup(){this.cleanupFn()}}class H0{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function hn(){return vg}function vg(e){return e.type.prototype.ngOnChanges&&(e.setInput=j0),U0}function U0(){const e=wg(this),t=e?.current;if(t){const n=e.previous;if(n===xn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function j0(e,t,n,r){const i=this.declaredInputs[n],o=wg(e)||function B0(e,t){return e[_g]=t}(e,{previous:xn,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new H0(u&&u.currentValue,t,a===xn),e[r]=t}hn.ngInherit=!0;const _g="__ngSimpleChanges__";function wg(e){return e[_g]||null}const Fn=function(e,t,n){};function Ze(e){for(;Array.isArray(e);)e=e[yt];return e}function zt(e,t){return Ze(t[e.index])}function Sg(e,t){return e.data[t]}function on(e,t){const n=t[e];return rn(n)?n:n[yt]}function Cr(e,t){return null==t?null:e[t]}function bg(e){e[gi]=0}function q0(e){1024&e[Pe]||(e[Pe]|=1024,Ig(e,1))}function Dg(e){1024&e[Pe]&&(e[Pe]&=-1025,Ig(e,-1))}function Ig(e,t){let n=e[et];if(null===n)return;n[_o]+=t;let r=n;for(n=n[et];null!==n&&(1===t&&1===r[_o]||-1===t&&0===r[_o]);)n[_o]+=t,r=n,n=n[et]}const be={lFrame:Lg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Mg(){return be.bindingsEnabled}function te(){return be.lFrame.lView}function He(){return be.lFrame.tView}function St(){let e=Rg();for(;null!==e&&64===e.type;)e=e.parent;return e}function Rg(){return be.lFrame.currentTNode}function Ln(e,t){const n=be.lFrame;n.currentTNode=e,n.isParent=t}function jc(){return be.lFrame.isParent}function cI(e,t){const n=be.lFrame;n.bindingIndex=n.bindingRootIndex=e,$c(t)}function $c(e){be.lFrame.currentDirectiveIndex=e}function Gc(e){be.lFrame.currentQueryIndex=e}function dI(e){const t=e[ce];return 2===t.type?t.declTNode:1===t.type?e[Tt]:null}function Ng(e,t,n){if(n&_e.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&_e.Host||(i=dI(o),null===i||(o=o[pi],10&i.type))););if(null===i)return!1;t=i,e=o}const r=be.lFrame=Fg();return r.currentTNode=t,r.lView=e,!0}function zc(e){const t=Fg(),n=e[ce];be.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Fg(){const e=be.lFrame,t=null===e?null:e.child;return null===t?Lg(e):t}function Lg(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Vg(){const e=be.lFrame;return be.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Hg=Vg;function Kc(){const e=Vg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ft(){return be.lFrame.selectedIndex}function jr(e){be.lFrame.selectedIndex=e}let jg=!0;function ia(){return jg}function Er(e){jg=e}function oa(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:p}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),u&&(e.viewHooks??=[]).push(-n,u),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),null!=p&&(e.destroyHooks??=[]).push(n,p)}}function sa(e,t,n){Bg(e,t,3,n)}function aa(e,t,n,r){(3&e[Pe])===n&&Bg(e,t,n,r)}function Jc(e,t){let n=e[Pe];(3&n)===t&&(n&=8191,n+=1,e[Pe]=n)}function Bg(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let u=void 0!==r?65535&e[gi]:0;u<s;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(e[gi]+=65536),(a<o||-1==o)&&(_I(e,n,t,u),e[gi]=(4294901760&e[gi])+u+2),u++}function $g(e,t){Fn(4,e,t);const n=Et(null);try{t.call(e)}finally{Et(n),Fn(5,e,t)}}function _I(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[Pe]>>13<e[gi]>>16&&(3&e[Pe])===t&&(e[Pe]+=8192,$g(a,o)):$g(a,o)}const wi=-1;class Do{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Wg(e){return e!==wi}function ua(e){return 32767&e}function ca(e,t){let n=function SI(e){return e>>16}(e),r=t;for(;n>0;)r=r[pi],n--;return r}let Zc=!0;function la(e){const t=Zc;return Zc=e,t}const Gg=255,zg=5;let bI=0;const Vn={};function da(e,t){const n=Kg(e,t);if(-1!==n)return n;const r=t[ce];r.firstCreatePass&&(e.injectorIndex=t.length,Xc(r.data,e),Xc(t,null),Xc(r.blueprint,null));const i=Yc(e,t),o=e.injectorIndex;if(Wg(i)){const s=ua(i),a=ca(i,t),u=a[ce].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|u[s+c]}return t[o+8]=i,o}function Xc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Kg(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Yc(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=em(i),null===r)return wi;if(n++,i=i[pi],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return wi}function Qc(e,t,n){!function DI(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(yo)&&(r=n[yo]),null==r&&(r=n[yo]=bI++);const i=r&Gg;t.data[e+(i>>zg)]|=1<<i}(e,t,n)}function Jg(e,t,n){if(n&_e.Optional||void 0!==e)return e;$s()}function qg(e,t,n,r){if(n&_e.Optional&&void 0===r&&(r=null),!(n&(_e.Self|_e.Host))){const i=e[hi],o=Bt(void 0);try{return i?i.get(t,r,n&_e.Optional):Gp(t,r,n&_e.Optional)}finally{Bt(o)}}return Jg(r,0,n)}function Zg(e,t,n,r=_e.Default,i){if(null!==e){if(2048&t[Pe]&&!(r&_e.Self)){const s=function RI(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&2048&s[Pe]&&!(512&s[Pe]);){const a=Xg(o,s,n,r|_e.Self,Vn);if(a!==Vn)return a;let u=o.parent;if(!u){const c=s[ug];if(c){const p=c.get(n,Vn,r);if(p!==Vn)return p}u=em(s),s=s[pi]}o=u}return i}(e,t,n,r,Vn);if(s!==Vn)return s}const o=Xg(e,t,n,r,Vn);if(o!==Vn)return o}return qg(t,n,r,i)}function Xg(e,t,n,r,i){const o=function AI(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(yo)?e[yo]:void 0;return"number"==typeof t?t>=0?t&Gg:MI:t}(n);if("function"==typeof o){if(!Ng(t,e,r))return r&_e.Host?Jg(i,0,r):qg(t,n,r,i);try{const s=o(r);if(null!=s||r&_e.Optional)return s;$s()}finally{Hg()}}else if("number"==typeof o){let s=null,a=Kg(e,t),u=wi,c=r&_e.Host?t[ut][Tt]:null;for((-1===a||r&_e.SkipSelf)&&(u=-1===a?Yc(e,t):t[a+8],u!==wi&&Qg(r,!1)?(s=t[ce],a=ua(u),t=ca(u,t)):a=-1);-1!==a;){const p=t[ce];if(Yg(o,a,p.data)){const w=TI(a,t,n,s,r,c);if(w!==Vn)return w}u=t[a+8],u!==wi&&Qg(r,t[ce].data[a+8]===c)&&Yg(o,a,t)?(s=p,a=ua(u),t=ca(u,t)):a=-1}}return i}function TI(e,t,n,r,i,o){const s=t[ce],a=s.data[e+8],p=function fa(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,u=e.directiveStart,p=o>>20,P=i?a+p:e.directiveEnd;for(let H=r?a:a+p;H<P;H++){const G=s[H];if(H<u&&n===G||H>=u&&G.type===n)return H}if(i){const H=s[u];if(H&&Cn(H)&&H.type===n)return u}return null}(a,s,n,null==r?Hr(a)&&Zc:r!=s&&0!=(3&a.type),i&_e.Host&&o===a);return null!==p?Br(t,s,p,a):Vn}function Br(e,t,n,r){let i=e[n];const o=t.data;if(function wI(e){return e instanceof Do}(i)){const s=i;s.resolving&&function KD(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ie(-200,`Circular dependency in DI detected for ${e}${n}`)}(Be(o[n]));const a=la(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Bt(s.injectImpl):null;Ng(e,r,_e.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function vI(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=vg(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}(n,o[n],t)}finally{null!==u&&Bt(u),la(a),s.resolving=!1,Hg()}}return i}function Yg(e,t,n){return!!(n[t+(e>>zg)]&1<<e)}function Qg(e,t){return!(e&_e.Self||e&_e.Host&&t)}class Ci{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Zg(this._tNode,this._lView,t,Ks(r),n)}}function MI(){return new Ci(St(),te())}function bt(e){return Xn(()=>{const t=e.prototype.constructor,n=t[Yn]||el(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[Yn]||el(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function el(e){return Sc(e)?()=>{const t=el(Ie(e));return t&&t()}:Ur(e)}function em(e){const t=e[ce],n=t.type;return 2===n?t.declTNode:1===n?e[Tt]:null}const Si="__parameters__";function Di(e,t,n){return Xn(()=>{const r=function tl(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,p){const w=u.hasOwnProperty(Si)?u[Si]:Object.defineProperty(u,Si,{value:[]})[Si];for(;w.length<=p;)w.push(null);return(w[p]=w[p]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Ao(e,t){e.forEach(n=>Array.isArray(n)?Ao(n,t):t(n))}function nm(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function pa(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function sn(e,t,n){let r=Ii(e,t);return r>=0?e[1|r]=n:(r=~r,function NI(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function nl(e,t){const n=Ii(e,t);if(n>=0)return e[1|n]}function Ii(e,t){return function rm(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}(e,t,1)}const ma=mo(Di("Optional"),8),ya=mo(Di("SkipSelf"),4);function Ca(e){return 128==(128&e.flags)}var Kt=(()=>((Kt=Kt||{})[Kt.Important=1]="Important",Kt[Kt.DashCase=2]="DashCase",Kt))();const ul=new Map;let oT=0;const ll="__ngContext__";function Mt(e,t){rn(t)?(e[ll]=t[Eo],function aT(e){ul.set(e[Eo],e)}(t)):e[ll]=t}let dl;function fl(e,t){return dl(e,t)}function xo(e){const t=e[et];return Gt(t)?t[et]:t}function Sm(e){return Dm(e[wo])}function bm(e){return Dm(e[wn])}function Dm(e){for(;null!==e&&!Gt(e);)e=e[wn];return e}function Mi(e,t,n,r,i){if(null!=r){let o,s=!1;Gt(r)?o=r:rn(r)&&(s=!0,r=r[yt]);const a=Ze(r);0===e&&null!==n?null==i?Rm(t,n,a):$r(t,n,a,i||null,!0):1===e&&null!==n?$r(t,n,a,i||null,!0):2===e?function Ta(e,t,n){const r=Da(e,t);r&&function IT(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function MT(e,t,n,r,i){const o=n[kn];o!==Ze(n)&&Mi(t,e,r,o,i);for(let a=At;a<n.length;a++){const u=n[a];ko(u[ce],u,e,t,r,o)}}(t,e,o,n,i)}}function ba(e,t,n){return e.createElement(t,n)}function Tm(e,t){const n=e[mi],r=n.indexOf(t);Dg(t),n.splice(r,1)}function pl(e,t){if(e.length<=At)return;const n=At+t,r=e[n];if(r){const i=r[Co];null!==i&&i!==e&&Tm(i,r),t>0&&(e[n-1][wn]=r[wn]);const o=pa(e,At+t);!function vT(e,t){ko(e,t,t[xe],2,null,null),t[yt]=null,t[Tt]=null}(r[ce],r);const s=o[On];null!==s&&s.detachView(o[ce]),r[et]=null,r[wn]=null,r[Pe]&=-129}return r}function Am(e,t){if(!(256&t[Pe])){const n=t[xe];t[Zs]?.destroy(),t[Xs]?.destroy(),n.destroyNode&&ko(e,t,n,3,null,null),function CT(e){let t=e[wo];if(!t)return gl(e[ce],e);for(;t;){let n=null;if(rn(t))n=t[wo];else{const r=t[At];r&&(n=r)}if(!n){for(;t&&!t[wn]&&t!==e;)rn(t)&&gl(t[ce],t),t=t[et];null===t&&(t=e),rn(t)&&gl(t[ce],t),n=t&&t[wn]}t=n}}(t)}}function gl(e,t){if(!(256&t[Pe])){t[Pe]&=-129,t[Pe]|=256,function DT(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Do)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Fn(4,a,u);try{u.call(a)}finally{Fn(5,a,u)}}else{Fn(4,i,o);try{o.call(i)}finally{Fn(5,i,o)}}}}}(e,t),function bT(e,t){const n=e.cleanup,r=t[fi];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(t[fi]=null);const i=t[wr];if(null!==i){t[wr]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(e,t),1===t[ce].type&&t[xe].destroy();const n=t[Co];if(null!==n&&Gt(t[et])){n!==t[et]&&Tm(n,t);const r=t[On];null!==r&&r.detachView(e)}!function uT(e){ul.delete(e[Eo])}(t)}}function ml(e,t,n){return function Mm(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[yt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===tn.None||o===tn.Emulated)return null}return zt(r,n)}}(e,t.parent,n)}function $r(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Rm(e,t,n){e.appendChild(t,n)}function Pm(e,t,n,r,i){null!==r?$r(e,t,n,r,i):Rm(e,t,n)}function Da(e,t){return e.parentNode(t)}let yl,Cl,km=function Om(e,t,n){return 40&e.type?zt(e,n):null};function Ia(e,t,n,r){const i=ml(e,r,t),o=t[xe],a=function xm(e,t,n){return km(e,t,n)}(r.parent||t[Tt],r,t);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)Pm(o,i,n[u],a,!1);else Pm(o,i,n,a,!1);void 0!==yl&&yl(o,r,t,n,i)}function Oo(e,t){if(null!==t){const n=t.type;if(3&n)return zt(t,e);if(4&n)return vl(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Oo(e,r);{const i=e[t.index];return Gt(i)?vl(-1,i):Ze(i)}}if(32&n)return fl(t,e)()||Ze(e[t.index]);{const r=Fm(e,t);return null!==r?Array.isArray(r)?r[0]:Oo(xo(e[ut]),r):Oo(e,t.next)}}return null}function Fm(e,t){return null!==t?e[ut][Tt].projection[t.projection]:null}function vl(e,t){const n=At+e+1;if(n<t.length){const r=t[n],i=r[ce].firstChild;if(null!==i)return Oo(r,i)}return t[kn]}function _l(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===t&&(a&&Mt(Ze(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)_l(e,t,n.child,r,i,o,!1),Mi(t,e,i,a,o);else if(32&u){const c=fl(n,r);let p;for(;p=c();)Mi(t,e,i,p,o);Mi(t,e,i,a,o)}else 16&u?Vm(e,t,r,n,i,o):Mi(t,e,i,a,o);n=s?n.projectionNext:n.next}}function ko(e,t,n,r,i,o){_l(n,r,e.firstChild,t,i,o,!1)}function Vm(e,t,n,r,i,o){const s=n[ut],u=s[Tt].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Mi(t,e,i,u[c],o);else{let c=u;const p=s[et];Ca(r)&&(c.flags|=128),_l(e,t,c,p,i,o,!0)}}function Hm(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Um(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Pc(e,t,r),null!==i&&Hm(e,t,i),null!==o&&function PT(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}class Wm{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class de{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ye({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ho=new de("ENVIRONMENT_INITIALIZER"),ey=new de("INJECTOR",-1),ty=new de("INJECTOR_DEF_TYPES");class ny{get(t,n=go){if(n===go){const r=new Error(`NullInjectorError: No provider for ${mt(t)}!`);throw r.name="NullInjectorError",r}return n}}function Pa(e){return{\u0275providers:e}}function iA(...e){return{\u0275providers:ry(0,e),\u0275fromNgModule:!0}}function ry(e,...t){const n=[],r=new Set;let i;return Ao(t,o=>{const s=o;Tl(s,n,[],r)&&(i||=[],i.push(s))}),void 0!==i&&iy(i,n),n}function iy(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];Al(i,o=>{t.push(o)})}}function Tl(e,t,n,r){if(!(e=Ie(e)))return!1;let i=null,o=Bp(e);const s=!o&&je(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const u=e.ngModule;if(o=Bp(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)Tl(c,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Ao(o.imports,p=>{Tl(p,t,n,r)&&(c||=[],c.push(p))})}finally{}void 0!==c&&iy(c,t)}if(!a){const c=Ur(i)||(()=>new i);t.push({provide:i,useFactory:c,deps:Ue},{provide:ty,useValue:i,multi:!0},{provide:Ho,useValue:()=>ge(i),multi:!0})}const u=o.providers;null==u||a||Al(u,p=>{t.push(p)})}}return i!==e&&void 0!==e.providers}function Al(e,t){for(let n of e)bc(n)&&(n=n.\u0275providers),Array.isArray(n)?Al(n,t):t(n)}const oA=We({provide:String,useValue:We});function Ml(e){return null!==e&&"object"==typeof e&&oA in e}function Wr(e){return"function"==typeof e}const Rl=new de("Set Injector scope."),xa={},aA={};let Pl;function Oa(){return void 0===Pl&&(Pl=new ny),Pl}class Hn{}class xl extends Hn{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kl(t,s=>this.processProvider(s)),this.records.set(ey,Pi(void 0,this)),i.has("environment")&&this.records.set(Hn,Pi(void 0,this));const o=this.records.get(Rl);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ty.multi,Ue,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=_r(this),r=Bt(void 0);try{return t()}finally{_r(n),Bt(r)}}get(t,n=go,r=_e.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(qp))return t[qp](this);r=Ks(r);const i=_r(this),o=Bt(void 0);try{if(!(r&_e.SkipSelf)){let a=this.records.get(t);if(void 0===a){const u=function fA(e){return"function"==typeof e||"object"==typeof e&&e instanceof de}(t)&&Ws(t);a=u&&this.injectableDefInScope(u)?Pi(Ol(t),xa):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&_e.Self?Oa():this.parent).get(t,n=r&_e.Optional&&n===go?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[zs]=s[zs]||[]).unshift(mt(t)),i)throw s;return function u0(e,t,n,r){const i=e[zs];throw t[zp]&&i.unshift(t[zp]),e.message=function c0(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=mt(t);if(Array.isArray(t))i=t.map(mt).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):mt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(n0,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[zs]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{Bt(o),_r(i)}}resolveInjectorInitializers(){const t=_r(this),n=Bt(void 0);try{const r=this.get(Ho.multi,Ue,_e.Self);for(const i of r)i()}finally{_r(t),Bt(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(mt(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(t){let n=Wr(t=Ie(t))?t:Ie(t&&t.provide);const r=function cA(e){return Ml(e)?Pi(void 0,e.useValue):Pi(ay(e),xa)}(t);if(Wr(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Pi(void 0,xa,!0),i.factory=()=>Ac(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===xa&&(n.value=aA,n.value=n.factory()),"object"==typeof n.value&&n.value&&function dA(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Ie(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Ol(e){const t=Ws(e),n=null!==t?t.factory:Ur(e);if(null!==n)return n;if(e instanceof de)throw new ie(204,!1);if(e instanceof Function)return function uA(e){const t=e.length;if(t>0)throw function Mo(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new ie(204,!1);const n=function QD(e){return e&&(e[Gs]||e[$p])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new ie(204,!1)}function ay(e,t,n){let r;if(Wr(e)){const i=Ie(e);return Ur(i)||Ol(i)}if(Ml(e))r=()=>Ie(e.useValue);else if(function sy(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Ac(e.deps||[]));else if(function oy(e){return!(!e||!e.useExisting)}(e))r=()=>ge(Ie(e.useExisting));else{const i=Ie(e&&(e.useClass||e.provide));if(!function lA(e){return!!e.deps}(e))return Ur(i)||Ol(i);r=()=>new i(...Ac(e.deps))}return r}function Pi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function kl(e,t){for(const n of e)Array.isArray(n)?kl(n,t):n&&bc(n)?kl(n.\u0275providers,t):t(n)}const ka=new de("AppId",{providedIn:"root",factory:()=>hA}),hA="ng",uy=new de("Platform Initializer"),rr=new de("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cy=new de("CSP nonce",{providedIn:"root",factory:()=>function No(){if(void 0!==Cl)return Cl;if(typeof document<"u")return document;throw new ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let dy=(e,t)=>null;function fy(e,t){return dy(e,t)}class EA{}class gy{}class bA{resolveComponentFactory(t){throw function SA(e){const t=Error(`No component factory found for ${mt(e)}.`);return t.ngComponent=e,t}(t)}}let Ha=(()=>{class e{}return e.NULL=new bA,e})();function DA(){return xi(St(),te())}function xi(e,t){return new an(zt(e,t))}let an=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=DA,e})();class yy{}let ir=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function TA(){const e=te(),n=on(St().index,e);return(rn(n)?n:e)[xe]}(),e})(),AA=(()=>{class e{}return e.\u0275prov=ye({token:e,providedIn:"root",factory:()=>null}),e})();class $o{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const MA=new $o("16.1.2"),Gl={};function Wo(e){for(;e;){e[Pe]|=64;const t=xo(e);if(Nc(e)&&!t)return e;e=t}return null}function zl(e){return e.ngOriginalError}class Gr{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&zl(t);for(;n&&zl(n);)n=zl(n);return n||null}}const wy=new de("",{providedIn:"root",factory:()=>!1});function or(e){return e instanceof Function?e():e}class Dy extends pg{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(t){this._lView=t}onConsumerDependencyMayHaveChanged(){Wo(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(t,n,r){const i=Et(this);this.trackingVersion++;try{t(n,r)}finally{Et(i)}}destroy(){this.trackingVersion++}}let ja=null;function Iy(){return ja??=new Dy,ja}function Ty(e,t){return e[t]??Iy()}function Ay(e,t){const n=Iy();n.hasReadASignal&&(e[t]=ja,n.lView=e,ja=new Dy)}const Oe={};function Go(e){My(He(),te(),Ft()+e,!1)}function My(e,t,n,r){if(!r)if(3==(3&t[Pe])){const o=e.preOrderCheckHooks;null!==o&&sa(t,o,n)}else{const o=e.preOrderHooks;null!==o&&aa(t,o,0,n)}jr(n)}function Oy(e,t=null,n=null,r){const i=ky(e,t,n,r);return i.resolveInjectorInitializers(),i}function ky(e,t=null,n=null,r,i=new Set){const o=[n||Ue,iA(e)];return r=r||("object"==typeof e?void 0:mt(e)),new xl(o,t||Oa(),r||null,i)}let En=(()=>{class e{static create(n,r){if(Array.isArray(n))return Oy({name:""},r,n,"");{const i=n.name??"";return Oy({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=go,e.NULL=new ny,e.\u0275prov=ye({token:e,providedIn:"any",factory:()=>ge(ey)}),e.__NG_ELEMENT_ID__=-1,e})();function oe(e,t=_e.Default){const n=te();return null===n?ge(e,t):Zg(St(),n,Ie(e),t)}function Ba(e,t,n,r,i,o,s,a,u,c,p){const w=t.blueprint.slice();return w[yt]=i,w[Pe]=140|r,(null!==c||e&&2048&e[Pe])&&(w[Pe]|=2048),bg(w),w[et]=w[pi]=e,w[at]=n,w[Vr]=s||e&&e[Vr],w[xe]=a||e&&e[xe],w[hi]=u||e&&e[hi]||null,w[Tt]=o,w[Eo]=function sT(){return oT++}(),w[Qn]=p,w[ug]=c,w[ut]=2==t.type?e[ut]:w,w}function ki(e,t,n,r,i){let o=e.data[t];if(null===o)o=function Kl(e,t,n,r,i){const o=Rg(),s=jc(),u=e.data[t]=function ZA(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return function vi(){return null!==be.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(e,t,n,r,i),function uI(){return be.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function bo(){const e=be.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Ln(o,!0),o}function zo(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Fy(e,t,n,r,i){const o=Ty(t,Zs),s=Ft(),a=2&r;try{if(jr(-1),a&&t.length>Ve&&My(e,t,Ve,!1),Fn(a?2:0,i),a)o.runInContext(n,r,i);else{const c=Et(null);try{n(r,i)}finally{Et(c)}}}finally{a&&null===t[Zs]&&Ay(t,Zs),jr(s),Fn(a?3:1,i)}}function Jl(e,t,n){if(kc(t)){const r=Et(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Et(r)}}}function Ly(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Xl(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Xl(e,t,n,r,i,o,s,a,u,c,p){const w=Ve+r,P=w+i,H=function WA(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Oe);return n}(w,P),G="function"==typeof c?c():c;return H[ce]={type:e,blueprint:H,template:n,queries:null,viewQuery:a,declTNode:t,data:H.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:G,incompleteFirstPass:!1,ssrId:p}}let Vy=e=>null;function Hy(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?Uy(n,t,i,o):r.hasOwnProperty(i)&&Uy(n,t,r[i],o)}return n}function Uy(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function jy(e,t,n,r,i,o){for(let c=0;c<r.length;c++)Qc(da(n,t),e,r[c].type);!function uM(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let c=0;c<r.length;c++){const p=r[c];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,u=zo(e,t,r.length,null);for(let c=0;c<r.length;c++){const p=r[c];n.mergedAttrs=vo(n.mergedAttrs,p.hostAttrs),cM(e,n,t,u,p),aM(u,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const w=p.type.prototype;!s&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(w.ngOnChanges||w.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function XA(e,t,n){const i=t.directiveEnd,o=e.data,s=t.attrs,a=[];let u=null,c=null;for(let p=t.directiveStart;p<i;p++){const w=o[p],P=n?n.get(w):null,G=P?P.outputs:null;u=Hy(w.inputs,p,u,P?P.inputs:null),c=Hy(w.outputs,p,c,G);const K=null===u||null===s||tg(t)?null:fM(u,p,s);a.push(K)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=c}(e,n,o)}function By(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function lI(){return be.lFrame.currentDirectiveIndex}();try{jr(o);for(let a=r;a<i;a++){const u=e.data[a],c=t[a];$c(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&iM(u,c)}}finally{jr(-1),$c(s)}}function iM(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ql(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function aM(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Cn(t)&&(n[""]=e)}}function cM(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Ur(i.type)),s=new Do(o,Cn(i),oe);e.blueprint[r]=s,n[r]=s,function tM(e,t,n,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function nM(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(e,t,r,zo(e,n,i.hostVars,Oe),i)}function dM(e,t,n,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)$y(r,n,s[a++],s[a++],s[a++])}function $y(e,t,n,r,i){const o=Et(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{Et(o)}}function fM(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Gy(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=e.data[o];Gc(n[r]),s.contentQueries(2,t[o],o)}}}function $a(e,t){return e[wo]?e[ag][wn]=t:e[wo]=t,e[ag]=t,t}function td(e,t,n){Gc(0);const r=Et(null);try{t(e,n)}finally{Et(r)}}function qy(e,t){const n=e[hi],r=n?n.get(Gr,null):null;r&&r.handleError(t)}function nd(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];$y(e.data[s],t[s],r,a,i)}}function hM(e,t){const n=on(t,e),r=n[ce];!function pM(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[yt];null!==i&&null===n[Qn]&&(n[Qn]=fy(i,n[hi])),rd(r,n,n[at])}function rd(e,t,n){zc(t);try{const r=e.viewQuery;null!==r&&td(1,r,n);const i=e.template;null!==i&&Fy(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Gy(e,t),e.staticViewQueries&&td(2,e.viewQuery,n);const o=e.components;null!==o&&function gM(e,t){for(let n=0;n<t.length;n++)hM(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Pe]&=-5,Kc()}}let Zy=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=new V0(n,c=>{this.all.has(c)&&this.queue.set(c,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return e.\u0275prov=ye({token:e,providedIn:"root",factory:()=>new e}),e})();function Wa(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=Ec(i,a):2==o&&(r=Ec(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Ko(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(Ze(o)),Gt(o)){for(let a=At;a<o.length;a++){const u=o[a],c=u[ce].firstChild;null!==c&&Ko(u[ce],u,c,r)}o[kn]!==o[yt]&&r.push(o[kn])}const s=n.type;if(8&s)Ko(e,t,n.child,r);else if(32&s){const a=fl(n,t);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Fm(t,n);if(Array.isArray(a))r.push(...a);else{const u=xo(t[ut]);Ko(u[ce],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ga(e,t,n,r=!0){const i=t[Vr].rendererFactory;i.begin&&i.begin();try{Xy(e,t,e.template,n)}catch(s){throw r&&qy(t,s),s}finally{i.end&&i.end(),t[Vr].effectManager?.flush()}}function Xy(e,t,n,r){const i=t[Pe];if(256!=(256&i)){t[Vr].effectManager?.flush(),zc(t);try{bg(t),function xg(e){return be.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Fy(e,t,n,2,r);const s=3==(3&i);if(s){const c=e.preOrderCheckHooks;null!==c&&sa(t,c,null)}else{const c=e.preOrderHooks;null!==c&&aa(t,c,0,null),Jc(t,0)}if(function wM(e){for(let t=Sm(e);null!==t;t=bm(t)){if(!t[cg])continue;const n=t[mi];for(let r=0;r<n.length;r++){q0(n[r])}}}(t),Yy(t,2),null!==e.contentQueries&&Gy(e,t),s){const c=e.contentCheckHooks;null!==c&&sa(t,c)}else{const c=e.contentHooks;null!==c&&aa(t,c,1),Jc(t,1)}!function $A(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=Ty(t,Xs);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)jr(~o);else{const s=o,a=n[++i],u=n[++i];cI(a,s),r.runInContext(u,2,t[s])}}}finally{null===t[Xs]&&Ay(t,Xs),jr(-1)}}(e,t);const a=e.components;null!==a&&ev(t,a,0);const u=e.viewQuery;if(null!==u&&td(2,u,r),s){const c=e.viewCheckHooks;null!==c&&sa(t,c)}else{const c=e.viewHooks;null!==c&&aa(t,c,2),Jc(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[Pe]&=-73,Dg(t)}finally{Kc()}}}function Yy(e,t){for(let n=Sm(e);null!==n;n=bm(n))for(let r=At;r<n.length;r++)Qy(n[r],t)}function CM(e,t,n){Qy(on(t,e),n)}function Qy(e,t){if(!function K0(e){return 128==(128&e[Pe])}(e))return;const n=e[ce];if(80&e[Pe]&&0===t||1024&e[Pe]||2===t)Xy(n,e,n.template,e[at]);else if(e[_o]>0){Yy(e,1);const i=e[ce].components;null!==i&&ev(e,i,1)}}function ev(e,t,n){for(let r=0;r<t.length;r++)CM(e,t[r],n)}class Jo{get rootNodes(){const t=this._lView,n=t[ce];return Ko(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[at]}set context(t){this._lView[at]=t}get destroyed(){return 256==(256&this._lView[Pe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[et];if(Gt(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(pl(t,r),pa(n,r))}this._attachedToViewContainer=!1}Am(this._lView[ce],this._lView)}onDestroy(t){!function Tg(e,t){if(256==(256&e[Pe]))throw new ie(911,!1);null===e[wr]&&(e[wr]=[]),e[wr].push(t)}(this._lView,t)}markForCheck(){Wo(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pe]&=-129}reattach(){this._lView[Pe]|=128}detectChanges(){Ga(this._lView[ce],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wT(e,t){ko(e,t,t[xe],2,null,null)}(this._lView[ce],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=t}}class EM extends Jo{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Ga(t[ce],t,t[at],!1)}checkNoChanges(){}get context(){return null}}class tv extends Ha{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=je(t);return new qo(n,this.ngModule)}}function nv(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class bM{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ks(r);const i=this.injector.get(t,Gl,r);return i!==Gl||n===Gl?i:this.parentInjector.get(t,n,r)}}class qo extends gy{get inputs(){return nv(this.componentDef.inputs)}get outputs(){return nv(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function _0(e){return e.map(v0).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof Hn?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new bM(t,o):t,a=s.get(yy,null);if(null===a)throw new ie(407,!1);const p={rendererFactory:a,sanitizer:s.get(AA,null),effectManager:s.get(Zy,null)},w=a.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",H=r?function GA(e,t,n,r){const o=r.get(wy,!1)||n===tn.ShadowDom,s=e.selectRootElement(t,o);return function zA(e){Vy(e)}(s),s}(w,r,this.componentDef.encapsulation,s):ba(w,P,function SM(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(P)),Z=this.componentDef.signals?4608:this.componentDef.onPush?576:528,ne=Xl(0,null,null,1,0,null,null,null,null,null,null),X=Ba(null,ne,null,Z,null,null,p,w,s,null,null);let ae,Ce;zc(X);try{const Te=this.componentDef;let Ct,gc=null;Te.findHostDirectiveDefs?(Ct=[],gc=new Map,Te.findHostDirectiveDefs(Te,Ct,gc),Ct.push(Te)):Ct=[Te];const yU=function IM(e,t){const n=e[ce],r=Ve;return e[r]=t,ki(n,r,2,"#host",null)}(X,H),vU=function TM(e,t,n,r,i,o,s){const a=i[ce];!function AM(e,t,n,r){for(const i of e)t.mergedAttrs=vo(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Wa(t,t.mergedAttrs,!0),null!==n&&Um(r,n,t))}(r,e,t,s);let u=null;null!==t&&(u=fy(t,i[hi]));const c=o.rendererFactory.createRenderer(t,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const w=Ba(i,Ly(n),null,p,i[e.index],e,o,c,null,null,u);return a.firstCreatePass&&Ql(a,e,r.length-1),$a(i,w),i[e.index]=w}(yU,H,Te,Ct,X,p,w);Ce=Sg(ne,Ve),H&&function RM(e,t,n,r){if(r)Pc(e,n,["ng-version",MA.full]);else{const{attrs:i,classes:o}=function w0(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!_n(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Pc(e,n,i),o&&o.length>0&&Hm(e,n,o.join(" "))}}(w,Te,H,r),void 0!==n&&function PM(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(Ce,this.ngContentSelectors,n),ae=function MM(e,t,n,r,i,o){const s=St(),a=i[ce],u=zt(s,i);jy(a,i,s,n,null,r);for(let p=0;p<n.length;p++)Mt(Br(i,a,s.directiveStart+p,s),i);By(a,i,s),u&&Mt(u,i);const c=Br(i,a,s.directiveStart+s.componentOffset,s);if(e[at]=i[at]=c,null!==o)for(const p of o)p(c,t);return Jl(a,s,e),c}(vU,Te,Ct,gc,X,[xM]),rd(ne,X,null)}finally{Kc()}return new DM(this.componentType,ae,xi(Ce,X),X,Ce)}}class DM extends EA{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new EM(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;nd(o[ce],o,i,t,n),this.previousInputValues.set(t,n),Wo(on(this._tNode.index,o))}}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function xM(){const e=St();oa(te()[ce],e)}function Ge(e){let t=function rv(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(Cn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ie(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const s=e;s.inputs=za(e.inputs),s.inputTransforms=za(e.inputTransforms),s.declaredInputs=za(e.declaredInputs),s.outputs=za(e.outputs);const a=i.hostBindings;a&&FM(e,a);const u=i.viewQuery,c=i.contentQueries;if(u&&kM(e,u),c&&NM(e,c),js(e.inputs,i.inputs),js(e.declaredInputs,i.declaredInputs),js(e.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),js(s.inputTransforms,i.inputTransforms)),Cn(i)&&i.data.animation){const p=e.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===Ge&&(n=!1)}}t=Object.getPrototypeOf(t)}!function OM(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=vo(i.hostAttrs,n=vo(n,i.hostAttrs))}}(r)}function za(e){return e===xn?{}:e===Ue?[]:e}function kM(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function NM(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,o)=>{t(r,i,o),n(r,i,o)}:t}function FM(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}function Rt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Wi(e,t,n){const r=te();return Rt(r,function _i(){return be.lFrame.bindingIndex++}(),t)&&function un(e,t,n,r,i,o,s,a){const u=zt(t,n);let p,c=t.inputs;!a&&null!=c&&(p=c[r])?(nd(e,n,p,r,i),Hr(t)&&function QA(e,t){const n=on(t,e);16&n[Pe]||(n[Pe]|=64)}(n,t.index)):3&t.type&&(r=function YA(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(u,r,i))}(He(),function tt(){const e=be.lFrame;return Sg(e.tView,e.selectedIndex)}(),r,e,t,r[xe],n,!1),Wi}function ld(e,t,n,r,i){const s=i?"class":"style";nd(e,n,t.inputs[s],s,r)}function ar(e,t,n,r){const i=te(),o=He(),s=Ve+e,a=i[xe],u=o.firstCreatePass?function hR(e,t,n,r,i,o){const s=t.consts,u=ki(t,e,2,r,Cr(s,i));return function Yl(e,t,n,r){if(Mg()){const i=null===r?null:{"":-1},o=function oM(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(ng(t,s.selectors,!1))if(r||(r=[]),Cn(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Ql(e,t,a.length)}else r.unshift(s),Ql(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&jy(e,t,n,s,i,a),i&&function sM(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new ie(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=vo(n.mergedAttrs,n.attrs)}(t,n,u,Cr(s,o)),null!==u.attrs&&Wa(u,u.attrs,!1),null!==u.mergedAttrs&&Wa(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,i,t,n,r):o.data[s],c=Ev(o,i,u,a,t,e);i[s]=c;const p=Qs(u);return Ln(u,!0),Um(a,c,u),32!=(32&u.flags)&&ia()&&Ia(o,i,c,u),0===function X0(){return be.lFrame.elementDepthCount}()&&Mt(c,i),function Y0(){be.lFrame.elementDepthCount++}(),p&&(function ql(e,t,n){Mg()&&(function rM(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;Hr(n)&&function lM(e,t,n){const r=zt(t,e),i=Ly(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=$a(e,Ba(e,i,null,s,r,t,null,e[Vr].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||da(n,t),Mt(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const u=e.data[a],c=Br(t,e,a,n);Mt(c,t),null!==s&&dM(0,a-i,c,u,0,s),Cn(u)&&(on(n.index,t)[at]=Br(t,e,a,n))}}(e,t,n,zt(n,t)),64==(64&n.flags)&&By(e,t,n))}(o,i,u),Jl(o,u,i)),null!==r&&function Zl(e,t,n=zt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}(i,u),ar}function ur(){let e=St();jc()?function Bc(){be.lFrame.isParent=!1}():(e=e.parent,Ln(e,!1));const t=e;(function eI(e){return be.skipHydrationRootTNode===e})(t)&&function iI(){be.skipHydrationRootTNode=null}(),function Q0(){be.lFrame.elementDepthCount--}();const n=He();return n.firstCreatePass&&(oa(n,e),kc(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function CI(e){return 0!=(8&e.flags)}(t)&&ld(n,t,te(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function EI(e){return 0!=(16&e.flags)}(t)&&ld(n,t,te(),t.stylesWithoutHost,!1),ur}function Kr(e,t,n,r){return ar(e,t,n,r),ur(),Kr}let Ev=(e,t,n,r,i,o)=>(Er(!0),ba(r,i,function Ug(){return be.lFrame.currentNamespace}()));function es(e){return!!e&&"function"==typeof e.then}function Dv(e){return!!e&&"function"==typeof e.subscribe}function qt(e,t,n,r){const i=te(),o=He(),s=St();return function Tv(e,t,n,r,i,o,s){const a=Qs(r),c=e.firstCreatePass&&function Ky(e){return e.cleanup||(e.cleanup=[])}(e),p=t[at],w=function zy(e){return e[fi]||(e[fi]=[])}(t);let P=!0;if(3&r.type||s){const K=zt(r,t),Z=s?s(K):K,ne=w.length,X=s?Ce=>s(Ze(Ce[r.index])):r.index;let ae=null;if(!s&&a&&(ae=function wR(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[fi],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==ae)(ae.__ngLastListenerFn__||ae).__ngNextListenerFn__=o,ae.__ngLastListenerFn__=o,P=!1;else{o=Mv(r,t,p,o,!1);const Ce=n.listen(Z,i,o);w.push(o,Ce),c&&c.push(i,X,ne,ne+1)}}else o=Mv(r,t,p,o,!1);const H=r.outputs;let G;if(P&&null!==H&&(G=H[i])){const K=G.length;if(K)for(let Z=0;Z<K;Z+=2){const Te=t[G[Z]][G[Z+1]].subscribe(o),Ct=w.length;w.push(o,Te),c&&c.push(i,r.index,Ct,-(Ct+1))}}}(o,i,i[xe],s,e,t,r),qt}function Av(e,t,n,r){try{return Fn(6,t,n),!1!==n(r)}catch(i){return qy(e,i),!1}finally{Fn(7,t,n)}}function Mv(e,t,n,r,i){return function o(s){if(s===Function)return r;Wo(e.componentOffset>-1?on(e.index,t):t);let u=Av(t,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=Av(t,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function Ya(e,t){return e<<17|t<<2}function br(e){return e>>17&32767}function pd(e){return 2|e}function Jr(e){return(131068&e)>>2}function gd(e,t){return-131069&e|t<<2}function md(e){return 1|e}function Hv(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?br(o):Jr(o),u=!1;for(;0!==a&&(!1===u||s);){const p=e[a+1];RR(e[a],t)&&(u=!0,e[a+1]=r?md(p):pd(p)),a=r?br(p):Jr(p)}u&&(e[n+1]=r?pd(o):md(o))}function RR(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Ii(e,t)>=0}function Qa(e,t){return function Sn(e,t,n,r){const i=te(),o=He(),s=function tr(e){const t=be.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);o.firstUpdatePass&&function Jv(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[Ft()],s=function Kv(e,t){return t>=e.expandoStartIndex}(e,n);(function Yv(e,t){return 0!=(e.flags&(t?8:16))})(o,r)&&null===t&&!s&&(t=!1),t=function HR(e,t,n,r){const i=function Wc(e){const t=be.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=ts(n=yd(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=yd(i,e,t,n,r),null===o){let u=function UR(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Jr(r))return e[br(r)]}(e,t,r);void 0!==u&&Array.isArray(u)&&(u=yd(null,e,t,u[1],r),u=ts(u,t.attrs,r),function jR(e,t,n,r){e[br(n?t.classBindings:t.styleBindings)]=r}(e,t,r,u))}else o=function BR(e,t,n){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=ts(r,e[o].hostAttrs,n);return ts(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function AR(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=br(s),u=Jr(s);e[r]=n;let p,c=!1;if(Array.isArray(n)?(p=n[1],(null===p||Ii(n,p)>0)&&(c=!0)):p=n,i)if(0!==u){const P=br(e[a+1]);e[r+1]=Ya(P,a),0!==P&&(e[P+1]=gd(e[P+1],r)),e[a+1]=function IR(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=Ya(a,0),0!==a&&(e[a+1]=gd(e[a+1],r)),a=r;else e[r+1]=Ya(u,0),0===a?a=r:e[u+1]=gd(e[u+1],r),u=r;c&&(e[r+1]=pd(e[r+1])),Hv(e,p,r,!0),Hv(e,p,r,!1),function MR(e,t,n,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Ii(o,t)>=0&&(n[r+1]=md(n[r+1]))}(t,p,e,r,o),s=Ya(a,u),o?t.classBindings=s:t.styleBindings=s}(i,o,t,n,s,r)}}(o,e,s,r),t!==Oe&&Rt(i,s,t)&&function Zv(e,t,n,r,i,o,s,a){if(!(3&t.type))return;const u=e.data,c=u[a+1],p=function TR(e){return 1==(1&e)}(c)?Xv(u,t,n,i,Jr(c),s):void 0;eu(p)||(eu(o)||function DR(e){return 2==(2&e)}(c)&&(o=Xv(u,null,n,i,a,s)),function RT(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Kt.DashCase;null==i?e.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Kt.Important),e.setStyle(n,r,i,o))}}(r,s,function ra(e,t){return Ze(t[e])}(Ft(),n),i,o))}(o,o.data[Ft()],i,i[xe],e,i[s+1]=function zR(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=mt(function Sr(e){return e instanceof Wm?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,n),r,s)}(e,t,null,!0),Qa}function yd(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=ts(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function ts(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),sn(e,s,!!n||t[++o]))}return void 0===e?null:e}function Xv(e,t,n,r,i,o){const s=null===t;let a;for(;i>0;){const u=e[i],c=Array.isArray(u),p=c?u[1]:u,w=null===p;let P=n[i+1];P===Oe&&(P=w?Ue:void 0);let H=w?nl(P,r):p===r?P:void 0;if(c&&!eu(H)&&(H=nl(u,r)),eu(H)&&(a=H,s))return a;const G=e[i+1];i=s?br(G):Jr(G)}if(null!==t){let u=o?t.residualClasses:t.residualStyles;null!=u&&(a=nl(u,r))}return a}function eu(e){return void 0!==e}function qr(e,t=""){const n=te(),r=He(),i=e+Ve,o=r.firstCreatePass?ki(r,i,1,t,null):r.data[i],s=Qv(r,n,o,t,e);n[i]=s,ia()&&Ia(r,n,s,o),Ln(o,!1)}let Qv=(e,t,n,r,i)=>(Er(!0),function Sa(e,t){return e.createText(t)}(t[xe],r));const Ki="en-US";let E_=Ki;function Cd(e,t,n,r,i){if(e=Ie(e),Array.isArray(e))for(let o=0;o<e.length;o++)Cd(e[o],t,n,r,i);else{const o=He(),s=te();let a=Wr(e)?e:Ie(e.provide),u=ay(e);const c=St(),p=1048575&c.providerIndexes,w=c.directiveStart,P=c.providerIndexes>>20;if(Wr(e)||!e.multi){const H=new Do(u,i,oe),G=Sd(a,t,i?p:p+P,w);-1===G?(Qc(da(c,s),o,a),Ed(o,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(H),s.push(H)):(n[G]=H,s[G]=H)}else{const H=Sd(a,t,p+P,w),G=Sd(a,t,p,p+P),Z=G>=0&&n[G];if(i&&!Z||!i&&!(H>=0&&n[H])){Qc(da(c,s),o,a);const ne=function fx(e,t,n,r,i){const o=new Do(e,n,oe);return o.multi=[],o.index=t,o.componentProviders=0,K_(o,i,r&&!n),o}(i?dx:lx,n.length,i,r,u);!i&&Z&&(n[G].providerFactory=ne),Ed(o,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(ne),s.push(ne)}else Ed(o,e,H>-1?H:G,K_(n[i?G:H],u,!i&&r));!i&&r&&Z&&n[G].componentProviders++}}}function Ed(e,t,n,r){const i=Wr(t),o=function sA(e){return!!e.useClass}(t);if(i||o){const u=(o?Ie(t.useClass):t).prototype.ngOnDestroy;if(u){const c=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const p=c.indexOf(n);-1===p?c.push(n,[r,u]):c[p+1].push(r,u)}else c.push(n,u)}}}function K_(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Sd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function lx(e,t,n,r){return bd(this.multi,[])}function dx(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Br(n,n[ce],this.providerFactory.index,r);o=a.slice(0,s),bd(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],bd(i,o);return o}function bd(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Xe(e,t=[]){return n=>{n.providersResolver=(r,i)=>function cx(e,t,n){const r=He();if(r.firstCreatePass){const i=Cn(e);Cd(n,r.data,r.blueprint,i,!0),Cd(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class Ji{}class J_{}class Dd extends Ji{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tv(this);const i=nn(t);this._bootstrapComponents=or(i.bootstrap),this._r3Injector=ky(t,n,[{provide:Ji,useValue:this},{provide:Ha,useValue:this.componentFactoryResolver},...r],mt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Id extends J_{constructor(t){super(),this.moduleType=t}create(t){return new Dd(this.moduleType,t,[])}}class q_ extends Ji{constructor(t){super(),this.componentFactoryResolver=new tv(this),this.instance=null;const n=new xl([...t.providers,{provide:Ji,useValue:this},{provide:Ha,useValue:this.componentFactoryResolver}],t.parent||Oa(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Td(e,t,n=null){return new q_({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let gx=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=ry(0,n.type),i=r.length>0?Td([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=ye({token:e,providedIn:"environment",factory:()=>new e(ge(Hn))}),e})();function Z_(e){e.getStandaloneInjector=t=>t.get(gx).getOrCreateStandaloneInjector(e)}function Md(e){return t=>{setTimeout(e,void 0,t)}}const it=class jx extends se{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const u=t;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Md(o),i&&(i=Md(i)),s&&(s=Md(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof U&&t.add(a),a}};let Dn=(()=>{class e{}return e.__NG_ELEMENT_ID__=Yx,e})();function Yx(){return function hw(e,t){let n;const r=t[e.index];return Gt(r)?n=r:(n=function Wy(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}(r,t,null,e),t[e.index]=n,$a(t,n)),pw(n,t,e,r),new dw(n,e,t)}(St(),te())}const Qx=Dn,dw=class extends Qx{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return xi(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){const t=Yc(this._hostTNode,this._hostLView);if(Wg(t)){const n=ca(t,this._hostLView),r=ua(t);return new Ci(n[ce].data[r+8],n)}return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=fw(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-At}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=t.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(t,n,r,i,o){const s=t&&!function To(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const K=n||{};a=K.index,r=K.injector,i=K.projectableNodes,o=K.environmentInjector||K.ngModuleRef}const u=s?t:new qo(je(t)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const Z=(s?c:this.parentInjector).get(Hn,null);Z&&(o=Z)}je(u.componentType??{});const H=u.create(c,i,null,o);return this.insertImpl(H.hostView,a,false),H}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const i=t._lView,o=i[ce];if(function J0(e){return Gt(e[et])}(i)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const c=i[et],p=new dw(c,c[Tt],c[et]);p.detach(p.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;if(function ET(e,t,n,r){const i=At+r,o=n.length;r>0&&(n[i-1][wn]=t),r<o-At?(t[wn]=n[i],nm(n,At+r,t)):(n.push(t),t[wn]=null),t[et]=n;const s=t[Co];null!==s&&n!==s&&function ST(e,t){const n=e[mi];t[ut]!==t[et][et][ut]&&(e[cg]=!0),null===n?e[mi]=[t]:n.push(t)}(s,t);const a=t[On];null!==a&&a.insertView(e),t[Pe]|=128}(o,i,a,s),!r){const u=vl(s,a),c=i[xe],p=Da(c,a[kn]);null!==p&&function _T(e,t,n,r,i,o){r[yt]=i,r[Tt]=t,ko(e,r,n,1,i,o)}(o,a[Tt],c,i,p,u)}return t.attachToViewContainerRef(),nm(xd(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=fw(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=pl(this._lContainer,n);r&&(pa(xd(this._lContainer),n),Am(r[ce],r))}detach(t){const n=this._adjustIndex(t,-1),r=pl(this._lContainer,n);return r&&null!=pa(xd(this._lContainer),n)?new Jo(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function fw(e){return e[8]}function xd(e){return e[8]||(e[8]=[])}let pw=function gw(e,t,n,r){if(e[kn])return;let i;i=8&n.type?Ze(r):function e1(e,t){const n=e[xe],r=n.createComment(""),i=zt(t,e);return $r(n,Da(n,i),r,function TT(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[kn]=i};const au=new de("Application Initializer");let $d=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=le(au,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(es(o))n.push(o);else if(Dv(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Uw=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const lr=new de("LocaleId",{providedIn:"root",factory:()=>le(lr,_e.Optional|_e.SkipSelf)||function P1(){return typeof $localize<"u"&&$localize.locale||Ki}()});let uu=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pe(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class O1{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let jw=(()=>{class e{compileModuleSync(n){return new Id(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=or(nn(n).declarations).reduce((s,a)=>{const u=je(a);return u&&s.push(new qo(u)),s},[]);return new O1(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ww(...e){}class Ye{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function F1(){let e=Je.requestAnimationFrame,t=Je.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function H1(e){const t=()=>{!function V1(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Je,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Gd(e),e.isCheckStableRunning=!0,Wd(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Gd(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Gw(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),zw(e)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Gw(e),n.invoke(i,o,s,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),zw(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Gd(e),Wd(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ye.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(Ye.isInAngularZone())throw new ie(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,L1,Ww,Ww);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const L1={};function Wd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Gd(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Gw(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function zw(e){e._nesting--,Wd(e)}class U1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Kw=new de("",{providedIn:"root",factory:Jw});function Jw(){const e=le(Ye);let t=!0;return wc(new Y(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Y(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{Ye.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{Ye.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Hp()))}const qw=new de(""),cu=new de("");let Jd,zd=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Jd||(function j1(e){Jd=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ye.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(ge(Ye),ge(Kd),ge(cu))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})(),Kd=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Jd?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Dr=null;const Zw=new de("AllowMultipleToken"),qd=new de("PlatformDestroyListeners"),Zd=new de("appBootstrapListener");class Yw{constructor(t,n){this.name=t,this.token=n}}function eC(e,t,n=[]){const r=`Platform: ${t}`,i=new de(r);return(o=[])=>{let s=Xd();if(!s||s.injector.get(Zw,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function W1(e){if(Dr&&!Dr.get(Zw,!1))throw new ie(400,!1);(function Xw(){!function F0(e){gg=e}(()=>{throw new ie(600,!1)})})(),Dr=e;const t=e.get(nC);(function Qw(e){e.get(uy,null)?.forEach(n=>n())})(e)}(function tC(e=[],t){return En.create({name:t,providers:[{provide:Rl,useValue:"platform"},{provide:qd,useValue:new Set([()=>Dr=null])},...e]})}(a,r))}return function z1(e){const t=Xd();if(!t)throw new ie(401,!1);return t}()}}function Xd(){return Dr?.get(nC)??null}let nC=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function K1(e="zone.js",t){return"noop"===e?new U1:"zone.js"===e?new Ye(t):e}(r?.ngZone,function rC(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function px(e,t,n){return new Dd(e,t,n)}(n.moduleType,this.injector,function uC(e){return[{provide:Ye,useFactory:e},{provide:Ho,multi:!0,useFactory:()=>{const t=le(q1,{optional:!0});return()=>t.initialize()}},{provide:aC,useFactory:J1},{provide:Kw,useFactory:Jw}]}(()=>i)),s=o.injector.get(Gr,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{lu(this._modules,o),a.unsubscribe()})}),function iC(e,t,n){try{const r=n();return es(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const a=o.injector.get($d);return a.runInitializers(),a.donePromise.then(()=>(function S_(e){dn(e,"Expected localeId to be defined"),"string"==typeof e&&(E_=e.toLowerCase().replace(/_/g,"-"))}(o.injector.get(lr,Ki)||Ki),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=oC({},r);return function B1(e,t,n){const r=new Id(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Xr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new ie(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(qd,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(ge(En))},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function oC(e,t){return Array.isArray(t)?t.reduce(oC,e):{...e,...t}}let Xr=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=le(aC),this.zoneIsStable=le(Kw),this.componentTypes=[],this.components=[],this.isStable=le(uu).hasPendingTasks.pipe(kt(n=>n?ve(!1):this.zoneIsStable),function WD(e,t=W){return e=e??GD,me((n,r)=>{let i,o=!0;n.subscribe(Fe(r,s=>{const a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}(),Hp()),this._injector=le(Hn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof gy;if(!this._injector.get($d).done)throw!i&&function di(e){const t=je(e)||It(e)||Wt(e);return null!==t&&t.standalone}(n),new ie(405,!1);let s;s=i?n:this._injector.get(Ha).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function $1(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Ji),c=s.create(En.NULL,[],r||s.selector,a),p=c.location.nativeElement,w=c.injector.get(qw,null);return w?.registerApplication(p),c.onDestroy(()=>{this.detachView(c.hostView),lu(this.components,c),w?.unregisterApplication(p)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new ie(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;lu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Zd,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>lu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ie(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function lu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const aC=new de("",{providedIn:"root",factory:()=>le(Gr).handleError.bind(void 0)});function J1(){const e=le(Ye),t=le(Gr);return n=>e.runOutsideAngular(()=>t.handleError(n))}let q1=(()=>{class e{constructor(){this.zone=le(Ye),this.applicationRef=le(Xr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();let du=(()=>{class e{}return e.__NG_ELEMENT_ID__=Y1,e})();function Y1(e){return function Q1(e,t,n){if(Hr(e)&&!n){const r=on(e.index,t);return new Jo(r,r)}return 47&e.type?new Jo(t[ut],t):null}(St(),te(),16==(16&e))}const fO=eC(null,"core",[]);let hO=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(ge(Xr))},e.\u0275mod=fn({type:e}),e.\u0275inj=en({}),e})(),sf=null;function Ir(){return sf}class DO{}const cn=new de("DocumentToken");let af=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:function(){return le(TO)},providedIn:"platform"}),e})();const IO=new de("Location Initialized");let TO=(()=>{class e extends af{constructor(){super(),this._doc=le(cn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ir().getBaseHref(this._doc)}onPopState(n){const r=Ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:function(){return new e},providedIn:"platform"}),e})();function uf(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function bC(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function dr(e){return e&&"?"!==e[0]?"?"+e:e}let Qr=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:function(){return le(IC)},providedIn:"root"}),e})();const DC=new de("appBaseHref");let IC=(()=>{class e extends Qr{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??le(cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return uf(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+dr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+dr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+dr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(ge(af),ge(DC,8))},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),AO=(()=>{class e extends Qr{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=uf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+dr(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+dr(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(ge(af),ge(DC,8))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})(),cf=(()=>{class e{constructor(n){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function PO(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(bC(TC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+dr(r))}normalize(n){return e.stripTrailingSlash(function RO(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,TC(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+dr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+dr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=dr,e.joinWithSlash=uf,e.stripTrailingSlash=bC,e.\u0275fac=function(n){return new(n||e)(ge(Qr))},e.\u0275prov=ye({token:e,factory:function(){return function MO(){return new cf(ge(Qr))}()},providedIn:"root"}),e})();function TC(e){return e.replace(/\/index.html$/,"")}function FC(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}let Wk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=fn({type:e}),e.\u0275inj=en({}),e})();const $C="browser";function WC(e){return e===$C}function GC(e){return"server"===e}let Jk=(()=>{class e{}return e.\u0275prov=ye({token:e,providedIn:"root",factory:()=>new qk(ge(cn),window)}),e})();class qk{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function Zk(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=zC(this.window.history)||zC(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function zC(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class KC{}class _N extends DO{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class If extends _N{static makeCurrent(){!function bO(e){sf||(sf=e)}(new If)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function wN(){return ps=ps||document.querySelector("base"),ps?ps.getAttribute("href"):null}();return null==n?null:function CN(e){Tu=Tu||document.createElement("a"),Tu.setAttribute("href",e);const t=Tu.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ps=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return FC(document.cookie,t)}}let Tu,ps=null,SN=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();const Tf=new de("EventManagerPlugins");let YC=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(n,r),r}}return e.\u0275fac=function(n){return new(n||e)(ge(Tf),ge(Ye))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();class QC{constructor(t){this._doc=t}}const Af="ng-app-id";let eE=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=GC(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Af}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Af),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Af,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(ge(cn),ge(ka),ge(cy,8),ge(rr))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();const Mf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rf=/%COMP%/g,TN=new de("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function nE(e,t){return t.map(n=>n.replace(Rf,e))}let rE=(()=>{class e{constructor(n,r,i,o,s,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=GC(a),this.defaultRenderer=new Pf(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===tn.ShadowDom&&(r={...r,encapsulation:tn.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof oE?i.applyToHost(n):i instanceof xf&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,p=this.removeStylesOnCompDestory,w=this.platformIsServer;switch(r.encapsulation){case tn.Emulated:o=new oE(u,c,r,this.appId,p,s,a,w);break;case tn.ShadowDom:return new PN(u,c,n,r,s,a,this.nonce,w);default:o=new xf(u,c,r,p,s,a,w)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return e.\u0275fac=function(n){return new(n||e)(ge(YC),ge(eE),ge(ka),ge(TN),ge(cn),ge(rr),ge(Ye),ge(cy))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();class Pf{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Mf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(iE(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(iE(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new ie(5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=Mf[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Mf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Kt.DashCase|Kt.Important)?t.style.setProperty(n,r,i&Kt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Kt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=Ir().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function iE(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class PN extends Pf{constructor(t,n,r,i,o,s,a,u){super(t,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=nE(i.id,i.styles);for(const p of c){const w=document.createElement("style");a&&w.setAttribute("nonce",a),w.textContent=p,this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class xf extends Pf{constructor(t,n,r,i,o,s,a,u){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=u?nE(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class oE extends xf{constructor(t,n,r,i,o,s,a,u){const c=i+"-"+r.id;super(t,n,r,o,s,a,u,c),this.contentAttr=function AN(e){return"_ngcontent-%COMP%".replace(Rf,e)}(c),this.hostAttr=function MN(e){return"_nghost-%COMP%".replace(Rf,e)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let xN=(()=>{class e extends QC{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(ge(cn))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();const sE=["alt","control","meta","shift"],ON={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kN={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let NN=(()=>{class e extends QC{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ir().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),sE.forEach(c=>{const p=r.indexOf(c);p>-1&&(r.splice(p,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=ON[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),sE.forEach(s=>{s!==i&&(0,kN[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(ge(cn))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();const HN=eC(fO,"browser",[{provide:rr,useValue:$C},{provide:uy,useValue:function FN(){If.makeCurrent()},multi:!0},{provide:cn,useFactory:function VN(){return function NT(e){Cl=e}(document),document},deps:[]}]),UN=new de(""),cE=[{provide:cu,useClass:class EN{addToWindow(t){Je.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new ie(5103,!1);return o},Je.getAllAngularTestabilities=()=>t.getAllTestabilities(),Je.getAllAngularRootElements=()=>t.getAllRootElements(),Je.frameworkStabilizers||(Je.frameworkStabilizers=[]),Je.frameworkStabilizers.push(r=>{const i=Je.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Ir().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:qw,useClass:zd,deps:[Ye,Kd,cu]},{provide:zd,useClass:zd,deps:[Ye,Kd,cu]}],lE=[{provide:Rl,useValue:"root"},{provide:Gr,useFactory:function LN(){return new Gr},deps:[]},{provide:Tf,useClass:xN,multi:!0,deps:[cn,Ye,rr]},{provide:Tf,useClass:NN,multi:!0,deps:[cn]},rE,eE,YC,{provide:yy,useExisting:rE},{provide:KC,useClass:SN,deps:[]},[]];let jN=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:ka,useValue:n.appId}]}}}return e.\u0275fac=function(n){return new(n||e)(ge(UN,12))},e.\u0275mod=fn({type:e}),e.\u0275inj=en({providers:[...lE,...cE],imports:[Wk,hO]}),e})(),dE=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(ge(cn))},e.\u0275prov=ye({token:e,factory:function(n){let r=null;return r=n?new n:function $N(){return new dE(ge(cn))}(),r},providedIn:"root"}),e})();typeof window<"u"&&window;const{isArray:qN}=Array,{getPrototypeOf:ZN,prototype:XN,keys:YN}=Object;function gE(e){if(1===e.length){const t=e[0];if(qN(t))return{args:t,keys:null};if(function QN(e){return e&&"object"==typeof e&&ZN(e)===XN}(t)){const n=YN(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}const{isArray:eF}=Array;function kf(e){return Se(t=>function tF(e,t){return eF(t)?e(...t):e(t)}(e,t))}function mE(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Nf(...e){const t=po(e),n=Np(e),{args:r,keys:i}=gE(e);if(0===r.length)return gt([],t);const o=new Y(function nF(e,t,n=W){return r=>{yE(t,()=>{const{length:i}=e,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)yE(t,()=>{const c=gt(e[u],t);let p=!1;c.subscribe(Fe(r,w=>{o[u]=w,p||(p=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>mE(i,s):W));return n?o.pipe(kf(n)):o}function yE(e,t,n){e?Zn(n,e,t):t()}const Au=M(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function gs(...e){return function rF(){return ci(1)}()(gt(e,po(e)))}function Mu(e){return new Y(t=>{Ot(e()).subscribe(t)})}function Yi(e,t){const n=v(e)?e:()=>e,r=i=>i.error(n());return new Y(t?i=>t.schedule(r,0,i):r)}function Ff(){return me((e,t)=>{let n=null;e._refCount++;const r=Fe(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class Lf extends Y{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ae(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new U;const n=this.getSubject();t.add(this.source.subscribe(Fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=U.EMPTY)}return t}refCount(){return Ff()(this)}}function Xt(e){return e<=0?()=>Rn:me((t,n)=>{let r=0;t.subscribe(Fe(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Ht(e,t){return me((n,r)=>{let i=0;n.subscribe(Fe(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Ru(e){return me((t,n)=>{let r=!1;t.subscribe(Fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function vE(e=oF){return me((t,n)=>{let r=!1;t.subscribe(Fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function oF(){return new Au}function ei(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ht((i,o)=>e(i,o,r)):W,Xt(1),n?Ru(t):vE(()=>new Au))}function Qi(e,t){return v(t)?pt(e,t,1):pt(e,1)}function Pt(e,t,n){const r=v(e)||t||n?{next:e,error:t,complete:n}:e;return r?me((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Fe(o,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),o.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):W}function ti(e){return me((t,n)=>{let o,r=null,i=!1;r=t.subscribe(Fe(n,void 0,void 0,s=>{o=Ot(e(s,ti(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Vf(e){return e<=0?()=>Rn:me((t,n)=>{let r=[];t.subscribe(Fe(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function _E(e){return Se(()=>e)}function ms(e){return me((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const ke="primary",ys=Symbol("RouteTitle");class cF{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function eo(e){return new cF(e)}function lF(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Gn(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!wE(e[i],t[i]))return!1;return!0}function wE(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function CE(e){return e.length>0?e[e.length-1]:null}function Ar(e){return function JN(e){return!!e&&(e instanceof Y||v(e.lift)&&v(e.subscribe))}(e)?e:es(e)?gt(Promise.resolve(e)):ve(e)}const fF={exact:function bE(e,t,n){if(!ni(e.segments,t.segments)||!Pu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!bE(e.children[r],t.children[r],n))return!1;return!0},subset:DE},EE={exact:function hF(e,t){return Gn(e,t)},subset:function pF(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>wE(e[n],t[n]))},ignored:()=>!0};function SE(e,t,n){return fF[n.paths](e.root,t.root,n.matrixParams)&&EE[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function DE(e,t,n){return IE(e,t,t.segments,n)}function IE(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!ni(i,n)||t.hasChildren()||!Pu(i,n,r))}if(e.segments.length===n.length){if(!ni(e.segments,n)||!Pu(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!DE(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(ni(e.segments,i)&&Pu(e.segments,i,r)&&e.children[ke])&&IE(e.children[ke],t,o,r)}}function Pu(e,t,n){return t.every((r,i)=>EE[n](e[i].parameters,r.parameters))}class to{constructor(t=new ze([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eo(this.queryParams)),this._queryParamMap}toString(){return yF.serialize(this)}}class ze{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xu(this)}}class vs{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=eo(this.parameters)),this._parameterMap}toString(){return ME(this)}}function ni(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let _s=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:function(){return new Hf},providedIn:"root"}),e})();class Hf{parse(t){const n=new AF(t);return new to(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${ws(t.root,!0)}`,r=function wF(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Ou(n)}=${Ou(i)}`).join("&"):`${Ou(n)}=${Ou(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function vF(e){return encodeURI(e)}(t.fragment)}`:""}`}}const yF=new Hf;function xu(e){return e.segments.map(t=>ME(t)).join("/")}function ws(e,t){if(!e.hasChildren())return xu(e);if(t){const n=e.children[ke]?ws(e.children[ke],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==ke&&r.push(`${i}:${ws(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function mF(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===ke&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==ke&&(n=n.concat(t(i,r)))}),n}(e,(r,i)=>i===ke?[ws(e.children[ke],!1)]:[`${i}:${ws(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ke]?`${xu(e)}/${n[0]}`:`${xu(e)}/(${n.join("//")})`}}function TE(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ou(e){return TE(e).replace(/%3B/gi,";")}function Uf(e){return TE(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ku(e){return decodeURIComponent(e)}function AE(e){return ku(e.replace(/\+/g,"%20"))}function ME(e){return`${Uf(e.path)}${function _F(e){return Object.keys(e).map(t=>`;${Uf(t)}=${Uf(e[t])}`).join("")}(e.parameters)}`}const CF=/^[^\/()?;#]+/;function jf(e){const t=e.match(CF);return t?t[0]:""}const EF=/^[^\/()?;=#]+/,bF=/^[^=?&#]+/,IF=/^[^&#]+/;class AF{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ke]=new ze(t,n)),r}parseSegment(){const t=jf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(t),new vs(ku(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=function SF(e){const t=e.match(EF);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=jf(this.remaining);i&&(r=i,this.capture(r))}t[ku(n)]=ku(r)}parseQueryParam(t){const n=function DF(e){const t=e.match(bF);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function TF(e){const t=e.match(IF);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=AE(n),o=AE(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new ie(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ke);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[ke]:new ze([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new ie(4011,!1)}}function RE(e){return e.segments.length>0?new ze([],{[ke]:e}):e}function PE(e){const t={};for(const r of Object.keys(e.children)){const o=PE(e.children[r]);if(r===ke&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function MF(e){if(1===e.numberOfChildren&&e.children[ke]){const t=e.children[ke];return new ze(e.segments.concat(t.segments),t.children)}return e}(new ze(e.segments,t))}function ri(e){return e instanceof to}function xE(e){let t;const i=RE(function n(o){const s={};for(const u of o.children){const c=n(u);s[u.outlet]=c}const a=new ze(o.url,s);return o===e&&(t=a),a}(e.root));return t??i}function OE(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(0===t.length)return Bf(i,i,i,n,r);const o=function PF(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new NE(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new NE(n,t,r)}(t);if(o.toRoot())return Bf(i,i,new ze([],{}),n,r);const s=function xF(e,t,n){if(e.isAbsolute)return new Fu(t,!0,0);if(!n)return new Fu(t,!1,NaN);if(null===n.parent)return new Fu(n,!0,0);const r=Nu(e.commands[0])?0:1;return function OF(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new Fu(r,!1,i-o)}(n,n.segments.length-1+r,e.numberOfDoubleDots)}(o,i,e),a=s.processChildren?Es(s.segmentGroup,s.index,o.commands):FE(s.segmentGroup,s.index,o.commands);return Bf(i,s.segmentGroup,a,n,r)}function Nu(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Cs(e){return"object"==typeof e&&null!=e&&e.outlets}function Bf(e,t,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`}),s=e===t?n:kE(e,t,n);const a=RE(PE(s));return new to(a,o,i)}function kE(e,t,n){const r={};return Object.entries(e.children).forEach(([i,o])=>{r[i]=o===t?n:kE(o,t,n)}),new ze(e.segments,r)}class NE{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Nu(r[0]))throw new ie(4003,!1);const i=r.find(Cs);if(i&&i!==CE(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fu{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function FE(e,t,n){if(e||(e=new ze([],{})),0===e.segments.length&&e.hasChildren())return Es(e,t,n);const r=function NF(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const s=e.segments[i],a=n[r];if(Cs(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!VE(u,c,s))return o;r+=2}else{if(!VE(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new ze(e.segments.slice(0,r.pathIndex),{});return o.children[ke]=new ze(e.segments.slice(r.pathIndex),e.children),Es(o,0,i)}return r.match&&0===i.length?new ze(e.segments,{}):r.match&&!e.hasChildren()?$f(e,t,n):r.match?Es(e,0,i):$f(e,t,n)}function Es(e,t,n){if(0===n.length)return new ze(e.segments,{});{const r=function kF(e){return Cs(e[0])?e[0].outlets:{[ke]:e}}(n),i={};if(!r[ke]&&e.children[ke]&&1===e.numberOfChildren&&0===e.children[ke].segments.length){const o=Es(e.children[ke],t,n);return new ze(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=FE(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new ze(e.segments,i)}}function $f(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Cs(o)){const u=FF(o.outlets);return new ze(r,u)}if(0===i&&Nu(n[0])){r.push(new vs(e.segments[t].path,LE(n[0]))),i++;continue}const s=Cs(o)?o.outlets[ke]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Nu(a)?(r.push(new vs(s,LE(a))),i+=2):(r.push(new vs(s,{})),i++)}return new ze(r,{})}function FF(e){const t={};return Object.entries(e).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(t[n]=$f(new ze([],{}),0,r))}),t}function LE(e){const t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function VE(e,t,n){return e==n.path&&Gn(t,n.parameters)}const Ss="imperative";class zn{constructor(t,n){this.id=t,this.url=n}}class Wf extends zn{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ii extends zn{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Lu extends zn{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bs extends zn{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class Gf extends zn{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class LF extends zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VF extends zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HF extends zn{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class UF extends zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jF extends zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BF{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $F{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class WF{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GF{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zF{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KF{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HE{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class JF{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ds,this.attachRef=null}}let Ds=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new JF,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class UE{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=zf(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=zf(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Kf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Kf(t,this._root).map(n=>n.value)}}function zf(e,t){if(e===t.value)return t;for(const n of t.children){const r=zf(e,n);if(r)return r}return null}function Kf(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Kf(e,n);if(r.length)return r.unshift(t),r}return[]}class hr{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function no(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class jE extends UE{constructor(t,n){super(t),this.snapshot=n,Jf(this,t)}toString(){return this.snapshot.toString()}}function BE(e,t){const n=function qF(e,t){const s=new Vu([],{},{},"",{},ke,t,null,{});return new WE("",new hr(s,[]))}(0,t),r=new pe([new vs("",{})]),i=new pe({}),o=new pe({}),s=new pe({}),a=new pe(""),u=new ro(r,i,s,a,o,ke,t,n.root);return u.snapshot=n.root,new jE(new hr(u,[]),n)}class ro{constructor(t,n,r,i,o,s,a,u){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Se(c=>c[ys]))??ve(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Se(t=>eo(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Se(t=>eo(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $E(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function ZF(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Vu{get title(){return this.data?.[ys]}constructor(t,n,r,i,o,s,a,u,c){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=eo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class WE extends UE{constructor(t,n){super(n),this.url=t,Jf(this,n)}toString(){return GE(this._root)}}function Jf(e,t){t.value._routerState=e,t.children.forEach(n=>Jf(e,n))}function GE(e){const t=e.children.length>0?` { ${e.children.map(GE).join(", ")} } `:"";return`${e.value}${t}`}function qf(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Gn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Gn(t.params,n.params)||e.paramsSubject.next(n.params),function dF(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Gn(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.urlSubject.next(n.url),Gn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Zf(e,t){const n=Gn(e.params,t.params)&&function gF(e,t){return ni(e,t)&&e.every((n,r)=>Gn(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||Zf(e.parent,t.parent))}let zE=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ke,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=le(Ds),this.location=le(Dn),this.changeDetector=le(du),this.environmentInjector=le(Hn),this.inputBinder=le(Hu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new XF(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=De({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[hn]}),e})();class XF{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===ro?this.route:t===Ds?this.childContexts:this.parent.get(t,n)}}const Hu=new de("");let KE=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=Nf([r.queryParams,r.params,r.data]).pipe(kt(([o,s,a],u)=>(a={...o,...s,...a},0===u?ve(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function SO(e){const t=je(e);if(!t)return null;const n=new qo(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();function Is(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function QF(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Is(e,r,i);return Is(e,r)})}(e,t,n);return new hr(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Is(e,a)),s}}const r=function eL(e){return new ro(new pe(e.url),new pe(e.params),new pe(e.queryParams),new pe(e.fragment),new pe(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>Is(e,o));return new hr(r,i)}}const Xf="ngNavigationCancelingError";function JE(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=ri(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=qE(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function qE(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[Xf]=!0,r.cancellationCode=t,n&&(r.url=n),r}function ZE(e){return XE(e)&&ri(e.url)}function XE(e){return e&&e[Xf]}let YE=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=xc({type:e,selectors:[["ng-component"]],standalone:!0,features:[Z_],decls:1,vars:0,template:function(n,r){1&n&&Kr(0,"router-outlet")},dependencies:[zE],encapsulation:2}),e})();function Yf(e){const t=e.children&&e.children.map(Yf),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ke&&(n.component=YE),n}function Mn(e){return e.outlet||ke}function Ts(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class aL{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),qf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=no(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=no(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=no(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){const i=no(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new KF(o.value.snapshot))}),t.children.length&&this.forwardEvent(new GF(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(qf(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),qf(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=Ts(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class QE{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Uu{constructor(t,n){this.component=t,this.route=n}}function uL(e,t,n){const r=e._root;return As(r,t?t._root:null,n,[r.value])}function io(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function YD(e){return null!==Ws(e)}(e)?t.get(e):e:r}function As(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=no(t);return e.children.forEach(s=>{(function lL(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function dL(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!ni(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ni(e.url,t.url)||!Gn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zf(e,t)||!Gn(e.queryParams,t.queryParams);default:return!Zf(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new QE(r)):(o.data=s.data,o._resolvedData=s._resolvedData),As(e,t,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Uu(a.outlet.component,s))}else s&&Ms(t,a,i),i.canActivateChecks.push(new QE(r)),As(e,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ms(a,n.getContext(s),i)),i}function Ms(e,t,n){const r=no(e),i=e.value;Object.entries(r).forEach(([o,s])=>{Ms(s,i.component?t?t.children.getContext(o):null:t,n)}),n.canDeactivateChecks.push(new Uu(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Rs(e){return"function"==typeof e}function eS(e){return e instanceof Au||"EmptyError"===e?.name}const ju=Symbol("INITIAL_VALUE");function oo(){return kt(e=>Nf(e.map(t=>t.pipe(Xt(1),function iF(...e){const t=po(e);return me((n,r)=>{(t?gs(e,n,t):gs(e,n)).subscribe(r)})}(ju)))).pipe(Se(t=>{for(const n of t)if(!0!==n){if(n===ju)return ju;if(!1===n||n instanceof to)return n}return!0}),Ht(t=>t!==ju),Xt(1)))}function tS(e){return function C(...e){return B(e)}(Pt(t=>{if(ri(t))throw JE(0,t)}),Se(t=>!0===t))}class Bu{constructor(t){this.segmentGroup=t||null}}class nS{constructor(t){this.urlTree=t}}function so(e){return Yi(new Bu(e))}function rS(e){return Yi(new nS(e))}class PL{constructor(t,n){this.urlSerializer=t,this.urlTree=n}noMatchError(t){return new ie(4002,!1)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ve(r);if(i.numberOfChildren>1||!i.children[ke])return Yi(new ie(4e3,!1));i=i.children[ke]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new to(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Object.entries(t).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(t,u,r,i)}),new ze(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}const Qf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xL(e,t,n,r,i){const o=eh(e,t,n);return o.matched?(r=function tL(e,t){return e.providers&&!e._injector&&(e._injector=Td(e.providers,t,`Route: ${e.path}`)),e._injector??t}(t,r),function AL(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?ve(i.map(s=>{const a=io(s,e);return Ar(function yL(e){return e&&Rs(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))})).pipe(oo(),tS()):ve(!0)}(r,t,n).pipe(Se(s=>!0===s?o:{...Qf}))):ve(o)}function eh(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...Qf}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||lF)(n,e,t);if(!i)return{...Qf};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function iS(e,t,n,r){return n.length>0&&function NL(e,t,n){return n.some(r=>$u(e,t,r)&&Mn(r)!==ke)}(e,n,r)?{segmentGroup:new ze(t,kL(r,new ze(n,e.children))),slicedSegments:[]}:0===n.length&&function FL(e,t,n){return n.some(r=>$u(e,t,r))}(e,n,r)?{segmentGroup:new ze(e.segments,OL(e,0,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ze(e.segments,e.children),slicedSegments:n}}function OL(e,t,n,r,i){const o={};for(const s of r)if($u(e,n,s)&&!i[Mn(s)]){const a=new ze([],{});o[Mn(s)]=a}return{...i,...o}}function kL(e,t){const n={};n[ke]=t;for(const r of e)if(""===r.path&&Mn(r)!==ke){const i=new ze([],{});n[Mn(r)]=i}return n}function $u(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}class UL{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new PL(this.urlSerializer,this.urlTree)}noMatchError(t){return new ie(4002,!1)}recognize(){const t=iS(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,ke).pipe(ti(n=>{if(n instanceof nS)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Bu?this.noMatchError(n):n}),Se(n=>{const r=new Vu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ke,this.rootComponentType,null,{}),i=new hr(r,n),o=new WE("",i),s=function RF(e,t,n=null,r=null){return OE(xE(e),t,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,ke).pipe(ti(r=>{throw r instanceof Bu?this.noMatchError(r):r}))}inheritParamsAndData(t){const n=t.value,r=$E(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0)}processChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return gt(i).pipe(Qi(o=>{const s=r.children[o],a=function oL(e,t){const n=e.filter(r=>Mn(r)===t);return n.push(...e.filter(r=>Mn(r)!==t)),n}(n,o);return this.processSegmentGroup(t,a,s,o)}),function aF(e,t){return me(function sF(e,t,n,r,i){return(o,s)=>{let a=n,u=t,c=0;o.subscribe(Fe(s,p=>{const w=c++;u=a?e(u,p,w):(a=!0,p),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(e,t,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),Ru(null),function uF(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ht((i,o)=>e(i,o,r)):W,Vf(1),n?Ru(t):vE(()=>new Au))}(),pt(o=>{if(null===o)return so(r);const s=oS(o);return function jL(e){e.sort((t,n)=>t.value.outlet===ke?-1:n.value.outlet===ke?1:t.value.outlet.localeCompare(n.value.outlet))}(s),ve(s)}))}processSegment(t,n,r,i,o,s){return gt(n).pipe(Qi(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe(ti(u=>{if(u instanceof Bu)return ve(null);throw u}))),ei(a=>!!a),ti(a=>{if(eS(a))return function VL(e,t,n){return 0===t.length&&!e.children[n]}(r,i,o)?ve([]):so(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return function LL(e,t,n,r){return!!(Mn(e)===r||r!==ke&&$u(t,n,e))&&("**"===e.path||eh(t,e,n).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):so(i):so(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rS(o):this.applyRedirects.lineralizeSegments(r,o).pipe(pt(s=>{const a=new ze(s,{});return this.processSegment(t,n,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:p}=eh(n,i,o);if(!a)return so(n);const w=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p);return i.redirectTo.startsWith("/")?rS(w):this.applyRedirects.lineralizeSegments(i,w).pipe(pt(P=>this.processSegment(t,r,n,P.concat(c),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?CE(i).parameters:{};a=ve({snapshot:new Vu(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sS(r),Mn(r),r.component??r._loadedComponent??null,r,aS(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=xL(n,r,i,t).pipe(Se(({matched:u,consumedSegments:c,remainingSegments:p,parameters:w})=>u?{snapshot:new Vu(c,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sS(r),Mn(r),r.component??r._loadedComponent??null,r,aS(r)),consumedSegments:c,remainingSegments:p}:null));return a.pipe(kt(u=>null===u?so(n):this.getChildConfig(t=r._injector??t,r,i).pipe(kt(({routes:c})=>{const p=r._loadedInjector??t,{snapshot:w,consumedSegments:P,remainingSegments:H}=u,{segmentGroup:G,slicedSegments:K}=iS(n,P,H,c);if(0===K.length&&G.hasChildren())return this.processChildren(p,c,G).pipe(Se(ne=>null===ne?null:[new hr(w,ne)]));if(0===c.length&&0===K.length)return ve([new hr(w,[])]);const Z=Mn(r)===o;return this.processSegment(p,c,G,K,Z?ke:o,!0).pipe(Se(ne=>[new hr(w,ne)]))}))))}getChildConfig(t,n,r){return n.children?ve({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?ve({routes:n._loadedRoutes,injector:n._loadedInjector}):function TL(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?ve(!0):ve(i.map(s=>{const a=io(s,e);return Ar(function hL(e){return e&&Rs(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))})).pipe(oo(),tS())}(t,n,r).pipe(pt(i=>i?this.configLoader.loadChildren(t,n).pipe(Pt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function RL(e){return Yi(qE(!1,3))}())):ve({routes:[],injector:t})}}function BL(e){const t=e.value.routeConfig;return t&&""===t.path}function oS(e){const t=[],n=new Set;for(const r of e){if(!BL(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=oS(r.children);t.push(new hr(r.value,i))}return t.filter(r=>!n.has(r))}function sS(e){return e.data||{}}function aS(e){return e.resolve||{}}function uS(e){return"string"==typeof e.title||null===e.title}function th(e){return kt(t=>{const n=e(t);return n?gt(n).pipe(Se(()=>t)):ve(t)})}const ao=new de("ROUTES");let nh=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=le(jw)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ve(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Ar(n.loadComponent()).pipe(Se(cS),Pt(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),ms(()=>{this.componentLoaders.delete(n)})),i=new Lf(r,()=>new se).pipe(Ff());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Se(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,c;return Array.isArray(a)?c=a:(u=a.create(n).injector,c=u.get(ao,[],_e.Self|_e.Optional).flat()),{routes:c.map(Yf),injector:u}}),ms(()=>{this.childrenLoaders.delete(r)})),s=new Lf(o,()=>new se).pipe(Ff());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return Ar(n()).pipe(Se(cS),pt(r=>r instanceof J_||Array.isArray(r)?ve(r):gt(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function cS(e){return function qL(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Wu=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new se,this.configLoader=le(nh),this.environmentInjector=le(Hn),this.urlSerializer=le(_s),this.rootContexts=le(Ds),this.inputBindingEnabled=null!==le(Hu,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ve(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new $F(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new BF(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new pe({id:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ss,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ht(r=>0!==r.id),Se(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),kt(r=>{let i=!1,o=!1;return ve(r).pipe(Pt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),kt(s=>{const a=n.browserUrlTree.toString(),u=!n.navigated||s.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!u&&"reload"!==(s.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const p="";return this.events.next(new bs(s.id,n.serializeUrl(r.rawUrl),p,0)),n.rawUrlTree=s.rawUrl,s.resolve(null),Rn}if(n.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return lS(s.source)&&(n.browserUrlTree=s.extractedUrl),ve(s).pipe(kt(p=>{const w=this.transitions?.getValue();return this.events.next(new Wf(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),w!==this.transitions?.getValue()?Rn:Promise.resolve(p)}),function $L(e,t,n,r,i,o){return pt(s=>function HL(e,t,n,r,i,o,s="emptyOnly"){return new UL(e,t,n,r,i,s,o).recognize()}(e,t,n,r,s.extractedUrl,i,o).pipe(Se(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Pt(p=>{if(r.targetSnapshot=p.targetSnapshot,r.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects},"eager"===n.urlUpdateStrategy){if(!p.extras.skipLocationChange){const P=n.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);n.setBrowserUrl(P,p)}n.browserUrlTree=p.urlAfterRedirects}const w=new LF(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(w)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:p,extractedUrl:w,source:P,restoredState:H,extras:G}=s,K=new Wf(p,this.urlSerializer.serialize(w),P,H);this.events.next(K);const Z=BE(0,this.rootComponentType).snapshot;return ve(r={...s,targetSnapshot:Z,urlAfterRedirects:w,extras:{...G,skipLocationChange:!1,replaceUrl:!1}})}{const p="";return this.events.next(new bs(s.id,n.serializeUrl(r.extractedUrl),p,1)),n.rawUrlTree=s.rawUrl,s.resolve(null),Rn}}),Pt(s=>{const a=new VF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Se(s=>r={...s,guards:uL(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function _L(e,t){return pt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?ve({...n,guardsResult:!0}):function wL(e,t,n,r){return gt(e).pipe(pt(i=>function IL(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?ve(o.map(a=>{const u=Ts(t)??i,c=io(a,u);return Ar(function mL(e){return e&&Rs(e.canDeactivate)}(c)?c.canDeactivate(e,t,n,r):u.runInContext(()=>c(e,t,n,r))).pipe(ei())})).pipe(oo()):ve(!0)}(i.component,i.route,n,t,r)),ei(i=>!0!==i,!0))}(s,r,i,e).pipe(pt(a=>a&&function fL(e){return"boolean"==typeof e}(a)?function CL(e,t,n,r){return gt(t).pipe(Qi(i=>gs(function SL(e,t){return null!==e&&t&&t(new WF(e)),ve(!0)}(i.route.parent,r),function EL(e,t){return null!==e&&t&&t(new zF(e)),ve(!0)}(i.route,r),function DL(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function cL(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>Mu(()=>ve(s.guards.map(u=>{const c=Ts(s.node)??n,p=io(u,c);return Ar(function gL(e){return e&&Rs(e.canActivateChild)}(p)?p.canActivateChild(r,e):c.runInContext(()=>p(r,e))).pipe(ei())})).pipe(oo())));return ve(o).pipe(oo())}(e,i.path,n),function bL(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ve(!0);const i=r.map(o=>Mu(()=>{const s=Ts(t)??n,a=io(o,s);return Ar(function pL(e){return e&&Rs(e.canActivate)}(a)?a.canActivate(t,e):s.runInContext(()=>a(t,e))).pipe(ei())}));return ve(i).pipe(oo())}(e,i.route,n))),ei(i=>!0!==i,!0))}(r,o,e,t):ve(a)),Se(a=>({...n,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),Pt(s=>{if(r.guardsResult=s.guardsResult,ri(s.guardsResult))throw JE(0,s.guardsResult);const a=new HF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ht(s=>!!s.guardsResult||(n.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),th(s=>{if(s.guards.canActivateChecks.length)return ve(s).pipe(Pt(a=>{const u=new UF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),kt(a=>{let u=!1;return ve(a).pipe(function WL(e,t){return pt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ve(n);let o=0;return gt(i).pipe(Qi(s=>function GL(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!uS(i)&&(o[ys]=i.title),function zL(e,t,n,r){const i=function KL(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return ve({});const o={};return gt(i).pipe(pt(s=>function JL(e,t,n,r){const i=Ts(t)??r,o=io(e,i);return Ar(o.resolve?o.resolve(t,n):i.runInContext(()=>o(t,n)))}(e[s],t,n,r).pipe(ei(),Pt(a=>{o[s]=a}))),Vf(1),_E(o),ti(s=>eS(s)?Rn:Yi(s)))}(o,e,t,r).pipe(Se(s=>(e._resolvedData=s,e.data=$E(e,n).resolve,i&&uS(i)&&(e.data[ys]=i.title),null)))}(s.route,r,e,t)),Pt(()=>o++),Vf(1),pt(s=>o===i.length?ve(n):Rn))})}(n.paramsInheritanceStrategy,this.environmentInjector),Pt({next:()=>u=!0,complete:()=>{u||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Pt(a=>{const u=new jF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),th(s=>{const a=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(Pt(p=>{u.component=p}),Se(()=>{})));for(const p of u.children)c.push(...a(p));return c};return Nf(a(s.targetSnapshot.root)).pipe(Ru(),Xt(1))}),th(()=>this.afterPreactivation()),Se(s=>{const a=function YF(e,t,n){const r=Is(e,t._root,n?n._root:void 0);return new jE(r,t)}(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),Pt(s=>{n.currentUrlTree=s.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),n.routerState=s.targetRouterState,"deferred"===n.urlUpdateStrategy&&(s.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,s),n.browserUrlTree=s.urlAfterRedirects)}),((e,t,n,r)=>Se(i=>(new aL(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)))(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Xt(1),Pt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new ii(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),ms(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ti(s=>{if(o=!0,XE(s)){ZE(s)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new Lu(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),ZE(s)){const u=n.urlHandlingStrategy.merge(s.url,n.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||lS(r.source)};n.scheduleNavigation(u,Ss,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new Gf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(s))}catch(u){r.reject(u)}}return Rn}))}))}cancelNavigationTransition(n,r,i){const o=new Lu(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function lS(e){return e!==Ss}let dS=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ke);return r}getResolvedTitleForRoute(n){return n.data[ys]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:function(){return le(ZL)},providedIn:"root"}),e})(),ZL=(()=>{class e extends dS{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(ge(dE))},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),XL=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:function(){return le(QL)},providedIn:"root"}),e})();class YL{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let QL=(()=>{class e extends YL{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=bt(e)))(r||e)}}(),e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Gu=new de("",{providedIn:"root",factory:()=>({})});let eV=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:function(){return le(tV)},providedIn:"root"}),e})(),tV=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ln=(()=>((ln=ln||{})[ln.COMPLETE=0]="COMPLETE",ln[ln.FAILED=1]="FAILED",ln[ln.REDIRECTING=2]="REDIRECTING",ln))();function fS(e,t){e.events.pipe(Ht(n=>n instanceof ii||n instanceof Lu||n instanceof Gf||n instanceof bs),Se(n=>n instanceof ii||n instanceof bs?ln.COMPLETE:n instanceof Lu&&(0===n.code||1===n.code)?ln.REDIRECTING:ln.FAILED),Ht(n=>n!==ln.REDIRECTING),Xt(1)).subscribe(()=>{t()})}function nV(e){throw e}function rV(e,t,n){return t.parse("/")}const iV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vn=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=le(Uw),this.isNgZoneEnabled=!1,this.options=le(Gu,{optional:!0})||{},this.pendingTasks=le(uu),this.errorHandler=this.options.errorHandler||nV,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||rV,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=le(eV),this.routeReuseStrategy=le(XL),this.titleStrategy=le(dS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=le(ao,{optional:!0})?.flat()??[],this.navigationTransitions=le(Wu),this.urlSerializer=le(_s),this.location=le(cf),this.componentInputBindingEnabled=!!le(Hu,{optional:!0}),this.isNgZoneEnabled=le(Ye)instanceof Ye&&Ye.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new to,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BE(0,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ss,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Yf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s;let w,p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...o};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}null!==p&&(p=this.removeEmptyProps(p));try{w=xE(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),w=this.currentUrlTree.root}return OE(w,n,p,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=ri(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ss,null,r)}navigate(n,r={skipLocationChange:!1}){return function sV(e){for(let t=0;t<e.length;t++)if(null==e[t])throw new ie(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...iV}:!1===r?{...oV}:r,ri(n))return SE(this.currentUrlTree,n,i);const o=this.parseUrl(n);return SE(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,c;s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((w,P)=>{a=w,u=P});const p=this.pendingTasks.add();return fS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(w=>Promise.reject(w))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class hS{}let cV=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ht(n=>n instanceof ii),Qi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Td(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return gt(i).pipe(ci())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ve(null);const o=i.pipe(pt(s=>null===s?ve(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?gt([o,this.loader.loadComponent(r)]).pipe(ci()):o})}}return e.\u0275fac=function(n){return new(n||e)(ge(vn),ge(jw),ge(Hn),ge(hS),ge(nh))},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ih=new de("");let pS=(()=>{class e{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Wf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ii?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof bs&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof HE&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new HE(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function Ny(){throw new Error("invalid")}()},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();function pr(e,t){return{\u0275kind:e,\u0275providers:t}}function mS(){const e=le(En);return t=>{const n=e.get(Xr);if(t!==n.components[0])return;const r=e.get(vn),i=e.get(yS);1===e.get(oh)&&r.initialNavigation(),e.get(vS,null,_e.Optional)?.setUpPreloading(),e.get(ih,null,_e.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const yS=new de("",{factory:()=>new se}),oh=new de("",{providedIn:"root",factory:()=>1}),vS=new de("");function hV(e){return pr(0,[{provide:vS,useExisting:cV},{provide:hS,useExisting:e}])}const _S=new de("ROUTER_FORROOT_GUARD"),gV=[cf,{provide:_s,useClass:Hf},vn,Ds,{provide:ro,useFactory:function gS(e){return e.routerState.root},deps:[vn]},nh,[]];function mV(){return new Yw("Router",vn)}let wS=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[gV,[],{provide:ao,multi:!0,useValue:n},{provide:_S,useFactory:wV,deps:[[vn,new ma,new ya]]},{provide:Gu,useValue:r||{}},r?.useHash?{provide:Qr,useClass:AO}:{provide:Qr,useClass:IC},{provide:ih,useFactory:()=>{const e=le(Jk),t=le(Ye),n=le(Gu),r=le(Wu),i=le(_s);return n.scrollOffset&&e.setOffset(n.scrollOffset),new pS(i,r,e,t,n)}},r?.preloadingStrategy?hV(r.preloadingStrategy).\u0275providers:[],{provide:Yw,multi:!0,useFactory:mV},r?.initialNavigation?CV(r):[],r?.bindToComponentInputs?pr(8,[KE,{provide:Hu,useExisting:KE}]).\u0275providers:[],[{provide:CS,useFactory:mS},{provide:Zd,multi:!0,useExisting:CS}]]}}static forChild(n){return{ngModule:e,providers:[{provide:ao,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(ge(_S,8))},e.\u0275mod=fn({type:e}),e.\u0275inj=en({}),e})();function wV(e){return"guarded"}function CV(e){return["disabled"===e.initialNavigation?pr(3,[{provide:au,multi:!0,useFactory:()=>{const t=le(vn);return()=>{t.setUpLocationChangeListener()}}},{provide:oh,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?pr(2,[{provide:oh,useValue:0},{provide:au,multi:!0,deps:[En],useFactory:t=>{const n=t.get(IO,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(vn),o=t.get(yS);fS(i,()=>{r(!0)}),t.get(Wu).afterPreactivation=()=>(r(!0),o.closed?ve(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const CS=new de(""),SV=[];let bV=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=fn({type:e}),e.\u0275inj=en({imports:[wS.forRoot(SV),wS]}),e})();function ES(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function uo(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(u){ES(o,r,i,s,a,"next",u)}function a(u){ES(o,r,i,s,a,"throw",u)}s(void 0)})}}let SS=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(oe(ir),oe(an))},e.\u0275dir=De({type:e}),e})(),oi=(()=>{class e extends SS{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=bt(e)))(r||e)}}(),e.\u0275dir=De({type:e,features:[Ge]}),e})();const Kn=new de("NgValueAccessor"),TV={provide:Kn,useExisting:Ke(()=>zu),multi:!0},MV=new de("CompositionEventMode");let zu=(()=>{class e extends SS{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function AV(){const e=Ir()?Ir().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(oe(ir),oe(an),oe(MV,8))},e.\u0275dir=De({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&qt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Xe([TV]),Ge]}),e})();const xt=new de("NgValidators"),Rr=new de("NgAsyncValidators");function kS(e){return null!=e}function NS(e){return es(e)?gt(e):e}function FS(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function LS(e,t){return t.map(n=>n(e))}function VS(e){return e.map(t=>function PV(e){return!e.validate}(t)?t:n=>t.validate(n))}function sh(e){return null!=e?function HS(e){if(!e)return null;const t=e.filter(kS);return 0==t.length?null:function(n){return FS(LS(n,t))}}(VS(e)):null}function ah(e){return null!=e?function US(e){if(!e)return null;const t=e.filter(kS);return 0==t.length?null:function(n){return function DV(...e){const t=Np(e),{args:n,keys:r}=gE(e),i=new Y(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,c=s;for(let p=0;p<s;p++){let w=!1;Ot(n[p]).subscribe(Fe(o,P=>{w||(w=!0,c--),a[p]=P},()=>u--,void 0,()=>{(!u||!w)&&(c||o.next(r?mE(r,a):a),o.complete())}))}});return t?i.pipe(kf(t)):i}(LS(n,t).map(NS)).pipe(Se(FS))}}(VS(e)):null}function jS(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function BS(e){return e._rawValidators}function $S(e){return e._rawAsyncValidators}function uh(e){return e?Array.isArray(e)?e:[e]:[]}function Ju(e,t){return Array.isArray(e)?e.includes(t):e===t}function WS(e,t){const n=uh(t);return uh(e).forEach(i=>{Ju(n,i)||n.push(i)}),n}function GS(e,t){return uh(t).filter(n=>!Ju(e,n))}class zS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=sh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ah(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class Pr extends zS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class KS{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let JS=(()=>{class e extends KS{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(oe(Pr,2))},e.\u0275dir=De({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&Qa("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ge]}),e})();const Ps="VALID",Zu="INVALID",co="PENDING",xs="DISABLED";function Xu(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class YS{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ps}get invalid(){return this.status===Zu}get pending(){return this.status==co}get disabled(){return this.status===xs}get enabled(){return this.status!==xs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(WS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(WS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(GS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(GS(t,this._rawAsyncValidators))}hasValidator(t){return Ju(this._rawValidators,t)}hasAsyncValidator(t){return Ju(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=co,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=xs,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Ps,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ps||this.status===co)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xs:Ps}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=co,this._hasOwnPendingAsyncValidator=!0;const n=NS(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?xs:this.errors?Zu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(co)?co:this._anyControlsHaveStatus(Zu)?Zu:Ps}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Xu(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function FV(e){return Array.isArray(e)?sh(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function LV(e){return Array.isArray(e)?ah(e):e||null}(this._rawAsyncValidators)}}const lo=new de("CallSetDisabledState",{providedIn:"root",factory:()=>Yu}),Yu="always";function Os(e,t,n=Yu){(function ph(e,t){const n=BS(e);null!==t.validator?e.setValidators(jS(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=$S(e);null!==t.asyncValidator?e.setAsyncValidators(jS(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();tc(t._rawValidators,i),tc(t._rawAsyncValidators,i)})(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function UV(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&QS(e,t)})}(e,t),function BV(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function jV(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&QS(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function HV(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function ec(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),function nc(e,t){let n=!1;if(null!==e){if(null!==t.validator){const i=BS(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(null!==t.asyncValidator){const i=$S(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}const r=()=>{};return tc(t._rawValidators,r),tc(t._rawAsyncValidators,r),n}(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function tc(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function QS(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function nb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function rb(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const fo=class extends YS{constructor(t=null,n,r){super(function dh(e){return(Xu(e)?e.validators:e)||null}(n),function fh(e,t){return(Xu(t)?t.asyncValidators:e)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=rb(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){nb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){nb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){rb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let cb=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=fn({type:e}),e.\u0275inj=en({}),e})();const _h=new de("NgModelWithFormControlWarning"),n2={provide:Pr,useExisting:Ke(()=>wh)};let wh=(()=>{class e extends Pr{set isDisabled(n){}constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this.update=new it,this._ngModelWarningSent=!1,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function yh(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===zu?n=o:function GV(e){return Object.getPrototypeOf(e.constructor)===oi}(o)?r=o:i=o}),i||r||n||null}(0,i)}ngOnChanges(n){if(this._isControlChanged(n)){const r=n.form.previousValue;r&&ec(r,this,!1),Os(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function mh(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)})(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ec(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(n){return new(n||e)(oe(xt,10),oe(Rr,10),oe(Kn,10),oe(_h,8),oe(lo,8))},e.\u0275dir=De({type:e,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Xe([n2]),Ge,hn]}),e})(),C2=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=fn({type:e}),e.\u0275inj=en({imports:[cb]}),e})(),S2=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:_h,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:lo,useValue:n.callSetDisabledState??Yu}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=fn({type:e}),e.\u0275inj=en({imports:[C2]}),e})();const ai=new TextEncoder,Th=new TextDecoder;const ic=e=>(e=>{let t=e;"string"==typeof t&&(t=ai.encode(t));const r=[];for(let i=0;i<t.length;i+=32768)r.push(String.fromCharCode.apply(null,t.subarray(i,i+32768)));return btoa(r.join(""))})(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");class Ph extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var n;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(n=Error.captureStackTrace)||void 0===n||n.call(Error,this,this.constructor)}}class Ib extends Ph{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Ns extends Ph{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class T2 extends Ph{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}const oc=crypto,Tb=e=>e instanceof CryptoKey;oc.getRandomValues.bind(oc);Symbol();const j2=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,kb=e=>{const t=j2.exec(e);if(!t)throw new TypeError("Invalid time period format");const n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*n);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*n);case"day":case"days":case"d":return Math.round(86400*n);case"week":case"weeks":case"w":return Math.round(604800*n);default:return Math.round(31557600*n)}};function Dt(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function Or(e,t){return e.name===t}function sc(e){return parseInt(e.name.slice(4),10)}function G2(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!Or(e.algorithm,"HMAC"))throw Dt("HMAC");const r=parseInt(t.slice(2),10);if(sc(e.algorithm.hash)!==r)throw Dt(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Or(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Dt("RSASSA-PKCS1-v1_5");const r=parseInt(t.slice(2),10);if(sc(e.algorithm.hash)!==r)throw Dt(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Or(e.algorithm,"RSA-PSS"))throw Dt("RSA-PSS");const r=parseInt(t.slice(2),10);if(sc(e.algorithm.hash)!==r)throw Dt(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw Dt("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!Or(e.algorithm,"ECDSA"))throw Dt("ECDSA");const r=function W2(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw Dt(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}!function Fb(e,t){if(t.length&&!t.some(n=>e.usages.includes(n))){let n="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const r=t.pop();n+=`one of ${t.join(", ")}, or ${r}.`}else n+=2===t.length?`one of ${t[0]} or ${t[1]}.`:`${t[0]}.`;throw new TypeError(n)}}(e,n)}function Lb(e,t,...n){if(n.length>2){const r=n.pop();e+=`one of type ${n.join(", ")}, or ${r}.`}else e+=2===n.length?`one of type ${n[0]} or ${n[1]}.`:`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Vb=(e,...t)=>Lb("Key must be ",e,...t);function Hb(e,t,...n){return Lb(`Key for the ${e} algorithm must be `,t,...n)}const Ub=e=>Tb(e),Jn=["CryptoKey"],K2=function(){var e=uo(function*(t,n,r){const i=yield function z2(e,t,n){if(Tb(t))return G2(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Vb(t,...Jn));return oc.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(Vb(t,...Jn,"Uint8Array"))}(t,n,"sign");((e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if("number"!=typeof n||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}})(t,i);const o=yield oc.subtle.sign(function V2(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new Ib(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(t,i.algorithm),i,r);return new Uint8Array(o)});return function(n,r,i){return e.apply(this,arguments)}}();class Y2{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}sign(t,n){var r=this;return uo(function*(){if(!r._protectedHeader&&!r._unprotectedHeader)throw new Ns("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!((...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let n;for(const r of t){const i=Object.keys(r);if(n&&0!==n.size)for(const o of i){if(n.has(o))return!1;n.add(o)}else n=new Set(i)}return!0})(r._protectedHeader,r._unprotectedHeader))throw new Ns("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...r._protectedHeader,...r._unprotectedHeader};let s=!0;if(function k2(e,t,n,r,i){if(void 0!==i.crit&&void 0===r.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r.crit)return new Set;if(!Array.isArray(r.crit)||0===r.crit.length||r.crit.some(s=>"string"!=typeof s||0===s.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==n?new Map([...Object.entries(n),...t.entries()]):t;for(const s of r.crit){if(!o.has(s))throw new Ib(`Extension Header Parameter "${s}" is not recognized`);if(void 0===i[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&void 0===r[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(r.crit)}(Ns,new Map([["b64",!0]]),n?.crit,r._protectedHeader,i).has("b64")&&(s=r._protectedHeader.b64,"boolean"!=typeof s))throw new Ns('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=i;if("string"!=typeof a||!a)throw new Ns('JWS "alg" (Algorithm) Header Parameter missing or invalid');((e,t,n)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?((e,t)=>{if(!(t instanceof Uint8Array)){if(!Ub(t))throw new TypeError(Hb(e,t,...Jn,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${Jn.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e,t):((e,t,n)=>{if(!Ub(t))throw new TypeError(Hb(e,t,...Jn));if("secret"===t.type)throw new TypeError(`${Jn.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===n&&"public"===t.type)throw new TypeError(`${Jn.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===n&&"public"===t.type)throw new TypeError(`${Jn.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===n&&"private"===t.type)throw new TypeError(`${Jn.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===n&&"private"===t.type)throw new TypeError(`${Jn.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,t,n)})(a,t,"sign");let c,u=r._payload;s&&(u=ai.encode(ic(u))),c=ai.encode(r._protectedHeader?ic(JSON.stringify(r._protectedHeader)):"");const p=function Ah(...e){const t=e.reduce((i,{length:o})=>i+o,0),n=new Uint8Array(t);let r=0;return e.forEach(i=>{n.set(i,r),r+=i.length}),n}(c,ai.encode("."),u),w=yield K2(a,t,p),P={signature:ic(w),payload:""};return s&&(P.payload=Th.decode(u)),r._unprotectedHeader&&(P.header=r._unprotectedHeader),r._protectedHeader&&(P.protected=Th.decode(c)),P})()}}class Q2{constructor(t){this._flattened=new Y2(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}sign(t,n){var r=this;return uo(function*(){const i=yield r._flattened.sign(t,n);if(void 0===i.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${i.protected}.${i.payload}.${i.signature}`})()}}const op=e=>Math.floor(e.getTime()/1e3);class rH{constructor(t){if(!function nH(e){if(!function tH(e){return"object"==typeof e&&null!==e}(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return this._payload="number"==typeof t?{...this._payload,nbf:t}:{...this._payload,nbf:op(new Date)+kb(t)},this}setExpirationTime(t){return this._payload="number"==typeof t?{...this._payload,exp:t}:{...this._payload,exp:op(new Date)+kb(t)},this}setIssuedAt(t){return this._payload=typeof t>"u"?{...this._payload,iat:op(new Date)}:{...this._payload,iat:t},this}}class iH extends rH{setProtectedHeader(t){return this._protectedHeader=t,this}sign(t,n){var r=this;return uo(function*(){var i;const o=new Q2(ai.encode(JSON.stringify(r._payload)));if(o.setProtectedHeader(r._protectedHeader),Array.isArray(null===(i=r._protectedHeader)||void 0===i?void 0:i.crit)&&r._protectedHeader.crit.includes("b64")&&!1===r._protectedHeader.b64)throw new T2("JWTs MUST NOT use unencoded payload");return o.sign(t,n)})()}}function sH(e,t){this.v=e,this.k=t}function ac(e){var t,n;function r(o,s){try{var a=e[o](s),u=a.value,c=u instanceof sH;Promise.resolve(c?u.v:u).then(function(p){if(c){var w="return"===o?"return":"next";if(!u.k||p.done)return r(w,p);p=e[w](p).value}i(a.done?"return":"normal",p)},function(p){r("throw",p)})}catch(p){i("throw",p)}}function i(o,s){switch(o){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(o,s){return new Promise(function(a,u){var c={key:o,arg:s,resolve:a,reject:u,next:null};n?n=n.next=c:(t=n=c,r(o,s))})},"function"!=typeof e.return&&(this.return=void 0)}ac.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ac.prototype.next=function(e){return this._invoke("next",e)},ac.prototype.throw=function(e){return this._invoke("throw",e)},ac.prototype.return=function(e){return this._invoke("return",e)};var pH=D(128);let gH=(()=>{class e{constructor(){this.accSidControl=new fo(""),this.keySidControl=new fo(""),this.secretControl=new fo(""),this.identityControl=new fo(""),this.device=null}login(){var n=this;return uo(function*(){const r=yield mH({accountSid:n.accSidControl.value.trim(),keySid:n.keySidControl.value.trim(),secret:n.secretControl.value.trim(),identity:n.identityControl.value.trim()});n.createDevice(r)})()}logout(){this.device?.destroy(),this.device=null}createDevice(n){const r=new pH.AS(n);r.on("incoming",i=>i.accept()),r.register(),this.device=r}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=xc({type:e,selectors:[["app-root"]],decls:20,vars:4,consts:[[3,"formControl"],[3,"click"]],template:function(n,r){1&n&&(ar(0,"span"),qr(1,"Accound"),ur(),Kr(2,"input",0)(3,"br"),ar(4,"span"),qr(5,"Key"),ur(),Kr(6,"input",0)(7,"br"),ar(8,"span"),qr(9,"Secret"),ur(),Kr(10,"input",0)(11,"br"),ar(12,"span"),qr(13,"Identity"),ur(),Kr(14,"input",0)(15,"br"),ar(16,"button",1),qt("click",function(){return r.login()}),qr(17,"Login"),ur(),ar(18,"button",1),qt("click",function(){return r.logout()}),qr(19,"Logout"),ur()),2&n&&(Go(2),Wi("formControl",r.accSidControl),Go(4),Wi("formControl",r.keySidControl),Go(4),Wi("formControl",r.secretControl),Go(4),Wi("formControl",r.identityControl))},dependencies:[zu,JS,wh]}),e})();const mH=function(){var e=uo(function*({accountSid:t,keySid:n,secret:r,identity:i}){const o=Math.floor(Date.now()/1e3);return yield new iH({jti:n+"-"+o.toString(),iss:n,sub:t,iat:o,exp:o+36e3,grants:{identity:i,voice:{incoming:{allow:!0}}}}).setProtectedHeader({typ:"JWT",alg:"HS256",cty:"twilio-fpa;v=1"}).sign((new TextEncoder).encode(r))});return function(n){return e.apply(this,arguments)}}(),yH=["addListener","removeListener"],vH=["addEventListener","removeEventListener"],_H=["on","off"];function uc(e,t,n,r){if(v(n)&&(r=n,n=void 0),r)return uc(e,t,n).pipe(kf(r));const[i,o]=function EH(e){return v(e.addEventListener)&&v(e.removeEventListener)}(e)?vH.map(s=>a=>e[s](t,a,n)):function wH(e){return v(e.addListener)&&v(e.removeListener)}(e)?yH.map(Bb(e,t)):function CH(e){return v(e.on)&&v(e.off)}(e)?_H.map(Bb(e,t)):[];if(!i&&vc(e))return pt(s=>uc(s,t,n))(Ot(e));if(!i)throw new TypeError("Invalid event target");return new Y(s=>{const a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function Bb(e,t){return n=>r=>e[n](t,r)}const Nr=new Y(b),bH={connector:()=>new se};function $b(e,t=bH){const{connector:n}=t;return me((r,i)=>{const o=n();Ot(e(function SH(e){return new Y(t=>e.subscribe(t))}(o))).subscribe(i),i.add(r.subscribe(o))})}class TH extends U{constructor(t,n){super()}schedule(t,n=0){return this}}const cc={setInterval(e,t,...n){const{delegate:r}=cc;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=cc;return(t?.clearInterval||clearInterval)(e)},delegate:void 0},Wb={now:()=>(Wb.delegate||Date).now(),delegate:void 0};class Fs{constructor(t,n=Fs.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}Fs.now=Wb.now;const Gb=new class MH extends Fs{constructor(t,n=Fs.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}(class AH extends TH{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return cc.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&cc.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,R(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}),RH=Gb;function zb(e,t){return t?n=>gs(t.pipe(Xt(1),function PH(){return me((e,t)=>{e.subscribe(Fe(t,b))})}()),n.pipe(zb(e))):pt((n,r)=>Ot(e(n,r)).pipe(Xt(1),_E(n)))}const Ls="Service workers are disabled or not supported by this browser";class lc{constructor(t){if(this.serviceWorker=t,t){const r=uc(t,"controllerchange").pipe(Se(()=>t.controller)),o=gs(Mu(()=>ve(t.controller)),r);this.worker=o.pipe(Ht(p=>!!p)),this.registration=this.worker.pipe(kt(()=>t.getRegistration()));const c=uc(t,"message").pipe(Se(p=>p.data)).pipe(Ht(p=>p&&p.type)).pipe(function IH(e){return e?t=>$b(e)(t):t=>function DH(e,t){const n=v(e)?e:()=>e;return v(t)?$b(t,{connector:n}):r=>new Lf(r,n)}(new se)(t)}());c.connect(),this.events=c}else this.worker=this.events=this.registration=function NH(e){return Mu(()=>Yi(new Error(e)))}(Ls)}postMessage(t,n){return this.worker.pipe(Xt(1),Pt(r=>{r.postMessage({action:t,...n})})).toPromise().then(()=>{})}postMessageWithOperation(t,n,r){const i=this.waitForOperationCompleted(r),o=this.postMessage(t,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let n;return n="string"==typeof t?r=>r.type===t:r=>t.includes(r.type),this.events.pipe(Ht(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(Xt(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Ht(n=>n.nonce===t),Xt(1),Se(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Kb=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new se,!n.isEnabled)return this.messages=Nr,this.notificationClicks=Nr,void(this.subscription=Nr);this.messages=this.sw.eventsOfType("PUSH").pipe(Se(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Se(i=>i.data)),this.pushManager=this.sw.registration.pipe(Se(i=>i.pushManager));const r=this.pushManager.pipe(kt(i=>i.getSubscription()));this.subscription=wc(r,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Ls));const r={userVisibleOnly:!0};let i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,this.pushManager.pipe(kt(s=>s.subscribe(r)),Xt(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Xt(1),kt(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Ls))}decodeBase64(n){return atob(n)}}return e.\u0275fac=function(n){return new(n||e)(ge(lc))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})(),Jb=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=Nr,this.available=Nr,this.activated=Nr,void(this.unrecoverable=Nr);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Ht(r=>"VERSION_READY"===r.type),Se(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ls));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ls));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}}return e.\u0275fac=function(n){return new(n||e)(ge(lc))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();const qb=new de("NGSW_REGISTER_SCRIPT");function FH(e,t,n,r){return()=>{if(!WC(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)i=n.registrationStrategy();else{const[s,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=ve(null);break;case"registerWithDelay":i=Zb(+a[0]||0);break;case"registerWhenStable":i=a[0]?wc(Xb(e),Zb(+a[0])):Xb(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}e.get(Ye).runOutsideAngular(()=>i.pipe(Xt(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(s=>console.error("Service worker registration failed with:",s))))}}function Zb(e){return ve(null).pipe(function kH(e,t=Gb){const n=function OH(e=0,t,n=RH){let r=-1;return null!=t&&(kp(t)?n=t:r=t),new Y(i=>{let o=function xH(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(e,t);return zb(()=>n)}(e))}function Xb(e){return e.get(Xr).isStable.pipe(Ht(n=>n))}function LH(e,t){return new lc(WC(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}class gp{}function VH(e,t={}){return Pa([Kb,Jb,{provide:qb,useValue:e},{provide:gp,useValue:t},{provide:lc,useFactory:LH,deps:[gp,rr]},{provide:au,useFactory:FH,deps:[En,qb,gp,rr],multi:!0}])}let HH=(()=>{class e{static register(n,r={}){return{ngModule:e,providers:[VH(n,r)]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=fn({type:e}),e.\u0275inj=en({providers:[Kb,Jb]}),e})();class dc{}class fc{}class qn{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof qn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new qn;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof qn?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const i=("a"===t.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(t,n){const r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class UH{encodeKey(t){return Yb(t)}encodeValue(t){return Yb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const BH=/%(\d[a-f0-9])/gi,$H={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Yb(e){return encodeURIComponent(e).replace(BH,(t,n)=>$H[n]??t)}function hc(e){return`${e}`}class Fr{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new UH,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function jH(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],i=Array.isArray(r)?r.map(hc):[hc(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Fr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(hc(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(hc(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class WH{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Qb(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function eD(e){return typeof Blob<"u"&&e instanceof Blob}function tD(e){return typeof FormData<"u"&&e instanceof FormData}class Vs{constructor(t,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function GH(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new qn),this.context||(this.context=new WH),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Fr,this.urlWithParams=n}serializeBody(){return null===this.body?null:Qb(this.body)||eD(this.body)||tD(this.body)||function zH(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Fr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||tD(this.body)?null:eD(this.body)?this.body.type||null:Qb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const p=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((w,P)=>w.set(P,t.setHeaders[P]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((w,P)=>w.set(P,t.setParams[P]),c)),new Vs(n,r,o,{params:c,headers:u,context:p,reportProgress:a,responseType:i,withCredentials:s})}}var ft=(()=>((ft=ft||{})[ft.Sent=0]="Sent",ft[ft.UploadProgress=1]="UploadProgress",ft[ft.ResponseHeader=2]="ResponseHeader",ft[ft.DownloadProgress=3]="DownloadProgress",ft[ft.Response=4]="Response",ft[ft.User=5]="User",ft))();class mp{constructor(t,n=200,r="OK"){this.headers=t.headers||new qn,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class yp extends mp{constructor(t={}){super(t),this.type=ft.ResponseHeader}clone(t={}){return new yp({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ho extends mp{constructor(t={}){super(t),this.type=ft.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ho({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class nD extends mp{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function vp(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let KH=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Vs)o=n;else{let u,c;u=i.headers instanceof qn?i.headers:new qn(i.headers),i.params&&(c=i.params instanceof Fr?i.params:new Fr({fromObject:i.params})),o=new Vs(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=ve(o).pipe(Qi(u=>this.handler.handle(u)));if(n instanceof Vs||"events"===i.observe)return s;const a=s.pipe(Ht(u=>u instanceof ho));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Se(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(Se(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(Se(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(Se(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Fr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,vp(i,r))}post(n,r,i={}){return this.request("POST",n,vp(i,r))}put(n,r,i={}){return this.request("PUT",n,vp(i,r))}}return e.\u0275fac=function(n){return new(n||e)(ge(dc))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();function oD(e,t){return t(e)}function qH(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}const XH=new de(""),Hs=new de(""),sD=new de("");function YH(){let e=null;return(t,n)=>{null===e&&(e=(le(XH,{optional:!0})??[]).reduceRight(qH,oD));const r=le(uu),i=r.add();return e(t,n).pipe(ms(()=>r.remove(i)))}}let aD=(()=>{class e extends dc{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=le(uu)}handle(n){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Hs),...this.injector.get(sD,[])]));this.chain=i.reduceRight((o,s)=>function ZH(e,t,n){return(r,i)=>n.runInContext(()=>t(r,o=>e(o,i)))}(o,s,this.injector),oD)}const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(ms(()=>this.pendingTasks.remove(r)))}}return e.\u0275fac=function(n){return new(n||e)(ge(fc),ge(Hn))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();const nU=/^\)\]\}',?\n/;let cD=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new ie(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?gt(r.\u0275loadImpl()):ve(null)).pipe(kt(()=>new Y(o=>{const s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((K,Z)=>s.setRequestHeader(K,Z.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const K=n.detectContentTypeHeader();null!==K&&s.setRequestHeader("Content-Type",K)}if(n.responseType){const K=n.responseType.toLowerCase();s.responseType="json"!==K?K:"text"}const a=n.serializeBody();let u=null;const c=()=>{if(null!==u)return u;const K=s.statusText||"OK",Z=new qn(s.getAllResponseHeaders()),ne=function rU(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(s)||n.url;return u=new yp({headers:Z,status:s.status,statusText:K,url:ne}),u},p=()=>{let{headers:K,status:Z,statusText:ne,url:X}=c(),ae=null;204!==Z&&(ae=typeof s.response>"u"?s.responseText:s.response),0===Z&&(Z=ae?200:0);let Ce=Z>=200&&Z<300;if("json"===n.responseType&&"string"==typeof ae){const Te=ae;ae=ae.replace(nU,"");try{ae=""!==ae?JSON.parse(ae):null}catch(Ct){ae=Te,Ce&&(Ce=!1,ae={error:Ct,text:ae})}}Ce?(o.next(new ho({body:ae,headers:K,status:Z,statusText:ne,url:X||void 0})),o.complete()):o.error(new nD({error:ae,headers:K,status:Z,statusText:ne,url:X||void 0}))},w=K=>{const{url:Z}=c(),ne=new nD({error:K,status:s.status||0,statusText:s.statusText||"Unknown Error",url:Z||void 0});o.error(ne)};let P=!1;const H=K=>{P||(o.next(c()),P=!0);let Z={type:ft.DownloadProgress,loaded:K.loaded};K.lengthComputable&&(Z.total=K.total),"text"===n.responseType&&s.responseText&&(Z.partialText=s.responseText),o.next(Z)},G=K=>{let Z={type:ft.UploadProgress,loaded:K.loaded};K.lengthComputable&&(Z.total=K.total),o.next(Z)};return s.addEventListener("load",p),s.addEventListener("error",w),s.addEventListener("timeout",w),s.addEventListener("abort",w),n.reportProgress&&(s.addEventListener("progress",H),null!==a&&s.upload&&s.upload.addEventListener("progress",G)),s.send(a),o.next({type:ft.Sent}),()=>{s.removeEventListener("error",w),s.removeEventListener("abort",w),s.removeEventListener("load",p),s.removeEventListener("timeout",w),n.reportProgress&&(s.removeEventListener("progress",H),null!==a&&s.upload&&s.upload.removeEventListener("progress",G)),s.readyState!==s.DONE&&s.abort()}})))}}return e.\u0275fac=function(n){return new(n||e)(ge(KC))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();const _p=new de("XSRF_ENABLED"),lD=new de("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),dD=new de("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class fD{}let sU=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=FC(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(ge(cn),ge(rr),ge(lD))},e.\u0275prov=ye({token:e,factory:e.\u0275fac}),e})();function aU(e,t){const n=e.url.toLowerCase();if(!le(_p)||"GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t(e);const r=le(fD).getToken(),i=le(dD);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var Qe=(()=>((Qe=Qe||{})[Qe.Interceptors=0]="Interceptors",Qe[Qe.LegacyInterceptors=1]="LegacyInterceptors",Qe[Qe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Qe[Qe.NoXsrfProtection=3]="NoXsrfProtection",Qe[Qe.JsonpSupport=4]="JsonpSupport",Qe[Qe.RequestsMadeViaParent=5]="RequestsMadeViaParent",Qe[Qe.Fetch=6]="Fetch",Qe))();function ui(e,t){return{\u0275kind:e,\u0275providers:t}}function uU(...e){const t=[KH,cD,aD,{provide:dc,useExisting:aD},{provide:fc,useExisting:cD},{provide:Hs,useValue:aU,multi:!0},{provide:_p,useValue:!0},{provide:fD,useClass:sU}];for(const n of e)t.push(...n.\u0275providers);return Pa(t)}const hD=new de("LEGACY_INTERCEPTOR_FN");let lU=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=fn({type:e}),e.\u0275inj=en({providers:[uU(ui(Qe.LegacyInterceptors,[{provide:hD,useFactory:YH},{provide:Hs,useExisting:hD,multi:!0}]))]}),e})(),mU=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=fn({type:e,bootstrap:[gH]}),e.\u0275inj=en({imports:[jN,bV,S2,lU,HH.register("./app-pwa/ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]}),e})();HN().bootstrapModule(mU).catch(e=>console.error(e))},128:(he,T,D)=>{"use strict";T.AS=void 0,D(487);var L=D(915);T.AS=L.default,D(287);D(990),D(579)},360:function(he,T,D){"use strict";var v=this&&this.__awaiter||function(U,O,N,A){return new(N||(N=Promise))(function(E,_){function b(h){try{m(A.next(h))}catch(d){_(d)}}function y(h){try{m(A.throw(h))}catch(d){_(d)}}function m(h){h.done?E(h.value):function k(E){return E instanceof N?E:new N(function(_){_(E)})}(h.value).then(b,y)}m((A=A.apply(U,O||[])).next())})},M=this&&this.__generator||function(U,O){var A,k,E,_,N={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return _={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function b(m){return function(h){return function y(m){if(A)throw new TypeError("Generator is already executing.");for(;N;)try{if(A=1,k&&(E=2&m[0]?k.return:m[0]?k.throw||((E=k.return)&&E.call(k),0):k.next)&&!(E=E.call(k,m[1])).done)return E;switch(k=0,E&&(m=[2&m[0],E.value]),m[0]){case 0:case 1:E=m;break;case 4:return N.label++,{value:m[1],done:!1};case 5:N.label++,k=m[1],m=[0];continue;case 7:m=N.ops.pop(),N.trys.pop();continue;default:if(!(E=(E=N.trys).length>0&&E[E.length-1])&&(6===m[0]||2===m[0])){N=0;continue}if(3===m[0]&&(!E||m[1]>E[0]&&m[1]<E[3])){N.label=m[1];break}if(6===m[0]&&N.label<E[1]){N.label=E[1],E=m;break}if(E&&N.label<E[2]){N.label=E[2],N.ops.push(m);break}E[2]&&N.ops.pop(),N.trys.pop();continue}m=O.call(U,N)}catch(h){m=[6,h],k=0}finally{A=E=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,h])}}};Object.defineProperty(T,"__esModule",{value:!0}),T.AsyncQueue=void 0;var L=D(765),R=function(){function U(){this._operations=[]}return U.prototype.enqueue=function(O){var N=!!this._operations.length,A=new L.default;return this._operations.push({deferred:A,callback:O}),N||this._processQueue(),A.promise},U.prototype._processQueue=function(){return v(this,void 0,void 0,function(){var O,N,A,k,E,_,b;return M(this,function(y){switch(y.label){case 0:if(!this._operations.length)return[3,5];N=(O=this._operations[0]).deferred,A=O.callback,k=void 0,E=void 0,_=void 0,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,A()];case 2:return k=y.sent(),_=!0,[3,4];case 3:return b=y.sent(),E=b,[3,4];case 4:return this._operations.shift(),_?N.resolve(k):N.reject(E),[3,0];case 5:return[2]}})})},U}();T.AsyncQueue=R},170:function(he,T,D){"use strict";var b,v=this&&this.__extends||(b=function(y,m){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(h[l]=d[l])})(y,m)},function(y,m){function h(){this.constructor=y}b(y,m),y.prototype=null===m?Object.create(m):(h.prototype=m.prototype,new h)});Object.defineProperty(T,"__esModule",{value:!0});var M=D(16),L=D(915),R=D(287),U=D(990),O=D(178),N=D(199),A=D(292),k=D(819),E={audioinput:"Audio Input",audiooutput:"Audio Output"},_=function(b){function y(m,h,d,l){var g,f=b.call(this)||this;f.availableInputDevices=new Map,f.availableOutputDevices=new Map,f._audioConstraints=null,f._enabledSounds=((g={})[L.default.SoundName.Disconnect]=!0,g[L.default.SoundName.Incoming]=!0,g[L.default.SoundName.Outgoing]=!0,g),f._inputDevice=null,f._inputStream=null,f._isPollingInputVolume=!1,f._log=U.default.getInstance(),f._unknownDeviceIndexes={audioinput:{},audiooutput:{}},f._removeLostInput=function(V){if(!f.inputDevice||f.inputDevice.deviceId!==V.deviceId)return!1;f._replaceStream(null),f._inputDevice=null,f._maybeStopPollingVolume();var q=f.availableInputDevices.get("default")||Array.from(f.availableInputDevices.values())[0];return q&&f.setInputDevice(q.deviceId),!0},f._removeLostOutput=function(V){var q=f.speakerDevices.delete(V),J=f.ringtoneDevices.delete(V);return q||J},f._updateAvailableDevices=function(){return f._mediaDevices&&f._enumerateDevices?f._enumerateDevices().then(function(V){f._updateDevices(V.filter(function(J){return"audiooutput"===J.kind}),f.availableOutputDevices,f._removeLostOutput),f._updateDevices(V.filter(function(J){return"audioinput"===J.kind}),f.availableInputDevices,f._removeLostInput);var q=f.availableOutputDevices.get("default")||Array.from(f.availableOutputDevices.values())[0];[f.speakerDevices,f.ringtoneDevices].forEach(function(J){!J.get().size&&f.availableOutputDevices.size&&f.isOutputSelectionSupported&&J.set(q.deviceId).catch(function(re){f._log.warn("Unable to set audio output devices. "+re)})})}):Promise.reject("Enumeration not supported")},l=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},l),f._getUserMedia=d,f._mediaDevices=l.mediaDevices||A.default(),f._onActiveInputChanged=h,f._enumerateDevices="function"==typeof l.enumerateDevices?l.enumerateDevices:f._mediaDevices&&f._mediaDevices.enumerateDevices;var I=!(!l.AudioContext&&!l.audioContext),S=!!f._enumerateDevices;return f.isOutputSelectionSupported=S&&"function"==typeof l.setSinkId,f.isVolumeSupported=I,f.isVolumeSupported&&(f._audioContext=l.audioContext||l.AudioContext&&new l.AudioContext,f._audioContext&&(f._inputVolumeAnalyser=f._audioContext.createAnalyser(),f._inputVolumeAnalyser.fftSize=32,f._inputVolumeAnalyser.smoothingTimeConstant=.3)),f.ringtoneDevices=new O.default("ringtone",f.availableOutputDevices,m,f.isOutputSelectionSupported),f.speakerDevices=new O.default("speaker",f.availableOutputDevices,m,f.isOutputSelectionSupported),f.addListener("newListener",function(V){"inputVolume"===V&&f._maybeStartPollingVolume()}),f.addListener("removeListener",function(V){"inputVolume"===V&&f._maybeStopPollingVolume()}),f.once("newListener",function(){f.isOutputSelectionSupported||f._log.warn("Warning: This browser does not support audio output selection."),f.isVolumeSupported||f._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),S&&f._initializeEnumeration(),f}return v(y,b),Object.defineProperty(y.prototype,"audioConstraints",{get:function(){return this._audioConstraints},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"inputDevice",{get:function(){return this._inputDevice},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"inputStream",{get:function(){return this._inputStream},enumerable:!1,configurable:!0}),y.prototype._maybeStartPollingVolume=function(){var m=this;if(this.isVolumeSupported&&this._inputStream&&(this._updateVolumeSource(),!this._isPollingInputVolume&&this._inputVolumeAnalyser)){var d=new Uint8Array(this._inputVolumeAnalyser.frequencyBinCount);this._isPollingInputVolume=!0;var l=function(){if(m._isPollingInputVolume){if(m._inputVolumeAnalyser){m._inputVolumeAnalyser.getByteFrequencyData(d);var g=k.average(d);m.emit("inputVolume",g/255)}requestAnimationFrame(l)}};requestAnimationFrame(l)}},y.prototype._maybeStopPollingVolume=function(){this.isVolumeSupported&&(!this._isPollingInputVolume||this._inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))},y.prototype._unbind=function(){if(!this._mediaDevices||!this._enumerateDevices)throw new R.NotSupportedError("Enumeration is not supported");this._mediaDevices.removeEventListener&&(this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices),this._mediaDevices.removeEventListener("deviceinfochange",this._updateAvailableDevices))},y.prototype.disconnect=function(m){return this._maybeEnableSound(L.default.SoundName.Disconnect,m)},y.prototype.incoming=function(m){return this._maybeEnableSound(L.default.SoundName.Incoming,m)},y.prototype.outgoing=function(m){return this._maybeEnableSound(L.default.SoundName.Outgoing,m)},y.prototype.setAudioConstraints=function(m){return this._audioConstraints=Object.assign({},m),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()},y.prototype.setInputDevice=function(m){return k.isFirefox()?Promise.reject(new R.NotSupportedError("Firefox does not currently support opening multiple audio input tracks simultaneously, even across different tabs. As a result, Device.audio.setInputDevice is disabled on Firefox until support is added.\nRelated BugZilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324")):this._setInputDevice(m,!1)},y.prototype.unsetAudioConstraints=function(){return this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()},y.prototype.unsetInputDevice=function(){var m=this;return this.inputDevice?this._onActiveInputChanged(null).then(function(){m._replaceStream(null),m._inputDevice=null,m._maybeStopPollingVolume()}):Promise.resolve()},y.prototype._getUnknownDeviceIndex=function(m){var h=m.deviceId,d=m.kind,l=this._unknownDeviceIndexes[d][h];return l||(l=Object.keys(this._unknownDeviceIndexes[d]).length+1,this._unknownDeviceIndexes[d][h]=l),l},y.prototype._initializeEnumeration=function(){var m=this;if(!this._mediaDevices||!this._enumerateDevices)throw new R.NotSupportedError("Enumeration is not supported");this._mediaDevices.addEventListener&&(this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._mediaDevices.addEventListener("deviceinfochange",this._updateAvailableDevices)),this._updateAvailableDevices().then(function(){m.isOutputSelectionSupported&&Promise.all([m.speakerDevices.set("default"),m.ringtoneDevices.set("default")]).catch(function(h){m._log.warn("Warning: Unable to set audio output devices. "+h)})})},y.prototype._maybeEnableSound=function(m,h){return typeof h<"u"&&(this._enabledSounds[m]=h),this._enabledSounds[m]},y.prototype._replaceStream=function(m){this._inputStream&&this._inputStream.getTracks().forEach(function(h){h.stop()}),this._inputStream=m},y.prototype._setInputDevice=function(m,h){var d=this;if("string"!=typeof m)return Promise.reject(new R.InvalidArgumentError("Must specify the device to set"));var l=this.availableInputDevices.get(m);if(!l)return Promise.reject(new R.InvalidArgumentError("Device not found: "+m));if(this._inputDevice&&this._inputDevice.deviceId===m&&this._inputStream){if(!h)return Promise.resolve();this._inputStream.getTracks().forEach(function(f){f.stop()})}var g={audio:Object.assign({deviceId:{exact:m}},this.audioConstraints)};return this._getUserMedia(g).then(function(f){return d._onActiveInputChanged(f).then(function(){d._replaceStream(f),d._inputDevice=l,d._maybeStartPollingVolume()})})},y.prototype._updateDevices=function(m,h,d){var l=this,g=m.map(function(V){return V.deviceId}),f=Array.from(h.values()).map(function(V){return V.deviceId}),I=[],S=k.difference(f,g);S.forEach(function(V){var q=h.get(V);q&&(h.delete(V),d(q)&&I.push(q))});var x=!1;m.forEach(function(V){var q=h.get(V.deviceId),J=l._wrapMediaDeviceInfo(V);(!q||q.label!==J.label)&&(h.set(V.deviceId,J),x=!0)}),(x||S.length)&&(null!==this.inputDevice&&"default"===this.inputDevice.deviceId&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),this._setInputDevice(this.inputDevice.deviceId,!0)),this.emit("deviceChange",I))},y.prototype._updateVolumeSource=function(){if(this._inputStream&&this._audioContext&&this._inputVolumeAnalyser){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this._inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(m){this._log.warn("Unable to update volume source",m),delete this._inputVolumeSource}}},y.prototype._wrapMediaDeviceInfo=function(m){var h={deviceId:m.deviceId,groupId:m.groupId,kind:m.kind,label:m.label};if(!h.label)if("default"===h.deviceId)h.label="Default";else{var d=this._getUnknownDeviceIndex(m);h.label="Unknown "+E[h.kind]+" Device "+d}return new N.default(h)},y}(M.EventEmitter);_||(_={}),T.default=_},358:function(he,T,D){"use strict";var A,v=this&&this.__extends||(A=function(k,E){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(_[y]=b[y])})(k,E)},function(k,E){function _(){this.constructor=k}A(k,E),k.prototype=null===E?Object.create(E):(_.prototype=E.prototype,new _)}),M=this&&this.__awaiter||function(A,k,E,_){return new(E||(E=Promise))(function(y,m){function h(g){try{l(_.next(g))}catch(f){m(f)}}function d(g){try{l(_.throw(g))}catch(f){m(f)}}function l(g){g.done?y(g.value):function b(y){return y instanceof E?y:new E(function(m){m(y)})}(g.value).then(h,d)}l((_=_.apply(A,k||[])).next())})},L=this&&this.__generator||function(A,k){var _,b,y,m,E={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return m={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function h(l){return function(g){return function d(l){if(_)throw new TypeError("Generator is already executing.");for(;E;)try{if(_=1,b&&(y=2&l[0]?b.return:l[0]?b.throw||((y=b.return)&&y.call(b),0):b.next)&&!(y=y.call(b,l[1])).done)return y;switch(b=0,y&&(l=[2&l[0],y.value]),l[0]){case 0:case 1:y=l;break;case 4:return E.label++,{value:l[1],done:!1};case 5:E.label++,b=l[1],l=[0];continue;case 7:l=E.ops.pop(),E.trys.pop();continue;default:if(!(y=(y=E.trys).length>0&&y[y.length-1])&&(6===l[0]||2===l[0])){E=0;continue}if(3===l[0]&&(!y||l[1]>y[0]&&l[1]<y[3])){E.label=l[1];break}if(6===l[0]&&E.label<y[1]){E.label=y[1],y=l;break}if(y&&E.label<y[2]){E.label=y[2],E.ops.push(l);break}y[2]&&E.ops.pop(),E.trys.pop();continue}l=k.call(A,E)}catch(g){l=[6,g],b=0}finally{_=y=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,g])}}};Object.defineProperty(T,"__esModule",{value:!0});var R=D(148),O=function(A){function k(E,_,b){void 0===_&&(_={}),void 0===b&&(b={});var y=A.call(this)||this;return y._audioNode=null,y._loop=!1,y._pendingPlayDeferreds=[],y._sinkId="default",y._src="","string"!=typeof _&&(b=_),y._audioContext=E,y._audioElement=new(b.AudioFactory||Audio),y._bufferPromise=y._createPlayDeferred().promise,y._destination=y._audioContext.destination,y._gainNode=y._audioContext.createGain(),y._gainNode.connect(y._destination),y._XMLHttpRequest=b.XMLHttpRequestFactory||XMLHttpRequest,y.addEventListener("canplaythrough",function(){y._resolvePlayDeferreds()}),"string"==typeof _&&(y.src=_),y}return v(k,A),Object.defineProperty(k.prototype,"destination",{get:function(){return this._destination},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"loop",{get:function(){return this._loop},set:function(E){var _=this;!E&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",function b(){_._audioNode.removeEventListener("ended",b),_.pause()}),this._loop=E},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"muted",{get:function(){return 0===this._gainNode.gain.value},set:function(E){this._gainNode.gain.value=E?0:1},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"paused",{get:function(){return null===this._audioNode},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"src",{get:function(){return this._src},set:function(E){this._load(E)},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"srcObject",{get:function(){return this._audioElement.srcObject},set:function(E){this._audioElement.srcObject=E},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"sinkId",{get:function(){return this._sinkId},enumerable:!1,configurable:!0}),k.prototype.load=function(){this._load(this._src)},k.prototype.pause=function(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))},k.prototype.play=function(){return M(this,void 0,void 0,function(){var E,_=this;return L(this,function(b){switch(b.label){case 0:return this.paused?[3,2]:[4,this._bufferPromise];case 1:if(b.sent(),!this.paused)return[2];throw new Error("The play() request was interrupted by a call to pause().");case 2:return this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",function(){_._audioNode&&_._audioNode.loop||_.dispatchEvent("ended")}),[4,this._bufferPromise];case 3:if(E=b.sent(),this.paused)throw new Error("The play() request was interrupted by a call to pause().");return this._audioNode.buffer=E,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject?[2,this._audioElement.play()]:[2]}})})},k.prototype.setSinkId=function(E){return M(this,void 0,void 0,function(){return L(this,function(_){switch(_.label){case 0:if("function"!=typeof this._audioElement.setSinkId)throw new Error("This browser does not support setSinkId.");return E===this.sinkId?[2]:"default"===E?(this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=E,[2]):[4,this._audioElement.setSinkId(E)];case 1:return _.sent(),this._audioElement.srcObject||(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=E,this._gainNode.connect(this._destination)),[2]}})})},k.prototype._createPlayDeferred=function(){var E=new R.default;return this._pendingPlayDeferreds.push(E),E},k.prototype._load=function(E){var _=this;this._src&&this._src!==E&&this.pause(),this._src=E,this._bufferPromise=new Promise(function(b,y){return M(_,void 0,void 0,function(){var m;return L(this,function(h){switch(h.label){case 0:return E?[4,N(this._audioContext,this._XMLHttpRequest,E)]:[2,this._createPlayDeferred().promise];case 1:return m=h.sent(),this.dispatchEvent("canplaythrough"),b(m),[2]}})})})},k.prototype._rejectPlayDeferreds=function(E){var _=this._pendingPlayDeferreds;_.splice(0,_.length).forEach(function(b){return(0,b.reject)(E)})},k.prototype._resolvePlayDeferreds=function(E){var _=this._pendingPlayDeferreds;_.splice(0,_.length).forEach(function(b){return(0,b.resolve)(E)})},k}(D(94).default);function N(A,k,E){return M(this,void 0,void 0,function(){var _,b;return L(this,function(y){switch(y.label){case 0:return(_=new k).open("GET",E,!0),_.responseType="arraybuffer",[4,new Promise(function(m){_.addEventListener("load",m),_.send()})];case 1:b=y.sent();try{return[2,A.decodeAudioData(b.target.response)]}catch{return[2,new Promise(function(h){A.decodeAudioData(b.target.response,h)})]}return[2]}})})}T.default=O},148:(he,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var D=function(){function v(){var M=this;this.promise=new Promise(function(L,R){M._resolve=L,M._reject=R})}return Object.defineProperty(v.prototype,"reject",{get:function(){return this._reject},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"resolve",{get:function(){return this._resolve},enumerable:!1,configurable:!0}),v}();T.default=D},94:function(he,T,D){"use strict";var v=this&&this.__spreadArrays||function(){for(var R=0,U=0,O=arguments.length;U<O;U++)R+=arguments[U].length;var N=Array(R),A=0;for(U=0;U<O;U++)for(var k=arguments[U],E=0,_=k.length;E<_;E++,A++)N[A]=k[E];return N};Object.defineProperty(T,"__esModule",{value:!0});var M=D(16),L=function(){function R(){this._eventEmitter=new M.EventEmitter}return R.prototype.addEventListener=function(U,O){return this._eventEmitter.addListener(U,O)},R.prototype.dispatchEvent=function(U){for(var O,N=[],A=1;A<arguments.length;A++)N[A-1]=arguments[A];return(O=this._eventEmitter).emit.apply(O,v([U],N))},R.prototype.removeEventListener=function(U,O){return this._eventEmitter.removeListener(U,O)},R}();T.default=L},39:function(he,T,D){"use strict";var R,v=this&&this.__extends||(R=function(U,O){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,A){N.__proto__=A}||function(N,A){for(var k in A)Object.prototype.hasOwnProperty.call(A,k)&&(N[k]=A[k])})(U,O)},function(U,O){function N(){this.constructor=U}R(U,O),U.prototype=null===O?Object.create(O):(N.prototype=O.prototype,new N)});Object.defineProperty(T,"__esModule",{value:!0});var L=function(R){function U(O){var N=R.call(this)||this;return Object.defineProperties(N,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var A=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var k=Math.random(),E=Math.floor(k*this._jitter*A);A=1&Math.floor(10*k)?A+E:A-E}return 0|Math.min(A,this._max)}},_factor:{value:O.factor||2},_jitter:{value:O.jitter>0&&O.jitter<=1?O.jitter:0},_max:{value:O.max||1e4},_min:{value:O.min||100},_timeoutID:{value:null,writable:!0}}),N}return v(U,R),U.prototype.backoff=function(){var O=this,N=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,N),this._timeoutID=setTimeout(function(){O.emit("ready",O._attempts,N),O._attempts++},N)},U.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},U}(D(16).EventEmitter);T.default=L},487:function(he,T,D){"use strict";var Q,v=this&&this.__extends||(Q=function(F,j){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,C){W.__proto__=C}||function(W,C){for(var B in C)Object.prototype.hasOwnProperty.call(C,B)&&(W[B]=C[B])})(F,j)},function(F,j){function W(){this.constructor=F}Q(F,j),F.prototype=null===j?Object.create(j):(W.prototype=j.prototype,new W)}),M=this&&this.__assign||function(){return M=Object.assign||function(Q){for(var F,j=1,W=arguments.length;j<W;j++)for(var C in F=arguments[j])Object.prototype.hasOwnProperty.call(F,C)&&(Q[C]=F[C]);return Q},M.apply(this,arguments)};Object.defineProperty(T,"__esModule",{value:!0});var L=D(16),R=D(39),U=D(915),O=D(287),N=D(990),A=D(813),k=D(168),E=D(563),_=D(753),b=D(819),y=D(941),m=D(186).RELEASE_VERSION,h={factor:1.1,jitter:.5,max:3e4,min:1},S={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new O.MediaErrors.ConnectionError}},x={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},V={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},q={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"},J=function(Q){function F(j,W){var C=Q.call(this)||this;C.parameters={},C._inputVolumeStreak=0,C._isAnswered=!1,C._isCancelled=!1,C._isRejected=!1,C._latestInputVolume=0,C._latestOutputVolume=0,C._log=N.default.getInstance(),C._mediaStatus=F.State.Pending,C._messages=new Map,C._metricsSamples=[],C._options={MediaHandler:A.PeerConnection,offerSdp:null,shouldPlayDisconnect:function(){return!0},voiceEventSidGenerator:y.generateVoiceEventSid},C._outputVolumeStreak=0,C._shouldSendHangup=!0,C._signalingStatus=F.State.Pending,C._soundcache=new Map,C._status=F.State.Pending,C._wasConnected=!1,C.toString=function(){return"[Twilio.Call instance]"},C._emitWarning=function($,z,ee,se,Re,pe){var me=$+"warning"+(Re?"-cleared":"-raised");if("constant-audio-input-level"!==z||!C.isMuted()){var Fe=Re?"info":"warning";"constant-audio-output-level"===z&&(Fe="info");var ht={threshold:ee};se&&(se instanceof Array?ht.values=se.map(function(Yt){return"number"==typeof Yt?Math.round(100*Yt)/100:se}):ht.value=se),C._publisher.post(Fe,me,z,{data:ht},C),"constant-audio-output-level"!==z&&C.emit(Re?"warning-cleared":"warning",z,pe&&!Re?pe:null)}},C._onAck=function($){var ee=$.callsid;C.parameters.CallSid===ee?"message"===$.acktype&&C._onMessageSent($.voiceeventsid):C._log.warn("Received ack from a different callsid: "+ee)},C._onAnswer=function($){"string"==typeof $.reconnect&&(C._signalingReconnectToken=$.reconnect),(!C._isAnswered||C._status===F.State.Reconnecting)&&(C._setCallSid($),C._isAnswered=!0,C._maybeTransitionToOpen())},C._onCancel=function($){C.parameters.CallSid===$.callsid&&(C._isCancelled=!0,C._publisher.info("connection","cancel",null,C),C._cleanupEventListeners(),C._mediaHandler.close(),C._status=F.State.Closed,C.emit("cancel"),C._pstream.removeListener("cancel",C._onCancel))},C._onConnected=function(){C._log.info("Received connected from pstream"),C._signalingReconnectToken&&C._pstream.reconnect(C._mediaHandler.version.getSDP(),C.parameters.CallSid,C._signalingReconnectToken)},C._onHangup=function($){if(C.status()!==F.State.Closed){if($.callsid&&(C.parameters.CallSid||C.outboundConnectionId)){if($.callsid!==C.parameters.CallSid&&$.callsid!==C.outboundConnectionId)return}else if($.callsid)return;if(C._log.info("Received HANGUP from gateway"),$.error){var z=new O.GeneralErrors.ConnectionError("Error sent from gateway in HANGUP");C._log.error("Received an error from the gateway:",z),C.emit("error",z)}C._shouldSendHangup=!1,C._publisher.info("connection","disconnected-by-remote",null,C),C._disconnect(null,!0),C._cleanupEventListeners()}},C._onMediaFailure=function($){var z=F.MediaFailure,ee=z.ConnectionDisconnected,se=z.ConnectionFailed,pe=z.LowBytes,Ae=$===se||$===z.IceGatheringFailed;if(!b.isChrome(window,window.navigator)&&$===se)return C._mediaHandler.onerror(S);if(C._mediaStatus!==F.State.Reconnecting){var me=C._mediaHandler.version.pc,Fe=me&&"disconnected"===me.iceConnectionState,ht=C._monitor.hasActiveWarning("bytesSent","min")||C._monitor.hasActiveWarning("bytesReceived","min");if($===pe&&Fe||$===ee&&ht||Ae){var Se=new O.MediaErrors.ConnectionError("Media connection failed.");C._log.warn("ICE Connection disconnected."),C._publisher.warn("connection","error",Se,C),C._publisher.info("connection","reconnecting",null,C),C._mediaReconnectStartTime=Date.now(),C._status=F.State.Reconnecting,C._mediaStatus=F.State.Reconnecting,C._mediaReconnectBackoff.reset(),C._mediaReconnectBackoff.backoff(),C.emit("reconnecting",Se)}}else if(Ae){if(Date.now()-C._mediaReconnectStartTime>h.max)return C._log.info("Exceeded max ICE retries"),C._mediaHandler.onerror(S);try{C._mediaReconnectBackoff.backoff()}catch(Yt){if(!Yt.message||"Backoff in progress."!==Yt.message)throw Yt}}},C._onMediaReconnected=function(){C._mediaStatus===F.State.Reconnecting&&(C._log.info("ICE Connection reestablished."),C._mediaStatus=F.State.Open,C._signalingStatus===F.State.Open&&(C._publisher.info("connection","reconnected",null,C),C.emit("reconnected"),C._status=F.State.Open))},C._onMessageReceived=function($){var z=$.callsid;C.parameters.CallSid===z?C.emit("messageReceived",{content:$.content,contentType:$.contenttype,messageType:$.messagetype,voiceEventSid:$.voiceeventsid}):C._log.warn("Received a message from a different callsid: "+z)},C._onMessageSent=function($){if(C._messages.has($)){var z=C._messages.get($);C._messages.delete($),C.emit("messageSent",z)}else C._log.warn("Received a messageSent with a voiceEventSid that doesn't exists: "+$)},C._onRinging=function($){if(C._setCallSid($),C._status===F.State.Connecting||C._status===F.State.Ringing){var z=!!$.sdp;C._status=F.State.Ringing,C._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:z},C),C.emit("ringing",z)}},C._onRTCSample=function($){var z=M(M({},$),{inputVolume:C._latestInputVolume,outputVolume:C._latestOutputVolume});C._codec=z.codecName,C._metricsSamples.push(z),C._metricsSamples.length>=10&&C._publishMetrics(),C.emit("sample",$)},C._onSignalingError=function($){var z=$.callsid,ee=$.voiceeventsid;C.parameters.CallSid===z?ee&&C._messages.has(ee)&&(C._messages.delete(ee),C._log.warn("Received an error while sending a message.",$)):C._log.warn("Received an error from a different callsid: "+z)},C._onSignalingReconnected=function(){C._signalingStatus===F.State.Reconnecting&&(C._log.info("Signaling Connection reestablished."),C._signalingStatus=F.State.Open,C._mediaStatus===F.State.Open&&(C._publisher.info("connection","reconnected",null,C),C.emit("reconnected"),C._status=F.State.Open))},C._onTransportClose=function(){C._log.error("Received transportClose from pstream"),C.emit("transportClose"),C._signalingReconnectToken?(C._status=F.State.Reconnecting,C._signalingStatus=F.State.Reconnecting,C.emit("reconnecting",new O.SignalingErrors.ConnectionDisconnected)):(C._status=F.State.Closed,C._signalingStatus=F.State.Closed)},C._reemitWarning=function($,z){var Re,ee=/^audio/.test($.name)?"audio-level-":"network-quality-";$.name in x?Re=x[$.name][$.threshold.name]:$.name in V&&(Re=V[$.name]),C._emitWarning(ee,q[$.threshold.name]+Re,$.threshold.value,$.values||$.value,z,$)},C._reemitWarningCleared=function($){C._reemitWarning($,!0)},C._isUnifiedPlanDefault=j.isUnifiedPlanDefault,C._soundcache=j.soundcache,"function"==typeof j.onIgnore&&(C._onIgnore=j.onIgnore),C.customParameters=new Map(Object.entries(W&&W.twimlParams||{}).map(function($){return[$[0],String($[1])]})),Object.assign(C._options,W),C._options.callParameters&&(C.parameters=C._options.callParameters),C._options.reconnectToken&&(C._signalingReconnectToken=C._options.reconnectToken),C._voiceEventSidGenerator=C._options.voiceEventSidGenerator||y.generateVoiceEventSid,C._direction=C.parameters.CallSid?F.CallDirection.Incoming:F.CallDirection.Outgoing,C.callerInfo=C._direction===F.CallDirection.Incoming&&C.parameters&&C.parameters.StirStatus?{isVerified:"TN-Validation-Passed-A"===C.parameters.StirStatus}:null,C._mediaReconnectBackoff=new R.default(h),C._mediaReconnectBackoff.on("ready",function(){return C._mediaHandler.iceRestart()}),C.outboundConnectionId=function re(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Q){var F=16*Math.random()|0;return("x"===Q?F:3&F|8).toString(16)})}();var Y=C._publisher=j.publisher;C._direction===F.CallDirection.Incoming?Y.info("connection","incoming",null,C):Y.info("connection","outgoing",{preflight:C._options.preflight},C);var fe=C._monitor=new(C._options.StatsMonitor||_.default);return fe.on("sample",C._onRTCSample),fe.disableWarnings(),setTimeout(function(){return fe.enableWarnings()},5e3),fe.on("warning",function($,z){("bytesSent"===$.name||"bytesReceived"===$.name)&&C._onMediaFailure(F.MediaFailure.LowBytes),C._reemitWarning($,z)}),fe.on("warning-cleared",function($){C._reemitWarningCleared($)}),C._mediaHandler=new C._options.MediaHandler(j.audioHelper,j.pstream,j.getUserMedia,{RTCPeerConnection:C._options.RTCPeerConnection,codecPreferences:C._options.codecPreferences,dscp:C._options.dscp,forceAggressiveIceNomination:C._options.forceAggressiveIceNomination,isUnifiedPlan:C._isUnifiedPlanDefault,maxAverageBitrate:C._options.maxAverageBitrate,preflight:C._options.preflight}),C.on("volume",function($,z){C._inputVolumeStreak=C._checkVolume($,C._inputVolumeStreak,C._latestInputVolume,"input"),C._outputVolumeStreak=C._checkVolume(z,C._outputVolumeStreak,C._latestOutputVolume,"output"),C._latestInputVolume=$,C._latestOutputVolume=z}),C._mediaHandler.onaudio=function($){C._log.info("Remote audio created"),C.emit("audio",$)},C._mediaHandler.onvolume=function($,z,ee,se){fe.addVolumes(ee/255*32767,se/255*32767),C.emit("volume",$,z)},C._mediaHandler.ondtlstransportstatechange=function($){C._publisher.post("failed"===$?"error":"debug","dtls-transport-state",$,null,C)},C._mediaHandler.onpcconnectionstatechange=function($){var z="debug",ee=C._mediaHandler.getRTCDtlsTransport();"failed"===$&&(z=ee&&"failed"===ee.state?"error":"warning"),C._publisher.post(z,"pc-connection-state",$,null,C)},C._mediaHandler.onicecandidate=function($){var z=new k.IceCandidate($).toPayload();C._publisher.debug("ice-candidate","ice-candidate",z,C)},C._mediaHandler.onselectedcandidatepairchange=function($){var z=new k.IceCandidate($.local).toPayload(),ee=new k.IceCandidate($.remote,!0).toPayload();C._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:z,remote_candidate:ee},C)},C._mediaHandler.oniceconnectionstatechange=function($){C._publisher.post("failed"===$?"error":"debug","ice-connection-state",$,null,C)},C._mediaHandler.onicegatheringfailure=function($){C._publisher.warn("ice-gathering-state",$,null,C),C._onMediaFailure(F.MediaFailure.IceGatheringFailed)},C._mediaHandler.onicegatheringstatechange=function($){C._publisher.debug("ice-gathering-state",$,null,C)},C._mediaHandler.onsignalingstatechange=function($){C._publisher.debug("signaling-state",$,null,C)},C._mediaHandler.ondisconnected=function($){C._log.info($),C._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:$},C),C.emit("warning","ice-connectivity-lost"),C._onMediaFailure(F.MediaFailure.ConnectionDisconnected)},C._mediaHandler.onfailed=function($){C._onMediaFailure(F.MediaFailure.ConnectionFailed)},C._mediaHandler.onconnected=function(){C._status===F.State.Reconnecting&&C._onMediaReconnected()},C._mediaHandler.onreconnected=function($){C._log.info($),C._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:$},C),C.emit("warning-cleared","ice-connectivity-lost"),C._onMediaReconnected()},C._mediaHandler.onerror=function($){!0===$.disconnect&&C._disconnect($.info&&$.info.message);var z=$.info.twilioError||new O.GeneralErrors.UnknownError($.info.message);C._log.error("Received an error from MediaStream:",$),C.emit("error",z)},C._mediaHandler.onopen=function(){C._status===F.State.Open||C._status===F.State.Reconnecting||(C._status===F.State.Ringing||C._status===F.State.Connecting?(C.mute(!1),C._mediaStatus=F.State.Open,C._maybeTransitionToOpen()):C._mediaHandler.close())},C._mediaHandler.onclose=function(){C._status=F.State.Closed,C._options.shouldPlayDisconnect&&C._options.shouldPlayDisconnect()&&!C._isCancelled&&!C._isRejected&&C._soundcache.get(U.default.SoundName.Disconnect).play(),fe.disable(),C._publishMetrics(),!C._isCancelled&&!C._isRejected&&C.emit("disconnect",C)},C._pstream=j.pstream,C._pstream.on("ack",C._onAck),C._pstream.on("cancel",C._onCancel),C._pstream.on("error",C._onSignalingError),C._pstream.on("ringing",C._onRinging),C._pstream.on("transportClose",C._onTransportClose),C._pstream.on("connected",C._onConnected),C._pstream.on("message",C._onMessageReceived),C.on("error",function($){C._publisher.error("connection","error",{code:$.code,message:$.message},C),C._pstream&&"disconnected"===C._pstream.status&&C._cleanupEventListeners()}),C.on("disconnect",function(){C._cleanupEventListeners()}),C}return v(F,Q),Object.defineProperty(F.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"codec",{get:function(){return this._codec},enumerable:!1,configurable:!0}),F.prototype._setInputTracksFromStream=function(j){return this._mediaHandler.setInputTracksFromStream(j)},F.prototype._setSinkIds=function(j){return this._mediaHandler._setSinkIds(j)},F.prototype.accept=function(j){var W=this;if(this._status===F.State.Pending){var C=(j=j||{}).rtcConfiguration||this._options.rtcConfiguration,B=j.rtcConstraints||this._options.rtcConstraints||{},Y=B.audio||{audio:!0};this._status=F.State.Connecting,this._options.beforeAccept&&this._options.beforeAccept(this);var $="function"==typeof this._options.getInputStream&&this._options.getInputStream();($?this._mediaHandler.setInputTracksFromStream($):this._mediaHandler.openWithConstraints(Y)).then(function(){W._publisher.info("get-user-media","succeeded",{data:{audioConstraints:Y}},W),function(){if(W._status!==F.State.Connecting)return W._cleanupEventListeners(),void W._mediaHandler.close();var ee=function(pe,Ae){W._publisher.info("connection",W._direction===F.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote",null,W),"string"==typeof Ae&&(W._signalingReconnectToken=Ae);var Fe=E.getPreferredCodecInfo(W._mediaHandler.version.getSDP());W._publisher.info("settings","codec",{codec_params:Fe.codecParams,selected_codec:Fe.codecName},W),W._monitor.enable(pe)},se="function"==typeof W._options.getSinkIds&&W._options.getSinkIds();if(Array.isArray(se)&&W._mediaHandler._setSinkIds(se).catch(function(){}),W._pstream.addListener("hangup",W._onHangup),W._direction===F.CallDirection.Incoming)W._isAnswered=!0,W._pstream.on("answer",W._onAnswer),W._mediaHandler.answerIncomingCall(W.parameters.CallSid,W._options.offerSdp,B,C,ee);else{var Re=Array.from(W.customParameters.entries()).map(function(pe){return encodeURIComponent(pe[0])+"="+encodeURIComponent(pe[1])}).join("&");W._pstream.on("answer",W._onAnswer),W._mediaHandler.makeOutgoingCall(W._pstream.token,Re,W.outboundConnectionId,B,C,ee)}}()},function(ee){var se;31208===ee.code||-1!==["PermissionDeniedError","NotAllowedError"].indexOf(ee.name)?(se=new O.UserMediaErrors.PermissionDeniedError,W._publisher.error("get-user-media","denied",{data:{audioConstraints:Y,error:ee}},W)):(se=new O.UserMediaErrors.AcquisitionFailedError,W._publisher.error("get-user-media","failed",{data:{audioConstraints:Y,error:ee}},W)),W._disconnect(),W.emit("error",se)})}},F.prototype.disconnect=function(){this._disconnect()},F.prototype.getLocalStream=function(){return this._mediaHandler&&this._mediaHandler.stream},F.prototype.getRemoteStream=function(){return this._mediaHandler&&this._mediaHandler._remoteStream},F.prototype.ignore=function(){this._status===F.State.Pending&&(this._status=F.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore())},F.prototype.isMuted=function(){return this._mediaHandler.isMuted},F.prototype.mute=function(j){void 0===j&&(j=!0);var W=this._mediaHandler.isMuted;this._mediaHandler.mute(j);var C=this._mediaHandler.isMuted;W!==C&&(this._publisher.info("connection",C?"muted":"unmuted",null,this),this.emit("mute",C,this))},F.prototype.postFeedback=function(j,W){if(typeof j>"u"||null===j)return this._postFeedbackDeclined();if(!Object.values(F.FeedbackScore).includes(j))throw new O.InvalidArgumentError("Feedback score must be one of: "+Object.values(F.FeedbackScore));if(typeof W<"u"&&null!==W&&!Object.values(F.FeedbackIssue).includes(W))throw new O.InvalidArgumentError("Feedback issue must be one of: "+Object.values(F.FeedbackIssue));return this._publisher.info("feedback","received",{issue_name:W,quality_score:j},this,!0)},F.prototype.reject=function(){this._status===F.State.Pending&&(this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=F.State.Closed,this.emit("reject"))},F.prototype.sendDigits=function(j){if(j.match(/[^0-9*#w]/))throw new O.InvalidArgumentError("Illegal character passed into sendDigits");var W=[];j.split("").forEach(function(fe){var $="w"!==fe?"dtmf"+fe:"";"dtmf*"===$&&($="dtmfs"),"dtmf#"===$&&($="dtmfh"),W.push($)}),function fe($,z){var ee=W.shift();ee&&(z?z.play(ee):$.get(ee).play()),W.length&&setTimeout(fe.bind(null,$),200)}(this._soundcache,this._options.dialtonePlayer);var C=this._mediaHandler.getOrCreateDTMFSender();if(C){if(!("canInsertDTMF"in C)||C.canInsertDTMF)return this._log.info("Sending digits using RTCDTMFSender"),void function B(fe){if(fe.length){var $=fe.shift();$&&$.length&&C.insertDTMF($,160,70),setTimeout(B.bind(null,fe),500)}}(j.split("w"));this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),null!==this._pstream&&"disconnected"!==this._pstream.status)this._pstream.dtmf(this.parameters.CallSid,j);else{var Y=new O.GeneralErrors.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this.emit("error",Y)}},F.prototype.sendMessage=function(j){var W=j.content,C=j.contentType,B=j.messageType;if(typeof W>"u"||null===W)throw new O.InvalidArgumentError("`content` is empty");if("string"!=typeof B)throw new O.InvalidArgumentError("`messageType` must be an enumeration value of `Call.MessageType` or a string.");if(0===B.length)throw new O.InvalidArgumentError("`messageType` must be a non-empty string.");if(null===this._pstream)throw new O.InvalidStateError("Could not send CallMessage; Signaling channel is disconnected");var Y=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new O.InvalidStateError("Could not send CallMessage; Call has no CallSid");var fe=this._voiceEventSidGenerator();return this._messages.set(fe,{content:W,contentType:C,messageType:B,voiceEventSid:fe}),this._pstream.sendMessage(Y,W,C,B,fe),fe},F.prototype.status=function(){return this._status},F.prototype._checkVolume=function(j,W,C,B){var Y=W>=10,fe=0;return C===j&&(fe=W),fe>=10?this._emitWarning("audio-level-","constant-audio-"+B+"-level",10,fe,!1):Y&&this._emitWarning("audio-level-","constant-audio-"+B+"-level",10,fe,!0),fe},F.prototype._cleanupEventListeners=function(){var j=this,W=function(){j._pstream&&(j._pstream.removeListener("ack",j._onAck),j._pstream.removeListener("answer",j._onAnswer),j._pstream.removeListener("cancel",j._onCancel),j._pstream.removeListener("error",j._onSignalingError),j._pstream.removeListener("hangup",j._onHangup),j._pstream.removeListener("ringing",j._onRinging),j._pstream.removeListener("transportClose",j._onTransportClose),j._pstream.removeListener("connected",j._onConnected),j._pstream.removeListener("message",j._onMessageReceived))};W(),setTimeout(W,0)},F.prototype._createMetricPayload=function(){var j={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:m};return this._options.gateway&&(j.gateway=this._options.gateway),j.direction=this._direction,j},F.prototype._disconnect=function(j,W){if(j="string"==typeof j?j:null,this._status===F.State.Open||this._status===F.State.Connecting||this._status===F.State.Reconnecting||this._status===F.State.Ringing){if(this._log.info("Disconnecting..."),null!==this._pstream&&"disconnected"!==this._pstream.status&&this._shouldSendHangup){var C=this.parameters.CallSid||this.outboundConnectionId;C&&this._pstream.hangup(C,j)}this._cleanupEventListeners(),this._mediaHandler.close(),W||this._publisher.info("connection","disconnected-by-local",null,this)}},F.prototype._maybeTransitionToOpen=function(){this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=F.State.Open,this._mediaHandler&&"open"===this._mediaHandler.status&&(this._status=F.State.Open,this._wasConnected||(this._wasConnected=!0,this.emit("accept",this))))},F.prototype._postFeedbackDeclined=function(){return this._publisher.info("feedback","received-none",null,this,!0)},F.prototype._publishMetrics=function(){var j=this;0!==this._metricsSamples.length&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(function(W){j._log.warn("Unable to post metrics to Insights. Received error:",W)})},F.prototype._setCallSid=function(j){var W=j.callsid;W&&(this.parameters.CallSid=W,this._mediaHandler.callSid=W)},F.toString=function(){return"[Twilio.Call class]"},F}(L.EventEmitter);!function(Q){var z;(z=Q.State||(Q.State={})).Closed="closed",z.Connecting="connecting",z.Open="open",z.Pending="pending",z.Reconnecting="reconnecting",z.Ringing="ringing",function(z){z.AudioLatency="audio-latency",z.ChoppyAudio="choppy-audio",z.DroppedCall="dropped-call",z.Echo="echo",z.NoisyCall="noisy-call",z.OneWayAudio="one-way-audio"}(Q.FeedbackIssue||(Q.FeedbackIssue={})),function(z){z[z.One=1]="One",z[z.Two=2]="Two",z[z.Three=3]="Three",z[z.Four=4]="Four",z[z.Five=5]="Five"}(Q.FeedbackScore||(Q.FeedbackScore={})),function(z){z.Incoming="INCOMING",z.Outgoing="OUTGOING"}(Q.CallDirection||(Q.CallDirection={})),function(z){z.Opus="opus",z.PCMU="pcmu"}(Q.Codec||(Q.Codec={})),function(z){z.None="none",z.Timeout="timeout"}(Q.IceGatheringFailureReason||(Q.IceGatheringFailureReason={})),function(z){z.ConnectionDisconnected="ConnectionDisconnected",z.ConnectionFailed="ConnectionFailed",z.IceGatheringFailed="IceGatheringFailed",z.LowBytes="LowBytes"}(Q.MediaFailure||(Q.MediaFailure={})),function(z){z.UserDefinedMessage="user-defined-message"}(Q.MessageType||(Q.MessageType={}))}(J||(J={})),T.default=J},186:(he,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SOUNDS_BASE_URL=T.RELEASE_VERSION=T.PACKAGE_NAME=T.ECHO_TEST_DURATION=T.COWBELL_AUDIO_URL=void 0,T.PACKAGE_NAME="@twilio/voice-sdk";var v="2.6.0";T.RELEASE_VERSION=v;var M="https://sdk.twilio.com/js/client/sounds/releases/1.0.0";T.SOUNDS_BASE_URL=M,T.COWBELL_AUDIO_URL=M+"/cowbell.mp3?cache="+v,T.ECHO_TEST_DURATION=2e4},765:(he,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var D=function(){function v(){var M=this;this._promise=new Promise(function(L,R){M._resolve=L,M._reject=R})}return Object.defineProperty(v.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),v.prototype.reject=function(M){this._reject(M)},v.prototype.resolve=function(M){this._resolve(M)},v}();T.default=D},915:function(he,T,D){"use strict";var Q,v=this&&this.__extends||(Q=function(F,j){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,C){W.__proto__=C}||function(W,C){for(var B in C)Object.prototype.hasOwnProperty.call(C,B)&&(W[B]=C[B])})(F,j)},function(F,j){function W(){this.constructor=F}Q(F,j),F.prototype=null===j?Object.create(j):(W.prototype=j.prototype,new W)}),M=this&&this.__assign||function(){return M=Object.assign||function(Q){for(var F,j=1,W=arguments.length;j<W;j++)for(var C in F=arguments[j])Object.prototype.hasOwnProperty.call(F,C)&&(Q[C]=F[C]);return Q},M.apply(this,arguments)},L=this&&this.__awaiter||function(Q,F,j,W){return new(j||(j=Promise))(function(B,Y){function fe(ee){try{z(W.next(ee))}catch(se){Y(se)}}function $(ee){try{z(W.throw(ee))}catch(se){Y(se)}}function z(ee){ee.done?B(ee.value):function C(B){return B instanceof j?B:new j(function(Y){Y(B)})}(ee.value).then(fe,$)}z((W=W.apply(Q,F||[])).next())})},R=this&&this.__generator||function(Q,F){var W,C,B,Y,j={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return Y={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(Y[Symbol.iterator]=function(){return this}),Y;function fe(z){return function(ee){return function $(z){if(W)throw new TypeError("Generator is already executing.");for(;j;)try{if(W=1,C&&(B=2&z[0]?C.return:z[0]?C.throw||((B=C.return)&&B.call(C),0):C.next)&&!(B=B.call(C,z[1])).done)return B;switch(C=0,B&&(z=[2&z[0],B.value]),z[0]){case 0:case 1:B=z;break;case 4:return j.label++,{value:z[1],done:!1};case 5:j.label++,C=z[1],z=[0];continue;case 7:z=j.ops.pop(),j.trys.pop();continue;default:if(!(B=(B=j.trys).length>0&&B[B.length-1])&&(6===z[0]||2===z[0])){j=0;continue}if(3===z[0]&&(!B||z[1]>B[0]&&z[1]<B[3])){j.label=z[1];break}if(6===z[0]&&j.label<B[1]){j.label=B[1],B=z;break}if(B&&j.label<B[2]){j.label=B[2],j.ops.push(z);break}B[2]&&j.ops.pop(),j.trys.pop();continue}z=F.call(Q,j)}catch(ee){z=[6,ee],C=0}finally{W=B=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([z,ee])}}};Object.defineProperty(T,"__esModule",{value:!0});var U=D(16),O=D(182),N=D(170),A=D(487),k=D(186),E=D(9),_=D(287),b=D(694),y=D(990),m=D(579),h=D(696),d=D(351),l=D(813),g=D(11),f=D(68),I=D(819),S=D(941),re=function(Q){function F(j,W){var C;void 0===W&&(W={});var B=Q.call(this)||this;if(B._activeCall=null,B._audio=null,B._callInputStream=null,B._calls=[],B._callSinkIds=["default"],B._chunderURIs=[],B._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[A.default.Codec.PCMU,A.default.Codec.Opus],dscp:!0,forceAggressiveIceNomination:!1,logLevel:O.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:S.generateVoiceEventSid},B._edge=null,B._home=null,B._identity=null,B._log=y.default.getInstance(),B._options={},B._preferredURI=null,B._publisher=null,B._region=null,B._regTimer=null,B._shouldReRegister=!1,B._soundcache=new Map,B._state=F.State.Unregistered,B._stateEventMapping=((C={})[F.State.Destroyed]=F.EventName.Destroyed,C[F.State.Unregistered]=F.EventName.Unregistered,C[F.State.Registering]=F.EventName.Registering,C[F.State.Registered]=F.EventName.Registered,C),B._stream=null,B._streamConnectedPromise=null,B._tokenWillExpireTimeout=null,B._createDefaultPayload=function(z){var ee={aggressive_nomination:B._options.forceAggressiveIceNomination,browser_extension:B._isBrowserExtension,dscp:!!B._options.dscp,ice_restart_enabled:!0,platform:l.getMediaEngine(),sdk_version:k.RELEASE_VERSION};function se(pe,Ae){Ae&&(ee[pe]=Ae)}if(z){var Re=z.parameters.CallSid;se("call_sid",/^TJ/.test(Re)?void 0:Re),se("temp_call_sid",z.outboundConnectionId),se("audio_codec",z.codec),ee.direction=z.direction}return se("gateway",B._stream&&B._stream.gateway),se("region",B._stream&&B._stream.region),ee},B._onSignalingClose=function(){B._stream=null,B._streamConnectedPromise=null},B._onSignalingConnected=function(z){var ee,se=d.getRegionShortcode(z.region);if(B._edge=z.edge||d.regionToEdge[se]||z.region,B._region=se||z.region,B._home=z.home,null===(ee=B._publisher)||void 0===ee||ee.setHost(d.createEventGatewayURI(z.home)),z.token&&(B._identity=z.token.identity,"number"==typeof z.token.ttl&&"number"==typeof B._options.tokenRefreshMs)){var pe=Math.max(0,1e3*z.token.ttl-B._options.tokenRefreshMs);B._tokenWillExpireTimeout=setTimeout(function(){B.emit("tokenWillExpire",B),B._tokenWillExpireTimeout&&(clearTimeout(B._tokenWillExpireTimeout),B._tokenWillExpireTimeout=null)},pe)}var Ae=d.getChunderURIs(B._edge);Ae.length>0?B._preferredURI=d.createSignalingEndpointURL(Ae[0]):B._log.info("Could not parse a preferred URI from the stream#connected event."),B._shouldReRegister&&B.register()},B._onSignalingError=function(z){if("object"==typeof z){var ee=z.error,se=z.callsid;if("object"==typeof ee){var Re="string"==typeof se&&B._findCall(se)||void 0,pe=ee.code,Ae=ee.message,me=ee.twilioError;"number"==typeof pe&&(31201===pe?me=new _.AuthorizationErrors.AuthenticationFailed(ee):31204===pe?me=new _.AuthorizationErrors.AccessTokenInvalid(ee):31205===pe?(B._stopRegistrationTimer(),me=new _.AuthorizationErrors.AccessTokenExpired(ee)):_.hasErrorByCode(pe)&&(me=new(_.getErrorByCode(pe))(ee))),me||(B._log.error("Unknown signaling error: ",ee),me=new _.GeneralErrors.UnknownError(Ae,ee)),B._log.info("Received error: ",me),B.emit(F.EventName.Error,me,Re)}}},B._onSignalingInvite=function(z){return L(B,void 0,void 0,function(){var ee,se,Re,pe,Ae,Fe,me=this;return R(this,function(ht){switch(ht.label){case 0:return(ee=!!this._activeCall)&&!this._options.allowIncomingWhileBusy?(this._log.info("Device busy; ignoring incoming invite"),[2]):z.callsid&&z.sdp?((se=z.parameters||{}).CallSid=se.CallSid||z.callsid,Re=Object.assign({},I.queryToJson(se.Params)),[4,this._makeCall(Re,{callParameters:se,offerSdp:z.sdp,reconnectToken:z.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator})]):(this.emit(F.EventName.Error,new _.ClientErrors.BadRequest("Malformed invite from gateway")),[2]);case 1:return pe=ht.sent(),this._calls.push(pe),pe.once("accept",function(){me._soundcache.get(F.SoundName.Incoming).stop(),me._publishNetworkChange()}),Ae=null!==(Fe=this._audio)&&void 0!==Fe&&Fe.incoming()&&!ee?function(){return me._soundcache.get(F.SoundName.Incoming).play()}:function(){return Promise.resolve()},this._showIncomingCall(pe,Ae),[2]}})})},B._onSignalingOffline=function(){B._log.info("Stream is offline"),B._edge=null,B._region=null,B._shouldReRegister=B.state!==F.State.Unregistered,B._setState(F.State.Unregistered)},B._onSignalingReady=function(){B._log.info("Stream is ready"),B._setState(F.State.Registered)},B._publishNetworkChange=function(){B._activeCall&&B._networkInformation&&B._publisher.info("network-information","network-change",{connection_type:B._networkInformation.type,downlink:B._networkInformation.downlink,downlinkMax:B._networkInformation.downlinkMax,effective_type:B._networkInformation.effectiveType,rtt:B._networkInformation.rtt},B._activeCall)},B._updateInputStream=function(z){var ee=B._activeCall;return ee&&!z?Promise.reject(new _.InvalidStateError("Cannot unset input device while a call is in progress.")):(B._callInputStream=z,ee?ee._setInputTracksFromStream(z):Promise.resolve())},B._updateSinkIds=function(z,ee){return("ringtone"===z?B._updateRingtoneSinkIds(ee):B._updateSpeakerSinkIds(ee)).then(function(){B._publisher.info("audio",z+"-devices-set",{audio_device_ids:ee},B._activeCall)},function(Re){throw B._publisher.error("audio",z+"-devices-set-failed",{audio_device_ids:ee,message:Re.message},B._activeCall),Re})},B.updateToken(j),I.isLegacyEdge())throw new _.NotSupportedError("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!F.isSupported&&W.ignoreBrowserSupport)throw window&&window.location&&"http:"===window.location.protocol?new _.NotSupportedError("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new _.NotSupportedError("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");if(window){var Y=window,fe=Y.msBrowser||Y.browser||Y.chrome;B._isBrowserExtension=!!fe&&!!fe.runtime&&!!fe.runtime.id||!!Y.safari&&!!Y.safari.extension}if(B._isBrowserExtension&&B._log.info("Running as browser extension."),navigator){var $=navigator;B._networkInformation=$.connection||$.mozConnection||$.webkitConnection}return B._networkInformation&&"function"==typeof B._networkInformation.addEventListener&&B._networkInformation.addEventListener("change",B._publishNetworkChange),F._getOrCreateAudioContext(),F._audioContext&&(F._dialtonePlayer||(F._dialtonePlayer=new E.default(F._audioContext))),typeof F._isUnifiedPlanDefault>"u"&&(F._isUnifiedPlanDefault=typeof window<"u"&&typeof RTCPeerConnection<"u"&&typeof RTCRtpTransceiver<"u"&&I.isUnifiedPlanDefault(window,window.navigator,RTCPeerConnection,RTCRtpTransceiver)),B._boundDestroy=B.destroy.bind(B),B._boundConfirmClose=B._confirmClose.bind(B),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",B._boundDestroy),window.addEventListener("pagehide",B._boundDestroy)),B.updateOptions(W),B}return v(F,Q),Object.defineProperty(F,"audioContext",{get:function(){return F._audioContext},enumerable:!1,configurable:!0}),Object.defineProperty(F,"extension",{get:function(){var W,C,j=typeof document<"u"?document.createElement("audio"):{canPlayType:!1};try{W=j.canPlayType&&!!j.canPlayType("audio/mpeg").replace(/no/,"")}catch{W=!1}try{C=j.canPlayType&&!!j.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{C=!1}return C&&!W?"ogg":"mp3"},enumerable:!1,configurable:!0}),Object.defineProperty(F,"isSupported",{get:function(){return l.enabled()},enumerable:!1,configurable:!0}),Object.defineProperty(F,"packageName",{get:function(){return k.PACKAGE_NAME},enumerable:!1,configurable:!0}),F.runPreflight=function(j,W){return new m.PreflightTest(j,M({audioContext:F._getOrCreateAudioContext()},W))},F.toString=function(){return"[Twilio.Device class]"},Object.defineProperty(F,"version",{get:function(){return k.RELEASE_VERSION},enumerable:!1,configurable:!0}),F._getOrCreateAudioContext=function(){return F._audioContext||(typeof AudioContext<"u"?F._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(F._audioContext=new webkitAudioContext)),F._audioContext},Object.defineProperty(F.prototype,"audio",{get:function(){return this._audio},enumerable:!1,configurable:!0}),F.prototype.connect=function(j){return void 0===j&&(j={}),L(this,void 0,void 0,function(){var W,C;return R(this,function(B){switch(B.label){case 0:if(this._throwIfDestroyed(),this._activeCall)throw new _.InvalidStateError("A Call is already active");return C=this,[4,this._makeCall(j.params||{},{rtcConfiguration:j.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator})];case 1:return W=C._activeCall=B.sent(),this._calls.splice(0).forEach(function(Y){return Y.ignore()}),this._soundcache.get(F.SoundName.Incoming).stop(),W.accept({rtcConstraints:j.rtcConstraints}),this._publishNetworkChange(),[2,W]}})})},Object.defineProperty(F.prototype,"calls",{get:function(){return this._calls},enumerable:!1,configurable:!0}),F.prototype.destroy=function(){this.disconnectAll(),this._stopRegistrationTimer(),this._audio&&this._audio._unbind(),this._destroyStream(),this._destroyPublisher(),this._destroyAudioHelper(),this._networkInformation&&"function"==typeof this._networkInformation.removeEventListener&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(F.State.Destroyed),U.EventEmitter.prototype.removeAllListeners.call(this)},F.prototype.disconnectAll=function(){this._calls.splice(0).forEach(function(W){return W.disconnect()}),this._activeCall&&this._activeCall.disconnect()},Object.defineProperty(F.prototype,"edge",{get:function(){return this._edge},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"home",{get:function(){return this._home},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"identity",{get:function(){return this._identity},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"isBusy",{get:function(){return!!this._activeCall},enumerable:!1,configurable:!0}),F.prototype.register=function(){return L(this,void 0,void 0,function(){var W,C=this;return R(this,function(B){switch(B.label){case 0:if(this.state!==F.State.Unregistered)throw new _.InvalidStateError('Attempt to register when device is in state "'+this.state+'". Must be "'+F.State.Unregistered+'".');return this._setState(F.State.Registering),[4,this._streamConnectedPromise||this._setupStream()];case 1:return B.sent(),W=new Promise(function(Y){C.once(F.State.Registered,Y)}),[4,this._sendPresence(!0)];case 2:return B.sent(),[4,W];case 3:return B.sent(),[2]}})})},Object.defineProperty(F.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),F.prototype.toString=function(){return"[Twilio.Device instance]"},F.prototype.unregister=function(){return L(this,void 0,void 0,function(){var j,W;return R(this,function(C){switch(C.label){case 0:if(this.state!==F.State.Registered)throw new _.InvalidStateError('Attempt to unregister when device is in state "'+this.state+'". Must be "'+F.State.Registered+'".');return this._shouldReRegister=!1,[4,this._streamConnectedPromise];case 1:return j=C.sent(),W=new Promise(function(B){j.on("offline",B)}),[4,this._sendPresence(!1)];case 2:return C.sent(),[4,W];case 3:return C.sent(),[2]}})})},F.prototype.updateOptions=function(j){if(void 0===j&&(j={}),this.state===F.State.Destroyed)throw new _.InvalidStateError('Attempt to "updateOptions" when device is in state "'+this.state+'".');this._options=M(M(M({},this._defaultOptions),this._options),j);var W=new Set(this._chunderURIs),C="string"==typeof this._options.chunderw?[this._options.chunderw]:Array.isArray(this._options.chunderw)&&this._options.chunderw,B=this._chunderURIs=(C||d.getChunderURIs(this._options.edge)).map(d.createSignalingEndpointURL),Y=W.size!==B.length;if(!Y)for(var fe=0,$=B;fe<$.length;fe++)if(!W.has($[fe])){Y=!0;break}if(this.isBusy&&Y)throw new _.InvalidStateError("Cannot change Edge while on an active Call");this._log.setDefaultLevel("number"==typeof this._options.logLevel?this._options.logLevel:O.levels.ERROR),this._options.dscp&&(this._options.rtcConstraints||(this._options.rtcConstraints={}),this._options.rtcConstraints.optional=[{googDscp:!0}]);for(var ee=0,se=Object.keys(F._defaultSounds);ee<se.length;ee++){var Re=se[ee],pe=F._defaultSounds[Re],Fe=new(this._options.Sound||f.default)(Re,this._options.sounds&&this._options.sounds[Re]||k.SOUNDS_BASE_URL+"/"+pe.filename+"."+F.extension+"?cache="+k.RELEASE_VERSION,{audioContext:this._options.disableAudioContextSounds?null:F.audioContext,maxDuration:pe.maxDuration,shouldLoop:pe.shouldLoop});this._soundcache.set(Re,Fe)}this._setupAudioHelper(),this._setupPublisher(),Y&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&"function"==typeof window.addEventListener&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))},F.prototype.updateToken=function(j){if(this.state===F.State.Destroyed)throw new _.InvalidStateError('Attempt to "updateToken" when device is in state "'+this.state+'".');if("string"!=typeof j)throw new _.InvalidArgumentError('Parameter "token" must be of type "string".');this._token=j,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)},F.prototype._confirmClose=function(j){if(!this._activeCall)return"";var W=this._options.closeProtection||!1,C="string"!=typeof W?"A call is currently in-progress. Leaving or reloading this page will end the call.":W;return(j||window.event).returnValue=C,C},F.prototype._destroyAudioHelper=function(){this._audio&&(this._audio.removeAllListeners(),this._audio=null)},F.prototype._destroyPublisher=function(){this._publisher&&(this._publisher=null)},F.prototype._destroyStream=function(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null},F.prototype._findCall=function(j){return this._calls.find(function(W){return W.parameters.CallSid===j||W.outboundConnectionId===j})||null},F.prototype._makeCall=function(j,W){return L(this,void 0,void 0,function(){var C,B,Y,fe,$=this;return R(this,function(z){switch(z.label){case 0:if(typeof F._isUnifiedPlanDefault>"u")throw new _.InvalidStateError("Device has not been initialized.");return fe={audioHelper:this._audio,getUserMedia:this._options.getUserMedia||g.default,isUnifiedPlanDefault:F._isUnifiedPlanDefault,onIgnore:function(){$._soundcache.get(F.SoundName.Incoming).stop()}},[4,this._streamConnectedPromise||this._setupStream()];case 1:return fe.pstream=z.sent(),fe.publisher=this._publisher,fe.soundcache=this._soundcache,C=fe,W=Object.assign({MediaStream:this._options.MediaStream||l.PeerConnection,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:function(ee){!$._activeCall||$._activeCall===ee||($._activeCall.disconnect(),$._removeCall($._activeCall))},codecPreferences:this._options.codecPreferences,dialtonePlayer:F._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:function(){return $._options.fileInputStream||$._callInputStream},getSinkIds:function(){return $._callSinkIds},maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:function(){var ee;return null===(ee=$._audio)||void 0===ee?void 0:ee.disconnect()},twimlParams:j,voiceEventSidGenerator:this._options.voiceEventSidGenerator},W),B=function(){$._stream?null===$._activeCall&&0===$._calls.length&&$._stream.updatePreferredURI(null):$._log.warn("UnsetPreferredUri called without a stream")},Y=new(this._options.Call||A.default)(C,W),this._publisher.info("settings","init",{RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},Y),Y.once("accept",function(){var ee;$._stream.updatePreferredURI($._preferredURI),$._removeCall(Y),$._activeCall=Y,$._audio&&$._audio._maybeStartPollingVolume(),Y.direction===A.default.CallDirection.Outgoing&&null!==(ee=$._audio)&&void 0!==ee&&ee.outgoing()&&$._soundcache.get(F.SoundName.Outgoing).play();var se={edge:$._edge||$._region};$._options.edge&&(se.selected_edge=Array.isArray($._options.edge)?$._options.edge:[$._options.edge]),$._publisher.info("settings","edge",se,Y)}),Y.addListener("error",function(ee){"closed"===Y.status()&&($._removeCall(Y),B()),$._audio&&$._audio._maybeStopPollingVolume(),$._maybeStopIncomingSound()}),Y.once("cancel",function(){$._log.info("Canceled: "+Y.parameters.CallSid),$._removeCall(Y),B(),$._audio&&$._audio._maybeStopPollingVolume(),$._maybeStopIncomingSound()}),Y.once("disconnect",function(){$._audio&&$._audio._maybeStopPollingVolume(),$._removeCall(Y),B(),$._maybeStopIncomingSound()}),Y.once("reject",function(){$._log.info("Rejected: "+Y.parameters.CallSid),$._audio&&$._audio._maybeStopPollingVolume(),$._removeCall(Y),B(),$._maybeStopIncomingSound()}),Y.on("transportClose",function(){Y.status()===A.default.State.Pending&&($._audio&&$._audio._maybeStopPollingVolume(),$._removeCall(Y),$._maybeStopIncomingSound())}),[2,Y]}})})},F.prototype._maybeStopIncomingSound=function(){this._calls.length||this._soundcache.get(F.SoundName.Incoming).stop()},F.prototype._removeCall=function(j){this._activeCall===j&&(this._activeCall=null);for(var W=this._calls.length-1;W>=0;W--)j===this._calls[W]&&this._calls.splice(W,1)},F.prototype._sendPresence=function(j){return L(this,void 0,void 0,function(){var W;return R(this,function(C){switch(C.label){case 0:return[4,this._streamConnectedPromise];case 1:return(W=C.sent())?(W.register({audio:j}),j?this._startRegistrationTimer():this._stopRegistrationTimer(),[2]):[2]}})})},F.prototype._setState=function(j){j!==this.state&&(this._state=j,this.emit(this._stateEventMapping[j]))},F.prototype._setupAudioHelper=function(){var j=this;this._audio&&(this._log.info("Found existing audio helper; destroying..."),this._destroyAudioHelper()),this._audio=new(this._options.AudioHelper||N.default)(this._updateSinkIds,this._updateInputStream,this._options.getUserMedia||g.default,{audioContext:F.audioContext,enumerateDevices:this._options.enumerateDevices}),this._audio.on("deviceChange",function(W){var C=j._activeCall,B=W.map(function(Y){return Y.deviceId});j._publisher.info("audio","device-change",{lost_active_device_ids:B},C),C&&C._mediaHandler._onInputDevicesChanged()})},F.prototype._setupPublisher=function(){var j=this;this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());var W={defaultPayload:this._createDefaultPayload,log:this._log,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(W.host=this._options.eventgw),this._home&&(W.host=d.createEventGatewayURI(this._home)),this._publisher=new(this._options.Publisher||b.default)("twilio-js-sdk",this.token,W),!1===this._options.publishEvents?this._publisher.disable():this._publisher.on("error",function(C){j._log.warn("Cannot connect to insights.",C)}),this._publisher},F.prototype._setupStream=function(){var j=this;return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||h.default)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=new Promise(function(W){return j._stream.once("connected",function(){W(j._stream)})})},F.prototype._showIncomingCall=function(j,W){var B,C=this;return Promise.race([W(),new Promise(function(Y,fe){B=setTimeout(function(){fe(new Error("Playing incoming ringtone took too long; it might not play. Continuing execution..."))},2e3)})]).catch(function(Y){C._log.info(Y.message)}).then(function(){clearTimeout(B),C.emit(F.EventName.Incoming,j)})},F.prototype._startRegistrationTimer=function(){var j=this;this._stopRegistrationTimer(),this._regTimer=setTimeout(function(){j._sendPresence(!0)},3e4)},F.prototype._stopRegistrationTimer=function(){this._regTimer&&clearTimeout(this._regTimer)},F.prototype._throwIfDestroyed=function(){if(this.state===F.State.Destroyed)throw new _.InvalidStateError("Device has been destroyed.")},F.prototype._updateRingtoneSinkIds=function(j){return Promise.resolve(this._soundcache.get(F.SoundName.Incoming).setSinkIds(j))},F.prototype._updateSpeakerSinkIds=function(j){Array.from(this._soundcache.entries()).filter(function(C){return C[0]!==F.SoundName.Incoming}).forEach(function(C){return C[1].setSinkIds(j)}),this._callSinkIds=j;var W=this._activeCall;return W?W._setSinkIds(j):Promise.resolve()},F._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}},F}(U.EventEmitter);(function(Q){var C;(C=Q.EventName||(Q.EventName={})).Error="error",C.Incoming="incoming",C.Destroyed="destroyed",C.Unregistered="unregistered",C.Registering="registering",C.Registered="registered",C.TokenWillExpire="tokenWillExpire",function(C){C.Destroyed="destroyed",C.Unregistered="unregistered",C.Registering="registering",C.Registered="registered"}(Q.State||(Q.State={})),function(C){C.Incoming="incoming",C.Outgoing="outgoing",C.Disconnect="disconnect",C.Dtmf0="dtmf0",C.Dtmf1="dtmf1",C.Dtmf2="dtmf2",C.Dtmf3="dtmf3",C.Dtmf4="dtmf4",C.Dtmf5="dtmf5",C.Dtmf6="dtmf6",C.Dtmf7="dtmf7",C.Dtmf8="dtmf8",C.Dtmf9="dtmf9",C.DtmfS="dtmfs",C.DtmfH="dtmfh"}(Q.SoundName||(Q.SoundName={}))})(re||(re={})),T.default=re},9:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=D(287),M={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]},L=function(){function R(U){var O=this;this._context=U,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(function(N){N.connect(O._context.destination),N.gain.value=.1,O._gainNodes.push(N)})}return R.prototype.cleanup=function(){this._gainNodes.forEach(function(U){U.disconnect()})},R.prototype.play=function(U){var O=this,N=M[U];if(!N)throw new v.InvalidArgumentError("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach(function(k,E){k.type="sine",k.frequency.value=N[E],k.connect(O._gainNodes[E]),k.start(),k.stop(O._context.currentTime+.1),k.addEventListener("ended",function(){return k.disconnect()})})},R}();T.default=L},888:function(he,T,D){"use strict";var E,v=this&&this.__extends||(E=function(_,b){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(y[h]=m[h])})(_,b)},function(_,b){function y(){this.constructor=_}E(_,b),_.prototype=null===b?Object.create(b):(y.prototype=b.prototype,new y)});Object.defineProperty(T,"__esModule",{value:!0}),T.errorsByCode=T.MediaErrors=T.SignalingErrors=T.UserMediaErrors=T.MalformedRequestErrors=T.GeneralErrors=T.ClientErrors=T.AuthorizationErrors=T.TwilioError=void 0;var L,R,U,O,N,A,k,M=D(71);T.TwilioError=M.default,function(E){var _=function(m){function h(d,l){var g=m.call(this,d,l)||this;g.causes=[],g.code=20101,g.description="Invalid access token",g.explanation="Twilio was unable to validate your Access Token",g.name="AccessTokenInvalid",g.solutions=[],Object.setPrototypeOf(g,E.AccessTokenInvalid.prototype);var I="object"==typeof d?d:l;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(h,m),h}(M.default);E.AccessTokenInvalid=_;var b=function(m){function h(d,l){var g=m.call(this,d,l)||this;g.causes=[],g.code=20104,g.description="Access token expired or expiration date invalid",g.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",g.name="AccessTokenExpired",g.solutions=[],Object.setPrototypeOf(g,E.AccessTokenExpired.prototype);var I="object"==typeof d?d:l;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(h,m),h}(M.default);E.AccessTokenExpired=b;var y=function(m){function h(d,l){var g=m.call(this,d,l)||this;g.causes=[],g.code=20151,g.description="Authentication Failed",g.explanation="The Authentication with the provided JWT failed",g.name="AuthenticationFailed",g.solutions=[],Object.setPrototypeOf(g,E.AuthenticationFailed.prototype);var I="object"==typeof d?d:l;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(h,m),h}(M.default);E.AuthenticationFailed=y}(T.AuthorizationErrors||(T.AuthorizationErrors={})),function(E){var _=function(b){function y(m,h){var d=b.call(this,m,h)||this;d.causes=[],d.code=31400,d.description="Bad Request (HTTP/SIP)",d.explanation="The request could not be understood due to malformed syntax.",d.name="BadRequest",d.solutions=[],Object.setPrototypeOf(d,E.BadRequest.prototype);var g="object"==typeof m?m:h;return d.message=d.name+" ("+d.code+"): "+("string"==typeof m?m:d.explanation),d.originalError=g,d}return v(y,b),y}(M.default);E.BadRequest=_}(R=T.ClientErrors||(T.ClientErrors={})),function(E){var _=function(h){function d(l,g){var f=h.call(this,l,g)||this;f.causes=[],f.code=31e3,f.description="Unknown Error",f.explanation="An unknown error has occurred. See error details for more information.",f.name="UnknownError",f.solutions=[],Object.setPrototypeOf(f,E.UnknownError.prototype);var S="object"==typeof l?l:g;return f.message=f.name+" ("+f.code+"): "+("string"==typeof l?l:f.explanation),f.originalError=S,f}return v(d,h),d}(M.default);E.UnknownError=_;var b=function(h){function d(l,g){var f=h.call(this,l,g)||this;f.causes=[],f.code=31005,f.description="Connection error",f.explanation="A connection error occurred during the call",f.name="ConnectionError",f.solutions=[],Object.setPrototypeOf(f,E.ConnectionError.prototype);var S="object"==typeof l?l:g;return f.message=f.name+" ("+f.code+"): "+("string"==typeof l?l:f.explanation),f.originalError=S,f}return v(d,h),d}(M.default);E.ConnectionError=b;var y=function(h){function d(l,g){var f=h.call(this,l,g)||this;f.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],f.code=31008,f.description="Call cancelled",f.explanation="Unable to answer because the call has ended",f.name="CallCancelledError",f.solutions=[],Object.setPrototypeOf(f,E.CallCancelledError.prototype);var S="object"==typeof l?l:g;return f.message=f.name+" ("+f.code+"): "+("string"==typeof l?l:f.explanation),f.originalError=S,f}return v(d,h),d}(M.default);E.CallCancelledError=y;var m=function(h){function d(l,g){var f=h.call(this,l,g)||this;f.causes=[],f.code=31009,f.description="Transport error",f.explanation="No transport available to send or receive messages",f.name="TransportError",f.solutions=[],Object.setPrototypeOf(f,E.TransportError.prototype);var S="object"==typeof l?l:g;return f.message=f.name+" ("+f.code+"): "+("string"==typeof l?l:f.explanation),f.originalError=S,f}return v(d,h),d}(M.default);E.TransportError=m}(U=T.GeneralErrors||(T.GeneralErrors={})),function(E){var _=function(b){function y(m,h){var d=b.call(this,m,h)||this;d.causes=["Invalid content or MessageType passed to sendMessage method."],d.code=31100,d.description="The request had malformed syntax.",d.explanation="The request could not be understood due to malformed syntax.",d.name="MalformedRequestError",d.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(d,E.MalformedRequestError.prototype);var g="object"==typeof m?m:h;return d.message=d.name+" ("+d.code+"): "+("string"==typeof m?m:d.explanation),d.originalError=g,d}return v(y,b),y}(M.default);E.MalformedRequestError=_}(O=T.MalformedRequestErrors||(T.MalformedRequestErrors={})),function(E){var _=function(y){function m(h,d){var l=y.call(this,h,d)||this;l.causes=["Rate limit exceeded."],l.code=31206,l.description="Rate exceeded authorized limit.",l.explanation="The request performed exceeds the authorized limit.",l.name="RateExceededError",l.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(l,E.RateExceededError.prototype);var f="object"==typeof h?h:d;return l.message=l.name+" ("+l.code+"): "+("string"==typeof h?h:l.explanation),l.originalError=f,l}return v(m,y),m}(M.default);E.RateExceededError=_;var b=function(y){function m(h,d){var l=y.call(this,h,d)||this;l.causes=["The payload size of Call Message Event exceeds the authorized limit."],l.code=31209,l.description="Call Message Event Payload size exceeded authorized limit.",l.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",l.name="PayloadSizeExceededError",l.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(l,E.PayloadSizeExceededError.prototype);var f="object"==typeof h?h:d;return l.message=l.name+" ("+l.code+"): "+("string"==typeof h?h:l.explanation),l.originalError=f,l}return v(m,y),m}(M.default);E.PayloadSizeExceededError=b}(L=T.AuthorizationErrors||(T.AuthorizationErrors={})),function(E){var _=function(y){function m(h,d){var l=y.call(this,h,d)||this;l.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],l.code=31401,l.description="UserMedia Permission Denied Error",l.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",l.name="PermissionDeniedError",l.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(l,E.PermissionDeniedError.prototype);var f="object"==typeof h?h:d;return l.message=l.name+" ("+l.code+"): "+("string"==typeof h?h:l.explanation),l.originalError=f,l}return v(m,y),m}(M.default);E.PermissionDeniedError=_;var b=function(y){function m(h,d){var l=y.call(this,h,d)||this;l.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],l.code=31402,l.description="UserMedia Acquisition Failed Error",l.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",l.name="AcquisitionFailedError",l.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(l,E.AcquisitionFailedError.prototype);var f="object"==typeof h?h:d;return l.message=l.name+" ("+l.code+"): "+("string"==typeof h?h:l.explanation),l.originalError=f,l}return v(m,y),m}(M.default);E.AcquisitionFailedError=b}(N=T.UserMediaErrors||(T.UserMediaErrors={})),function(E){var _=function(y){function m(h,d){var l=y.call(this,h,d)||this;l.causes=[],l.code=53e3,l.description="Signaling connection error",l.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",l.name="ConnectionError",l.solutions=[],Object.setPrototypeOf(l,E.ConnectionError.prototype);var f="object"==typeof h?h:d;return l.message=l.name+" ("+l.code+"): "+("string"==typeof h?h:l.explanation),l.originalError=f,l}return v(m,y),m}(M.default);E.ConnectionError=_;var b=function(y){function m(h,d){var l=y.call(this,h,d)||this;l.causes=["The device running your application lost its Internet connection."],l.code=53001,l.description="Signaling connection disconnected",l.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",l.name="ConnectionDisconnected",l.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(l,E.ConnectionDisconnected.prototype);var f="object"==typeof h?h:d;return l.message=l.name+" ("+l.code+"): "+("string"==typeof h?h:l.explanation),l.originalError=f,l}return v(m,y),m}(M.default);E.ConnectionDisconnected=b}(A=T.SignalingErrors||(T.SignalingErrors={})),function(E){var _=function(m){function h(d,l){var g=m.call(this,d,l)||this;g.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],g.code=53400,g.description="Client is unable to create or apply a local media description",g.explanation="Raised whenever a Client is unable to create or apply a local media description.",g.name="ClientLocalDescFailed",g.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(g,E.ClientLocalDescFailed.prototype);var I="object"==typeof d?d:l;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(h,m),h}(M.default);E.ClientLocalDescFailed=_;var b=function(m){function h(d,l){var g=m.call(this,d,l)||this;g.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],g.code=53402,g.description="Client is unable to apply a remote media description",g.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",g.name="ClientRemoteDescFailed",g.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(g,E.ClientRemoteDescFailed.prototype);var I="object"==typeof d?d:l;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(h,m),h}(M.default);E.ClientRemoteDescFailed=b;var y=function(m){function h(d,l){var g=m.call(this,d,l)||this;g.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],g.code=53405,g.description="Media connection failed",g.explanation="Raised by the Client or Server whenever a media connection fails.",g.name="ConnectionError",g.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(g,E.ConnectionError.prototype);var I="object"==typeof d?d:l;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(h,m),h}(M.default);E.ConnectionError=y}(k=T.MediaErrors||(T.MediaErrors={})),T.errorsByCode=new Map([[20101,L.AccessTokenInvalid],[20104,L.AccessTokenExpired],[20151,L.AuthenticationFailed],[31400,R.BadRequest],[31e3,U.UnknownError],[31005,U.ConnectionError],[31008,U.CallCancelledError],[31009,U.TransportError],[31100,O.MalformedRequestError],[31206,L.RateExceededError],[31209,L.PayloadSizeExceededError],[31401,N.PermissionDeniedError],[31402,N.AcquisitionFailedError],[53e3,A.ConnectionError],[53001,A.ConnectionDisconnected],[53400,k.ClientLocalDescFailed],[53402,k.ClientRemoteDescFailed],[53405,k.ConnectionError]]),Object.freeze(T.errorsByCode)},287:function(he,T,D){"use strict";var A,v=this&&this.__extends||(A=function(k,E){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(_[y]=b[y])})(k,E)},function(k,E){function _(){this.constructor=k}A(k,E),k.prototype=null===E?Object.create(E):(_.prototype=E.prototype,new _)});Object.defineProperty(T,"__esModule",{value:!0}),T.UserMediaErrors=T.TwilioError=T.SignalingErrors=T.MediaErrors=T.GeneralErrors=T.ClientErrors=T.AuthorizationErrors=T.hasErrorByCode=T.getErrorByCode=T.NotSupportedError=T.InvalidStateError=T.InvalidArgumentError=void 0;var M=D(888);Object.defineProperty(T,"AuthorizationErrors",{enumerable:!0,get:function(){return M.AuthorizationErrors}}),Object.defineProperty(T,"ClientErrors",{enumerable:!0,get:function(){return M.ClientErrors}}),Object.defineProperty(T,"GeneralErrors",{enumerable:!0,get:function(){return M.GeneralErrors}}),Object.defineProperty(T,"MediaErrors",{enumerable:!0,get:function(){return M.MediaErrors}}),Object.defineProperty(T,"SignalingErrors",{enumerable:!0,get:function(){return M.SignalingErrors}}),Object.defineProperty(T,"TwilioError",{enumerable:!0,get:function(){return M.TwilioError}}),Object.defineProperty(T,"UserMediaErrors",{enumerable:!0,get:function(){return M.UserMediaErrors}});var L=function(A){function k(E){var _=A.call(this,E)||this;return _.name="InvalidArgumentError",_}return v(k,A),k}(Error);T.InvalidArgumentError=L;var R=function(A){function k(E){var _=A.call(this,E)||this;return _.name="InvalidStateError",_}return v(k,A),k}(Error);T.InvalidStateError=R;var U=function(A){function k(E){var _=A.call(this,E)||this;return _.name="NotSupportedError",_}return v(k,A),k}(Error);T.NotSupportedError=U,T.getErrorByCode=function O(A){var k=M.errorsByCode.get(A);if(!k)throw new L("Error code "+A+" not found");return k},T.hasErrorByCode=function N(A){return M.errorsByCode.has(A)}},71:function(he,T){"use strict";var M,D=this&&this.__extends||(M=function(L,R){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,O){U.__proto__=O}||function(U,O){for(var N in O)Object.prototype.hasOwnProperty.call(O,N)&&(U[N]=O[N])})(L,R)},function(L,R){function U(){this.constructor=L}M(L,R),L.prototype=null===R?Object.create(R):(U.prototype=R.prototype,new U)});Object.defineProperty(T,"__esModule",{value:!0});var v=function(M){function L(R,U){var O=M.call(this)||this;Object.setPrototypeOf(O,L.prototype);var A="object"==typeof R?R:U;return O.message=O.name+" ("+O.code+"): "+("string"==typeof R?R:O.explanation),O.originalError=A,O}return D(L,M),L}(Error);T.default=v},694:function(he,T,D){"use strict";var O,v=this&&this.__extends||(O=function(N,A){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,E){k.__proto__=E}||function(k,E){for(var _ in E)Object.prototype.hasOwnProperty.call(E,_)&&(k[_]=E[_])})(N,A)},function(N,A){function k(){this.constructor=N}O(N,A),N.prototype=null===A?Object.create(A):(k.prototype=A.prototype,new k)});Object.defineProperty(T,"__esModule",{value:!0});var M=D(16),L=D(74),R=function(O){function N(A,k,E){var _=O.call(this)||this;if(!(_ instanceof N))return new N(A,k,E);var b=(E=Object.assign({defaultPayload:function(){return{}}},E)).defaultPayload;"function"!=typeof b&&(b=function(){return Object.assign({},E.defaultPayload)});var y=!0,m=Object.assign({app_name:void 0,app_version:void 0},E.metadata);return Object.defineProperties(_,{_defaultPayload:{value:b},_host:{value:E.host,writable:!0},_isEnabled:{get:function(){return y},set:function(h){y=h}},_log:{value:E.log},_request:{value:E.request||L.default,writable:!0},_token:{value:k,writable:!0},isEnabled:{enumerable:!0,get:function(){return y}},metadata:{enumerable:!0,get:function(){return m}},productName:{enumerable:!0,value:A},token:{enumerable:!0,get:function(){return this._token}}}),_}return v(N,O),N}(M.EventEmitter);function U(O){return{audio_codec:O.codecName,audio_level_in:O.audioInputLevel,audio_level_out:O.audioOutputLevel,bytes_received:O.bytesReceived,bytes_sent:O.bytesSent,call_volume_input:O.inputVolume,call_volume_output:O.outputVolume,jitter:O.jitter,mos:O.mos&&Math.round(100*O.mos)/100,packets_lost:O.packetsLost,packets_lost_fraction:O.packetsLostFraction&&Math.round(100*O.packetsLostFraction)/100,packets_received:O.packetsReceived,rtt:O.rtt,timestamp:new Date(O.timestamp).toISOString(),total_bytes_received:O.totals.bytesReceived,total_bytes_sent:O.totals.bytesSent,total_packets_lost:O.totals.packetsLost,total_packets_received:O.totals.packetsReceived,total_packets_sent:O.totals.packetsSent}}R.prototype._post=function(N,A,k,E,_,b,y){var m=this;if(!((this.isEnabled||y)&&this._host&&b&&(b.parameters&&b.parameters.CallSid||b.outboundConnectionId)))return Promise.resolve();var h={group:k,level:A.toUpperCase(),name:E,payload:_&&_.forEach?_.slice(0):Object.assign(this._defaultPayload(b),_),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:(new Date).toISOString()};this.metadata&&(h.publisher_metadata=this.metadata);var d={body:h,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:"https://"+this._host+"/v4/"+N};return new Promise(function(l,g){m._request.post(d,function(f){f?(m.emit("error",f),g(f)):l()})}).catch(function(l){m._log.warn("Unable to post "+k+" "+E+" event to Insights. Received error: "+l)})},R.prototype.post=function(N,A,k,E,_,b){return this._post("EndpointEvents",N,A,k,E,_,b)},R.prototype.debug=function(N,A,k,E){return this.post("debug",N,A,k,E)},R.prototype.info=function(N,A,k,E){return this.post("info",N,A,k,E)},R.prototype.warn=function(N,A,k,E){return this.post("warning",N,A,k,E)},R.prototype.error=function(N,A,k,E){return this.post("error",N,A,k,E)},R.prototype.postMetrics=function(N,A,k,E,_){var b=this;return new Promise(function(y){var m=k.map(U).map(function(h){return Object.assign(h,E)});y(b._post("EndpointMetrics","info",N,A,m,_))})},R.prototype.setHost=function(N){this._host=N},R.prototype.setToken=function(N){this._token=N},R.prototype.enable=function(){this._isEnabled=!0},R.prototype.disable=function(){this._isEnabled=!1},T.default=R},990:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Logger=void 0;var v=D(182),M=D(186),L=function(){function R(U){try{this._log=(U&&U.LogLevelModule?U.LogLevelModule:v).getLogger(M.PACKAGE_NAME)}catch{console.warn("Cannot create custom logger"),this._log=console}}return R.getInstance=function(){return R.instance||(R.instance=new R),R.instance},R.prototype.debug=function(){for(var U,O=[],N=0;N<arguments.length;N++)O[N]=arguments[N];(U=this._log).debug.apply(U,O)},R.prototype.error=function(){for(var U,O=[],N=0;N<arguments.length;N++)O[N]=arguments[N];(U=this._log).error.apply(U,O)},R.prototype.getLogLevelInstance=function(){return this._log},R.prototype.info=function(){for(var U,O=[],N=0;N<arguments.length;N++)O[N]=arguments[N];(U=this._log).info.apply(U,O)},R.prototype.setDefaultLevel=function(U){this._log.setDefaultLevel?this._log.setDefaultLevel(U):console.warn("Logger cannot setDefaultLevel")},R.prototype.warn=function(){for(var U,O=[],N=0;N<arguments.length;N++)O[N]=arguments[N];(U=this._log).warn.apply(U,O)},R.levels=v.levels,R}();T.Logger=L.getInstance().getLogLevelInstance(),T.default=L},178:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=D(186),M=D(287),L=v.SOUNDS_BASE_URL+"/outgoing.mp3",R=function(){function U(O,N,A,k){this._name=O,this._availableDevices=N,this._beforeChange=A,this._isSupported=k,this._activeDevices=new Set}return U.prototype.delete=function(O){var N=!!this._activeDevices.delete(O),A=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&A&&this._activeDevices.add(A);var k=Array.from(this._activeDevices.values()).map(function(E){return E.deviceId});return this._beforeChange(this._name,k),!!N},U.prototype.get=function(){return this._activeDevices},U.prototype.set=function(O){var N=this;if(!this._isSupported)return Promise.reject(new M.NotSupportedError("This browser does not support audio output selection"));var A=Array.isArray(O)?O:[O];if(!A.length)return Promise.reject(new M.InvalidArgumentError("Must specify at least one device to set"));var k=[],E=A.map(function(_){var b=N._availableDevices.get(_);return b||k.push(_),b});return k.length?Promise.reject(new M.InvalidArgumentError("Devices not found: "+k.join(", "))):new Promise(function(_){_(N._beforeChange(N._name,A))}).then(function(){N._activeDevices.clear(),E.forEach(N._activeDevices.add,N._activeDevices)})},U.prototype.test=function(O){return void 0===O&&(O=L),this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(function(N){var A;return new Promise(function(k){(A=new Audio(O)).oncanplay=k}).then(function(){return A.setSinkId(N.deviceId).then(function(){return A.play()})})})):Promise.reject(new M.InvalidStateError("No active output devices to test")):Promise.reject(new M.NotSupportedError("This browser does not support audio output selection"))},U}();T.default=R},579:function(he,T,D){"use strict";var b,v=this&&this.__extends||(b=function(y,m){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(h[l]=d[l])})(y,m)},function(y,m){function h(){this.constructor=y}b(y,m),y.prototype=null===m?Object.create(m):(h.prototype=m.prototype,new h)}),M=this&&this.__assign||function(){return M=Object.assign||function(b){for(var y,m=1,h=arguments.length;m<h;m++)for(var d in y=arguments[m])Object.prototype.hasOwnProperty.call(y,d)&&(b[d]=y[d]);return b},M.apply(this,arguments)},L=this&&this.__awaiter||function(b,y,m,h){return new(m||(m=Promise))(function(l,g){function f(x){try{S(h.next(x))}catch(V){g(V)}}function I(x){try{S(h.throw(x))}catch(V){g(V)}}function S(x){x.done?l(x.value):function d(l){return l instanceof m?l:new m(function(g){g(l)})}(x.value).then(f,I)}S((h=h.apply(b,y||[])).next())})},R=this&&this.__generator||function(b,y){var h,d,l,g,m={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return g={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function f(S){return function(x){return function I(S){if(h)throw new TypeError("Generator is already executing.");for(;m;)try{if(h=1,d&&(l=2&S[0]?d.return:S[0]?d.throw||((l=d.return)&&l.call(d),0):d.next)&&!(l=l.call(d,S[1])).done)return l;switch(d=0,l&&(S=[2&S[0],l.value]),S[0]){case 0:case 1:l=S;break;case 4:return m.label++,{value:S[1],done:!1};case 5:m.label++,d=S[1],S=[0];continue;case 7:S=m.ops.pop(),m.trys.pop();continue;default:if(!(l=(l=m.trys).length>0&&l[l.length-1])&&(6===S[0]||2===S[0])){m=0;continue}if(3===S[0]&&(!l||S[1]>l[0]&&S[1]<l[3])){m.label=S[1];break}if(6===S[0]&&m.label<l[1]){m.label=l[1],l=S;break}if(l&&m.label<l[2]){m.label=l[2],m.ops.push(S);break}l[2]&&m.ops.pop(),m.trys.pop();continue}S=y.call(b,m)}catch(x){S=[6,x],d=0}finally{h=l=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([S,x])}}};Object.defineProperty(T,"__esModule",{value:!0}),T.PreflightTest=void 0;var U=D(16),O=D(487),N=D(915),A=D(287),k=D(610),E=D(186),_=function(b){function y(m,h){var d=b.call(this)||this;return d._hasInsightsErrored=!1,d._networkTiming={},d._options={codecPreferences:[O.default.Codec.PCMU,O.default.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},d._status=y.Status.Connecting,Object.assign(d._options,h),d._samples=[],d._warnings=[],d._startTime=Date.now(),d._initDevice(m,M(M({},d._options),{fileInputStream:d._options.fakeMicInput?d._getStreamFromFile():void 0})),d}return v(y,b),y.prototype.stop=function(){var m=this,h=new A.GeneralErrors.CallCancelledError;this._device?(this._device.once(N.default.EventName.Unregistered,function(){return m._onFailed(h)}),this._device.destroy()):this._onFailed(h)},y.prototype._emitWarning=function(m,h,d){var l={name:m,description:h};d&&(l.rtcWarning=d),this._warnings.push(l),this.emit(y.Events.Warning,l)},y.prototype._getCallQuality=function(m){return m>4.2?y.CallQuality.Excellent:m>=4.1&&m<=4.2?y.CallQuality.Great:m>=3.7&&m<=4?y.CallQuality.Good:m>=3.1&&m<=3.6?y.CallQuality.Fair:y.CallQuality.Degraded},y.prototype._getReport=function(){var m=this._getRTCStats(),h={start:this._startTime};this._endTime&&(h.end=this._endTime,h.duration=this._endTime-this._startTime);var d={callSid:this._callSid,edge:this._edge,iceCandidateStats:this._rtcIceCandidateStatsReport.iceCandidateStats,networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:m,testTiming:h,totals:this._getRTCSampleTotals(),warnings:this._warnings},l=this._rtcIceCandidateStatsReport.selectedIceCandidatePairStats;return l&&(d.selectedIceCandidatePairStats=l,d.isTurnRequired="relay"===l.localCandidate.candidateType||"relay"===l.remoteCandidate.candidateType),m&&(d.callQuality=this._getCallQuality(m.mos.average)),d},y.prototype._getRTCSampleTotals=function(){if(this._latestSample)return M({},this._latestSample.totals)},y.prototype._getRTCStats=function(){var m=this._samples.findIndex(function(d){return"number"==typeof d.mos&&d.mos>0}),h=m>=0?this._samples.slice(m):[];if(h&&h.length)return["jitter","mos","rtt"].reduce(function(d,l){var g,f=h.map(function(I){return I[l]});return M(M({},d),((g={})[l]={average:Number((f.reduce(function(I,S){return I+S})/f.length).toPrecision(5)),max:Math.max.apply(Math,f),min:Math.min.apply(Math,f)},g))},{})},y.prototype._getStreamFromFile=function(){var m=this._options.audioContext;if(!m)throw new A.NotSupportedError("Cannot fake input audio stream: AudioContext is not supported by this browser.");var h=new Audio(E.COWBELL_AUDIO_URL);h.addEventListener("canplaythrough",function(){return h.play()}),"function"==typeof h.setAttribute&&h.setAttribute("crossorigin","anonymous");var d=m.createMediaElementSource(h),l=m.createMediaStreamDestination();return d.connect(l),l.stream},y.prototype._initDevice=function(m,h){var d=this;try{this._device=new(h.deviceFactory||N.default)(m,{codecPreferences:h.codecPreferences,edge:h.edge,fileInputStream:h.fileInputStream,logLevel:h.logLevel,preflight:!0}),this._device.once(N.default.EventName.Registered,function(){d._onDeviceRegistered()}),this._device.once(N.default.EventName.Error,function(l){d._onDeviceError(l)}),this._device.register()}catch(l){return void setTimeout(function(){d._onFailed(l)})}this._signalingTimeoutTimer=setTimeout(function(){d._onDeviceError(new A.SignalingErrors.ConnectionError("WebSocket Connection Timeout"))},h.signalingTimeoutMs)},y.prototype._onDeviceError=function(m){this._device.destroy(),this._onFailed(m)},y.prototype._onDeviceRegistered=function(){return L(this,void 0,void 0,function(){var m,h,l=this;return R(this,function(g){switch(g.label){case 0:return clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),m=this,[4,this._device.connect({rtcConfiguration:this._options.rtcConfiguration})];case 1:return m._call=g.sent(),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput&&(this._echoTimer=setTimeout(function(){return l._device.disconnectAll()},E.ECHO_TEST_DURATION),(h=this._device.audio)&&(h.disconnect(!1),h.outgoing(!1))),this._call.once("disconnect",function(){l._device.once(N.default.EventName.Unregistered,function(){return l._onUnregistered()}),l._device.destroy()}),this._call._publisher.on("error",function(){l._hasInsightsErrored||l._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),l._hasInsightsErrored=!0}),[2]}})})},y.prototype._onFailed=function(m){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=y.Status.Failed,this.emit(y.Events.Failed,m)},y.prototype._onUnregistered=function(){var m=this;setTimeout(function(){m._status!==y.Status.Failed&&(clearTimeout(m._echoTimer),clearTimeout(m._signalingTimeoutTimer),m._releaseHandlers(),m._endTime=Date.now(),m._status=y.Status.Completed,m._report=m._getReport(),m.emit(y.Events.Completed,m._report))},10)},y.prototype._releaseHandlers=function(){[this._device,this._call].forEach(function(m){m&&m.eventNames().forEach(function(h){return m.removeAllListeners(h)})})},y.prototype._setupCallHandlers=function(m){var h=this;this._options.fakeMicInput&&m.once("volume",function(){m._mediaHandler.outputs.forEach(function(d){return d.audio.muted=!0})}),m.on("warning",function(d,l){h._emitWarning(d,"Received an RTCWarning. See .rtcWarning for the RTCWarning",l)}),m.once("accept",function(){h._callSid=m._mediaHandler.callSid,h._status=y.Status.Connected,h.emit(y.Events.Connected)}),m.on("sample",function(d){return L(h,void 0,void 0,function(){var l;return R(this,function(g){switch(g.label){case 0:return this._latestSample?[3,2]:(l=this,[4,(this._options.getRTCIceCandidateStatsReport||k.getRTCIceCandidateStatsReport)(m._mediaHandler.version.pc)]);case 1:l._rtcIceCandidateStatsReport=g.sent(),g.label=2;case 2:return this._latestSample=d,this._samples.push(d),this.emit(y.Events.Sample,d),[2]}})})}),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(function(d){var g=d.reportLabel,f="on"+d.type+"statechange",I=m._mediaHandler[f];m._mediaHandler[f]=function(S){var x=h._networkTiming[g]=h._networkTiming[g]||{start:0};"connecting"===S||"checking"===S?x.start=Date.now():("connected"===S||"stable"===S)&&!x.duration&&(x.end=Date.now(),x.duration=x.end-x.start),I(S)}})},Object.defineProperty(y.prototype,"callSid",{get:function(){return this._callSid},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"endTime",{get:function(){return this._endTime},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"latestSample",{get:function(){return this._latestSample},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"report",{get:function(){return this._report},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"startTime",{get:function(){return this._startTime},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),y}(U.EventEmitter);T.PreflightTest=_,function(b){var d;(d=b.CallQuality||(b.CallQuality={})).Excellent="excellent",d.Great="great",d.Good="good",d.Fair="fair",d.Degraded="degraded",function(d){d.Completed="completed",d.Connected="connected",d.Failed="failed",d.Sample="sample",d.Warning="warning"}(b.Events||(b.Events={})),function(d){d.Connecting="connecting",d.Connected="connected",d.Completed="completed",d.Failed="failed"}(b.Status||(b.Status={}))}(_=T.PreflightTest||(T.PreflightTest={})),T.PreflightTest=_},696:function(he,T,D){"use strict";var E,v=this&&this.__extends||(E=function(_,b){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(y[h]=m[h])})(_,b)},function(_,b){function y(){this.constructor=_}E(_,b),_.prototype=null===b?Object.create(b):(y.prototype=b.prototype,new y)});Object.defineProperty(T,"__esModule",{value:!0});var M=D(16),L=D(186),R=D(287),U=D(990),O=D(483),A=function(E){function _(b,y,m){var h=E.call(this)||this;if(!(h instanceof _))return new _(b,y,m);var d={TransportFactory:O.default};for(var l in m=m||{},d)l in m||(m[l]=d[l]);h.options=m,h.token=b||"",h.status="disconnected",h.gateway=null,h.region=null,h._messageQueue=[],h._preferredUri=null,h._uris=y,h._handleTransportClose=h._handleTransportClose.bind(h),h._handleTransportError=h._handleTransportError.bind(h),h._handleTransportMessage=h._handleTransportMessage.bind(h),h._handleTransportOpen=h._handleTransportOpen.bind(h),h._log=U.default.getInstance(),h.on("error",function(){h._log.warn("Unexpected error handled in pstream")});var g=h;return h.addListener("ready",function(){g.status="ready"}),h.addListener("offline",function(){g.status="offline"}),h.addListener("close",function(){g._log.info('Received "close" from server. Destroying PStream...'),g._destroy()}),h.transport=new h.options.TransportFactory(h._uris,{backoffMaxMs:h.options.backoffMaxMs,maxPreferredDurationMs:h.options.maxPreferredDurationMs}),Object.defineProperties(h,{uri:{enumerable:!0,get:function(){return this.transport.uri}}}),h.transport.on("close",h._handleTransportClose),h.transport.on("error",h._handleTransportError),h.transport.on("message",h._handleTransportMessage),h.transport.on("open",h._handleTransportOpen),h.transport.open(),h}return v(_,E),_}(M.EventEmitter);function k(){var E=typeof navigator<"u"?navigator:{};return{browser:{platform:E.platform||"unknown",userAgent:E.userAgent||"unknown"},p:"browser",plugin:"rtc",v:L.RELEASE_VERSION}}A.prototype._handleTransportClose=function(){this.emit("transportClose"),"disconnected"!==this.status&&("offline"!==this.status&&this.emit("offline",this),this.status="disconnected")},A.prototype._handleTransportError=function(E){this.emit("error",E?typeof E.code<"u"?{error:E}:E:{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new R.SignalingErrors.ConnectionDisconnected}})},A.prototype._handleTransportMessage=function(E){if(E&&E.data&&"string"==typeof E.data){var _=JSON.parse(E.data),b=_.type,y=_.payload,m=void 0===y?{}:y;this.gateway=m.gateway||this.gateway,this.region=m.region||this.region,"error"===b&&m.error&&(m.error.twilioError=new R.SignalingErrors.ConnectionError),this.emit(b,m)}},A.prototype._handleTransportOpen=function(){var E=this;this.status="connected",this.setToken(this.token),this.emit("transportOpen"),this._messageQueue.splice(0,this._messageQueue.length).forEach(function(b){return E._publish.apply(E,b)})},A.toString=function(){return"[Twilio.PStream class]"},A.prototype.toString=function(){return"[Twilio.PStream instance]"},A.prototype.setToken=function(E){this._log.info("Setting token and publishing listen"),this.token=E;var _={browserinfo:k(),token:E};this._publish("listen",_)},A.prototype.sendMessage=function(E,_,b,y,m){void 0===b&&(b="application/json"),this._publish("message",{callsid:E,content:_,contenttype:b,messagetype:y,voiceeventsid:m},!0)},A.prototype.register=function(E){this._publish("register",{media:E},!0)},A.prototype.invite=function(E,_,b,y){this._publish("invite",{callsid:_,preflight:!!b,sdp:E,twilio:y?{params:y}:{}},!0)},A.prototype.reconnect=function(E,_,b,y){this._publish("invite",{callsid:_,preflight:!1,reconnect:b,sdp:E,twilio:y?{params:y}:{}},!0)},A.prototype.answer=function(E,_){this._publish("answer",{sdp:E,callsid:_},!0)},A.prototype.dtmf=function(E,_){this._publish("dtmf",{callsid:E,dtmf:_},!0)},A.prototype.hangup=function(E,_){this._publish("hangup",_?{callsid:E,message:_}:{callsid:E},!0)},A.prototype.reject=function(E){this._publish("reject",{callsid:E},!0)},A.prototype.reinvite=function(E,_){this._publish("reinvite",{sdp:E,callsid:_},!1)},A.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)},A.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this},A.prototype.updatePreferredURI=function(E){this._preferredUri=E,this.transport.updatePreferredURI(E)},A.prototype.updateURIs=function(E){this._uris=E,this.transport.updateURIs(this._uris)},A.prototype.publish=function(E,_){return this._publish(E,_,!0)},A.prototype._publish=function(E,_,b){var y=JSON.stringify({payload:_,type:E,version:"1.6"});this.transport.send(y)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new R.GeneralErrors.TransportError}}),b&&this._messageQueue.push([E,_,!0]))},T.default=A},351:(he,T,D)=>{"use strict";var v;Object.defineProperty(T,"__esModule",{value:!0}),T.getRegionShortcode=T.getChunderURIs=T.createSignalingEndpointURL=T.createEventGatewayURI=T.defaultEdge=T.regionToEdge=T.regionShortcodes=T.Region=T.Edge=void 0;var L,_,R,M=D(287);function O(_){return"voice-js."+_+".twilio.com"}(_=L=T.Edge||(T.Edge={})).Sydney="sydney",_.SaoPaulo="sao-paulo",_.Dublin="dublin",_.Frankfurt="frankfurt",_.Tokyo="tokyo",_.Singapore="singapore",_.Ashburn="ashburn",_.Umatilla="umatilla",_.Roaming="roaming",_.AshburnIx="ashburn-ix",_.SanJoseIx="san-jose-ix",_.LondonIx="london-ix",_.FrankfurtIx="frankfurt-ix",_.SingaporeIx="singapore-ix",_.SydneyIx="sydney-ix",_.TokyoIx="tokyo-ix",function(_){_.Au1="au1",_.Au1Ix="au1-ix",_.Br1="br1",_.De1="de1",_.De1Ix="de1-ix",_.Gll="gll",_.Ie1="ie1",_.Ie1Ix="ie1-ix",_.Ie1Tnx="ie1-tnx",_.Jp1="jp1",_.Jp1Ix="jp1-ix",_.Sg1="sg1",_.Sg1Ix="sg1-ix",_.Sg1Tnx="sg1-tnx",_.Us1="us1",_.Us1Ix="us1-ix",_.Us1Tnx="us1-tnx",_.Us2="us2",_.Us2Ix="us2-ix",_.Us2Tnx="us2-tnx"}(R=T.Region||(T.Region={})),T.regionShortcodes={ASIAPAC_SINGAPORE:R.Sg1,ASIAPAC_SYDNEY:R.Au1,ASIAPAC_TOKYO:R.Jp1,EU_FRANKFURT:R.De1,EU_IRELAND:R.Ie1,SOUTH_AMERICA_SAO_PAULO:R.Br1,US_EAST_VIRGINIA:R.Us1,US_WEST_OREGON:R.Us2},T.regionToEdge=((v={})[R.Au1]=L.Sydney,v[R.Br1]=L.SaoPaulo,v[R.Ie1]=L.Dublin,v[R.De1]=L.Frankfurt,v[R.Jp1]=L.Tokyo,v[R.Sg1]=L.Singapore,v[R.Us1]=L.Ashburn,v[R.Us2]=L.Umatilla,v[R.Gll]=L.Roaming,v[R.Us1Ix]=L.AshburnIx,v[R.Us2Ix]=L.SanJoseIx,v[R.Ie1Ix]=L.LondonIx,v[R.De1Ix]=L.FrankfurtIx,v[R.Sg1Ix]=L.SingaporeIx,v[R.Au1Ix]=L.SydneyIx,v[R.Jp1Ix]=L.TokyoIx,v[R.Us1Tnx]=L.AshburnIx,v[R.Us2Tnx]=L.AshburnIx,v[R.Ie1Tnx]=L.LondonIx,v[R.Sg1Tnx]=L.SingaporeIx,v),T.defaultEdge=L.Roaming,T.createEventGatewayURI=function N(_){return _?"eventgw."+_+".twilio.com":"eventgw.twilio.com"},T.createSignalingEndpointURL=function A(_){return"wss://"+_+"/signal"},T.getChunderURIs=function k(_){if(_&&"string"!=typeof _&&!Array.isArray(_))throw new M.InvalidArgumentError("If `edge` is provided, it must be of type `string` or an array of strings.");return _?(Array.isArray(_)?_:[_]).map(function(m){return O(m)}):[O(T.defaultEdge)]},T.getRegionShortcode=function E(_){return T.regionShortcodes[_]||null}},74:(he,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function D(M,L,R){var U=JSON.stringify(L.body||{}),O=new Headers;L.headers=L.headers||[],Object.entries(L.headers).forEach(function(N){return O.append(N[0],N[1])}),fetch(L.url,{body:U,headers:O,method:M}).then(function(N){return N.text()},R).then(function(N){return R(null,N)},R)};v.get=function(L,R){return new this("GET",L,R)},v.post=function(L,R){return new this("POST",L,R)},T.default=v},11:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=D(287),M=D(819);T.default=function L(R,U){return(U=U||{}).util=U.util||M,U.navigator=U.navigator||(typeof navigator<"u"?navigator:null),new Promise(function(O,N){if(!U.navigator)throw new v.NotSupportedError("getUserMedia is not supported");switch("function"){case typeof(U.navigator.mediaDevices&&U.navigator.mediaDevices.getUserMedia):return O(U.navigator.mediaDevices.getUserMedia(R));case typeof U.navigator.webkitGetUserMedia:return U.navigator.webkitGetUserMedia(R,O,N);case typeof U.navigator.mozGetUserMedia:return U.navigator.mozGetUserMedia(R,O,N);case typeof U.navigator.getUserMedia:return U.navigator.getUserMedia(R,O,N);default:throw new v.NotSupportedError("getUserMedia is not supported")}}).catch(function(O){throw U.util.isFirefox()&&"NotReadableError"===O.name?new v.NotSupportedError("Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.\nRelated Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324"):O})}},168:(he,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.IceCandidate=void 0;var D=function(){function v(M,L){void 0===L&&(L=!1),this.deleted=!1;var R,U=M.candidate.split("network-cost ");U[1]&&(R=parseInt(U[1],10)),this.candidateType=M.type,this.ip=M.ip||M.address,this.isRemote=L,this.networkCost=R,this.port=M.port,this.priority=M.priority,this.protocol=M.protocol,this.relatedAddress=M.relatedAddress,this.relatedPort=M.relatedPort,this.tcpType=M.tcpType,this.transportId=M.sdpMid}return v.prototype.toPayload=function(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}},v}();T.IceCandidate=D},813:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PeerConnection=T.getMediaEngine=T.enabled=void 0;var v=D(578);T.PeerConnection=v.default;var M=D(110);T.enabled=function L(){return M.default.test()},T.getMediaEngine=function R(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}},986:(he,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=typeof window<"u"?window.RTCStatsReport:void 0;function M(f){if(!(this instanceof M))return new M(f);var I=this;Object.defineProperties(this,{_map:{value:f},size:{enumerable:!0,get:function(){return I._map.size}}}),this[Symbol.iterator]=f[Symbol.iterator]}function L(f){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:f.id,localCertificateId:f.stat("localCertificateId"),remoteCertificateId:f.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:f.stat("selectedCandidatePairId"),timestamp:Date.parse(f.timestamp),type:"transport"}}function O(f,I){return{associateStatsId:void 0,codecId:"codec-"+f.id,firCount:I?h(f,"googFirsSent"):void 0,id:f.id,isRemote:void 0,mediaType:f.stat("mediaType"),nackCount:h(f,I?"googNacksSent":"googNacksReceived"),pliCount:h(f,I?"googPlisSent":"googPlisReceived"),qpSum:h(f,"qpSum"),sliCount:void 0,ssrc:f.stat("ssrc"),timestamp:Date.parse(f.timestamp),trackId:"track-"+f.id,transportId:f.stat("transportId")}}function k(f,I){return{candidateType:m(f.stat("candidateType")),deleted:void 0,id:f.id,ip:f.stat("ipAddress"),isRemote:I,port:h(f,"portNumber"),priority:d(f,"priority"),protocol:f.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(f.timestamp),transportId:void 0,type:I?"remote-candidate":"local-candidate",url:void 0}}function y(f){return isNaN(f)||""===f?void 0:parseInt(f,10)/1e3}function m(f){switch(f){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";default:return f}}function h(f,I){var S=f.stat(I);return g(f,I)?parseInt(S,10):void 0}function d(f,I){var S=f.stat(I);return g(f,I)?parseFloat(S):void 0}function l(f,I){var S=f.stat(I);return g(f,I)?"true"===S||!0===S:void 0}function g(f,I){var S=f.stat(I);return typeof S<"u"&&""!==S}v&&((M.prototype=Object.create(v.prototype)).constructor=M),["entries","forEach","get","has","keys","values"].forEach(function(f){M.prototype[f]=function(){for(var I,S=[],x=0;x<arguments.length;x++)S[x]=arguments[x];return(I=this._map)[f].apply(I,S)}}),M.fromArray=function(I){return new M(I.reduce(function(S,x){return S.set(x.id,x),S},new Map))},M.fromRTCStatsResponse=function(I){var S,x=new Map,V=I.result().reduce(function(J,re){var Q=re.id;switch(re.type){case"googCertificate":J.set(Q,function _(f){return{base64Certificate:f.stat("googDerBase64"),fingerprint:f.stat("googFingerprint"),fingerprintAlgorithm:f.stat("googFingerprintAlgorithm"),id:f.id,issuerCertificateId:f.stat("googIssuerId"),timestamp:Date.parse(f.timestamp),type:"certificate"}}(re));break;case"datachannel":J.set(Q,function b(f){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:f.stat("datachannelid"),id:f.id,label:f.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:f.stat("protocol"),state:f.stat("state"),timestamp:Date.parse(f.timestamp),transportId:f.stat("transportId"),type:"data-channel"}}(re));break;case"googCandidatePair":l(re,"googActiveConnection")&&(S=Q),J.set(Q,function E(f){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:h(f,"bytesReceived"),bytesSent:h(f,"bytesSent"),consentRequestsSent:h(f,"consentRequestsSent"),currentRoundTripTime:y(f.stat("googRtt")),id:f.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:f.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:f.stat("remoteCandidateId"),requestsReceived:h(f,"requestsReceived"),requestsSent:h(f,"requestsSent"),responsesReceived:h(f,"responsesReceived"),responsesSent:h(f,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(f.timestamp),totalRoundTripTime:void 0,transportId:f.stat("googChannelId"),type:"candidate-pair",writable:l(f,"googWritable")}}(re));break;case"localcandidate":J.set(Q,k(re,!1));break;case"remotecandidate":J.set(Q,k(re,!0));break;case"ssrc":g(re,"packetsReceived")?J.set("rtp-"+Q,function N(f){var I=O(f,!0);return Object.assign(I,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:h(f,"bytesReceived"),fractionLost:void 0,framesDecoded:h(f,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:y(f.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:h(f,"packetsLost"),packetsReceived:h(f,"packetsReceived"),packetsRepaired:void 0,roundTripTime:y(f.stat("googRtt")),type:"inbound-rtp"}),I}(re)):J.set("rtp-"+Q,function A(f){var I=O(f,!1);return Object.assign(I,{bytesSent:h(f,"bytesSent"),framesEncoded:h(f,"framesEncoded"),packetsSent:h(f,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),I}(re)),J.set("track-"+Q,function U(f){return{audioLevel:g(f,"audioOutputLevel")?h(f,"audioOutputLevel")/32767:(h(f,"audioInputLevel")||0)/32767,detached:void 0,echoReturnLoss:d(f,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:d(f,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:g(f,"googFrameHeightReceived")?h(f,"googFrameHeightReceived"):h(f,"googFrameHeightSent"),frameWidth:g(f,"googFrameWidthReceived")?h(f,"googFrameWidthReceived"):h(f,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:h(f,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:h(f,"framesEncoded"),fullFramesLost:void 0,id:f.id,kind:f.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(f.timestamp),trackIdentifier:f.stat("googTrackId"),type:"track"}}(re)),J.set("codec-"+Q,function R(f){return{channels:void 0,clockRate:void 0,id:f.id,implementation:void 0,mimeType:f.stat("mediaType")+"/"+f.stat("googCodecName"),payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(f.timestamp),type:"codec"}}(re));break;case"googComponent":var F=L(re);x.set(F.selectedCandidatePairId,Q),J.set(Q,L(re))}return J},new Map);if(S){var q=x.get(S);q&&(V.get(q).dtlsState="connected")}return new M(V)},T.default=M},938:(he,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.isNonNegativeNumber=T.calculate=void 0;var D=94.768;function v(L,R,U){if("number"!=typeof L||"number"!=typeof R||"number"!=typeof U||!M(L)||!M(R)||!M(U))return null;var O=L+2*R+10,N=0;switch(!0){case O<160:N=D-O/40;break;case O<1e3:N=D-(O-120)/10}return 1+.035*(N=1==U<=N/2.5?Math.max(N-2.5*U,6.52):0)+7e-6*N*(N-60)*(100-N)}function M(L){return"number"==typeof L&&!isNaN(L)&&isFinite(L)&&L>=0}T.calculate=v,T.isNonNegativeNumber=M,T.default={calculate:v,isNonNegativeNumber:M}},578:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=D(287),M=D(990),L=D(819),R=D(110),U=D(563);function _(d,l,g,f){if(!d||!l||!g)throw new v.InvalidArgumentError("Audiohelper, pstream and getUserMedia are required arguments");if(!(this instanceof _))return new _(d,l,g,f);function I(){this._log.warn("Unexpected noop call in peerconnection")}this._log=M.default.getInstance(),this.onaudio=I,this.onopen=I,this.onerror=I,this.onclose=I,this.ondisconnected=I,this.onfailed=I,this.onconnected=I,this.onreconnected=I,this.onsignalingstatechange=I,this.ondtlstransportstatechange=I,this.onicegatheringfailure=I,this.onicegatheringstatechange=I,this.oniceconnectionstatechange=I,this.onpcconnectionstatechange=I,this.onicecandidate=I,this.onselectedcandidatepairchange=I,this.onvolume=I,this.version=null,this.pstream=l,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1,this.getUserMedia=g;var S=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!S&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=S&&d._audioContext,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=I,this._onHangup=I,this._remoteStream=null,this._shouldManageStream=!0,this._iceState="new",this._isUnifiedPlan=f.isUnifiedPlan,this.options=f=f||{},this.navigator=f.navigator||(typeof navigator<"u"?navigator:null),this.util=f.util||L,this.codecPreferences=f.codecPreferences,this}function b(d,l){"function"==typeof d.addTrack?l.getAudioTracks().forEach(function(g){d.addTrack(g,l)}):d.addStream(l)}function y(d){var l=typeof MediaStream<"u"?new MediaStream:new webkitMediaStream;return d.getAudioTracks().forEach(l.addTrack,l),l}function h(d,l){if(typeof d.srcObject<"u")d.srcObject=l;else if(typeof d.mozSrcObject<"u")d.mozSrcObject=l;else{if(!(typeof d.src<"u"))return!1;var g=d.options.window||window;d.src=(g.URL||g.webkitURL).createObjectURL(l)}return!0}_.prototype.uri=function(){return this._uri},_.prototype.openWithConstraints=function(d){return this.getUserMedia({audio:d}).then(this._setInputTracksFromStream.bind(this,!1))},_.prototype.setInputTracksFromStream=function(d){var l=this;return this._setInputTracksFromStream(!0,d).then(function(){l._shouldManageStream=!1})},_.prototype._createAnalyser=function(d,l){l=Object.assign({fftSize:32,smoothingTimeConstant:.3},l);var g=d.createAnalyser();for(var f in l)g[f]=l[f];return g},_.prototype._setVolumeHandler=function(d){this.onvolume=d},_.prototype._startPollingVolume=function(){if(this._audioContext&&this.stream&&this._remoteStream){var d=this._audioContext,l=this._inputAnalyser=this._createAnalyser(d),f=new Uint8Array(l.frequencyBinCount);this._inputAnalyser2=this._createAnalyser(d,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});var I=this._outputAnalyser=this._createAnalyser(d),x=new Uint8Array(I.frequencyBinCount);this._outputAnalyser2=this._createAnalyser(d,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);var V=this;setTimeout(function q(){if(V._audioContext){if("closed"===V.status)return V._inputAnalyser.disconnect(),V._outputAnalyser.disconnect(),V._inputAnalyser2.disconnect(),void V._outputAnalyser2.disconnect();V._inputAnalyser.getByteFrequencyData(f);var J=V.util.average(f);V._inputAnalyser2.getByteFrequencyData(f);var re=V.util.average(f);V._outputAnalyser.getByteFrequencyData(x);var Q=V.util.average(x);V._outputAnalyser2.getByteFrequencyData(x);var F=V.util.average(x);V.onvolume(J/255,Q/255,re,F),setTimeout(q,50)}},50)}},_.prototype._stopStream=function(l){this._shouldManageStream&&("function"==typeof MediaStreamTrack.prototype.stop?("function"==typeof l.getAudioTracks?l.getAudioTracks():l.audioTracks).forEach(function(f){f.stop()}):l.stop())},_.prototype._updateInputStreamSource=function(d){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(d),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(l){this._log.warn("Unable to update input MediaStreamSource",l),this._inputStreamSource=null}},_.prototype._updateOutputStreamSource=function(d){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(d),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(l){this._log.warn("Unable to update output MediaStreamSource",l),this._outputStreamSource=null}},_.prototype._setInputTracksFromStream=function(d,l){return this._isUnifiedPlan?this._setInputTracksForUnifiedPlan(d,l):this._setInputTracksForPlanB(d,l)},_.prototype._setInputTracksForPlanB=function(d,l){var g=this;if(!l)return Promise.reject(new v.InvalidArgumentError("Can not set input stream to null while in a call"));if(!l.getAudioTracks().length)return Promise.reject(new v.InvalidArgumentError("Supplied input stream has no audio tracks"));var f=this.stream;return f?(this._stopStream(f),function m(d,l){"function"==typeof d.removeTrack?d.getSenders().forEach(function(g){d.removeTrack(g)}):d.removeStream(l)}(this.version.pc,f),f.getAudioTracks().forEach(f.removeTrack,f),l.getAudioTracks().forEach(f.addTrack,f),b(this.version.pc,l),this._updateInputStreamSource(this.stream)):this.stream=d?y(l):l,this.mute(this.isMuted),this.version?new Promise(function(I,S){g.version.createOffer(g.options.maxAverageBitrate,g.codecPreferences,{audio:!0},function(){g.version.processAnswer(g.codecPreferences,g._answerSdp,function(){I(g.stream)},S)},S)}):Promise.resolve(this.stream)},_.prototype._setInputTracksForUnifiedPlan=function(d,l){var g=this;if(!l)return Promise.reject(new v.InvalidArgumentError("Can not set input stream to null while in a call"));if(!l.getAudioTracks().length)return Promise.reject(new v.InvalidArgumentError("Supplied input stream has no audio tracks"));var f=this.stream,I=function(){return g.mute(g.isMuted),Promise.resolve(g.stream)};return f?(this._shouldManageStream&&this._stopStream(f),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(l.getAudioTracks()[0]).then(function(){return g._updateInputStreamSource(l),I()})):(this.stream=d?y(l):l,I())},_.prototype._onInputDevicesChanged=function(){this.stream&&this.stream.getAudioTracks().every(function(l){return"ended"===l.readyState})&&this._shouldManageStream&&this.openWithConstraints(!0)},_.prototype._onIceGatheringFailure=function(d){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(d)},_.prototype._onMediaConnectionStateChange=function(d){var g,l=this._iceState;if(l!==d&&("connected"===d||"disconnected"===d||"failed"===d))switch(this._iceState=d,d){case"connected":"disconnected"===l||"failed"===l?(this._log.info(g="ICE liveliness check succeeded. Connection with Twilio restored"),this.onreconnected(g)):(this._log.info(g="Media connection established."),this.onconnected(g)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":this._log.info(g="ICE liveliness check failed. May be having trouble connecting to Twilio"),this.ondisconnected(g);break;case"failed":this._log.info(g="Connection with Twilio was interrupted."),this.onfailed(g)}},_.prototype._setSinkIds=function(d){return this._isSinkSupported?(this.sinkIds=new Set(d.forEach?d:[d]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new v.NotSupportedError("Audio output selection is not supported by this browser"))},_.prototype._startIceGatheringTimeout=function(){var l=this;this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(function(){l._onIceGatheringFailure("timeout")},15e3)},_.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)},_.prototype._updateAudioOutputs=function(){var l=Array.from(this.sinkIds).filter(function(S){return!this.outputs.has(S)},this),g=Array.from(this.outputs.keys()).filter(function(S){return!this.sinkIds.has(S)},this),f=this,I=l.map(this._createAudioOutput,this);return Promise.all(I).then(function(){return Promise.all(g.map(f._removeAudioOutput,f))})},_.prototype._createAudio=function(l){var g=new Audio(l);return this.onaudio(g),g},_.prototype._createAudioOutput=function(l){var g=null;this._mediaStreamSource&&(g=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(g));var f=this._createAudio();h(f,g&&g.stream?g.stream:this.pcStream);var I=this;return f.setSinkId(l).then(function(){return f.play()}).then(function(){I.outputs.set(l,{audio:f,dest:g})})},_.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)},_.prototype._disableOutput=function(l,g){var f=l.outputs.get(g);f&&(f.audio&&(f.audio.pause(),f.audio.src=""),f.dest&&f.dest.disconnect())},_.prototype._reassignMasterOutput=function(l,g){var f=l.outputs.get(g);l.outputs.delete(g);var I=this,S=Array.from(l.outputs.keys())[0]||"default";return f.audio.setSinkId(S).then(function(){I._disableOutput(l,S),l.outputs.set(S,f),l._masterAudioDeviceId=S}).catch(function(){l.outputs.set(g,f),I._log.info("Could not reassign master output. Attempted to roll back.")})},_.prototype._removeAudioOutput=function(l){return this._masterAudioDeviceId===l?this._reassignMasterOutput(this,l):(this._disableOutput(this,l),this.outputs.delete(l),Promise.resolve())},_.prototype._onAddTrack=function(l,g){var f=l._masterAudio=this._createAudio();h(f,g),f.play();var I=Array.from(l.outputs.keys())[0]||"default";l._masterAudioDeviceId=I,l.outputs.set(I,{audio:f});try{l._mediaStreamSource=l._audioContext.createMediaStreamSource(g)}catch(S){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",S),this._mediaStreamSource=null}l.pcStream=g,l._updateAudioOutputs()},_.prototype._fallbackOnAddTrack=function(l,g){var f=document&&document.createElement("audio");f.autoplay=!0,h(f,g)||l._log.info("Error attaching stream to element."),l.outputs.set("default",{audio:f})},_.prototype._setEncodingParameters=function(d){if(d&&this._sender&&"function"==typeof this._sender.getParameters&&"function"==typeof this._sender.setParameters){var l=this._sender.getParameters();!l.priority&&(!l.encodings||!l.encodings.length)||(l.priority="high",l.encodings&&l.encodings.length&&l.encodings.forEach(function(g){g.priority="high",g.networkPriority="high"}),this._sender.setParameters(l))}},_.prototype._setupPeerConnection=function(d,l){var g=this,f=this,I=new(this.options.rtcpcFactory||R.default)({RTCPeerConnection:this.options.RTCPeerConnection});return I.create(d,l),b(I.pc,this.stream),I.pc["ontrack"in I.pc?"ontrack":"onaddstream"]=function(x){var V=f._remoteStream=x.stream||x.streams[0];"function"==typeof I.pc.getSenders&&(g._sender=I.pc.getSenders()[0]),f._isSinkSupported?f._onAddTrack(f,V):f._fallbackOnAddTrack(f,V),f._startPollingVolume()},I},_.prototype._maybeSetIceAggressiveNomination=function(d){return this.options.forceAggressiveIceNomination?U.setIceAggressiveNomination(d):d},_.prototype._setupChannel=function(){var d=this,l=this.version.pc;this.version.pc.onopen=function(){d.status="open",d.onopen()},this.version.pc.onstatechange=function(){d.version.pc&&"stable"===d.version.pc.readyState&&(d.status="open",d.onopen())},this.version.pc.onsignalingstatechange=function(){d._log.info('signalingState is "'+l.signalingState+'"'),d.version.pc&&"stable"===d.version.pc.signalingState&&(d.status="open",d.onopen()),d.onsignalingstatechange(l.signalingState)},l.onconnectionstatechange=function(g){var f=l.connectionState;if(!f&&g&&g.target){var I=g.target;d._log.info("pc.connectionState not detected. Using target PC. State="+(f=I.connectionState||I.connectionState_))}f?d._log.info('pc.connectionState is "'+f+'"'):d._log.warn('onconnectionstatechange detected but state is "'+f+'"'),d.onpcconnectionstatechange(f),d._onMediaConnectionStateChange(f)},l.onicecandidate=function(g){var f=g.candidate;f&&(d._hasIceCandidates=!0,d.onicecandidate(f),d._setupRTCIceTransportListener()),d._log.info("ICE Candidate: "+JSON.stringify(f))},l.onicegatheringstatechange=function(){var g=l.iceGatheringState;"gathering"===g?d._startIceGatheringTimeout():"complete"===g&&(d._stopIceGatheringTimeout(),d._hasIceCandidates||d._onIceGatheringFailure("none"),d._hasIceCandidates&&d._hasIceGatheringFailures&&d._startIceGatheringTimeout()),d._log.info('pc.iceGatheringState is "'+l.iceGatheringState+'"'),d.onicegatheringstatechange(g)},l.oniceconnectionstatechange=function(){d._log.info('pc.iceConnectionState is "'+l.iceConnectionState+'"'),d.oniceconnectionstatechange(l.iceConnectionState),d._onMediaConnectionStateChange(l.iceConnectionState)}},_.prototype._initializeMediaStream=function(d,l){return"open"!==this.status&&("disconnected"===this.pstream.status?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new v.SignalingErrors.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(d,l),this._setupChannel(),!0))},_.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))},_.prototype._setupRTCDtlsTransportListener=function(){var d=this,l=this.getRTCDtlsTransport();if(l&&!l.onstatechange){var g=function(){d._log.info('dtlsTransportState is "'+l.state+'"'),d.ondtlstransportstatechange(l.state)};g(),l.onstatechange=g}},_.prototype._setupRTCIceTransportListener=function(){var d=this,l=this._getRTCIceTransport();!l||l.onselectedcandidatepairchange||(l.onselectedcandidatepairchange=function(){return d.onselectedcandidatepairchange(l.getSelectedCandidatePair())})},_.prototype.iceRestart=function(){var d=this;this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,this.codecPreferences,{iceRestart:!0}).then(function(){d._removeReconnectionListeners(),d._onAnswerOrRinging=function(l){if(d._removeReconnectionListeners(),l.sdp&&"have-local-offer"===d.version.pc.signalingState){var f=d._maybeSetIceAggressiveNomination(l.sdp);d._answerSdp=f,"closed"!==d.status&&d.version.processAnswer(d.codecPreferences,f,null,function(I){d._log.info("Failed to process answer during ICE Restart. Error: "+(I&&I.message?I.message:I))})}else d._log.info("Invalid state or param during ICE Restart:hasSdp:"+!!l.sdp+", signalingState:"+d.version.pc.signalingState)},d._onHangup=function(){d._log.info("Received hangup during ICE Restart"),d._removeReconnectionListeners()},d.pstream.on("answer",d._onAnswerOrRinging),d.pstream.on("hangup",d._onHangup),d.pstream.reinvite(d.version.getSDP(),d.callSid)}).catch(function(l){var g=l&&l.message?l.message:l;d._log.info("Failed to createOffer during ICE Restart. Error: "+g),d.onfailed(g)})},_.prototype.makeOutgoingCall=function(d,l,g,f,I,S){var x=this;if(this._initializeMediaStream(f,I)){var V=this;this.callSid=g,this._onAnswerOrRinging=function(F){if(F.sdp){var j=x._maybeSetIceAggressiveNomination(F.sdp);V._answerSdp=j,"closed"!==V.status&&V.version.processAnswer(x.codecPreferences,j,q,J),V.pstream.removeListener("answer",V._onAnswerOrRinging),V.pstream.removeListener("ringing",V._onAnswerOrRinging)}},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging),this.version.createOffer(this.options.maxAverageBitrate,this.codecPreferences,{audio:!0},function re(){"closed"!==V.status&&(V.pstream.invite(V.version.getSDP(),V.callSid,V.options.preflight,l),V._setupRTCDtlsTransportListener())},function Q(F){V.onerror({info:{code:31e3,message:"Error creating the offer: "+(F.message||F),twilioError:new v.MediaErrors.ClientLocalDescFailed}})})}function q(){V.options&&V._setEncodingParameters(V.options.dscp),S(V.version.pc)}function J(F){V.onerror({info:{code:31e3,message:"Error processing answer: "+(F.message||F),twilioError:new v.MediaErrors.ClientRemoteDescFailed}})}},_.prototype.answerIncomingCall=function(d,l,g,f,I){if(this._initializeMediaStream(g,f)){l=this._maybeSetIceAggressiveNomination(l),this._answerSdp=l.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=d;var S=this;this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,l,{audio:!0},function x(){"closed"!==S.status&&(S.pstream.answer(S.version.getSDP(),d),S.options&&S._setEncodingParameters(S.options.dscp),I(S.version.pc),S._setupRTCDtlsTransportListener())},function V(q){S.onerror({info:{code:31e3,message:"Error creating the answer: "+(q.message||q),twilioError:new v.MediaErrors.ClientRemoteDescFailed}})})}},_.prototype.close=function(){this.version&&this.version.pc&&("closed"!==this.version.pc.signalingState&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream(this.stream)),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(function(){}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()},_.prototype.reject=function(d){this.callSid=d},_.prototype.ignore=function(d){this.callSid=d},_.prototype.mute=function(d){this.isMuted=d,this.stream&&(this._sender&&this._sender.track?this._sender.track.enabled=!d:("function"==typeof this.stream.getAudioTracks?this.stream.getAudioTracks():this.stream.audioTracks).forEach(function(g){g.enabled=!d}))},_.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;var l=this,g=this.version.pc;if(!g)return this._log.info("No RTCPeerConnection available to call createDTMFSender on"),null;if("function"==typeof g.getSenders&&("function"==typeof RTCDTMFSender||"function"==typeof RTCDtmfSender)){var f=g.getSenders().find(function(S){return S.dtmf});if(f)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=f.dtmf,this._dtmfSender}if("function"==typeof g.createDTMFSender&&"function"==typeof g.getLocalStreams){var I=g.getLocalStreams().map(function(S){var x=l._getAudioTracks(S);return x&&x[0]})[0];return I?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=g.createDTMFSender(I),this._dtmfSender):(this._log.info("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null},_.prototype.getRTCDtlsTransport=function(){var l=this.version&&this.version.pc&&"function"==typeof this.version.pc.getSenders&&this.version.pc.getSenders()[0];return l&&l.transport||null},_.prototype._canStopMediaStreamTrack=function(){return"function"==typeof MediaStreamTrack.prototype.stop},_.prototype._getAudioTracks=function(d){return"function"==typeof d.getAudioTracks?d.getAudioTracks():d.audioTracks},_.prototype._getRTCIceTransport=function(){var l=this.getRTCDtlsTransport();return l&&l.iceTransport||null},_.protocol=R.default.test()?new R.default:null,_.enabled=R.default.test(),T.default=_},110:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=D(990),M=D(819),L=D(563),R=D(191);function U(k){typeof window>"u"?this.log.info("No RTCPeerConnection implementation available. The window object was not found."):k&&k.RTCPeerConnection?this.RTCPeerConnection=k.RTCPeerConnection:M.isLegacyEdge()?this.RTCPeerConnection=new R(typeof window<"u"?window:global):"function"==typeof window.RTCPeerConnection?this.RTCPeerConnection=window.RTCPeerConnection:"function"==typeof window.webkitRTCPeerConnection?this.RTCPeerConnection=webkitRTCPeerConnection:"function"==typeof window.mozRTCPeerConnection?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}function O(k,E,_,b){return function(){var y=Array.prototype.slice.call(arguments);return new Promise(function(m){var h=k.apply(E,y);if(b){if("object"!=typeof h||"function"!=typeof h.then)throw new Error;m(h)}else m(h)}).catch(function(){return new Promise(function(m,h){k.apply(E,_?[m,h].concat(y):y.concat([m,h]))})})}}function N(k,E){return O(k,E,!0,!0)}function A(k,E){return O(k,E,!1,!1)}U.prototype.create=function(k,E){this.log=v.default.getInstance(),this.pc=new this.RTCPeerConnection(E,k)},U.prototype.createModernConstraints=function(k){if(typeof k>"u")return null;var E=Object.assign({},k);return typeof webkitRTCPeerConnection<"u"&&!M.isLegacyEdge()?(E.mandatory={},typeof k.audio<"u"&&(E.mandatory.OfferToReceiveAudio=k.audio),typeof k.video<"u"&&(E.mandatory.OfferToReceiveVideo=k.video)):(typeof k.audio<"u"&&(E.offerToReceiveAudio=k.audio),typeof k.video<"u"&&(E.offerToReceiveVideo=k.video)),delete E.audio,delete E.video,E},U.prototype.createOffer=function(k,E,_,b,y){var m=this;return _=this.createModernConstraints(_),N(this.pc.createOffer,this.pc)(_).then(function(h){if(!m.pc)return Promise.resolve();var d=L.setMaxAverageBitrate(h.sdp,k);return A(m.pc.setLocalDescription,m.pc)(new RTCSessionDescription({sdp:L.setCodecPreferences(d,E),type:"offer"}))}).then(b,y)},U.prototype.createAnswer=function(k,E,_,b,y){var m=this;return _=this.createModernConstraints(_),N(this.pc.createAnswer,this.pc)(_).then(function(h){if(!m.pc)return Promise.resolve();var d=L.setMaxAverageBitrate(h.sdp,k);return A(m.pc.setLocalDescription,m.pc)(new RTCSessionDescription({sdp:L.setCodecPreferences(d,E),type:"answer"}))}).then(b,y)},U.prototype.processSDP=function(k,E,_,b,y,m){var h=this;_=L.setCodecPreferences(_,E);var d=new RTCSessionDescription({sdp:_,type:"offer"});return A(this.pc.setRemoteDescription,this.pc)(d).then(function(){h.createAnswer(k,E,b,y,m)})},U.prototype.getSDP=function(){return this.pc.localDescription.sdp},U.prototype.processAnswer=function(k,E,_,b){return this.pc?(E=L.setCodecPreferences(E,k),A(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:E,type:"answer"})).then(_,b)):Promise.resolve()},U.test=function(){if("object"==typeof navigator){var k=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(M.isLegacyEdge(navigator))return!1;if(k&&"function"==typeof window.RTCPeerConnection)return!0;if(k&&"function"==typeof window.webkitRTCPeerConnection)return!0;if(k&&"function"==typeof window.mozRTCPeerConnection){try{if("function"!=typeof(new window.mozRTCPeerConnection).getLocalStreams)return!1}catch{return!1}return!0}if(typeof RTCIceGatherer<"u")return!0}return!1},T.default=U},563:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setMaxAverageBitrate=T.setIceAggressiveNomination=T.setCodecPreferences=T.getPreferredCodecInfo=void 0;var v=D(819),M={0:"PCMU",8:"PCMA"};T.getPreferredCodecInfo=function O(d){var l=/a=rtpmap:(\d+) (\S+)/m.exec(d)||[null,"",""];return{codecName:l[2],codecParams:(new RegExp("a=fmtp:"+l[1]+" (\\S+)","m").exec(d)||[null,""])[1]}},T.setIceAggressiveNomination=function N(d){return v.isChrome(window,window.navigator)?d.split("\n").filter(function(l){return-1===l.indexOf("a=ice-lite")}).join("\n"):d},T.setMaxAverageBitrate=function A(d,l){if("number"!=typeof l||l<6e3||l>51e4)return d;var g=/a=rtpmap:(\d+) opus/m.exec(d),I=new RegExp("a=fmtp:"+(g&&g.length?g[1]:111));return d.split("\n").map(function(x){return I.test(x)?x+";maxaveragebitrate="+l:x}).join("\n")},T.setCodecPreferences=function k(d,l){var g=function E(d,l,g){return d.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(f){return"m="+f}).filter(function(f){var I=new RegExp("m="+(l||".*"),"gm"),S=new RegExp("a="+(g||".*"),"gm");return I.test(f)&&S.test(f)})}(d);return[d.split("\r\nm=")[0]].concat(g.map(function(I){if(!/^m=(audio|video)/.test(I))return I;var S=I.match(/^m=(audio|video)/)[1],x=function _(d){return Array.from(function m(d){return function h(d){var g=d.split("\r\n")[0].match(/([0-9]+)/g);return g?g.slice(1).map(function(f){return parseInt(f,10)}):[]}(d).reduce(function(l,g){var f=new RegExp("a=rtpmap:"+g+" ([^/]+)"),I=d.match(f),S=I?I[1].toLowerCase():M[g]?M[g].toLowerCase():"";return l.set(g,S)},new Map)}(d)).reduce(function(l,g){var f=g[0],I=g[1],S=l.get(I)||[];return l.set(I,S.concat(f))},new Map)}(I),V=function b(d,l){l=l.map(function(S){return S.toLowerCase()});var g=v.flatMap(l,function(S){return d.get(S)||[]}),f=v.difference(Array.from(d.keys()),l),I=v.flatMap(f,function(S){return d.get(S)});return g.concat(I)}(x,l),q=function y(d,l){var g=l.split("\r\n"),f=g[0],I=g.slice(1);return[f=f.replace(/([0-9]+\s?)+$/,d.join(" "))].concat(I).join("\r\n")}(V,I),J=x.get("pcma")||[],re=x.get("pcmu")||[];return("audio"===S?new Set(J.concat(re)):new Set).has(V[0])?q.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):q})).join("\r\n")}},610:function(he,T,D){"use strict";var v=this&&this.__spreadArrays||function(){for(var b=0,y=0,m=arguments.length;y<m;y++)b+=arguments[y].length;var h=Array(b),d=0;for(y=0;y<m;y++)for(var l=arguments[y],g=0,f=l.length;g<f;g++,d++)h[d]=l[g];return h};Object.defineProperty(T,"__esModule",{value:!0}),T.getRTCIceCandidateStatsReport=T.getRTCStats=void 0;var M=D(287),L=D(986);function O(b,y){return"function"==typeof b.get?b.get(y):b.find(function(m){return m.id===y})}function N(b){if(!b)return Promise.reject(new M.InvalidArgumentError("PeerConnection is null"));if("function"!=typeof b.getStats)return Promise.reject(new M.NotSupportedError("WebRTC statistics are unsupported"));var y;try{y=b.getStats()}catch{y=new Promise(function(h){return b.getStats(h)}).then(L.default.fromRTCStatsResponse)}return y}function E(){}function _(b){var h,y=null,m=new E;Array.from(b.values()).forEach(function(I){if(!I.isRemote){var S=I.type.replace("-","");if(h=h||I.timestamp,I.remoteId){var x=O(b,I.remoteId);x&&x.roundTripTime&&(m.rtt=1e3*x.roundTripTime)}switch(S){case"inboundrtp":m.timestamp=m.timestamp||I.timestamp,m.jitter=1e3*I.jitter,m.packetsLost=I.packetsLost,m.packetsReceived=I.packetsReceived,m.bytesReceived=I.bytesReceived;break;case"outboundrtp":if(m.timestamp=I.timestamp,m.packetsSent=I.packetsSent,m.bytesSent=I.bytesSent,I.codecId){var V=O(b,I.codecId);m.codecName=V?V.mimeType&&V.mimeType.match(/(.*\/)?(.*)/)[2]:I.codecId}break;case"transport":y=I.id}}}),m.timestamp||(m.timestamp=h);var d=O(b,y);if(!d)return m;var l=O(b,d.selectedCandidatePairId);if(!l)return m;var g=O(b,l.localCandidateId),f=O(b,l.remoteCandidateId);return m.rtt||(m.rtt=l&&1e3*l.currentRoundTripTime),Object.assign(m,{localAddress:g&&(g.address||g.ip),remoteAddress:f&&(f.address||f.ip)}),m}T.getRTCStats=function A(b,y){return y=Object.assign({createRTCSample:_},y),N(b).then(y.createRTCSample)},T.getRTCIceCandidateStatsReport=function k(b){return N(b).then(function(y){var I,m=Array.from(y.values()).reduce(function(S,x){switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(function(V){S[V]||(S[V]=[])}),x.type){case"candidate-pair":S.candidatePairs.push(x);break;case"local-candidate":S.localCandidates.push(x);break;case"remote-candidate":S.remoteCandidates.push(x);break;case"transport":x.selectedCandidatePairId&&(S.transport=x)}return S},{}),d=m.localCandidates,l=m.remoteCandidates,g=m.transport,f=m.candidatePairs.find(function(S){return S.selected||g&&S.id===g.selectedCandidatePairId});return f&&(I={localCandidate:d.find(function(S){return S.id===f.localCandidateId}),remoteCandidate:l.find(function(S){return S.id===f.remoteCandidateId})}),{iceCandidateStats:v(d,l),selectedIceCandidatePairStats:I}})}},556:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=D(16);function M(){Object.defineProperties(this,{_eventEmitter:{value:new v.EventEmitter},_handlers:{value:{}}})}M.prototype.dispatchEvent=function(R){return this._eventEmitter.emit(R.type,R)},M.prototype.addEventListener=function(){var R;return(R=this._eventEmitter).addListener.apply(R,arguments)},M.prototype.removeEventListener=function(){var R;return(R=this._eventEmitter).removeListener.apply(R,arguments)},M.prototype._defineEventHandler=function(R){var U=this;Object.defineProperty(this,"on"+R,{get:function(){return U._handlers[R]},set:function(O){var N=U._handlers[R];N&&("function"==typeof O||typeof O>"u"||null===O)&&(U._handlers[R]=null,U.removeEventListener(R,N)),"function"==typeof O&&(U._handlers[R]=O,U.addEventListener(R,O))}})},T.default=M},199:(he,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function v(M){Object.defineProperties(this,{deviceId:{get:function(){return M.deviceId}},groupId:{get:function(){return M.groupId}},kind:{get:function(){return M.kind}},label:{get:function(){return M.label}}})}},292:function(he,T,D){"use strict";var m,v=this&&this.__extends||(m=function(h,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,g){l.__proto__=g}||function(l,g){for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(l[f]=g[f])})(h,d)},function(h,d){function l(){this.constructor=h}m(h,d),h.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(T,"__esModule",{value:!0});var M=D(556),R=null,U=function(m){function h(){var d=m.call(this)||this;d._defineEventHandler("devicechange"),d._defineEventHandler("deviceinfochange");var l=[];return Object.defineProperties(d,{_deviceChangeIsNative:{value:_(d,"devicechange")},_deviceInfoChangeIsNative:{value:_(d,"deviceinfochange")},_knownDevices:{value:l},_pollInterval:{value:null,writable:!0}}),"function"==typeof R.enumerateDevices&&R.enumerateDevices().then(function(g){g.sort(b).forEach(function(f){return l.push(f)})}),d._eventEmitter.on("newListener",function(f){"devicechange"!==f&&"deviceinfochange"!==f||(this._pollInterval=this._pollInterval||setInterval(k.bind(null,this),500))}.bind(d)),d._eventEmitter.on("removeListener",function(){this._pollInterval&&!function A(m){return["devicechange","deviceinfochange"].reduce(function(h,d){return h+m._eventEmitter.listenerCount(d)},0)>0}(this)&&(clearInterval(this._pollInterval),this._pollInterval=null)}.bind(d)),d}return v(h,m),h}(M.default);function k(m){R.enumerateDevices().then(function(h){var d=m._knownDevices,l=d.slice();[].splice.apply(d,[0,d.length].concat(h.sort(b))),!m._deviceChangeIsNative&&function N(m,h){return m.length!==h.length||function E(m,h,d){return h.some(function(l,g){return l[m]!==d[g][m]})}("deviceId",m,h)}(d,l)&&m.dispatchEvent(new Event("devicechange")),!m._deviceInfoChangeIsNative&&function O(m,h){if(m=m.filter(function(l){return"audioinput"===l.kind||"audiooutput"===l.kind}),(h=h.filter(function(l){return"audioinput"===l.kind||"audiooutput"===l.kind})).some(function(l){return!l.deviceId})&&m.some(function(l){return!!l.deviceId}))return!0;var d=h.reduce(function(l,g){return l.set(g.deviceId+"-"+g.kind,g.label)},new Map);return m.some(function(l){var g=d.get(l.deviceId+"-"+l.kind);return typeof g<"u"&&g!==l.label})}(d,l)&&m.dispatchEvent(new Event("deviceinfochange"))})}function _(m,h){var d="on"+h;function l(g){m.dispatchEvent(g)}return d in R&&("addEventListener"in R?R.addEventListener(h,l):R[d]=l,!0)}function b(m,h){return m.deviceId<h.deviceId}U.prototype.enumerateDevices=function(){return R&&"function"==typeof R.enumerateDevices?R.enumerateDevices.apply(R,arguments):null},U.prototype.getUserMedia=function(){return R.getUserMedia.apply(R,arguments)},T.default=function(){return(R=typeof navigator<"u"?navigator.mediaDevices:null)?new U:null}},68:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=D(360),M=D(358),L=D(287);function R(O,N,A){if(!(this instanceof R))return new R(O,N,A);if(!O||!N)throw new L.InvalidArgumentError("name and url are required arguments");(A=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},A)).AudioPlayer=A.audioContext?M.default.bind(M.default,A.audioContext):A.AudioFactory,Object.defineProperties(this,{_Audio:{value:A.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:null!==A.AudioFactory&&"function"==typeof A.AudioFactory.prototype.setSinkId},_maxDuration:{value:A.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new v.AsyncQueue},_playPromise:{value:null,writable:!0},_shouldLoop:{value:A.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get:function(){return!!this._playPromise}},name:{enumerable:!0,value:O},url:{enumerable:!0,value:N}}),this._Audio&&this._play(!0,!1)}function U(O){O&&(O.pause(),O.src="",O.srcObject=null,O.load())}R.prototype._playAudioElement=function(N,A,k){var E=this,_=this._activeEls.get(N);if(!_)throw new L.InvalidArgumentError('sinkId: "'+N+"\" doesn't have an audio element");return _.muted=!!A,_.loop=!!k,_.play().then(function(){return _}).catch(function(b){throw U(_),E._activeEls.delete(N),b})},R.prototype._play=function(N,A){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),A="boolean"==typeof A?A:this._shouldLoop;var k=this;return this._playPromise=Promise.all(this._sinkIds.map(function(b){if(!k._Audio)return Promise.resolve();var y=k._activeEls.get(b);return y?k._playAudioElement(b,N,A):("function"==typeof(y=new k._Audio(k.url)).setAttribute&&y.setAttribute("crossorigin","anonymous"),new Promise(function(m){y.addEventListener("canplaythrough",m)}).then(function(){return(k._isSinkSupported?y.setSinkId(b):Promise.resolve()).then(function(){return k._activeEls.set(b,y),k._playPromise?k._playAudioElement(b,N,A):Promise.resolve()})}))}))},R.prototype._stop=function(){var N=this;this._activeEls.forEach(function(A,k){N._sinkIds.includes(k)?(A.pause(),A.currentTime=0):(U(A),N._activeEls.delete(k))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null},R.prototype.setSinkIds=function(N){this._isSinkSupported&&[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(N=N.forEach?N:[N]))},R.prototype.stop=function(){var N=this;this._operations.enqueue(function(){return N._stop(),Promise.resolve()})},R.prototype.play=function(){var N=this;return this._operations.enqueue(function(){return N._play()})},T.default=R},753:function(he,T,D){"use strict";var I,v=this&&this.__extends||(I=function(S,x){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,q){V.__proto__=q}||function(V,q){for(var J in q)Object.prototype.hasOwnProperty.call(q,J)&&(V[J]=q[J])})(S,x)},function(S,x){function V(){this.constructor=S}I(S,x),S.prototype=null===x?Object.create(x):(V.prototype=x.prototype,new V)}),M=this&&this.__assign||function(){return M=Object.assign||function(I){for(var S,x=1,V=arguments.length;x<V;x++)for(var q in S=arguments[x])Object.prototype.hasOwnProperty.call(S,q)&&(I[q]=S[q]);return I},M.apply(this,arguments)},L=this&&this.__spreadArrays||function(){for(var I=0,S=0,x=arguments.length;S<x;S++)I+=arguments[S].length;var V=Array(I),q=0;for(S=0;S<x;S++)for(var J=arguments[S],re=0,Q=J.length;re<Q;re++,q++)V[q]=J[re];return V};Object.defineProperty(T,"__esModule",{value:!0});var R=D(16),U=D(287),O=D(938),N=D(610),A=D(819),m={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}},f=function(I){function S(x){var V=I.call(this)||this;V._activeWarnings=new Map,V._currentStreaks=new Map,V._inputVolumes=[],V._outputVolumes=[],V._sampleBuffer=[],V._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},V._warningsEnabled=!0,V._getRTCStats=(x=x||{}).getRTCStats||N.getRTCStats,V._mos=x.Mos||O.default,V._peerConnection=x.peerConnection,V._thresholds=M(M({},m),x.thresholds);var q=Object.values(V._thresholds).map(function(J){return J.sampleCount}).filter(function(J){return!!J});return V._maxSampleCount=Math.max.apply(Math,L([5],q)),V._peerConnection&&V.enable(V._peerConnection),V}return v(S,I),S.prototype.addVolumes=function(x,V){this._inputVolumes.push(x),this._outputVolumes.push(V)},S.prototype.disable=function(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this},S.prototype.disableWarnings=function(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this},S.prototype.enable=function(x){if(x){if(this._peerConnection&&x!==this._peerConnection)throw new U.InvalidArgumentError("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=x}if(!this._peerConnection)throw new U.InvalidArgumentError("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),1e3),this},S.prototype.enableWarnings=function(){return this._warningsEnabled=!0,this},S.prototype.hasActiveWarning=function(x,V){return!!this._activeWarnings.get(x+":"+V)},S.prototype._addSample=function(x){var V=this._sampleBuffer;V.push(x),V.length>this._maxSampleCount&&V.splice(0,V.length-this._maxSampleCount)},S.prototype._clearWarning=function(x,V,q){var J=x+":"+V,re=this._activeWarnings.get(J);!re||Date.now()-re.timeRaised<5e3||(this._activeWarnings.delete(J),this.emit("warning-cleared",M(M({},q),{name:x,threshold:{name:V,value:this._thresholds[x][V]}})))},S.prototype._createSample=function(x,V){var j=x.bytesSent-(V&&V.totals.bytesSent||0),W=x.bytesReceived-(V&&V.totals.bytesReceived||0),C=x.packetsSent-(V&&V.totals.packetsSent||0),B=x.packetsReceived-(V&&V.totals.packetsReceived||0),Y=x.packetsLost-(V&&V.totals.packetsLost||0),fe=B+Y,$=fe>0?Y/fe*100:0,z=x.packetsReceived+x.packetsLost,ee=z>0?x.packetsLost/z*100:100,se="number"!=typeof x.rtt&&V?V.rtt:x.rtt,Re=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(Re);var pe=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(pe),{audioInputLevel:Math.round(A.average(Re)),audioOutputLevel:Math.round(A.average(pe)),bytesReceived:W,bytesSent:j,codecName:x.codecName,jitter:x.jitter,mos:this._mos.calculate(se,x.jitter,V&&$),packetsLost:Y,packetsLostFraction:$,packetsReceived:B,packetsSent:C,rtt:se,timestamp:x.timestamp,totals:{bytesReceived:x.bytesReceived,bytesSent:x.bytesSent,packetsLost:x.packetsLost,packetsLostFraction:ee,packetsReceived:x.packetsReceived,packetsSent:x.packetsSent}}},S.prototype._fetchSample=function(){var x=this;this._getSample().then(function(V){x._addSample(V),x._raiseWarnings(),x.emit("sample",V)}).catch(function(V){x.disable(),x.emit("error",V)})},S.prototype._getSample=function(){var x=this;return this._getRTCStats(this._peerConnection).then(function(V){var q=null;return x._sampleBuffer.length&&(q=x._sampleBuffer[x._sampleBuffer.length-1]),x._createSample(V,q)})},S.prototype._raiseWarning=function(x,V,q){var J=x+":"+V;if(!this._activeWarnings.has(J)){this._activeWarnings.set(J,{timeRaised:Date.now()});var Q,re=this._thresholds[x];if(Array.isArray(re)){var F=re.find(function(j){return V in j});F&&(Q=F[V])}else Q=this._thresholds[x][V];this.emit("warning",M(M({},q),{name:x,threshold:{name:V,value:Q}}))}},S.prototype._raiseWarnings=function(){var x=this;this._warningsEnabled&&Object.keys(this._thresholds).forEach(function(V){return x._raiseWarningsForStat(V)})},S.prototype._raiseWarningsForStat=function(x){var V=this;(Array.isArray(this._thresholds[x])?this._thresholds[x]:[this._thresholds[x]]).forEach(function(J){var re=V._sampleBuffer,Q=J.clearCount||0,F=J.raiseCount||3,j=J.sampleCount||V._maxSampleCount,W=re.slice(-j),C=W.map(function(Ae){return Ae[x]});if(!C.some(function(Ae){return typeof Ae>"u"||null===Ae})){var Y;if("number"==typeof J.max&&(Y=function h(I,S){return S.reduce(function(x,V){return x+(V>I?1:0)},0)}(J.max,C),Y>=F?V._raiseWarning(x,"max",{values:C,samples:W}):Y<=Q&&V._clearWarning(x,"max",{values:C,samples:W})),"number"==typeof J.min&&(Y=function d(I,S){return S.reduce(function(x,V){return x+(V<I?1:0)},0)}(J.min,C),Y>=F?V._raiseWarning(x,"min",{values:C,samples:W}):Y<=Q&&V._clearWarning(x,"min",{values:C,samples:W})),"number"==typeof J.maxDuration&&re.length>1){var fe=(W=re.slice(-2))[0][x],$=W[1][x],z=V._currentStreaks.get(x)||0,ee=fe===$?z+1:0;V._currentStreaks.set(x,ee),ee>=J.maxDuration?V._raiseWarning(x,"maxDuration",{value:ee}):0===ee&&V._clearWarning(x,"maxDuration",{value:z})}if("number"==typeof J.minStandardDeviation){var se=V._supplementalSampleBuffers[x];if(!se||se.length<J.sampleCount)return;se.length>J.sampleCount&&se.splice(0,se.length-J.sampleCount);var Re=function g(I){return I.reduce(function(S,x){return L(S,x)},[])}(se.slice(-j)),pe=function l(I){if(I.length<=0)return null;var S=I.reduce(function(q,J){return q+J},0)/I.length,x=I.map(function(q){return Math.pow(q-S,2)});return Math.sqrt(x.reduce(function(q,J){return q+J},0)/x.length)}(Re);if("number"!=typeof pe)return;pe<J.minStandardDeviation?V._raiseWarning(x,"minStandardDeviation",{value:pe}):V._clearWarning(x,"minStandardDeviation",{value:pe})}[["maxAverage",function(Ae,me){return Ae>me}],["minAverage",function(Ae,me){return Ae<me}]].forEach(function(Ae){var me=Ae[0],Fe=Ae[1];if("number"==typeof J[me]&&C.length>=j){var ht=A.average(C);Fe(ht,J[me])?V._raiseWarning(x,me,{values:C,samples:W}):Fe(ht,J.clearValue||J[me])||V._clearWarning(x,me,{values:C,samples:W})}})}})},S}(R.EventEmitter);T.default=f},819:(he,T)=>{"use strict";function D(b){if(!(this instanceof D))return new D(b);this.message=b}function L(b){return!!b.userAgent.match("Electron")}function R(b,y){var m=!!y.userAgent.match("CriOS"),h=!!y.userAgent.match("HeadlessChrome"),d=typeof b.chrome<"u"&&"Google Inc."===y.vendor&&-1===y.userAgent.indexOf("OPR")&&-1===y.userAgent.indexOf("Edge");return m||L(y)||d||h}function U(b){return!!(b=b||(typeof window>"u"?global.navigator:window.navigator))&&"string"==typeof b.userAgent&&/firefox|fxios/i.test(b.userAgent)}function N(b){return!!b.vendor&&-1!==b.vendor.indexOf("Apple")&&b.userAgent&&-1===b.userAgent.indexOf("CriOS")&&-1===b.userAgent.indexOf("FxiOS")}Object.defineProperty(T,"__esModule",{value:!0}),T.flatMap=T.queryToJson=T.isUnifiedPlanDefault=T.isSafari=T.isLegacyEdge=T.isFirefox=T.isChrome=T.isElectron=T.difference=T.average=T.Exception=void 0,D.prototype.toString=function(){return"Twilio.Exception: "+this.message},T.average=function v(b){return b&&b.length?b.reduce(function(y,m){return y+m})/b.length:0},T.difference=function M(b,y,m){m=m||function(d){return d};var h=new Set(y.map(m));return b.filter(function(d){return!h.has(m(d))})},T.isElectron=L,T.isChrome=R,T.isFirefox=U,T.isLegacyEdge=function O(b){return!!(b=b||(typeof window>"u"?global.navigator:window.navigator))&&"string"==typeof b.userAgent&&/edge\/\d+/i.test(b.userAgent)},T.isSafari=N,T.isUnifiedPlanDefault=function A(b,y,m,h){if(typeof b>"u"||typeof y>"u"||typeof m>"u"||typeof h>"u"||typeof m.prototype>"u"||typeof h.prototype>"u")return!1;if(R(b,y)&&m.prototype.addTransceiver){var d=new m,l=!0;try{d.addTransceiver("audio")}catch{l=!1}return d.close(),l}return!!U(y)||!!N(y)&&"currentDirection"in h.prototype},T.queryToJson=function k(b){return b?b.split("&").reduce(function(y,m){var h=m.split("="),d=h[0],l=decodeURIComponent((h[1]||"").replace(/\+/g,"%20"));return d&&(y[d]=l),y},{}):""},T.flatMap=function E(b,y){var m=b instanceof Map||b instanceof Set?Array.from(b.values()):b;return y=y||function(h){return h},m.reduce(function(h,d){var l=y(d);return h.concat(l)},[])},T.Exception=D},941:(he,T,D)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.generateVoiceEventSid=void 0;var v=D(95),M=D(287);T.generateVoiceEventSid=function R(){return"KX"+function L(){if("object"!=typeof window)throw new M.NotSupportedError("This platform is not supported.");var U=window.crypto;if("object"!=typeof U)throw new M.NotSupportedError("The `crypto` module is not available on this platform.");if(typeof(U.randomUUID||U.getRandomValues)>"u")throw new M.NotSupportedError("Neither `crypto.randomUUID` or `crypto.getRandomValues` are available on this platform.");if(typeof window.Uint32Array>"u")throw new M.NotSupportedError("The `Uint32Array` module is not available on this platform.");return v(("function"==typeof U.randomUUID?function(){return U.randomUUID()}:function(){return U.getRandomValues(new Uint32Array(32)).toString()})())}()}},483:function(he,T,D){"use strict";var l,v=this&&this.__extends||(l=function(g,f){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,S){I.__proto__=S}||function(I,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(I[x]=S[x])})(g,f)},function(g,f){function I(){this.constructor=g}l(g,f),g.prototype=null===f?Object.create(f):(I.prototype=f.prototype,new I)}),M=this&&this.__assign||function(){return M=Object.assign||function(l){for(var g,f=1,I=arguments.length;f<I;f++)for(var S in g=arguments[f])Object.prototype.hasOwnProperty.call(g,S)&&(l[S]=g[S]);return l},M.apply(this,arguments)};Object.defineProperty(T,"__esModule",{value:!0}),T.WSTransportState=void 0;var h,L=D(16),R=D(39),U=D(287),O=D(990),N=globalThis.WebSocket;!function(l){l.Connecting="connecting",l.Closed="closed",l.Open="open"}(h=T.WSTransportState||(T.WSTransportState={}));var d=function(l){function g(f,I){void 0===I&&(I={});var S=l.call(this)||this;return S.state=h.Closed,S._backoffStartTime={preferred:null,primary:null},S._connectedUri=null,S._log=O.default.getInstance(),S._shouldFallback=!1,S._uriIndex=0,S._moveUriIndex=function(){S._uriIndex++,S._uriIndex>=S._uris.length&&(S._uriIndex=0)},S._onSocketClose=function(x){S._log.info("Received websocket close event code: "+x.code+". Reason: "+x.reason),(1006===x.code||1015===x.code)&&(S.emit("error",{code:31005,message:x.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new U.SignalingErrors.ConnectionError}),(S._shouldFallback||!(S.state===h.Open||S._previousState===h.Open))&&S._moveUriIndex(),S._shouldFallback=!0),S._closeSocket()},S._onSocketError=function(x){S._log.info("WebSocket received error: "+x.message),S.emit("error",{code:31e3,message:x.message||"WSTransport socket error",twilioError:new U.SignalingErrors.ConnectionDisconnected})},S._onSocketMessage=function(x){S._setHeartbeatTimeout(),S._socket&&"\n"===x.data?S._socket.send("\n"):S.emit("message",x)},S._onSocketOpen=function(){S._log.info("WebSocket opened successfully."),S._timeOpened=Date.now(),S._shouldFallback=!1,S._setState(h.Open),clearTimeout(S._connectTimeout),S._resetBackoffs(),S._setHeartbeatTimeout(),S.emit("open")},S._options=M(M({},g.defaultConstructorOptions),I),S._uris=f,S._backoff=S._setupBackoffs(),S}return v(g,l),g.prototype.close=function(){this._log.info("WSTransport.close() called..."),this._close()},g.prototype.open=function(){this._log.info("WSTransport.open() called..."),!this._socket||this._socket.readyState!==N.CONNECTING&&this._socket.readyState!==N.OPEN?this._connect(this._preferredUri?this._preferredUri:this._uris[this._uriIndex]):this._log.info("WebSocket already open.")},g.prototype.send=function(f){if(!this._socket||this._socket.readyState!==N.OPEN)return!1;try{this._socket.send(f)}catch(I){return this._log.info("Error while sending message:",I.message),this._closeSocket(),!1}return!0},g.prototype.updatePreferredURI=function(f){this._preferredUri=f},g.prototype.updateURIs=function(f){"string"==typeof f&&(f=[f]),this._uris=f,this._uriIndex=0},g.prototype._close=function(){this._setState(h.Closed),this._closeSocket()},g.prototype._closeSocket=function(){clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),this._socket?(this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===N.CONNECTING||this._socket.readyState===N.OPEN)&&this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>1e4&&this._resetBackoffs(),this.state!==h.Closed&&this._performBackoff(),delete this._socket,this.emit("close")):this._log.info("No WebSocket to clean up.")},g.prototype._connect=function(f,I){var S=this;this._log.info("number"==typeof I?"Attempting to reconnect (retry #"+I+")...":"Attempting to connect..."),this._closeSocket(),this._setState(h.Connecting),this._connectedUri=f;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(x){return this._log.info("Could not connect to endpoint:",x.message),this._close(),void this.emit("error",{code:31e3,message:x.message||"Could not connect to "+this._connectedUri,twilioError:new U.SignalingErrors.ConnectionDisconnected})}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(function(){S._log.info("WebSocket connection attempt timed out."),S._moveUriIndex(),S._closeSocket()},this._options.connectTimeoutMs)},g.prototype._performBackoff=function(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())},g.prototype._resetBackoffs=function(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null},g.prototype._setHeartbeatTimeout=function(){var f=this;clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(function(){f._log.info("No messages received in 15 seconds. Reconnecting..."),f._shouldFallback=!0,f._closeSocket()},15e3)},g.prototype._setState=function(f){this._previousState=this.state,this.state=f},g.prototype._setupBackoffs=function(){var f=this,I={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",I);var S=new R.default(I);S.on("backoff",function(q,J){f.state!==h.Closed?(f._log.info("Will attempt to reconnect Websocket to preferred URI in "+J+"ms"),0===q&&(f._backoffStartTime.preferred=Date.now(),f._log.info("Preferred backoff start; "+f._backoffStartTime.preferred))):f._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.")}),S.on("ready",function(q,J){if(f.state!==h.Closed){if(null!==f._backoffStartTime.preferred)return Date.now()-f._backoffStartTime.preferred>f._options.maxPreferredDurationMs?(f._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),f._preferredUri=null,void f._backoff.primary.backoff()):"string"!=typeof f._preferredUri?(f._log.info("Preferred URI cleared; falling back to primary backoff."),f._preferredUri=null,void f._backoff.primary.backoff()):void f._connect(f._preferredUri,q+1);f._log.info("Preferred backoff start time invalid; not attempting a connection.")}else f._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.")});var x={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(4001*Math.random())+1e3:100};this._log.info("Initializing primary transport backoff using config: ",x);var V=new R.default(x);return V.on("backoff",function(q,J){f.state!==h.Closed?(f._log.info("Will attempt to reconnect WebSocket in "+J+"ms"),0===q&&(f._backoffStartTime.primary=Date.now(),f._log.info("Primary backoff start; "+f._backoffStartTime.primary))):f._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.")}),V.on("ready",function(q,J){f.state!==h.Closed?null!==f._backoffStartTime.primary?Date.now()-f._backoffStartTime.primary>f._options.maxPrimaryDurationMs?f._log.info("Max primary backoff attempt time exceeded; not attempting a connection."):f._connect(f._uris[f._uriIndex],q+1):f._log.info("Primary backoff start time invalid; not attempting a connection."):f._log.info("Primary backoff ready but transport state is closed; not attempting a connection.")}),{preferred:S,primary:V}},Object.defineProperty(g.prototype,"uri",{get:function(){return this._connectedUri},enumerable:!1,configurable:!0}),g.defaultConstructorOptions={WebSocket:N,connectTimeoutMs:5e3,maxPreferredDelayMs:1e3,maxPreferredDurationMs:15e3,maxPrimaryDelayMs:2e4,maxPrimaryDurationMs:1/0},g}(L.EventEmitter);T.default=d},870:he=>{var T={utf8:{stringToBytes:function(D){return T.bin.stringToBytes(unescape(encodeURIComponent(D)))},bytesToString:function(D){return decodeURIComponent(escape(T.bin.bytesToString(D)))}},bin:{stringToBytes:function(D){for(var v=[],M=0;M<D.length;M++)v.push(255&D.charCodeAt(M));return v},bytesToString:function(D){for(var v=[],M=0;M<D.length;M++)v.push(String.fromCharCode(D[M]));return v.join("")}}};he.exports=T},962:he=>{var T,D;T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he.exports=D={rotl:function(v,M){return v<<M|v>>>32-M},rotr:function(v,M){return v<<32-M|v>>>M},endian:function(v){if(v.constructor==Number)return 16711935&D.rotl(v,8)|4278255360&D.rotl(v,24);for(var M=0;M<v.length;M++)v[M]=D.endian(v[M]);return v},randomBytes:function(v){for(var M=[];v>0;v--)M.push(Math.floor(256*Math.random()));return M},bytesToWords:function(v){for(var M=[],L=0,R=0;L<v.length;L++,R+=8)M[R>>>5]|=v[L]<<24-R%32;return M},wordsToBytes:function(v){for(var M=[],L=0;L<32*v.length;L+=8)M.push(v[L>>>5]>>>24-L%32&255);return M},bytesToHex:function(v){for(var M=[],L=0;L<v.length;L++)M.push((v[L]>>>4).toString(16)),M.push((15&v[L]).toString(16));return M.join("")},hexToBytes:function(v){for(var M=[],L=0;L<v.length;L+=2)M.push(parseInt(v.substr(L,2),16));return M},bytesToBase64:function(v){for(var M=[],L=0;L<v.length;L+=3)for(var R=v[L]<<16|v[L+1]<<8|v[L+2],U=0;U<4;U++)M.push(8*L+6*U<=8*v.length?T.charAt(R>>>6*(3-U)&63):"=");return M.join("")},base64ToBytes:function(v){v=v.replace(/[^A-Z0-9+\/]/gi,"");for(var M=[],L=0,R=0;L<v.length;R=++L%4)0!=R&&M.push((T.indexOf(v.charAt(L-1))&Math.pow(2,-2*R+8)-1)<<2*R|T.indexOf(v.charAt(L))>>>6-2*R);return M}}},16:he=>{"use strict";var v,T="object"==typeof Reflect?Reflect:null,D=T&&"function"==typeof T.apply?T.apply:function(I,S,x){return Function.prototype.apply.call(I,S,x)};v=T&&"function"==typeof T.ownKeys?T.ownKeys:Object.getOwnPropertySymbols?function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.getOwnPropertyNames(I)};var L=Number.isNaN||function(I){return I!=I};function R(){R.init.call(this)}he.exports=R,he.exports.once=function d(f,I){return new Promise(function(S,x){function V(J){f.removeListener(I,q),x(J)}function q(){"function"==typeof f.removeListener&&f.removeListener("error",V),S([].slice.call(arguments))}g(f,I,q,{once:!0}),"error"!==I&&function l(f,I,S){"function"==typeof f.on&&g(f,"error",I,S)}(f,V,{once:!0})})},R.EventEmitter=R,R.prototype._events=void 0,R.prototype._eventsCount=0,R.prototype._maxListeners=void 0;var U=10;function O(f){if("function"!=typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}function N(f){return void 0===f._maxListeners?R.defaultMaxListeners:f._maxListeners}function A(f,I,S,x){var V,q,J;if(O(S),void 0===(q=f._events)?(q=f._events=Object.create(null),f._eventsCount=0):(void 0!==q.newListener&&(f.emit("newListener",I,S.listener?S.listener:S),q=f._events),J=q[I]),void 0===J)J=q[I]=S,++f._eventsCount;else if("function"==typeof J?J=q[I]=x?[S,J]:[J,S]:x?J.unshift(S):J.push(S),(V=N(f))>0&&J.length>V&&!J.warned){J.warned=!0;var re=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");re.name="MaxListenersExceededWarning",re.emitter=f,re.type=I,re.count=J.length,function M(f){console&&console.warn&&console.warn(f)}(re)}return f}function k(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(f,I,S){var x={fired:!1,wrapFn:void 0,target:f,type:I,listener:S},V=k.bind(x);return V.listener=S,x.wrapFn=V,V}function _(f,I,S){var x=f._events;if(void 0===x)return[];var V=x[I];return void 0===V?[]:"function"==typeof V?S?[V.listener||V]:[V]:S?function h(f){for(var I=new Array(f.length),S=0;S<I.length;++S)I[S]=f[S].listener||f[S];return I}(V):y(V,V.length)}function b(f){var I=this._events;if(void 0!==I){var S=I[f];if("function"==typeof S)return 1;if(void 0!==S)return S.length}return 0}function y(f,I){for(var S=new Array(I),x=0;x<I;++x)S[x]=f[x];return S}function g(f,I,S,x){if("function"==typeof f.on)x.once?f.once(I,S):f.on(I,S);else{if("function"!=typeof f.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof f);f.addEventListener(I,function V(q){x.once&&f.removeEventListener(I,V),S(q)})}}Object.defineProperty(R,"defaultMaxListeners",{enumerable:!0,get:function(){return U},set:function(f){if("number"!=typeof f||f<0||L(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");U=f}}),R.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},R.prototype.setMaxListeners=function(I){if("number"!=typeof I||I<0||L(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this},R.prototype.getMaxListeners=function(){return N(this)},R.prototype.emit=function(I){for(var S=[],x=1;x<arguments.length;x++)S.push(arguments[x]);var V="error"===I,q=this._events;if(void 0!==q)V=V&&void 0===q.error;else if(!V)return!1;if(V){var J;if(S.length>0&&(J=S[0]),J instanceof Error)throw J;var re=new Error("Unhandled error."+(J?" ("+J.message+")":""));throw re.context=J,re}var Q=q[I];if(void 0===Q)return!1;if("function"==typeof Q)D(Q,this,S);else{var F=Q.length,j=y(Q,F);for(x=0;x<F;++x)D(j[x],this,S)}return!0},R.prototype.on=R.prototype.addListener=function(I,S){return A(this,I,S,!1)},R.prototype.prependListener=function(I,S){return A(this,I,S,!0)},R.prototype.once=function(I,S){return O(S),this.on(I,E(this,I,S)),this},R.prototype.prependOnceListener=function(I,S){return O(S),this.prependListener(I,E(this,I,S)),this},R.prototype.off=R.prototype.removeListener=function(I,S){var x,V,q,J,re;if(O(S),void 0===(V=this._events))return this;if(void 0===(x=V[I]))return this;if(x===S||x.listener===S)0==--this._eventsCount?this._events=Object.create(null):(delete V[I],V.removeListener&&this.emit("removeListener",I,x.listener||S));else if("function"!=typeof x){for(q=-1,J=x.length-1;J>=0;J--)if(x[J]===S||x[J].listener===S){re=x[J].listener,q=J;break}if(q<0)return this;0===q?x.shift():function m(f,I){for(;I+1<f.length;I++)f[I]=f[I+1];f.pop()}(x,q),1===x.length&&(V[I]=x[0]),void 0!==V.removeListener&&this.emit("removeListener",I,re||S)}return this},R.prototype.removeAllListeners=function(I){var S,x,V;if(void 0===(x=this._events))return this;if(void 0===x.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==x[I]&&(0==--this._eventsCount?this._events=Object.create(null):delete x[I]),this;if(0===arguments.length){var J,q=Object.keys(x);for(V=0;V<q.length;++V)"removeListener"!==(J=q[V])&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(S=x[I]))this.removeListener(I,S);else if(void 0!==S)for(V=S.length-1;V>=0;V--)this.removeListener(I,S[V]);return this},R.prototype.listeners=function(I){return _(this,I,!0)},R.prototype.rawListeners=function(I){return _(this,I,!1)},R.listenerCount=function(f,I){return"function"==typeof f.listenerCount?f.listenerCount(I):b.call(f,I)},R.prototype.listenerCount=b,R.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},678:he=>{function T(v){return!!v.constructor&&"function"==typeof v.constructor.isBuffer&&v.constructor.isBuffer(v)}he.exports=function(v){return null!=v&&(T(v)||function D(v){return"function"==typeof v.readFloatLE&&"function"==typeof v.slice&&T(v.slice(0,0))}(v)||!!v._isBuffer)}},182:function(he,T,D){var v,M;!function(L,R){"use strict";v=function(){var L=function(){},R="undefined",U=typeof window!==R&&typeof window.navigator!==R&&/Trident\/|MSIE /.test(window.navigator.userAgent),O=["trace","debug","info","warn","error"];function N(l,g){var f=l[g];if("function"==typeof f.bind)return f.bind(l);try{return Function.prototype.bind.call(f,l)}catch{return function(){return Function.prototype.apply.apply(f,[l,arguments])}}}function A(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function E(l,g){for(var f=0;f<O.length;f++){var I=O[f];this[I]=f<l?L:this.methodFactory(I,l,g)}this.log=this.debug}function _(l,g,f){return function(){typeof console!==R&&(E.call(this,g,f),this[l].apply(this,arguments))}}function b(l,g,f){return function k(l){return"debug"===l&&(l="log"),typeof console!==R&&("trace"===l&&U?A:void 0!==console[l]?N(console,l):void 0!==console.log?N(console,"log"):L)}(l)||_.apply(this,arguments)}function y(l,g,f){var S,I=this,x="loglevel";function q(){var re;if(typeof window!==R){try{re=window.localStorage[x]}catch{}if(typeof re===R)try{var Q=window.document.cookie,F=Q.indexOf(encodeURIComponent(x)+"=");-1!==F&&(re=/^([^;]+)/.exec(Q.slice(F))[1])}catch{}return void 0===I.levels[re]&&(re=void 0),re}}l&&(x+=":"+l),I.name=l,I.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},I.methodFactory=f||b,I.getLevel=function(){return S},I.setLevel=function(re,Q){if("string"==typeof re&&void 0!==I.levels[re.toUpperCase()]&&(re=I.levels[re.toUpperCase()]),!("number"==typeof re&&re>=0&&re<=I.levels.SILENT))throw"log.setLevel() called with invalid level: "+re;if(S=re,!1!==Q&&function V(re){var Q=(O[re]||"silent").toUpperCase();if(typeof window!==R){try{return void(window.localStorage[x]=Q)}catch{}try{window.document.cookie=encodeURIComponent(x)+"="+Q+";"}catch{}}}(re),E.call(I,re,l),typeof console===R&&re<I.levels.SILENT)return"No console available for logging"},I.setDefaultLevel=function(re){q()||I.setLevel(re,!1)},I.enableAll=function(re){I.setLevel(I.levels.TRACE,re)},I.disableAll=function(re){I.setLevel(I.levels.SILENT,re)};var J=q();null==J&&(J=g??"WARN"),I.setLevel(J,!1)}var m=new y,h={};m.getLogger=function(g){if("string"!=typeof g||""===g)throw new TypeError("You must supply a name when creating a logger.");var f=h[g];return f||(f=h[g]=new y(g,m.getLevel(),m.methodFactory)),f};var d=typeof window!==R?window.log:void 0;return m.noConflict=function(){return typeof window!==R&&window.log===m&&(window.log=d),m},m.getLoggers=function(){return h},m},void 0!==(M=v.call(T,D,T,he))&&(he.exports=M)}()},95:(he,T,D)=>{var v,M,L,R,U;v=D(962),M=D(870).utf8,L=D(678),R=D(870).bin,(U=function(O,N){O.constructor==String?O=N&&"binary"===N.encoding?R.stringToBytes(O):M.stringToBytes(O):L(O)?O=Array.prototype.slice.call(O,0):!Array.isArray(O)&&O.constructor!==Uint8Array&&(O=O.toString());for(var A=v.bytesToWords(O),k=8*O.length,E=1732584193,_=-271733879,b=-1732584194,y=271733878,m=0;m<A.length;m++)A[m]=16711935&(A[m]<<8|A[m]>>>24)|4278255360&(A[m]<<24|A[m]>>>8);A[k>>>5]|=128<<k%32,A[14+(k+64>>>9<<4)]=k;var h=U._ff,d=U._gg,l=U._hh,g=U._ii;for(m=0;m<A.length;m+=16){var f=E,I=_,S=b,x=y;E=h(E,_,b,y,A[m+0],7,-680876936),y=h(y,E,_,b,A[m+1],12,-389564586),b=h(b,y,E,_,A[m+2],17,606105819),_=h(_,b,y,E,A[m+3],22,-1044525330),E=h(E,_,b,y,A[m+4],7,-176418897),y=h(y,E,_,b,A[m+5],12,1200080426),b=h(b,y,E,_,A[m+6],17,-1473231341),_=h(_,b,y,E,A[m+7],22,-45705983),E=h(E,_,b,y,A[m+8],7,1770035416),y=h(y,E,_,b,A[m+9],12,-1958414417),b=h(b,y,E,_,A[m+10],17,-42063),_=h(_,b,y,E,A[m+11],22,-1990404162),E=h(E,_,b,y,A[m+12],7,1804603682),y=h(y,E,_,b,A[m+13],12,-40341101),b=h(b,y,E,_,A[m+14],17,-1502002290),E=d(E,_=h(_,b,y,E,A[m+15],22,1236535329),b,y,A[m+1],5,-165796510),y=d(y,E,_,b,A[m+6],9,-1069501632),b=d(b,y,E,_,A[m+11],14,643717713),_=d(_,b,y,E,A[m+0],20,-373897302),E=d(E,_,b,y,A[m+5],5,-701558691),y=d(y,E,_,b,A[m+10],9,38016083),b=d(b,y,E,_,A[m+15],14,-660478335),_=d(_,b,y,E,A[m+4],20,-405537848),E=d(E,_,b,y,A[m+9],5,568446438),y=d(y,E,_,b,A[m+14],9,-1019803690),b=d(b,y,E,_,A[m+3],14,-187363961),_=d(_,b,y,E,A[m+8],20,1163531501),E=d(E,_,b,y,A[m+13],5,-1444681467),y=d(y,E,_,b,A[m+2],9,-51403784),b=d(b,y,E,_,A[m+7],14,1735328473),E=l(E,_=d(_,b,y,E,A[m+12],20,-1926607734),b,y,A[m+5],4,-378558),y=l(y,E,_,b,A[m+8],11,-2022574463),b=l(b,y,E,_,A[m+11],16,1839030562),_=l(_,b,y,E,A[m+14],23,-35309556),E=l(E,_,b,y,A[m+1],4,-1530992060),y=l(y,E,_,b,A[m+4],11,1272893353),b=l(b,y,E,_,A[m+7],16,-155497632),_=l(_,b,y,E,A[m+10],23,-1094730640),E=l(E,_,b,y,A[m+13],4,681279174),y=l(y,E,_,b,A[m+0],11,-358537222),b=l(b,y,E,_,A[m+3],16,-722521979),_=l(_,b,y,E,A[m+6],23,76029189),E=l(E,_,b,y,A[m+9],4,-640364487),y=l(y,E,_,b,A[m+12],11,-421815835),b=l(b,y,E,_,A[m+15],16,530742520),E=g(E,_=l(_,b,y,E,A[m+2],23,-995338651),b,y,A[m+0],6,-198630844),y=g(y,E,_,b,A[m+7],10,1126891415),b=g(b,y,E,_,A[m+14],15,-1416354905),_=g(_,b,y,E,A[m+5],21,-57434055),E=g(E,_,b,y,A[m+12],6,1700485571),y=g(y,E,_,b,A[m+3],10,-1894986606),b=g(b,y,E,_,A[m+10],15,-1051523),_=g(_,b,y,E,A[m+1],21,-2054922799),E=g(E,_,b,y,A[m+8],6,1873313359),y=g(y,E,_,b,A[m+15],10,-30611744),b=g(b,y,E,_,A[m+6],15,-1560198380),_=g(_,b,y,E,A[m+13],21,1309151649),E=g(E,_,b,y,A[m+4],6,-145523070),y=g(y,E,_,b,A[m+11],10,-1120210379),b=g(b,y,E,_,A[m+2],15,718787259),_=g(_,b,y,E,A[m+9],21,-343485551),E=E+f>>>0,_=_+I>>>0,b=b+S>>>0,y=y+x>>>0}return v.endian([E,_,b,y])})._ff=function(O,N,A,k,E,_,b){var y=O+(N&A|~N&k)+(E>>>0)+b;return(y<<_|y>>>32-_)+N},U._gg=function(O,N,A,k,E,_,b){var y=O+(N&k|A&~k)+(E>>>0)+b;return(y<<_|y>>>32-_)+N},U._hh=function(O,N,A,k,E,_,b){var y=O+(N^A^k)+(E>>>0)+b;return(y<<_|y>>>32-_)+N},U._ii=function(O,N,A,k,E,_,b){var y=O+(A^(N|~k))+(E>>>0)+b;return(y<<_|y>>>32-_)+N},U._blocksize=16,U._digestsize=16,he.exports=function(O,N){if(null==O)throw new Error("Illegal argument "+O);var A=v.wordsToBytes(U(O,N));return N&&N.asBytes?A:N&&N.asString?R.bytesToString(A):v.bytesToHex(A)}},191:(he,T,D)=>{"use strict";var v=D(917);function M(A,k,E,_,b){var y=v.writeRtpDescription(A.kind,k);if(y+=v.writeIceParameters(A.iceGatherer.getLocalParameters()),y+=v.writeDtlsParameters(A.dtlsTransport.getLocalParameters(),"offer"===E?"actpass":b||"active"),y+="a=mid:"+A.mid+"\r\n",y+=A.rtpSender&&A.rtpReceiver?"a=sendrecv\r\n":A.rtpSender?"a=sendonly\r\n":A.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",A.rtpSender){var m=A.rtpSender._initialTrackId||A.rtpSender.track.id;A.rtpSender._initialTrackId=m;var h="msid:"+(_?_.id:"-")+" "+m+"\r\n";y+="a="+h,y+="a=ssrc:"+A.sendEncodingParameters[0].ssrc+" "+h,A.sendEncodingParameters[0].rtx&&(y+="a=ssrc:"+A.sendEncodingParameters[0].rtx.ssrc+" "+h,y+="a=ssrc-group:FID "+A.sendEncodingParameters[0].ssrc+" "+A.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return y+="a=ssrc:"+A.sendEncodingParameters[0].ssrc+" cname:"+v.localCName+"\r\n",A.rtpSender&&A.sendEncodingParameters[0].rtx&&(y+="a=ssrc:"+A.sendEncodingParameters[0].rtx.ssrc+" cname:"+v.localCName+"\r\n"),y}function R(A,k){var E={codecs:[],headerExtensions:[],fecMechanisms:[]},_=function(y,m){y=parseInt(y,10);for(var h=0;h<m.length;h++)if(m[h].payloadType===y||m[h].preferredPayloadType===y)return m[h]},b=function(y,m,h,d){var l=_(y.parameters.apt,h),g=_(m.parameters.apt,d);return l&&g&&l.name.toLowerCase()===g.name.toLowerCase()};return A.codecs.forEach(function(y){for(var m=0;m<k.codecs.length;m++){var h=k.codecs[m];if(y.name.toLowerCase()===h.name.toLowerCase()&&y.clockRate===h.clockRate){if("rtx"===y.name.toLowerCase()&&y.parameters&&h.parameters.apt&&!b(y,h,A.codecs,k.codecs))continue;(h=JSON.parse(JSON.stringify(h))).numChannels=Math.min(y.numChannels,h.numChannels),E.codecs.push(h),h.rtcpFeedback=h.rtcpFeedback.filter(function(d){for(var l=0;l<y.rtcpFeedback.length;l++)if(y.rtcpFeedback[l].type===d.type&&y.rtcpFeedback[l].parameter===d.parameter)return!0;return!1});break}}}),A.headerExtensions.forEach(function(y){for(var m=0;m<k.headerExtensions.length;m++){var h=k.headerExtensions[m];if(y.uri===h.uri){E.headerExtensions.push(h);break}}}),E}function U(A,k,E){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[k][A].indexOf(E)}function O(A,k){var E=A.getRemoteCandidates().find(function(_){return k.foundation===_.foundation&&k.ip===_.ip&&k.port===_.port&&k.priority===_.priority&&k.protocol===_.protocol&&k.type===_.type});return E||A.addRemoteCandidate(k),!E}function N(A,k){var E=new Error(k);return E.name=A,E}he.exports=function(A,k){function E(h,d){d.addTrack(h),d.dispatchEvent(new A.MediaStreamTrackEvent("addtrack",{track:h}))}function b(h,d,l,g){var f=new Event("track");f.track=d,f.receiver=l,f.transceiver={receiver:l},f.streams=g,A.setTimeout(function(){h._dispatchEvent("track",f)})}var y=function(h){var d=this,l=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(f){d[f]=l[f].bind(l)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",h=JSON.parse(JSON.stringify(h||{})),this.usingBundle="max-bundle"===h.bundlePolicy,"negotiate"===h.rtcpMuxPolicy)throw N("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(h.rtcpMuxPolicy||(h.rtcpMuxPolicy="require"),h.iceTransportPolicy){case"all":case"relay":break;default:h.iceTransportPolicy="all"}switch(h.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:h.bundlePolicy="balanced"}if(h.iceServers=function L(A,k){var E=!1;return(A=JSON.parse(JSON.stringify(A))).filter(function(_){if(_&&(_.urls||_.url)){var b=_.urls||_.url;_.url&&!_.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var y="string"==typeof b;return y&&(b=[b]),b=b.filter(function(m){return 0!==m.indexOf("turn:")||-1===m.indexOf("transport=udp")||-1!==m.indexOf("turn:[")||E?0===m.indexOf("stun:")&&k>=14393&&-1===m.indexOf("?transport=udp"):(E=!0,!0)}),delete _.url,_.urls=y?b[0]:b,!!b.length}})}(h.iceServers||[],k),this._iceGatherers=[],h.iceCandidatePoolSize)for(var g=h.iceCandidatePoolSize;g>0;g--)this._iceGatherers.push(new A.RTCIceGatherer({iceServers:h.iceServers,gatherPolicy:h.iceTransportPolicy}));else h.iceCandidatePoolSize=0;this._config=h,this.transceivers=[],this._sdpSessionId=v.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};y.prototype.onicecandidate=null,y.prototype.onaddstream=null,y.prototype.ontrack=null,y.prototype.onremovestream=null,y.prototype.onsignalingstatechange=null,y.prototype.oniceconnectionstatechange=null,y.prototype.onicegatheringstatechange=null,y.prototype.onnegotiationneeded=null,y.prototype.ondatachannel=null,y.prototype._dispatchEvent=function(h,d){this._isClosed||(this.dispatchEvent(d),"function"==typeof this["on"+h]&&this["on"+h](d))},y.prototype._emitGatheringStateChange=function(){var h=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",h)},y.prototype.getConfiguration=function(){return this._config},y.prototype.getLocalStreams=function(){return this.localStreams},y.prototype.getRemoteStreams=function(){return this.remoteStreams},y.prototype._createTransceiver=function(h){var l={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:h,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)l.iceTransport=this.transceivers[0].iceTransport,l.dtlsTransport=this.transceivers[0].dtlsTransport;else{var g=this._createIceAndDtlsTransports();l.iceTransport=g.iceTransport,l.dtlsTransport=g.dtlsTransport}return this.transceivers.push(l),l},y.prototype.addTrack=function(h,d){if(this._isClosed)throw N("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(I){return I.track===h}))throw N("InvalidAccessError","Track already exists.");for(var g,f=0;f<this.transceivers.length;f++)!this.transceivers[f].track&&this.transceivers[f].kind===h.kind&&(g=this.transceivers[f]);return g||(g=this._createTransceiver(h.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(d)&&this.localStreams.push(d),g.track=h,g.stream=d,g.rtpSender=new A.RTCRtpSender(h,g.dtlsTransport),g.rtpSender},y.prototype.addStream=function(h){var d=this;if(k>=15025)h.getTracks().forEach(function(g){d.addTrack(g,h)});else{var l=h.clone();h.getTracks().forEach(function(g,f){var I=l.getTracks()[f];g.addEventListener("enabled",function(S){I.enabled=S.enabled})}),l.getTracks().forEach(function(g){d.addTrack(g,l)})}},y.prototype.removeTrack=function(h){if(this._isClosed)throw N("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(h instanceof A.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var d=this.transceivers.find(function(f){return f.rtpSender===h});if(!d)throw N("InvalidAccessError","Sender was not created by this connection.");var l=d.stream;d.rtpSender.stop(),d.rtpSender=null,d.track=null,d.stream=null,-1===this.transceivers.map(function(f){return f.stream}).indexOf(l)&&this.localStreams.indexOf(l)>-1&&this.localStreams.splice(this.localStreams.indexOf(l),1),this._maybeFireNegotiationNeeded()},y.prototype.removeStream=function(h){var d=this;h.getTracks().forEach(function(l){var g=d.getSenders().find(function(f){return f.track===l});g&&d.removeTrack(g)})},y.prototype.getSenders=function(){return this.transceivers.filter(function(h){return!!h.rtpSender}).map(function(h){return h.rtpSender})},y.prototype.getReceivers=function(){return this.transceivers.filter(function(h){return!!h.rtpReceiver}).map(function(h){return h.rtpReceiver})},y.prototype._createIceGatherer=function(h,d){var l=this;if(d&&h>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var g=new A.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(g,"state",{value:"new",writable:!0}),this.transceivers[h].bufferedCandidateEvents=[],this.transceivers[h].bufferCandidates=function(f){var I=!f.candidate||0===Object.keys(f.candidate).length;g.state=I?"completed":"gathering",null!==l.transceivers[h].bufferedCandidateEvents&&l.transceivers[h].bufferedCandidateEvents.push(f)},g.addEventListener("localcandidate",this.transceivers[h].bufferCandidates),g},y.prototype._gather=function(h,d){var l=this,g=this.transceivers[d].iceGatherer;if(!g.onlocalcandidate){var f=this.transceivers[d].bufferedCandidateEvents;this.transceivers[d].bufferedCandidateEvents=null,g.removeEventListener("localcandidate",this.transceivers[d].bufferCandidates),g.onlocalcandidate=function(I){if(!(l.usingBundle&&d>0)){var S=new Event("icecandidate");S.candidate={sdpMid:h,sdpMLineIndex:d};var x=I.candidate,V=!x||0===Object.keys(x).length;if(V)("new"===g.state||"gathering"===g.state)&&(g.state="completed");else{"new"===g.state&&(g.state="gathering"),x.component=1;var q=v.writeCandidate(x);S.candidate=Object.assign(S.candidate,v.parseCandidate(q)),S.candidate.candidate=q}var J=v.getMediaSections(l.localDescription.sdp);J[S.candidate.sdpMLineIndex]+=V?"a=end-of-candidates\r\n":"a="+S.candidate.candidate+"\r\n",l.localDescription.sdp=v.getDescription(l.localDescription.sdp)+J.join("");var re=l.transceivers.every(function(Q){return Q.iceGatherer&&"completed"===Q.iceGatherer.state});"gathering"!==l.iceGatheringState&&(l.iceGatheringState="gathering",l._emitGatheringStateChange()),V||l._dispatchEvent("icecandidate",S),re&&(l._dispatchEvent("icecandidate",new Event("icecandidate")),l.iceGatheringState="complete",l._emitGatheringStateChange())}},A.setTimeout(function(){f.forEach(function(I){g.onlocalcandidate(I)})},0)}},y.prototype._createIceAndDtlsTransports=function(){var h=this,d=new A.RTCIceTransport(null);d.onicestatechange=function(){h._updateConnectionState()};var l=new A.RTCDtlsTransport(d);return l.ondtlsstatechange=function(){h._updateConnectionState()},l.onerror=function(){Object.defineProperty(l,"state",{value:"failed",writable:!0}),h._updateConnectionState()},{iceTransport:d,dtlsTransport:l}},y.prototype._disposeIceAndDtlsTransports=function(h){var d=this.transceivers[h].iceGatherer;d&&(delete d.onlocalcandidate,delete this.transceivers[h].iceGatherer);var l=this.transceivers[h].iceTransport;l&&(delete l.onicestatechange,delete this.transceivers[h].iceTransport);var g=this.transceivers[h].dtlsTransport;g&&(delete g.ondtlsstatechange,delete g.onerror,delete this.transceivers[h].dtlsTransport)},y.prototype._transceive=function(h,d,l){var g=R(h.localCapabilities,h.remoteCapabilities);d&&h.rtpSender&&(g.encodings=h.sendEncodingParameters,g.rtcp={cname:v.localCName,compound:h.rtcpParameters.compound},h.recvEncodingParameters.length&&(g.rtcp.ssrc=h.recvEncodingParameters[0].ssrc),h.rtpSender.send(g)),l&&h.rtpReceiver&&g.codecs.length>0&&("video"===h.kind&&h.recvEncodingParameters&&k<15019&&h.recvEncodingParameters.forEach(function(f){delete f.rtx}),g.encodings=h.recvEncodingParameters.length?h.recvEncodingParameters:[{}],g.rtcp={compound:h.rtcpParameters.compound},h.rtcpParameters.cname&&(g.rtcp.cname=h.rtcpParameters.cname),h.sendEncodingParameters.length&&(g.rtcp.ssrc=h.sendEncodingParameters[0].ssrc),h.rtpReceiver.receive(g))},y.prototype.setLocalDescription=function(h){var l,g,d=this;if(-1===["offer","answer"].indexOf(h.type))return Promise.reject(N("TypeError",'Unsupported type "'+h.type+'"'));if(!U("setLocalDescription",h.type,d.signalingState)||d._isClosed)return Promise.reject(N("InvalidStateError","Can not set local "+h.type+" in state "+d.signalingState));if("offer"===h.type)l=v.splitSections(h.sdp),g=l.shift(),l.forEach(function(I,S){var x=v.parseRtpParameters(I);d.transceivers[S].localCapabilities=x}),d.transceivers.forEach(function(I,S){d._gather(I.mid,S)});else if("answer"===h.type){l=v.splitSections(d.remoteDescription.sdp),g=l.shift();var f=v.matchPrefix(g,"a=ice-lite").length>0;l.forEach(function(I,S){var x=d.transceivers[S],V=x.iceGatherer,q=x.iceTransport,J=x.dtlsTransport,re=x.localCapabilities,Q=x.remoteCapabilities;if(!(v.isRejected(I)&&0===v.matchPrefix(I,"a=bundle-only").length||x.isDatachannel)){var j=v.getIceParameters(I,g),W=v.getDtlsParameters(I,g);f&&(W.role="server"),(!d.usingBundle||0===S)&&(d._gather(x.mid,S),"new"===q.state&&q.start(V,j,f?"controlling":"controlled"),"new"===J.state&&J.start(W));var C=R(re,Q);d._transceive(x,C.codecs.length>0,!1)}})}return d.localDescription={type:h.type,sdp:h.sdp},d._updateSignalingState("offer"===h.type?"have-local-offer":"stable"),Promise.resolve()},y.prototype.setRemoteDescription=function(h){var d=this;if(-1===["offer","answer"].indexOf(h.type))return Promise.reject(N("TypeError",'Unsupported type "'+h.type+'"'));if(!U("setRemoteDescription",h.type,d.signalingState)||d._isClosed)return Promise.reject(N("InvalidStateError","Can not set remote "+h.type+" in state "+d.signalingState));var l={};d.remoteStreams.forEach(function(q){l[q.id]=q});var g=[],f=v.splitSections(h.sdp),I=f.shift(),S=v.matchPrefix(I,"a=ice-lite").length>0,x=v.matchPrefix(I,"a=group:BUNDLE ").length>0;d.usingBundle=x;var V=v.matchPrefix(I,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!V&&V.substr(14).split(" ").indexOf("trickle")>=0,f.forEach(function(q,J){var re=v.splitLines(q),Q=v.getKind(q),F=v.isRejected(q)&&0===v.matchPrefix(q,"a=bundle-only").length,j=re[0].substr(2).split(" ")[2],W=v.getDirection(q,I),C=v.parseMsid(q),B=v.getMid(q)||v.generateIdentifier();if("application"!==Q||"DTLS/SCTP"!==j){var Y,fe,$,z,ee,se,Re,pe,Ae,Fe,ht,me=v.parseRtpParameters(q);F||(Fe=v.getIceParameters(q,I),(ht=v.getDtlsParameters(q,I)).role="client"),Re=v.parseRtpEncodingParameters(q);var Se=v.parseRtcpParameters(q),Yt=v.matchPrefix(q,"a=end-of-candidates",I).length>0,gr=v.matchPrefix(q,"a=candidate:").map(function(jt){return v.parseCandidate(jt)}).filter(function(jt){return 1===jt.component});if(("offer"===h.type||"answer"===h.type)&&!F&&x&&J>0&&d.transceivers[J]&&(d._disposeIceAndDtlsTransports(J),d.transceivers[J].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[J].iceTransport=d.transceivers[0].iceTransport,d.transceivers[J].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[J].rtpSender&&d.transceivers[J].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[J].rtpReceiver&&d.transceivers[J].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==h.type||F)"answer"===h.type&&!F&&(fe=(Y=d.transceivers[J]).iceGatherer,$=Y.iceTransport,z=Y.dtlsTransport,ee=Y.rtpReceiver,se=Y.sendEncodingParameters,pe=Y.localCapabilities,d.transceivers[J].recvEncodingParameters=Re,d.transceivers[J].remoteCapabilities=me,d.transceivers[J].rtcpParameters=Se,gr.length&&"new"===$.state&&(!S&&!Yt||x&&0!==J?gr.forEach(function(jt){O(Y.iceTransport,jt)}):$.setRemoteCandidates(gr)),(!x||0===J)&&("new"===$.state&&$.start(fe,Fe,"controlling"),"new"===z.state&&z.start(ht)),d._transceive(Y,"sendrecv"===W||"recvonly"===W,"sendrecv"===W||"sendonly"===W),!ee||"sendrecv"!==W&&"sendonly"!==W?delete Y.rtpReceiver:(Ae=ee.track,C?(l[C.stream]||(l[C.stream]=new A.MediaStream),E(Ae,l[C.stream]),g.push([Ae,ee,l[C.stream]])):(l.default||(l.default=new A.MediaStream),E(Ae,l.default),g.push([Ae,ee,l.default]))));else{(Y=d.transceivers[J]||d._createTransceiver(Q)).mid=B,Y.iceGatherer||(Y.iceGatherer=d._createIceGatherer(J,x)),gr.length&&"new"===Y.iceTransport.state&&(!Yt||x&&0!==J?gr.forEach(function(jt){O(Y.iceTransport,jt)}):Y.iceTransport.setRemoteCandidates(gr)),pe=A.RTCRtpReceiver.getCapabilities(Q),k<15019&&(pe.codecs=pe.codecs.filter(function(jt){return"rtx"!==jt.name})),se=Y.sendEncodingParameters||[{ssrc:1001*(2*J+2)}];var mr,Lr=!1;"sendrecv"===W||"sendonly"===W?(Lr=!Y.rtpReceiver,ee=Y.rtpReceiver||new A.RTCRtpReceiver(Y.dtlsTransport,Q),Lr&&(Ae=ee.track,C&&"-"===C.stream||(C?(l[C.stream]||(l[C.stream]=new A.MediaStream,Object.defineProperty(l[C.stream],"id",{get:function(){return C.stream}})),Object.defineProperty(Ae,"id",{get:function(){return C.track}}),mr=l[C.stream]):(l.default||(l.default=new A.MediaStream),mr=l.default)),mr&&(E(Ae,mr),Y.associatedRemoteMediaStreams.push(mr)),g.push([Ae,ee,mr]))):Y.rtpReceiver&&Y.rtpReceiver.track&&(Y.associatedRemoteMediaStreams.forEach(function(jt){var Us=jt.getTracks().find(function(wp){return wp.id===Y.rtpReceiver.track.id});Us&&function _(h,d){d.removeTrack(h),d.dispatchEvent(new A.MediaStreamTrackEvent("removetrack",{track:h}))}(Us,jt)}),Y.associatedRemoteMediaStreams=[]),Y.localCapabilities=pe,Y.remoteCapabilities=me,Y.rtpReceiver=ee,Y.rtcpParameters=Se,Y.sendEncodingParameters=se,Y.recvEncodingParameters=Re,d._transceive(d.transceivers[J],!1,Lr)}}else d.transceivers[J]={mid:B,isDatachannel:!0}}),void 0===d._dtlsRole&&(d._dtlsRole="offer"===h.type?"active":"passive"),d.remoteDescription={type:h.type,sdp:h.sdp},d._updateSignalingState("offer"===h.type?"have-remote-offer":"stable"),Object.keys(l).forEach(function(q){var J=l[q];if(J.getTracks().length){if(-1===d.remoteStreams.indexOf(J)){d.remoteStreams.push(J);var re=new Event("addstream");re.stream=J,A.setTimeout(function(){d._dispatchEvent("addstream",re)})}g.forEach(function(Q){J.id===Q[2].id&&b(d,Q[0],Q[1],[J])})}}),g.forEach(function(q){q[2]||b(d,q[0],q[1],[])}),A.setTimeout(function(){d&&d.transceivers&&d.transceivers.forEach(function(q){q.iceTransport&&"new"===q.iceTransport.state&&q.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),q.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},y.prototype.close=function(){this.transceivers.forEach(function(h){h.iceTransport&&h.iceTransport.stop(),h.dtlsTransport&&h.dtlsTransport.stop(),h.rtpSender&&h.rtpSender.stop(),h.rtpReceiver&&h.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},y.prototype._updateSignalingState=function(h){this.signalingState=h;var d=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",d)},y.prototype._maybeFireNegotiationNeeded=function(){var h=this;"stable"!==this.signalingState||!0===this.needNegotiation||(this.needNegotiation=!0,A.setTimeout(function(){if(h.needNegotiation){h.needNegotiation=!1;var d=new Event("negotiationneeded");h._dispatchEvent("negotiationneeded",d)}},0))},y.prototype._updateConnectionState=function(){var h,d={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(g){d[g.iceTransport.state]++,d[g.dtlsTransport.state]++}),d.connected+=d.completed,h="new",d.failed>0?h="failed":d.connecting>0||d.checking>0?h="connecting":d.disconnected>0?h="disconnected":d.new>0?h="new":(d.connected>0||d.completed>0)&&(h="connected"),h!==this.iceConnectionState){this.iceConnectionState=h;var l=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",l)}},y.prototype.createOffer=function(){var h=this;if(h._isClosed)return Promise.reject(N("InvalidStateError","Can not call createOffer after close"));var d=h.transceivers.filter(function(S){return"audio"===S.kind}).length,l=h.transceivers.filter(function(S){return"video"===S.kind}).length,g=arguments[0];if(g){if(g.mandatory||g.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==g.offerToReceiveAudio&&(d=!0===g.offerToReceiveAudio?1:!1===g.offerToReceiveAudio?0:g.offerToReceiveAudio),void 0!==g.offerToReceiveVideo&&(l=!0===g.offerToReceiveVideo?1:!1===g.offerToReceiveVideo?0:g.offerToReceiveVideo)}for(h.transceivers.forEach(function(S){"audio"===S.kind?--d<0&&(S.wantReceive=!1):"video"===S.kind&&--l<0&&(S.wantReceive=!1)});d>0||l>0;)d>0&&(h._createTransceiver("audio"),d--),l>0&&(h._createTransceiver("video"),l--);var f=v.writeSessionBoilerplate(h._sdpSessionId,h._sdpSessionVersion++);h.transceivers.forEach(function(S,x){var V=S.track,q=S.kind,J=S.mid||v.generateIdentifier();S.mid=J,S.iceGatherer||(S.iceGatherer=h._createIceGatherer(x,h.usingBundle));var re=A.RTCRtpSender.getCapabilities(q);k<15019&&(re.codecs=re.codecs.filter(function(F){return"rtx"!==F.name})),re.codecs.forEach(function(F){"H264"===F.name&&void 0===F.parameters["level-asymmetry-allowed"]&&(F.parameters["level-asymmetry-allowed"]="1"),S.remoteCapabilities&&S.remoteCapabilities.codecs&&S.remoteCapabilities.codecs.forEach(function(j){F.name.toLowerCase()===j.name.toLowerCase()&&F.clockRate===j.clockRate&&(F.preferredPayloadType=j.payloadType)})}),re.headerExtensions.forEach(function(F){(S.remoteCapabilities&&S.remoteCapabilities.headerExtensions||[]).forEach(function(W){F.uri===W.uri&&(F.id=W.id)})});var Q=S.sendEncodingParameters||[{ssrc:1001*(2*x+1)}];V&&k>=15019&&"video"===q&&!Q[0].rtx&&(Q[0].rtx={ssrc:Q[0].ssrc+1}),S.wantReceive&&(S.rtpReceiver=new A.RTCRtpReceiver(S.dtlsTransport,q)),S.localCapabilities=re,S.sendEncodingParameters=Q}),"max-compat"!==h._config.bundlePolicy&&(f+="a=group:BUNDLE "+h.transceivers.map(function(S){return S.mid}).join(" ")+"\r\n"),f+="a=ice-options:trickle\r\n",h.transceivers.forEach(function(S,x){f+=M(S,S.localCapabilities,"offer",S.stream,h._dtlsRole),f+="a=rtcp-rsize\r\n",S.iceGatherer&&"new"!==h.iceGatheringState&&(0===x||!h.usingBundle)&&(S.iceGatherer.getLocalCandidates().forEach(function(V){V.component=1,f+="a="+v.writeCandidate(V)+"\r\n"}),"completed"===S.iceGatherer.state&&(f+="a=end-of-candidates\r\n"))});var I=new A.RTCSessionDescription({type:"offer",sdp:f});return Promise.resolve(I)},y.prototype.createAnswer=function(){var h=this;if(h._isClosed)return Promise.reject(N("InvalidStateError","Can not call createAnswer after close"));var d=v.writeSessionBoilerplate(h._sdpSessionId,h._sdpSessionVersion++);h.usingBundle&&(d+="a=group:BUNDLE "+h.transceivers.map(function(f){return f.mid}).join(" ")+"\r\n");var l=v.getMediaSections(h.remoteDescription.sdp).length;h.transceivers.forEach(function(f,I){if(!(I+1>l)){if(f.isDatachannel)return void(d+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+f.mid+"\r\n");var S;f.stream&&("audio"===f.kind?S=f.stream.getAudioTracks()[0]:"video"===f.kind&&(S=f.stream.getVideoTracks()[0]),S&&k>=15019&&"video"===f.kind&&!f.sendEncodingParameters[0].rtx&&(f.sendEncodingParameters[0].rtx={ssrc:f.sendEncodingParameters[0].ssrc+1}));var x=R(f.localCapabilities,f.remoteCapabilities);!x.codecs.filter(function(q){return"rtx"===q.name.toLowerCase()}).length&&f.sendEncodingParameters[0].rtx&&delete f.sendEncodingParameters[0].rtx,d+=M(f,x,"answer",f.stream,h._dtlsRole),f.rtcpParameters&&f.rtcpParameters.reducedSize&&(d+="a=rtcp-rsize\r\n")}});var g=new A.RTCSessionDescription({type:"answer",sdp:d});return Promise.resolve(g)},y.prototype.addIceCandidate=function(h){var l,d=this;return h&&void 0===h.sdpMLineIndex&&!h.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(g,f){if(!d.remoteDescription)return f(N("InvalidStateError","Can not add ICE candidate without a remote description"));if(h&&""!==h.candidate){var S=h.sdpMLineIndex;if(h.sdpMid)for(var x=0;x<d.transceivers.length;x++)if(d.transceivers[x].mid===h.sdpMid){S=x;break}var V=d.transceivers[S];if(!V)return f(N("OperationError","Can not add ICE candidate"));if(V.isDatachannel)return g();var q=Object.keys(h.candidate).length>0?v.parseCandidate(h.candidate):{};if("tcp"===q.protocol&&(0===q.port||9===q.port)||q.component&&1!==q.component)return g();if((0===S||S>0&&V.iceTransport!==d.transceivers[0].iceTransport)&&!O(V.iceTransport,q))return f(N("OperationError","Can not add ICE candidate"));var J=h.candidate.trim();0===J.indexOf("a=")&&(J=J.substr(2)),(l=v.getMediaSections(d.remoteDescription.sdp))[S]+="a="+(q.type?J:"end-of-candidates")+"\r\n",d.remoteDescription.sdp=l.join("")}else for(var I=0;I<d.transceivers.length&&(d.transceivers[I].isDatachannel||(d.transceivers[I].iceTransport.addRemoteCandidate({}),(l=v.getMediaSections(d.remoteDescription.sdp))[I]+="a=end-of-candidates\r\n",d.remoteDescription.sdp=v.getDescription(d.remoteDescription.sdp)+l.join(""),!d.usingBundle));I++);g()})},y.prototype.getStats=function(){var h=[];return this.transceivers.forEach(function(l){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(g){l[g]&&h.push(l[g].getStats())})}),new Promise(function(l){var g=new Map;Promise.all(h).then(function(f){f.forEach(function(I){Object.keys(I).forEach(function(S){I[S].type=function(l){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[l.type]||l.type}(I[S]),g.set(S,I[S])})}),l(g)})})};var m=["createOffer","createAnswer"];return m.forEach(function(h){var d=y.prototype[h];y.prototype[h]=function(){var l=arguments;return"function"==typeof l[0]||"function"==typeof l[1]?d.apply(this,[arguments[2]]).then(function(g){"function"==typeof l[0]&&l[0].apply(null,[g])},function(g){"function"==typeof l[1]&&l[1].apply(null,[g])}):d.apply(this,arguments)}}),(m=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(h){var d=y.prototype[h];y.prototype[h]=function(){var l=arguments;return"function"==typeof l[1]||"function"==typeof l[2]?d.apply(this,arguments).then(function(){"function"==typeof l[1]&&l[1].apply(null)},function(g){"function"==typeof l[2]&&l[2].apply(null,[g])}):d.apply(this,arguments)}}),["getStats"].forEach(function(h){var d=y.prototype[h];y.prototype[h]=function(){var l=arguments;return"function"==typeof l[1]?d.apply(this,arguments).then(function(){"function"==typeof l[1]&&l[1].apply(null)}):d.apply(this,arguments)}}),y}},917:he=>{"use strict";var T={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};T.localCName=T.generateIdentifier(),T.splitLines=function(D){return D.trim().split("\n").map(function(v){return v.trim()})},T.splitSections=function(D){return D.split("\nm=").map(function(M,L){return(L>0?"m="+M:M).trim()+"\r\n"})},T.getDescription=function(D){var v=T.splitSections(D);return v&&v[0]},T.getMediaSections=function(D){var v=T.splitSections(D);return v.shift(),v},T.matchPrefix=function(D,v){return T.splitLines(D).filter(function(M){return 0===M.indexOf(v)})},T.parseCandidate=function(D){for(var v,M={foundation:(v=0===D.indexOf("a=candidate:")?D.substring(12).split(" "):D.substring(10).split(" "))[0],component:parseInt(v[1],10),protocol:v[2].toLowerCase(),priority:parseInt(v[3],10),ip:v[4],address:v[4],port:parseInt(v[5],10),type:v[7]},L=8;L<v.length;L+=2)switch(v[L]){case"raddr":M.relatedAddress=v[L+1];break;case"rport":M.relatedPort=parseInt(v[L+1],10);break;case"tcptype":M.tcpType=v[L+1];break;case"ufrag":M.ufrag=v[L+1],M.usernameFragment=v[L+1];break;default:M[v[L]]=v[L+1]}return M},T.writeCandidate=function(D){var v=[];v.push(D.foundation),v.push(D.component),v.push(D.protocol.toUpperCase()),v.push(D.priority),v.push(D.address||D.ip),v.push(D.port);var M=D.type;return v.push("typ"),v.push(M),"host"!==M&&D.relatedAddress&&D.relatedPort&&(v.push("raddr"),v.push(D.relatedAddress),v.push("rport"),v.push(D.relatedPort)),D.tcpType&&"tcp"===D.protocol.toLowerCase()&&(v.push("tcptype"),v.push(D.tcpType)),(D.usernameFragment||D.ufrag)&&(v.push("ufrag"),v.push(D.usernameFragment||D.ufrag)),"candidate:"+v.join(" ")},T.parseIceOptions=function(D){return D.substr(14).split(" ")},T.parseRtpMap=function(D){var v=D.substr(9).split(" "),M={payloadType:parseInt(v.shift(),10)};return v=v[0].split("/"),M.name=v[0],M.clockRate=parseInt(v[1],10),M.channels=3===v.length?parseInt(v[2],10):1,M.numChannels=M.channels,M},T.writeRtpMap=function(D){var v=D.payloadType;void 0!==D.preferredPayloadType&&(v=D.preferredPayloadType);var M=D.channels||D.numChannels||1;return"a=rtpmap:"+v+" "+D.name+"/"+D.clockRate+(1!==M?"/"+M:"")+"\r\n"},T.parseExtmap=function(D){var v=D.substr(9).split(" ");return{id:parseInt(v[0],10),direction:v[0].indexOf("/")>0?v[0].split("/")[1]:"sendrecv",uri:v[1]}},T.writeExtmap=function(D){return"a=extmap:"+(D.id||D.preferredId)+(D.direction&&"sendrecv"!==D.direction?"/"+D.direction:"")+" "+D.uri+"\r\n"},T.parseFmtp=function(D){for(var M,v={},L=D.substr(D.indexOf(" ")+1).split(";"),R=0;R<L.length;R++)v[(M=L[R].trim().split("="))[0].trim()]=M[1];return v},T.writeFmtp=function(D){var v="",M=D.payloadType;if(void 0!==D.preferredPayloadType&&(M=D.preferredPayloadType),D.parameters&&Object.keys(D.parameters).length){var L=[];Object.keys(D.parameters).forEach(function(R){L.push(D.parameters[R]?R+"="+D.parameters[R]:R)}),v+="a=fmtp:"+M+" "+L.join(";")+"\r\n"}return v},T.parseRtcpFb=function(D){var v=D.substr(D.indexOf(" ")+1).split(" ");return{type:v.shift(),parameter:v.join(" ")}},T.writeRtcpFb=function(D){var v="",M=D.payloadType;return void 0!==D.preferredPayloadType&&(M=D.preferredPayloadType),D.rtcpFeedback&&D.rtcpFeedback.length&&D.rtcpFeedback.forEach(function(L){v+="a=rtcp-fb:"+M+" "+L.type+(L.parameter&&L.parameter.length?" "+L.parameter:"")+"\r\n"}),v},T.parseSsrcMedia=function(D){var v=D.indexOf(" "),M={ssrc:parseInt(D.substr(7,v-7),10)},L=D.indexOf(":",v);return L>-1?(M.attribute=D.substr(v+1,L-v-1),M.value=D.substr(L+1)):M.attribute=D.substr(v+1),M},T.parseSsrcGroup=function(D){var v=D.substr(13).split(" ");return{semantics:v.shift(),ssrcs:v.map(function(M){return parseInt(M,10)})}},T.getMid=function(D){var v=T.matchPrefix(D,"a=mid:")[0];if(v)return v.substr(6)},T.parseFingerprint=function(D){var v=D.substr(14).split(" ");return{algorithm:v[0].toLowerCase(),value:v[1]}},T.getDtlsParameters=function(D,v){return{role:"auto",fingerprints:T.matchPrefix(D+v,"a=fingerprint:").map(T.parseFingerprint)}},T.writeDtlsParameters=function(D,v){var M="a=setup:"+v+"\r\n";return D.fingerprints.forEach(function(L){M+="a=fingerprint:"+L.algorithm+" "+L.value+"\r\n"}),M},T.parseCryptoLine=function(D){var v=D.substr(9).split(" ");return{tag:parseInt(v[0],10),cryptoSuite:v[1],keyParams:v[2],sessionParams:v.slice(3)}},T.writeCryptoLine=function(D){return"a=crypto:"+D.tag+" "+D.cryptoSuite+" "+("object"==typeof D.keyParams?T.writeCryptoKeyParams(D.keyParams):D.keyParams)+(D.sessionParams?" "+D.sessionParams.join(" "):"")+"\r\n"},T.parseCryptoKeyParams=function(D){if(0!==D.indexOf("inline:"))return null;var v=D.substr(7).split("|");return{keyMethod:"inline",keySalt:v[0],lifeTime:v[1],mkiValue:v[2]?v[2].split(":")[0]:void 0,mkiLength:v[2]?v[2].split(":")[1]:void 0}},T.writeCryptoKeyParams=function(D){return D.keyMethod+":"+D.keySalt+(D.lifeTime?"|"+D.lifeTime:"")+(D.mkiValue&&D.mkiLength?"|"+D.mkiValue+":"+D.mkiLength:"")},T.getCryptoParameters=function(D,v){return T.matchPrefix(D+v,"a=crypto:").map(T.parseCryptoLine)},T.getIceParameters=function(D,v){var M=T.matchPrefix(D+v,"a=ice-ufrag:")[0],L=T.matchPrefix(D+v,"a=ice-pwd:")[0];return M&&L?{usernameFragment:M.substr(12),password:L.substr(10)}:null},T.writeIceParameters=function(D){return"a=ice-ufrag:"+D.usernameFragment+"\r\na=ice-pwd:"+D.password+"\r\n"},T.parseRtpParameters=function(D){for(var v={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},L=T.splitLines(D)[0].split(" "),R=3;R<L.length;R++){var U=L[R],O=T.matchPrefix(D,"a=rtpmap:"+U+" ")[0];if(O){var N=T.parseRtpMap(O),A=T.matchPrefix(D,"a=fmtp:"+U+" ");switch(N.parameters=A.length?T.parseFmtp(A[0]):{},N.rtcpFeedback=T.matchPrefix(D,"a=rtcp-fb:"+U+" ").map(T.parseRtcpFb),v.codecs.push(N),N.name.toUpperCase()){case"RED":case"ULPFEC":v.fecMechanisms.push(N.name.toUpperCase())}}}return T.matchPrefix(D,"a=extmap:").forEach(function(k){v.headerExtensions.push(T.parseExtmap(k))}),v},T.writeRtpDescription=function(D,v){var M="";M+="m="+D+" ",M+=v.codecs.length>0?"9":"0",M+=" UDP/TLS/RTP/SAVPF ",M+=v.codecs.map(function(R){return void 0!==R.preferredPayloadType?R.preferredPayloadType:R.payloadType}).join(" ")+"\r\n",M+="c=IN IP4 0.0.0.0\r\n",M+="a=rtcp:9 IN IP4 0.0.0.0\r\n",v.codecs.forEach(function(R){M+=T.writeRtpMap(R),M+=T.writeFmtp(R),M+=T.writeRtcpFb(R)});var L=0;return v.codecs.forEach(function(R){R.maxptime>L&&(L=R.maxptime)}),L>0&&(M+="a=maxptime:"+L+"\r\n"),M+="a=rtcp-mux\r\n",v.headerExtensions&&v.headerExtensions.forEach(function(R){M+=T.writeExtmap(R)}),M},T.parseRtpEncodingParameters=function(D){var N,v=[],M=T.parseRtpParameters(D),L=-1!==M.fecMechanisms.indexOf("RED"),R=-1!==M.fecMechanisms.indexOf("ULPFEC"),U=T.matchPrefix(D,"a=ssrc:").map(function(E){return T.parseSsrcMedia(E)}).filter(function(E){return"cname"===E.attribute}),O=U.length>0&&U[0].ssrc,A=T.matchPrefix(D,"a=ssrc-group:FID").map(function(E){return E.substr(17).split(" ").map(function(b){return parseInt(b,10)})});A.length>0&&A[0].length>1&&A[0][0]===O&&(N=A[0][1]),M.codecs.forEach(function(E){if("RTX"===E.name.toUpperCase()&&E.parameters.apt){var _={ssrc:O,codecPayloadType:parseInt(E.parameters.apt,10)};O&&N&&(_.rtx={ssrc:N}),v.push(_),L&&((_=JSON.parse(JSON.stringify(_))).fec={ssrc:O,mechanism:R?"red+ulpfec":"red"},v.push(_))}}),0===v.length&&O&&v.push({ssrc:O});var k=T.matchPrefix(D,"b=");return k.length&&(k=0===k[0].indexOf("b=TIAS:")?parseInt(k[0].substr(7),10):0===k[0].indexOf("b=AS:")?1e3*parseInt(k[0].substr(5),10)*.95-16e3:void 0,v.forEach(function(E){E.maxBitrate=k})),v},T.parseRtcpParameters=function(D){var v={},M=T.matchPrefix(D,"a=ssrc:").map(function(U){return T.parseSsrcMedia(U)}).filter(function(U){return"cname"===U.attribute})[0];M&&(v.cname=M.value,v.ssrc=M.ssrc);var L=T.matchPrefix(D,"a=rtcp-rsize");v.reducedSize=L.length>0,v.compound=0===L.length;var R=T.matchPrefix(D,"a=rtcp-mux");return v.mux=R.length>0,v},T.parseMsid=function(D){var v,M=T.matchPrefix(D,"a=msid:");if(1===M.length)return{stream:(v=M[0].substr(7).split(" "))[0],track:v[1]};var L=T.matchPrefix(D,"a=ssrc:").map(function(R){return T.parseSsrcMedia(R)}).filter(function(R){return"msid"===R.attribute});return L.length>0?{stream:(v=L[0].value.split(" "))[0],track:v[1]}:void 0},T.parseSctpDescription=function(D){var L,v=T.parseMLine(D),M=T.matchPrefix(D,"a=max-message-size:");M.length>0&&(L=parseInt(M[0].substr(19),10)),isNaN(L)&&(L=65536);var R=T.matchPrefix(D,"a=sctp-port:");if(R.length>0)return{port:parseInt(R[0].substr(12),10),protocol:v.fmt,maxMessageSize:L};if(T.matchPrefix(D,"a=sctpmap:").length>0){var O=T.matchPrefix(D,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(O[0],10),protocol:O[1],maxMessageSize:L}}},T.writeSctpDescription=function(D,v){var M=[];return M="DTLS/SCTP"!==D.protocol?["m="+D.kind+" 9 "+D.protocol+" "+v.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+v.port+"\r\n"]:["m="+D.kind+" 9 "+D.protocol+" "+v.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+v.port+" "+v.protocol+" 65535\r\n"],void 0!==v.maxMessageSize&&M.push("a=max-message-size:"+v.maxMessageSize+"\r\n"),M.join("")},T.generateSessionId=function(){return Math.random().toString().substr(2,21)},T.writeSessionBoilerplate=function(D,v,M){var R=void 0!==v?v:2;return"v=0\r\no="+(M||"thisisadapterortc")+" "+(D||T.generateSessionId())+" "+R+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},T.writeMediaSection=function(D,v,M,L){var R=T.writeRtpDescription(D.kind,v);if(R+=T.writeIceParameters(D.iceGatherer.getLocalParameters()),R+=T.writeDtlsParameters(D.dtlsTransport.getLocalParameters(),"offer"===M?"actpass":"active"),R+="a=mid:"+D.mid+"\r\n",R+=D.direction?"a="+D.direction+"\r\n":D.rtpSender&&D.rtpReceiver?"a=sendrecv\r\n":D.rtpSender?"a=sendonly\r\n":D.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",D.rtpSender){var U="msid:"+L.id+" "+D.rtpSender.track.id+"\r\n";R+="a="+U,R+="a=ssrc:"+D.sendEncodingParameters[0].ssrc+" "+U,D.sendEncodingParameters[0].rtx&&(R+="a=ssrc:"+D.sendEncodingParameters[0].rtx.ssrc+" "+U,R+="a=ssrc-group:FID "+D.sendEncodingParameters[0].ssrc+" "+D.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return R+="a=ssrc:"+D.sendEncodingParameters[0].ssrc+" cname:"+T.localCName+"\r\n",D.rtpSender&&D.sendEncodingParameters[0].rtx&&(R+="a=ssrc:"+D.sendEncodingParameters[0].rtx.ssrc+" cname:"+T.localCName+"\r\n"),R},T.getDirection=function(D,v){for(var M=T.splitLines(D),L=0;L<M.length;L++)switch(M[L]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return M[L].substr(2)}return v?T.getDirection(v):"sendrecv"},T.getKind=function(D){return T.splitLines(D)[0].split(" ")[0].substr(2)},T.isRejected=function(D){return"0"===D.split(" ",2)[1]},T.parseMLine=function(D){var M=T.splitLines(D)[0].substr(2).split(" ");return{kind:M[0],port:parseInt(M[1],10),protocol:M[2],fmt:M.slice(3).join(" ")}},T.parseOLine=function(D){var M=T.matchPrefix(D,"o=")[0].substr(2).split(" ");return{username:M[0],sessionId:M[1],sessionVersion:parseInt(M[2],10),netType:M[3],addressType:M[4],address:M[5]}},T.isValidSDP=function(D){if("string"!=typeof D||0===D.length)return!1;for(var v=T.splitLines(D),M=0;M<v.length;M++)if(v[M].length<2||"="!==v[M].charAt(1))return!1;return!0},he.exports=T}},he=>{he(he.s=869)}]);