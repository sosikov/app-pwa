(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[179],{376:(de,T,S)=>{"use strict";function v(e){return"function"==typeof e}function M(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const L=M(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function P(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class U{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(v(r))try{r()}catch(o){t=o instanceof L?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{A(o)}catch(s){t=t??[],s instanceof L?t=[...t,...s.errors]:t.push(s)}}if(t)throw new L(t)}}add(t){var n;if(t&&t!==this)if(this.closed)A(t);else{if(t instanceof U){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&P(n,t)}remove(t){const{_finalizers:n}=this;n&&P(n,t),t instanceof U&&t._removeParent(this)}}U.EMPTY=(()=>{const e=new U;return e.closed=!0,e})();const k=U.EMPTY;function N(e){return e instanceof U||e&&"closed"in e&&v(e.remove)&&v(e.add)&&v(e.unsubscribe)}function A(e){v(e)?e():e.unsubscribe()}const O={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},E={setTimeout(e,t,...n){const{delegate:r}=E;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=E;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function _(e){E.setTimeout(()=>{const{onUnhandledError:t}=O;if(!t)throw e;t(e)})}function b(){}const y=d("C",void 0,void 0);function d(e,t,n){return{kind:e,value:t,error:n}}let c=null;function g(e){if(O.useDeprecatedSynchronousErrorHandling){const t=!c;if(t&&(c={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=c;if(c=null,n)throw r}}else e()}class I extends U{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,N(t)&&t.add(this)):this.destination=F}static create(t,n,r){return new q(t,n,r)}next(t){this.isStopped?Q(function p(e){return d("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Q(function m(e){return d("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Q(y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const D=Function.prototype.bind;function x(e,t){return D.call(e,t)}class V{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){z(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){z(r)}else z(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){z(n)}}}class q extends I{constructor(t,n,r){let i;if(super(),v(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&O.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&x(t.next,o),error:t.error&&x(t.error,o),complete:t.complete&&x(t.complete,o)}):i=t}this.destination=new V(i)}}function z(e){O.useDeprecatedSynchronousErrorHandling?function f(e){O.useDeprecatedSynchronousErrorHandling&&c&&(c.errorThrown=!0,c.error=e)}(e):_(e)}function Q(e,t){const{onStoppedNotification:n}=O;n&&E.setTimeout(()=>n(e,t))}const F={closed:!0,next:b,error:function ne(e){throw e},complete:b},B="function"==typeof Symbol&&Symbol.observable||"@@observable";function G(e){return e}let Y=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function $(e){return e&&e instanceof I||function W(e){return e&&v(e.next)&&v(e.error)&&v(e.complete)}(e)&&N(e)}(n)?n:new q(n,r,i);return g(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=le(r))((i,o)=>{const s=new q({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[B](){return this}pipe(...n){return function j(e){return 0===e.length?G:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=le(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function le(e){var t;return null!==(t=e??O.Promise)&&void 0!==t?t:Promise}const ee=M(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ae=(()=>{class e extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new be(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ee}next(n){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?k:(this.currentObservers=null,o.push(n),new U(()=>{this.currentObservers=null,P(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Y;return n.source=this,n}}return e.create=(t,n)=>new be(t,n),e})();class be extends ae{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:k}}class me extends ae{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function Ce(e){return v(e?.lift)}function pe(e){return t=>{if(Ce(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(e,t,n,r,i){return new ct(e,t,n,r,i)}class ct extends I{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ke(e,t){return pe((n,r)=>{let i=0;n.subscribe(ke(r,o=>{r.next(e.call(t,o,i++))}))})}function qn(e){return this instanceof qn?(this.v=e,this):new qn(e)}function Of(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Qa(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}(a,u,(s=e[o](s)).done,s.value)})}}}const eu=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Nf(e){return v(e?.then)}function Ff(e){return v(e[B])}function Lf(e){return Symbol.asyncIterator&&v(e?.[Symbol.asyncIterator])}function Vf(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Hf=function bC(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Uf(e){return v(e?.[Hf])}function Bf(e){return function kf(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(R){r[R]&&(i[R]=function(H){return new Promise(function(K,J){o.push([R,H,K,J])>1||a(R,H)})})}function a(R,H){try{!function u(R){R.value instanceof qn?Promise.resolve(R.value.v).then(l,h):C(o[0][2],R)}(r[R](H))}catch(K){C(o[0][3],K)}}function l(R){a("next",R)}function h(R){a("throw",R)}function C(R,H){R(H),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield qn(n.read());if(i)return yield qn(void 0);yield yield qn(r)}}finally{n.releaseLock()}})}function jf(e){return v(e?.getReader)}function kt(e){if(e instanceof Y)return e;if(null!=e){if(Ff(e))return function SC(e){return new Y(t=>{const n=e[B]();if(v(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(eu(e))return function IC(e){return new Y(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Nf(e))return function TC(e){return new Y(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,_)})}(e);if(Lf(e))return Wf(e);if(Uf(e))return function AC(e){return new Y(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(jf(e))return function MC(e){return Wf(Bf(e))}(e)}throw Vf(e)}function Wf(e){return new Y(t=>{(function PC(e,t){var n,r,i,o;return function xf(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(C){s(C)}}function u(h){try{l(r.throw(h))}catch(C){s(C)}}function l(h){h.done?o(h.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(h.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Of(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Xn(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Lr(e,t,n=1/0){return v(t)?Lr((r,i)=>Ke((o,s)=>t(r,o,i,s))(kt(e(r,i))),n):("number"==typeof t&&(n=t),pe((r,i)=>function xC(e,t,n,r,i,o,s,a){const u=[];let l=0,h=0,C=!1;const R=()=>{C&&!u.length&&!l&&t.complete()},H=J=>l<r?K(J):u.push(J),K=J=>{o&&t.next(J),l++;let X=!1;kt(n(J,h++)).subscribe(ke(t,re=>{i?.(re),o?H(re):t.next(re)},()=>{X=!0},void 0,()=>{if(X)try{for(l--;u.length&&l<r;){const re=u.shift();s?Xn(t,s,()=>K(re)):K(re)}R()}catch(re){t.error(re)}}))};return e.subscribe(ke(t,H,()=>{C=!0,R()})),()=>{a?.()}}(r,i,e,n)))}function Gf(e=1/0){return Lr(G,e)}const tu=new Y(e=>e.complete());function $f(e){return e&&v(e.schedule)}function nu(e){return e[e.length-1]}function ru(e){return $f(nu(e))?e.pop():void 0}function Kf(e,t=0){return pe((n,r)=>{n.subscribe(ke(r,i=>Xn(r,e,()=>r.next(i),t),()=>Xn(r,e,()=>r.complete(),t),i=>Xn(r,e,()=>r.error(i),t)))})}function Jf(e,t=0){return pe((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function zf(e,t){if(!e)throw new Error("Iterable cannot be null");return new Y(n=>{Xn(n,t,()=>{const r=e[Symbol.asyncIterator]();Xn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ki(e,t){return t?function UC(e,t){if(null!=e){if(Ff(e))return function NC(e,t){return kt(e).pipe(Jf(t),Kf(t))}(e,t);if(eu(e))return function LC(e,t){return new Y(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Nf(e))return function FC(e,t){return kt(e).pipe(Jf(t),Kf(t))}(e,t);if(Lf(e))return zf(e,t);if(Uf(e))return function VC(e,t){return new Y(n=>{let r;return Xn(n,t,()=>{r=e[Hf](),Xn(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>v(r?.return)&&r.return()})}(e,t);if(jf(e))return function HC(e,t){return zf(Bf(e),t)}(e,t)}throw Vf(e)}(e,t):kt(e)}function iu(...e){const t=ru(e),n=function OC(e,t){return"number"==typeof nu(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?kt(r[0]):Gf(n)(ki(r,t)):tu}function Vr(...e){return ki(e,ru(e))}function qf(e={}){const{connector:t=(()=>new ae),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,u,l=0,h=!1,C=!1;const R=()=>{a?.unsubscribe(),a=void 0},H=()=>{R(),s=u=void 0,h=C=!1},K=()=>{const J=s;H(),J?.unsubscribe()};return pe((J,X)=>{l++,!C&&!h&&R();const re=u=u??t();X.add(()=>{l--,0===l&&!C&&!h&&(a=ou(K,i))}),re.subscribe(X),!s&&l>0&&(s=new q({next:Z=>re.next(Z),error:Z=>{C=!0,R(),a=ou(H,n,Z),re.error(Z)},complete:()=>{h=!0,R(),a=ou(H,r),re.complete()}}),kt(J).subscribe(s))})(o)}}function ou(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new q({next:()=>{r.unsubscribe(),e()}});return kt(t(...n)).subscribe(r)}function Hr(e,t){return pe((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(ke(r,u=>{i?.unsubscribe();let l=0;const h=o++;kt(e(u,h)).subscribe(i=ke(r,C=>r.next(t?t(u,C,h,l++):C),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jC(e,t){return e===t}function Be(e){for(let t in e)if(e[t]===Be)return t;throw Error("Could not find renamed property on target object.")}function Go(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function lt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(lt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function su(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const WC=Be({__forward_ref__:Be});function We(e){return e.__forward_ref__=We,e.toString=function(){return lt(this())},e}function we(e){return au(e)?e():e}function au(e){return"function"==typeof e&&e.hasOwnProperty(WC)&&e.__forward_ref__===We}function uu(e){return e&&!!e.\u0275providers}class oe extends Error{constructor(t,n){super(function $o(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function He(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function De(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function Ko(e,t){throw new oe(-201,!1)}function Zt(e,t){null==e&&function Ue(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Ne(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function nn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Jo(e){return Zf(e,zo)||Zf(e,Qf)}function Zf(e,t){return e.hasOwnProperty(t)?e[t]:null}function Yf(e){return e&&(e.hasOwnProperty(cu)||e.hasOwnProperty(XC))?e[cu]:null}const zo=Be({\u0275prov:Be}),cu=Be({\u0275inj:Be}),Qf=Be({ngInjectableDef:Be}),XC=Be({ngInjectorDef:Be});var _e=(()=>((_e=_e||{})[_e.Default=0]="Default",_e[_e.Host=1]="Host",_e[_e.Self=2]="Self",_e[_e.SkipSelf=4]="SkipSelf",_e[_e.Optional=8]="Optional",_e))();let lu;function Ot(e){const t=lu;return lu=e,t}function tp(e,t,n){const r=Jo(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&_e.Optional?null:void 0!==t?t:void Ko(lt(e))}const Ge=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Oi={},du="__NG_DI_FLAG__",qo="ngTempTokenPath",YC=/\n/gm,np="__source";let Ur;function Yn(e){const t=Ur;return Ur=e,t}function tD(e,t=_e.Default){if(void 0===Ur)throw new oe(-203,!1);return null===Ur?tp(e,void 0,t):Ur.get(e,t&_e.Optional?null:void 0,t)}function Me(e,t=_e.Default){return(function ep(){return lu}()||tD)(we(e),t)}function Le(e,t=_e.Default){return Me(e,Xo(t))}function Xo(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function fu(e){const t=[];for(let n=0;n<e.length;n++){const r=we(e[n]);if(Array.isArray(r)){if(0===r.length)throw new oe(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){const a=r[s],u=nD(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}t.push(Me(i,o))}else t.push(Me(r))}return t}function nD(e){return e[du]}function Pn(e){return{toString:e}.toString()}var pn=(()=>((pn=pn||{})[pn.OnPush=0]="OnPush",pn[pn.Default=1]="Default",pn))(),Gt=(()=>{return(e=Gt||(Gt={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Gt;var e})();const hn={},Fe=[],Zo=Be({\u0275cmp:Be}),pu=Be({\u0275dir:Be}),hu=Be({\u0275pipe:Be}),ip=Be({\u0275mod:Be}),xn=Be({\u0275fac:Be}),Fi=Be({__NG_ELEMENT_ID__:Be}),op=Be({__NG_ENV_ID__:Be});function sp(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function gu(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{const o=i,s=n[++r];up(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function ap(e){return 3===e||4===e||6===e}function up(e){return 64===e.charCodeAt(0)}function Li(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||cp(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function cp(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}const lp="ng-template";function oD(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const s=e[r++];if(n&&"class"===o&&-1!==sp(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function dp(e){return 4===e.type&&e.value!==lp}function sD(e,t,n){return t===(4!==e.type||n?e.value:lp)}function aD(e,t,n){let r=4;const i=e.attrs||[],o=function lD(e){for(let t=0;t<e.length;t++)if(ap(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!sD(e,u,n)||""===u&&1===t.length){if(rn(r))return!1;s=!0}}else{const l=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!oD(e.attrs,l,n)){if(rn(r))return!1;s=!0}continue}const C=uD(8&r?"class":u,i,dp(e),n);if(-1===C){if(rn(r))return!1;s=!0;continue}if(""!==l){let R;R=C>o?"":i[C+1].toLowerCase();const H=8&r?R:null;if(H&&-1!==sp(H,l,0)||2&r&&l!==R){if(rn(r))return!1;s=!0}}}}else{if(!s&&!rn(r)&&!rn(u))return!1;if(s&&rn(u))continue;s=!1,r=u|1&r}}return rn(r)||s}function rn(e){return 0==(1&e)}function uD(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function dD(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function fp(e,t,n=!1){for(let r=0;r<t.length;r++)if(aD(e,t[r],n))return!0;return!1}function pp(e,t){return e?":not("+t.trim()+")":t}function pD(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!rn(s)&&(t+=pp(o,i),i=""),r=s,o=o||!rn(r);n++}return""!==i&&(t+=pp(o,i)),t}function hp(e){return Pn(()=>{const t=mp(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===pn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Gt.Emulated,styles:e.styles||Fe,_:null,schemas:e.schemas||null,tView:null,id:""};yp(n);const r=e.dependencies;return n.directiveDefs=Yo(r,!1),n.pipeDefs=Yo(r,!0),n.id=function ED(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function yD(e){return Ve(e)||_t(e)}function vD(e){return null!==e}function gn(e){return Pn(()=>({type:e.type,bootstrap:e.bootstrap||Fe,declarations:e.declarations||Fe,imports:e.imports||Fe,exports:e.exports||Fe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function gp(e,t){if(null==e)return hn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function Se(e){return Pn(()=>{const t=mp(e);return yp(t),t})}function Ve(e){return e[Zo]||null}function _t(e){return e[pu]||null}function Ft(e){return e[hu]||null}function mp(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||hn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Fe,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:gp(e.inputs,t),outputs:gp(e.outputs)}}function yp(e){e.features?.forEach(t=>t(e))}function Yo(e,t){if(!e)return null;const n=t?Ft:yD;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(vD)}const dt=0,ce=1,Ie=2,Xe=3,on=4,Hi=5,wt=6,Br=7,nt=8,jr=9,yr=10,Te=11,Ui=12,vp=13,Wr=14,rt=15,Bi=16,Gr=17,mn=18,ji=19,_p=20,Qn=21,Rn=22,Qo=23,es=24,Re=25,mu=1,wp=2,yn=7,$r=9,Et=11;function Kt(e){return Array.isArray(e)&&"object"==typeof e[mu]}function Lt(e){return Array.isArray(e)&&!0===e[mu]}function yu(e){return 0!=(4&e.flags)}function vr(e){return e.componentOffset>-1}function ns(e){return 1==(1&e.flags)}function sn(e){return!!e.template}function vu(e){return 0!=(512&e[Ie])}function _r(e,t){return e.hasOwnProperty(xn)?e[xn]:null}let TD=Ge.WeakRef??class ID{constructor(t){this.ref=t}deref(){return this.ref}},MD=0,vn=null,rs=!1;function mt(e){const t=vn;return vn=e,t}class Sp{constructor(){this.id=MD++,this.ref=function AD(e){return new TD(e)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[t,n]of this.producers){const r=n.producerNode.deref();if(void 0!==r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(t),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const t=rs;rs=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();void 0!==i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{rs=t}}producerAccessed(){if(rs)throw new Error("");if(null===vn)return;let t=vn.producers.get(this.id);void 0===t?(t={consumerNode:vn.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:vn.trackingVersion},vn.producers.set(this.id,t),this.consumers.set(vn.id,t)):(t.seenValueVersion=this.valueVersion,t.atTrackingVersion=vn.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==vn?.consumerAllowSignalWrites}producerPollStatus(t){return this.valueVersion!==t||(this.onProducerUpdateValueVersion(),this.valueVersion!==t)}}let Ip=null;const Ap=()=>{};class kD extends Sp{constructor(t,n,r){super(),this.watch=t,this.schedule=n,this.dirty=!1,this.cleanupFn=Ap,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const t=mt(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Ap,this.watch(this.registerOnCleanup)}finally{mt(t)}}cleanup(){this.cleanupFn()}}class OD{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function kn(){return Mp}function Mp(e){return e.type.prototype.ngOnChanges&&(e.setInput=FD),ND}function ND(){const e=xp(this),t=e?.current;if(t){const n=e.previous;if(n===hn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function FD(e,t,n,r){const i=this.declaredInputs[n],o=xp(e)||function LD(e,t){return e[Pp]=t}(e,{previous:hn,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new OD(u&&u.currentValue,t,a===hn),e[r]=t}kn.ngInherit=!0;const Pp="__ngSimpleChanges__";function xp(e){return e[Pp]||null}const _n=function(e,t,n){};function Je(e){for(;Array.isArray(e);)e=e[dt];return e}function Vt(e,t){return Je(t[e.index])}function Op(e,t){return e.data[t]}function Jt(e,t){const n=t[e];return Kt(n)?n:n[dt]}function er(e,t){return null==t?null:e[t]}function Np(e){e[Gr]=0}function GD(e){1024&e[Ie]||(e[Ie]|=1024,Lp(e,1))}function Fp(e){1024&e[Ie]&&(e[Ie]&=-1025,Lp(e,-1))}function Lp(e,t){let n=e[Xe];if(null===n)return;n[Hi]+=t;let r=n;for(n=n[Xe];null!==n&&(1===t&&1===r[Hi]||-1===t&&0===r[Hi]);)n[Hi]+=t,r=n,n=n[Xe]}const ve={lFrame:zp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Up(){return ve.bindingsEnabled}function te(){return ve.lFrame.lView}function Oe(){return ve.lFrame.tView}function yt(){let e=Bp();for(;null!==e&&64===e.type;)e=e.parent;return e}function Bp(){return ve.lFrame.currentTNode}function wn(e,t){const n=ve.lFrame;n.currentTNode=e,n.isParent=t}function bu(){return ve.lFrame.isParent}function ib(e,t){const n=ve.lFrame;n.bindingIndex=n.bindingRootIndex=e,Iu(t)}function Iu(e){ve.lFrame.currentDirectiveIndex=e}function Au(e){ve.lFrame.currentQueryIndex=e}function sb(e){const t=e[ce];return 2===t.type?t.declTNode:1===t.type?e[wt]:null}function Kp(e,t,n){if(n&_e.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&_e.Host||(i=sb(o),null===i||(o=o[Wr],10&i.type))););if(null===i)return!1;t=i,e=o}const r=ve.lFrame=Jp();return r.currentTNode=t,r.lView=e,!0}function Mu(e){const t=Jp(),n=e[ce];ve.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Jp(){const e=ve.lFrame,t=null===e?null:e.child;return null===t?zp(e):t}function zp(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function qp(){const e=ve.lFrame;return ve.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Xp=qp;function Pu(){const e=qp();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function At(){return ve.lFrame.selectedIndex}function wr(e){ve.lFrame.selectedIndex=e}let Yp=!0;function as(){return Yp}function tr(e){Yp=e}function us(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),u&&(e.viewHooks??=[]).push(-n,u),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),null!=h&&(e.destroyHooks??=[]).push(n,h)}}function cs(e,t,n){Qp(e,t,3,n)}function ls(e,t,n,r){(3&e[Ie])===n&&Qp(e,t,n,r)}function xu(e,t){let n=e[Ie];(3&n)===t&&(n&=8191,n+=1,e[Ie]=n)}function Qp(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let u=void 0!==r?65535&e[Gr]:0;u<s;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(e[Gr]+=65536),(a<o||-1==o)&&(hb(e,n,t,u),e[Gr]=(4294901760&e[Gr])+u+2),u++}function eh(e,t){_n(4,e,t);const n=mt(null);try{t.call(e)}finally{mt(n),_n(5,e,t)}}function hb(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[Ie]>>13<e[Gr]>>16&&(3&e[Ie])===t&&(e[Ie]+=8192,eh(a,o)):eh(a,o)}const qr=-1;class $i{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ds(e){return 32767&e}function fs(e,t){let n=function vb(e){return e>>16}(e),r=t;for(;n>0;)r=r[Wr],n--;return r}let ku=!0;function ps(e){const t=ku;return ku=e,t}const nh=255,rh=5;let _b=0;const En={};function hs(e,t){const n=ih(e,t);if(-1!==n)return n;const r=t[ce];r.firstCreatePass&&(e.injectorIndex=t.length,Ou(r.data,e),Ou(t,null),Ou(r.blueprint,null));const i=Nu(e,t),o=e.injectorIndex;if(function th(e){return e!==qr}(i)){const s=ds(i),a=fs(i,t),u=a[ce].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|u[s+l]}return t[o+8]=i,o}function Ou(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ih(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Nu(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=dh(i),null===r)return qr;if(n++,i=i[Wr],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return qr}function Fu(e,t,n){!function wb(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fi)&&(r=n[Fi]),null==r&&(r=n[Fi]=_b++);const i=r&nh;t.data[e+(i>>rh)]|=1<<i}(e,t,n)}function oh(e,t,n){if(n&_e.Optional||void 0!==e)return e;Ko()}function sh(e,t,n,r){if(n&_e.Optional&&void 0===r&&(r=null),!(n&(_e.Self|_e.Host))){const i=e[jr],o=Ot(void 0);try{return i?i.get(t,r,n&_e.Optional):tp(t,r,n&_e.Optional)}finally{Ot(o)}}return oh(r,0,n)}function ah(e,t,n,r=_e.Default,i){if(null!==e){if(2048&t[Ie]&&!(r&_e.Self)){const s=function Sb(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&2048&s[Ie]&&!(512&s[Ie]);){const a=uh(o,s,n,r|_e.Self,En);if(a!==En)return a;let u=o.parent;if(!u){const l=s[_p];if(l){const h=l.get(n,En,r);if(h!==En)return h}u=dh(s),s=s[Wr]}o=u}return i}(e,t,n,r,En);if(s!==En)return s}const o=uh(e,t,n,r,En);if(o!==En)return o}return sh(t,n,r,i)}function uh(e,t,n,r,i){const o=function Db(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Fi)?e[Fi]:void 0;return"number"==typeof t?t>=0?t&nh:bb:t}(n);if("function"==typeof o){if(!Kp(t,e,r))return r&_e.Host?oh(i,0,r):sh(t,n,r,i);try{const s=o(r);if(null!=s||r&_e.Optional)return s;Ko()}finally{Xp()}}else if("number"==typeof o){let s=null,a=ih(e,t),u=qr,l=r&_e.Host?t[rt][wt]:null;for((-1===a||r&_e.SkipSelf)&&(u=-1===a?Nu(e,t):t[a+8],u!==qr&&lh(r,!1)?(s=t[ce],a=ds(u),t=fs(u,t)):a=-1);-1!==a;){const h=t[ce];if(ch(o,a,h.data)){const C=Cb(a,t,n,s,r,l);if(C!==En)return C}u=t[a+8],u!==qr&&lh(r,t[ce].data[a+8]===l)&&ch(o,a,t)?(s=h,a=ds(u),t=fs(u,t)):a=-1}}return i}function Cb(e,t,n,r,i,o){const s=t[ce],a=s.data[e+8],h=function gs(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,u=e.directiveStart,h=o>>20,R=i?a+h:e.directiveEnd;for(let H=r?a:a+h;H<R;H++){const K=s[H];if(H<u&&n===K||H>=u&&K.type===n)return H}if(i){const H=s[u];if(H&&sn(H)&&H.type===n)return u}return null}(a,s,n,null==r?vr(a)&&ku:r!=s&&0!=(3&a.type),i&_e.Host&&o===a);return null!==h?Er(t,s,h,a):En}function Er(e,t,n,r){let i=e[n];const o=t.data;if(function gb(e){return e instanceof $i}(i)){const s=i;s.resolving&&function GC(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new oe(-200,`Circular dependency in DI detected for ${e}${n}`)}(He(o[n]));const a=ps(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Ot(s.injectImpl):null;Kp(e,r,_e.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function pb(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Mp(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}(n,o[n],t)}finally{null!==u&&Ot(u),ps(a),s.resolving=!1,Xp()}}return i}function ch(e,t,n){return!!(n[t+(e>>rh)]&1<<e)}function lh(e,t){return!(e&_e.Self||e&_e.Host&&t)}class Xr{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return ah(this._tNode,this._lView,t,Xo(r),n)}}function bb(){return new Xr(yt(),te())}function Lu(e){return au(e)?()=>{const t=Lu(we(e));return t&&t()}:_r(e)}function dh(e){const t=e[ce],n=t.type;return 2===n?t.declTNode:1===n?e[wt]:null}function zi(e,t){e.forEach(n=>Array.isArray(n)?zi(n,t):t(n))}function ms(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function zt(e,t,n){let r=ti(e,t);return r>=0?e[1|r]=n:(r=~r,function Pb(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Uu(e,t){const n=ti(e,t);if(n>=0)return e[1|n]}function ti(e,t){return function hh(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}(e,t,1)}var Ht=(()=>((Ht=Ht||{})[Ht.Important=1]="Important",Ht[Ht.DashCase=2]="DashCase",Ht))();const zu=new Map;let eS=0;const Xu="__ngContext__";function Dt(e,t){Kt(t)?(e[Xu]=t[ji],function nS(e){zu.set(e[ji],e)}(t)):e[Xu]=t}let Zu;function Yu(e,t){return Zu(e,t)}function Yi(e){const t=e[Xe];return Lt(t)?t[Xe]:t}function Oh(e){return Fh(e[Ui])}function Nh(e){return Fh(e[on])}function Fh(e){for(;null!==e&&!Lt(e);)e=e[on];return e}function ii(e,t,n,r,i){if(null!=r){let o,s=!1;Lt(r)?o=r:Kt(r)&&(s=!0,r=r[dt]);const a=Je(r);0===e&&null!==n?null==i?Bh(t,n,a):Cr(t,n,a,i||null,!0):1===e&&null!==n?Cr(t,n,a,i||null,!0):2===e?function Ts(e,t,n){const r=function Ss(e,t){return e.parentNode(t)}(e,t);r&&function ES(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function bS(e,t,n,r,i){const o=n[yn];o!==Je(n)&&ii(t,e,r,o,i);for(let a=Et;a<n.length;a++){const u=n[a];eo(u[ce],u,e,t,r,o)}}(t,e,o,n,i)}}function bs(e,t,n){return e.createElement(t,n)}function Vh(e,t){const n=e[$r],r=n.indexOf(t);Fp(t),n.splice(r,1)}function tc(e,t){if(!(256&t[Ie])){t[Ie]&=-129,t[Ie]|=256,function wS(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof $i)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];_n(4,a,u);try{u.call(a)}finally{_n(5,a,u)}}else{_n(4,i,o);try{o.call(i)}finally{_n(5,i,o)}}}}}(e,t),function _S(e,t){const n=e.cleanup,r=t[Br];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(t[Br]=null);const i=t[Qn];if(null!==i){t[Qn]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(e,t),1===t[ce].type&&t[Te].destroy();const n=t[Bi];if(null!==n&&Lt(t[Xe])){n!==t[Xe]&&Vh(n,t);const r=t[mn];null!==r&&r.detachView(e)}!function rS(e){zu.delete(e[ji])}(t)}}function nc(e,t,n){return function Uh(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[dt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===Gt.None||o===Gt.Emulated)return null}return Vt(r,n)}}(e,t.parent,n)}function Cr(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Bh(e,t,n){e.appendChild(t,n)}function jh(e,t,n,r,i){null!==r?Cr(e,t,n,r,i):Bh(e,t,n)}let rc,ac,$h=function Gh(e,t,n){return 40&e.type?Vt(e,n):null};function Is(e,t,n,r){const i=nc(e,r,t),o=t[Te],a=function Wh(e,t,n){return $h(e,t,n)}(r.parent||t[wt],r,t);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)jh(o,i,n[u],a,!1);else jh(o,i,n,a,!1);void 0!==rc&&rc(o,r,t,n,i)}function Jh(e,t){return null!==t?e[rt][wt].projection[t.projection]:null}function oc(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===t&&(a&&Dt(Je(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)oc(e,t,n.child,r,i,o,!1),ii(t,e,i,a,o);else if(32&u){const l=Yu(n,r);let h;for(;h=l();)ii(t,e,i,h,o);ii(t,e,i,a,o)}else 16&u?qh(e,t,r,n,i,o):ii(t,e,i,a,o);n=s?n.projectionNext:n.next}}function eo(e,t,n,r,i,o){oc(n,r,e.firstChild,t,i,o,!1)}function qh(e,t,n,r,i,o){const s=n[rt],u=s[wt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)ii(t,e,i,u[l],o);else{let l=u;const h=s[Xe];(function Es(e){return 128==(128&e.flags)})(r)&&(l.flags|=128),oc(e,t,l,h,i,o,!0)}}function Xh(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Zh(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&gu(e,t,r),null!==i&&Xh(e,t,i),null!==o&&function IS(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}class tg{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class fe{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const xs=new fe("ENVIRONMENT_INITIALIZER"),lg=new fe("INJECTOR",-1),dg=new fe("INJECTOR_DEF_TYPES");class fg{get(t,n=Oi){if(n===Oi){const r=new Error(`NullInjectorError: No provider for ${lt(t)}!`);throw r.name="NullInjectorError",r}return n}}function Rs(e){return{\u0275providers:e}}function e0(...e){return{\u0275providers:pg(0,e),\u0275fromNgModule:!0}}function pg(e,...t){const n=[],r=new Set;let i;return zi(t,o=>{const s=o;pc(s,n,[],r)&&(i||=[],i.push(s))}),void 0!==i&&hg(i,n),n}function hg(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];hc(i,o=>{t.push(o)})}}function pc(e,t,n,r){if(!(e=we(e)))return!1;let i=null,o=Yf(e);const s=!o&&Ve(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const u=e.ngModule;if(o=Yf(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of u)pc(l,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{zi(o.imports,h=>{pc(h,t,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&hg(l,t)}if(!a){const l=_r(i)||(()=>new i);t.push({provide:i,useFactory:l,deps:Fe},{provide:dg,useValue:i,multi:!0},{provide:xs,useValue:()=>Me(i),multi:!0})}const u=o.providers;null==u||a||hc(u,h=>{t.push(h)})}}return i!==e&&void 0!==e.providers}function hc(e,t){for(let n of e)uu(n)&&(n=n.\u0275providers),Array.isArray(n)?hc(n,t):t(n)}const t0=Be({provide:String,useValue:Be});function gc(e){return null!==e&&"object"==typeof e&&t0 in e}function Dr(e){return"function"==typeof e}const mc=new fe("Set Injector scope."),ks={},r0={};let yc;function Os(){return void 0===yc&&(yc=new fg),yc}class br{}class vc extends br{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wc(t,s=>this.processProvider(s)),this.records.set(lg,si(void 0,this)),i.has("environment")&&this.records.set(br,si(void 0,this));const o=this.records.get(mc);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(dg.multi,Fe,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Yn(this),r=Ot(void 0);try{return t()}finally{Yn(n),Ot(r)}}get(t,n=Oi,r=_e.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(op))return t[op](this);r=Xo(r);const i=Yn(this),o=Ot(void 0);try{if(!(r&_e.SkipSelf)){let a=this.records.get(t);if(void 0===a){const u=function c0(e){return"function"==typeof e||"object"==typeof e&&e instanceof fe}(t)&&Jo(t);a=u&&this.injectableDefInScope(u)?si(_c(t),ks):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&_e.Self?Os():this.parent).get(t,n=r&_e.Optional&&n===Oi?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[qo]=s[qo]||[]).unshift(lt(t)),i)throw s;return function rD(e,t,n,r){const i=e[qo];throw t[np]&&i.unshift(t[np]),e.message=function iD(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=lt(t);if(Array.isArray(t))i=t.map(lt).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):lt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(YC,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[qo]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{Ot(o),Yn(i)}}resolveInjectorInitializers(){const t=Yn(this),n=Ot(void 0);try{const r=this.get(xs.multi,Fe,_e.Self);for(const i of r)i()}finally{Yn(t),Ot(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(lt(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(t){let n=Dr(t=we(t))?t:we(t&&t.provide);const r=function s0(e){return gc(e)?si(void 0,e.useValue):si(yg(e),ks)}(t);if(Dr(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=si(void 0,ks,!0),i.factory=()=>fu(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===ks&&(n.value=r0,n.value=n.factory()),"object"==typeof n.value&&n.value&&function u0(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=we(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function _c(e){const t=Jo(e),n=null!==t?t.factory:_r(e);if(null!==n)return n;if(e instanceof fe)throw new oe(204,!1);if(e instanceof Function)return function o0(e){const t=e.length;if(t>0)throw function qi(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new oe(204,!1);const n=function qC(e){return e&&(e[zo]||e[Qf])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new oe(204,!1)}function yg(e,t,n){let r;if(Dr(e)){const i=we(e);return _r(i)||_c(i)}if(gc(e))r=()=>we(e.useValue);else if(function mg(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...fu(e.deps||[]));else if(function gg(e){return!(!e||!e.useExisting)}(e))r=()=>Me(we(e.useExisting));else{const i=we(e&&(e.useClass||e.provide));if(!function a0(e){return!!e.deps}(e))return _r(i)||_c(i);r=()=>new i(...fu(e.deps))}return r}function si(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function wc(e,t){for(const n of e)Array.isArray(n)?wc(n,t):n&&uu(n)?wc(n.\u0275providers,t):t(n)}const Ns=new fe("AppId",{providedIn:"root",factory:()=>l0}),l0="ng",vg=new fe("Platform Initializer"),Ln=new fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_g=new fe("CSP nonce",{providedIn:"root",factory:()=>function to(){if(void 0!==ac)return ac;if(typeof document<"u")return document;throw new oe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Eg=(e,t)=>null;function Cg(e,t){return Eg(e,t)}class _0{}class Sg{}class E0{resolveComponentFactory(t){throw function w0(e){const t=Error(`No component factory found for ${lt(e)}.`);return t.ngComponent=e,t}(t)}}let Us=(()=>{class e{}return e.NULL=new E0,e})();function C0(){return ai(yt(),te())}function ai(e,t){return new an(Vt(e,t))}let an=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=C0,e})();class Tg{}let Sr=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function b0(){const e=te(),n=Jt(yt().index,e);return(Kt(n)?n:e)[Te]}(),e})(),S0=(()=>{class e{}return e.\u0275prov=Ne({token:e,providedIn:"root",factory:()=>null}),e})();class Bs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const I0=new Bs("16.1.2"),xc={};function uo(e){for(;e;){e[Ie]|=64;const t=Yi(e);if(vu(e)&&!t)return e;e=t}return null}function Rc(e){return e.ngOriginalError}class Ir{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Rc(t);for(;n&&Rc(n);)n=Rc(n);return n||null}}const Pg=new fe("",{providedIn:"root",factory:()=>!1});class Ng extends Sp{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(t){this._lView=t}onConsumerDependencyMayHaveChanged(){uo(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(t,n,r){const i=mt(this);this.trackingVersion++;try{t(n,r)}finally{mt(i)}}destroy(){this.trackingVersion++}}let Ws=null;function Fg(){return Ws??=new Ng,Ws}function Lg(e,t){return e[t]??Fg()}function Vg(e,t){const n=Fg();n.hasReadASignal&&(e[t]=Ws,n.lView=e,Ws=new Ng)}const Ae={};function co(e){Hg(Oe(),te(),At()+e,!1)}function Hg(e,t,n,r){if(!r)if(3==(3&t[Ie])){const o=e.preOrderCheckHooks;null!==o&&cs(t,o,n)}else{const o=e.preOrderHooks;null!==o&&ls(t,o,0,n)}wr(n)}function Wg(e,t=null,n=null,r){const i=Gg(e,t,n,r);return i.resolveInjectorInitializers(),i}function Gg(e,t=null,n=null,r,i=new Set){const o=[n||Fe,e0(e)];return r=r||("object"==typeof e?void 0:lt(e)),new vc(o,t||Os(),r||null,i)}let Hn=(()=>{class e{static create(n,r){if(Array.isArray(n))return Wg({name:""},r,n,"");{const i=n.name??"";return Wg({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=Oi,e.NULL=new fg,e.\u0275prov=Ne({token:e,providedIn:"any",factory:()=>Me(lg)}),e.__NG_ELEMENT_ID__=-1,e})();function ie(e,t=_e.Default){const n=te();return null===n?Me(e,t):ah(yt(),n,we(e),t)}function Gs(e,t,n,r,i,o,s,a,u,l,h){const C=t.blueprint.slice();return C[dt]=i,C[Ie]=140|r,(null!==l||e&&2048&e[Ie])&&(C[Ie]|=2048),Np(C),C[Xe]=C[Wr]=e,C[nt]=n,C[yr]=s||e&&e[yr],C[Te]=a||e&&e[Te],C[jr]=u||e&&e[jr]||null,C[wt]=o,C[ji]=function tS(){return eS++}(),C[Rn]=h,C[_p]=l,C[rt]=2==t.type?e[rt]:C,C}function ci(e,t,n,r,i){let o=e.data[t];if(null===o)o=function kc(e,t,n,r,i){const o=Bp(),s=bu(),u=e.data[t]=function z0(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return function Jr(){return null!==ve.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(e,t,n,r,i),function rb(){return ve.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Gi(){const e=ve.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return wn(o,!0),o}function lo(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function $g(e,t,n,r,i){const o=Lg(t,Qo),s=At(),a=2&r;try{if(wr(-1),a&&t.length>Re&&Hg(e,t,Re,!1),_n(a?2:0,i),a)o.runInContext(n,r,i);else{const l=mt(null);try{n(r,i)}finally{mt(l)}}}finally{a&&null===t[Qo]&&Vg(t,Qo),wr(s),_n(a?3:1,i)}}function Oc(e,t,n){if(yu(t)){const r=mt(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{mt(r)}}}function Kg(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Lc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Lc(e,t,n,r,i,o,s,a,u,l,h){const C=Re+r,R=C+i,H=function j0(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ae);return n}(C,R),K="function"==typeof l?l():l;return H[ce]={type:e,blueprint:H,template:n,queries:null,viewQuery:a,declTNode:t,data:H.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:K,incompleteFirstPass:!1,ssrId:h}}let Jg=e=>null;function zg(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?qg(n,t,i,o):r.hasOwnProperty(i)&&qg(n,t,r[i],o)}return n}function qg(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Xg(e,t,n,r,i,o){for(let l=0;l<r.length;l++)Fu(hs(n,t),e,r[l].type);!function sI(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=lo(e,t,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=Li(n.mergedAttrs,h.hostAttrs),aI(e,n,t,u,h),oI(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const C=h.type.prototype;!s&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(C.ngOnChanges||C.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function q0(e,t,n){const i=t.directiveEnd,o=e.data,s=t.attrs,a=[];let u=null,l=null;for(let h=t.directiveStart;h<i;h++){const C=o[h],R=n?n.get(C):null,K=R?R.outputs:null;u=zg(C.inputs,h,u,R?R.inputs:null),l=zg(C.outputs,h,l,K);const J=null===u||null===s||dp(t)?null:lI(u,h,s);a.push(J)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=l}(e,n,o)}function Zg(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function ob(){return ve.lFrame.currentDirectiveIndex}();try{wr(o);for(let a=r;a<i;a++){const u=e.data[a],l=t[a];Iu(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&nI(u,l)}}finally{wr(-1),Iu(s)}}function nI(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Hc(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function oI(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;sn(t)&&(n[""]=e)}}function aI(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=_r(i.type)),s=new $i(o,sn(i),ie);e.blueprint[r]=s,n[r]=s,function Q0(e,t,n,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function eI(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(e,t,r,lo(e,n,i.hostVars,Ae),i)}function cI(e,t,n,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)Yg(r,n,s[a++],s[a++],s[a++])}function Yg(e,t,n,r,i){const o=mt(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{mt(o)}}function lI(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function em(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=e.data[o];Au(n[r]),s.contentQueries(2,t[o],o)}}}function $s(e,t){return e[Ui]?e[vp][on]=t:e[Ui]=t,e[vp]=t,t}function Bc(e,t,n){Au(0);const r=mt(null);try{t(e,n)}finally{mt(r)}}function im(e,t){const n=e[jr],r=n?n.get(Ir,null):null;r&&r.handleError(t)}function jc(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];Yg(e.data[s],t[s],r,a,i)}}function dI(e,t){const n=Jt(t,e),r=n[ce];!function fI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[dt];null!==i&&null===n[Rn]&&(n[Rn]=Cg(i,n[jr])),Wc(r,n,n[nt])}function Wc(e,t,n){Mu(t);try{const r=e.viewQuery;null!==r&&Bc(1,r,n);const i=e.template;null!==i&&$g(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&em(e,t),e.staticViewQueries&&Bc(2,e.viewQuery,n);const o=e.components;null!==o&&function pI(e,t){for(let n=0;n<t.length;n++)dI(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Ie]&=-5,Pu()}}let om=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=new kD(n,l=>{this.all.has(l)&&this.queue.set(l,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return e.\u0275prov=Ne({token:e,providedIn:"root",factory:()=>new e}),e})();function Ks(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=su(i,a):2==o&&(r=su(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function fo(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(Je(o)),Lt(o)){for(let a=Et;a<o.length;a++){const u=o[a],l=u[ce].firstChild;null!==l&&fo(u[ce],u,l,r)}o[yn]!==o[dt]&&r.push(o[yn])}const s=n.type;if(8&s)fo(e,t,n.child,r);else if(32&s){const a=Yu(n,t);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Jh(t,n);if(Array.isArray(a))r.push(...a);else{const u=Yi(t[rt]);fo(u[ce],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Js(e,t,n,r=!0){const i=t[yr].rendererFactory;i.begin&&i.begin();try{sm(e,t,e.template,n)}catch(s){throw r&&im(t,s),s}finally{i.end&&i.end(),t[yr].effectManager?.flush()}}function sm(e,t,n,r){const i=t[Ie];if(256!=(256&i)){t[yr].effectManager?.flush(),Mu(t);try{Np(t),function Wp(e){return ve.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&$g(e,t,n,2,r);const s=3==(3&i);if(s){const l=e.preOrderCheckHooks;null!==l&&cs(t,l,null)}else{const l=e.preOrderHooks;null!==l&&ls(t,l,0,null),xu(t,0)}if(function vI(e){for(let t=Oh(e);null!==t;t=Nh(t)){if(!t[wp])continue;const n=t[$r];for(let r=0;r<n.length;r++){GD(n[r])}}}(t),am(t,2),null!==e.contentQueries&&em(e,t),s){const l=e.contentCheckHooks;null!==l&&cs(t,l)}else{const l=e.contentHooks;null!==l&&ls(t,l,1),xu(t,1)}!function B0(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=Lg(t,es);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)wr(~o);else{const s=o,a=n[++i],u=n[++i];ib(a,s),r.runInContext(u,2,t[s])}}}finally{null===t[es]&&Vg(t,es),wr(-1)}}(e,t);const a=e.components;null!==a&&cm(t,a,0);const u=e.viewQuery;if(null!==u&&Bc(2,u,r),s){const l=e.viewCheckHooks;null!==l&&cs(t,l)}else{const l=e.viewHooks;null!==l&&ls(t,l,2),xu(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[Ie]&=-73,Fp(t)}finally{Pu()}}}function am(e,t){for(let n=Oh(e);null!==n;n=Nh(n))for(let r=Et;r<n.length;r++)um(n[r],t)}function _I(e,t,n){um(Jt(t,e),n)}function um(e,t){if(!function jD(e){return 128==(128&e[Ie])}(e))return;const n=e[ce];if(80&e[Ie]&&0===t||1024&e[Ie]||2===t)sm(n,e,n.template,e[nt]);else if(e[Hi]>0){am(e,1);const i=e[ce].components;null!==i&&cm(e,i,1)}}function cm(e,t,n){for(let r=0;r<t.length;r++)_I(e,t[r],n)}class po{get rootNodes(){const t=this._lView,n=t[ce];return fo(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nt]}set context(t){this._lView[nt]=t}get destroyed(){return 256==(256&this._lView[Ie])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Xe];if(Lt(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(function ec(e,t){if(e.length<=Et)return;const n=Et+t,r=e[n];if(r){const i=r[Bi];null!==i&&i!==e&&Vh(i,r),t>0&&(e[n-1][on]=r[on]);const o=ms(e,Et+t);!function pS(e,t){eo(e,t,t[Te],2,null,null),t[dt]=null,t[wt]=null}(r[ce],r);const s=o[mn];null!==s&&s.detachView(o[ce]),r[Xe]=null,r[on]=null,r[Ie]&=-129}return r}(t,r),ms(n,r))}this._attachedToViewContainer=!1}!function Hh(e,t){if(!(256&t[Ie])){const n=t[Te];t[Qo]?.destroy(),t[es]?.destroy(),n.destroyNode&&eo(e,t,n,3,null,null),function mS(e){let t=e[Ui];if(!t)return tc(e[ce],e);for(;t;){let n=null;if(Kt(t))n=t[Ui];else{const r=t[Et];r&&(n=r)}if(!n){for(;t&&!t[on]&&t!==e;)Kt(t)&&tc(t[ce],t),t=t[Xe];null===t&&(t=e),Kt(t)&&tc(t[ce],t),n=t&&t[on]}t=n}}(t)}}(this._lView[ce],this._lView)}onDestroy(t){!function Vp(e,t){if(256==(256&e[Ie]))throw new oe(911,!1);null===e[Qn]&&(e[Qn]=[]),e[Qn].push(t)}(this._lView,t)}markForCheck(){uo(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ie]&=-129}reattach(){this._lView[Ie]|=128}detectChanges(){Js(this._lView[ce],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gS(e,t){eo(e,t,t[Te],2,null,null)}(this._lView[ce],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=t}}class wI extends po{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Js(t[ce],t,t[nt],!1)}checkNoChanges(){}get context(){return null}}class lm extends Us{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ve(t);return new ho(n,this.ngModule)}}function dm(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class CI{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Xo(r);const i=this.injector.get(t,xc,r);return i!==xc||n===xc?i:this.parentInjector.get(t,n,r)}}class ho extends Sg{get inputs(){return dm(this.componentDef.inputs)}get outputs(){return dm(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function hD(e){return e.map(pD).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof br?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new CI(t,o):t,a=s.get(Tg,null);if(null===a)throw new oe(407,!1);const h={rendererFactory:a,sanitizer:s.get(S0,null),effectManager:s.get(om,null)},C=a.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",H=r?function W0(e,t,n,r){const o=r.get(Pg,!1)||n===Gt.ShadowDom,s=e.selectRootElement(t,o);return function G0(e){Jg(e)}(s),s}(C,r,this.componentDef.encapsulation,s):bs(C,R,function EI(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(R)),X=this.componentDef.signals?4608:this.componentDef.onPush?576:528,re=Lc(0,null,null,1,0,null,null,null,null,null,null),Z=Gs(null,re,null,X,null,null,h,C,s,null,null);let se,ge;Mu(Z);try{const Ee=this.componentDef;let gt,Za=null;Ee.findHostDirectiveDefs?(gt=[],Za=new Map,Ee.findHostDirectiveDefs(Ee,gt,Za),gt.push(Ee)):gt=[Ee];const tF=function bI(e,t){const n=e[ce],r=Re;return e[r]=t,ci(n,r,2,"#host",null)}(Z,H),nF=function SI(e,t,n,r,i,o,s){const a=i[ce];!function II(e,t,n,r){for(const i of e)t.mergedAttrs=Li(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Ks(t,t.mergedAttrs,!0),null!==n&&Zh(r,n,t))}(r,e,t,s);let u=null;null!==t&&(u=Cg(t,i[jr]));const l=o.rendererFactory.createRenderer(t,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const C=Gs(i,Kg(n),null,h,i[e.index],e,o,l,null,null,u);return a.firstCreatePass&&Hc(a,e,r.length-1),$s(i,C),i[e.index]=C}(tF,H,Ee,gt,Z,h,C);ge=Op(re,Re),H&&function AI(e,t,n,r){if(r)gu(e,n,["ng-version",I0.full]);else{const{attrs:i,classes:o}=function gD(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!rn(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&gu(e,n,i),o&&o.length>0&&Xh(e,n,o.join(" "))}}(C,Ee,H,r),void 0!==n&&function MI(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(ge,this.ngContentSelectors,n),se=function TI(e,t,n,r,i,o){const s=yt(),a=i[ce],u=Vt(s,i);Xg(a,i,s,n,null,r);for(let h=0;h<n.length;h++)Dt(Er(i,a,s.directiveStart+h,s),i);Zg(a,i,s),u&&Dt(u,i);const l=Er(i,a,s.directiveStart+s.componentOffset,s);if(e[nt]=i[nt]=l,null!==o)for(const h of o)h(l,t);return Oc(a,s,e),l}(nF,Ee,gt,Za,Z,[PI]),Wc(re,Z,null)}finally{Pu()}return new DI(this.componentType,se,ai(ge,Z),Z,ge)}}class DI extends _0{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new wI(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;jc(o[ce],o,i,t,n),this.previousInputValues.set(t,n),uo(Jt(this._tNode.index,o))}}get injector(){return new Xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function PI(){const e=yt();us(te()[ce],e)}function je(e){let t=function fm(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(sn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new oe(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const s=e;s.inputs=zs(e.inputs),s.inputTransforms=zs(e.inputTransforms),s.declaredInputs=zs(e.declaredInputs),s.outputs=zs(e.outputs);const a=i.hostBindings;a&&OI(e,a);const u=i.viewQuery,l=i.contentQueries;if(u&&RI(e,u),l&&kI(e,l),Go(e.inputs,i.inputs),Go(e.declaredInputs,i.declaredInputs),Go(e.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Go(s.inputTransforms,i.inputTransforms)),sn(i)&&i.data.animation){const h=e.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===je&&(n=!1)}}t=Object.getPrototypeOf(t)}!function xI(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Li(i.hostAttrs,n=Li(n,i.hostAttrs))}}(r)}function zs(e){return e===hn?{}:e===Fe?[]:e}function RI(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function kI(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,o)=>{t(r,i,o),n(r,i,o)}:t}function OI(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}function bt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function _i(e,t,n){const r=te();return bt(r,function zr(){return ve.lFrame.bindingIndex++}(),t)&&function qt(e,t,n,r,i,o,s,a){const u=Vt(t,n);let h,l=t.inputs;!a&&null!=l&&(h=l[r])?(jc(e,n,h,r,i),vr(t)&&function Z0(e,t){const n=Jt(t,e);16&n[Ie]||(n[Ie]|=64)}(n,t.index)):3&t.type&&(r=function X0(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(u,r,i))}(Oe(),function Ze(){const e=ve.lFrame;return Op(e.tView,e.selectedIndex)}(),r,e,t,r[Te],n,!1),_i}function Xc(e,t,n,r,i){const s=i?"class":"style";jc(e,n,t.inputs[s],s,r)}function jn(e,t,n,r){const i=te(),o=Oe(),s=Re+e,a=i[Te],u=o.firstCreatePass?function fT(e,t,n,r,i,o){const s=t.consts,u=ci(t,e,2,r,er(s,i));return function Vc(e,t,n,r){if(Up()){const i=null===r?null:{"":-1},o=function rI(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(fp(t,s.selectors,!1))if(r||(r=[]),sn(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Hc(e,t,a.length)}else r.unshift(s),Hc(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Xg(e,t,n,s,i,a),i&&function iI(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new oe(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=Li(n.mergedAttrs,n.attrs)}(t,n,u,er(s,o)),null!==u.attrs&&Ks(u,u.attrs,!1),null!==u.mergedAttrs&&Ks(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,i,t,n,r):o.data[s],l=Pm(o,i,u,a,t,e);i[s]=l;const h=ns(u);return wn(u,!0),Zh(a,l,u),32!=(32&u.flags)&&as()&&Is(o,i,l,u),0===function KD(){return ve.lFrame.elementDepthCount}()&&Dt(l,i),function JD(){ve.lFrame.elementDepthCount++}(),h&&(function Nc(e,t,n){Up()&&(function tI(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;vr(n)&&function uI(e,t,n){const r=Vt(t,e),i=Kg(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=$s(e,Gs(e,i,null,s,r,t,null,e[yr].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||hs(n,t),Dt(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const u=e.data[a],l=Er(t,e,a,n);Dt(l,t),null!==s&&cI(0,a-i,l,u,0,s),sn(u)&&(Jt(n.index,t)[nt]=Er(t,e,a,n))}}(e,t,n,Vt(n,t)),64==(64&n.flags)&&Zg(e,t,n))}(o,i,u),Oc(o,u,i)),null!==r&&function Fc(e,t,n=Vt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}(i,u),jn}function Wn(){let e=yt();bu()?function Su(){ve.lFrame.isParent=!1}():(e=e.parent,wn(e,!1));const t=e;(function qD(e){return ve.skipHydrationRootTNode===e})(t)&&function QD(){ve.skipHydrationRootTNode=null}(),function zD(){ve.lFrame.elementDepthCount--}();const n=Oe();return n.firstCreatePass&&(us(n,e),yu(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function mb(e){return 0!=(8&e.flags)}(t)&&Xc(n,t,te(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function yb(e){return 0!=(16&e.flags)}(t)&&Xc(n,t,te(),t.stylesWithoutHost,!1),Wn}function wi(e,t,n,r){return jn(e,t,n,r),Wn(),wi}let Pm=(e,t,n,r,i,o)=>(tr(!0),bs(r,i,function Zp(){return ve.lFrame.currentNamespace}()));function ea(e){return!!e&&"function"==typeof e.then}function km(e){return!!e&&"function"==typeof e.subscribe}function Xt(e,t,n,r){const i=te(),o=Oe(),s=yt();return function Nm(e,t,n,r,i,o,s){const a=ns(r),l=e.firstCreatePass&&function nm(e){return e.cleanup||(e.cleanup=[])}(e),h=t[nt],C=function tm(e){return e[Br]||(e[Br]=[])}(t);let R=!0;if(3&r.type||s){const J=Vt(r,t),X=s?s(J):J,re=C.length,Z=s?ge=>s(Je(ge[r.index])):r.index;let se=null;if(!s&&a&&(se=function _T(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[Br],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==se)(se.__ngLastListenerFn__||se).__ngNextListenerFn__=o,se.__ngLastListenerFn__=o,R=!1;else{o=Lm(r,t,h,o,!1);const ge=n.listen(X,i,o);C.push(o,ge),l&&l.push(i,Z,re,re+1)}}else o=Lm(r,t,h,o,!1);const H=r.outputs;let K;if(R&&null!==H&&(K=H[i])){const J=K.length;if(J)for(let X=0;X<J;X+=2){const Ee=t[K[X]][K[X+1]].subscribe(o),gt=C.length;C.push(o,Ee),l&&l.push(i,r.index,gt,-(gt+1))}}}(o,i,i[Te],s,e,t,r),Xt}function Fm(e,t,n,r){try{return _n(6,t,n),!1!==n(r)}catch(i){return im(e,i),!1}finally{_n(7,t,n)}}function Lm(e,t,n,r,i){return function o(s){if(s===Function)return r;uo(e.componentOffset>-1?Jt(e.index,t):t);let u=Fm(t,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=Fm(t,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function ta(e,t){return e<<17|t<<2}function rr(e){return e>>17&32767}function el(e){return 2|e}function Ar(e){return(131068&e)>>2}function tl(e,t){return-131069&e|t<<2}function nl(e){return 1|e}function Jm(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?rr(o):Ar(o),u=!1;for(;0!==a&&(!1===u||s);){const h=e[a+1];MT(e[a],t)&&(u=!0,e[a+1]=r?nl(h):el(h)),a=r?rr(h):Ar(h)}u&&(e[n+1]=r?el(o):nl(o))}function MT(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&ti(e,t)>=0}function na(e,t){return function un(e,t,n,r){const i=te(),o=Oe(),s=function Nn(e){const t=ve.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);o.firstUpdatePass&&function ny(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[At()],s=function ty(e,t){return t>=e.expandoStartIndex}(e,n);(function sy(e,t){return 0!=(e.flags&(t?8:16))})(o,r)&&null===t&&!s&&(t=!1),t=function VT(e,t,n,r){const i=function Tu(e){const t=ve.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=_o(n=rl(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=rl(i,e,t,n,r),null===o){let u=function HT(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Ar(r))return e[rr(r)]}(e,t,r);void 0!==u&&Array.isArray(u)&&(u=rl(null,e,t,u[1],r),u=_o(u,t.attrs,r),function UT(e,t,n,r){e[rr(n?t.classBindings:t.styleBindings)]=r}(e,t,r,u))}else o=function BT(e,t,n){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=_o(r,e[o].hostAttrs,n);return _o(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function TT(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=rr(s),u=Ar(s);e[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||ti(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const R=rr(e[a+1]);e[r+1]=ta(R,a),0!==R&&(e[R+1]=tl(e[R+1],r)),e[a+1]=function ST(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=ta(a,0),0!==a&&(e[a+1]=tl(e[a+1],r)),a=r;else e[r+1]=ta(u,0),0===a?a=r:e[u+1]=tl(e[u+1],r),u=r;l&&(e[r+1]=el(e[r+1])),Jm(e,h,r,!0),Jm(e,h,r,!1),function AT(e,t,n,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&ti(o,t)>=0&&(n[r+1]=nl(n[r+1]))}(t,h,e,r,o),s=ta(a,u),o?t.classBindings=s:t.styleBindings=s}(i,o,t,n,s,r)}}(o,e,s,r),t!==Ae&&bt(i,s,t)&&function iy(e,t,n,r,i,o,s,a){if(!(3&t.type))return;const u=e.data,l=u[a+1],h=function IT(e){return 1==(1&e)}(l)?oy(u,t,n,i,Ar(l),s):void 0;ra(h)||(ra(o)||function bT(e){return 2==(2&e)}(l)&&(o=oy(u,null,n,i,a,s)),function SS(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Ht.DashCase;null==i?e.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ht.Important),e.setStyle(n,r,i,o))}}(r,s,function ss(e,t){return Je(t[e])}(At(),n),i,o))}(o,o.data[At()],i,i[Te],e,i[s+1]=function $T(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=lt(function nr(e){return e instanceof tg?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,n),r,s)}(e,t,null,!0),na}function rl(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=_o(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function _o(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),zt(e,s,!!n||t[++o]))}return void 0===e?null:e}function oy(e,t,n,r,i,o){const s=null===t;let a;for(;i>0;){const u=e[i],l=Array.isArray(u),h=l?u[1]:u,C=null===h;let R=n[i+1];R===Ae&&(R=C?Fe:void 0);let H=C?Uu(R,r):h===r?R:void 0;if(l&&!ra(H)&&(H=Uu(u,r)),ra(H)&&(a=H,s))return a;const K=e[i+1];i=s?rr(K):Ar(K)}if(null!==t){let u=o?t.residualClasses:t.residualStyles;null!=u&&(a=Uu(u,r))}return a}function ra(e){return void 0!==e}function Mr(e,t=""){const n=te(),r=Oe(),i=e+Re,o=r.firstCreatePass?ci(r,i,1,t,null):r.data[i],s=ay(r,n,o,t,e);n[i]=s,as()&&Is(r,n,s,o),wn(o,!1)}let ay=(e,t,n,r,i)=>(tr(!0),function Ds(e,t){return e.createText(t)}(t[Te],r));const Di="en-US";let Py=Di;function al(e,t,n,r,i){if(e=we(e),Array.isArray(e))for(let o=0;o<e.length;o++)al(e[o],t,n,r,i);else{const o=Oe(),s=te();let a=Dr(e)?e:we(e.provide),u=yg(e);const l=yt(),h=1048575&l.providerIndexes,C=l.directiveStart,R=l.providerIndexes>>20;if(Dr(e)||!e.multi){const H=new $i(u,i,ie),K=cl(a,t,i?h:h+R,C);-1===K?(Fu(hs(l,s),o,a),ul(o,e,t.length),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(H),s.push(H)):(n[K]=H,s[K]=H)}else{const H=cl(a,t,h+R,C),K=cl(a,t,h,h+R),X=K>=0&&n[K];if(i&&!X||!i&&!(H>=0&&n[H])){Fu(hs(l,s),o,a);const re=function dM(e,t,n,r,i){const o=new $i(e,n,ie);return o.multi=[],o.index=t,o.componentProviders=0,tv(o,i,r&&!n),o}(i?lM:cM,n.length,i,r,u);!i&&X&&(n[K].providerFactory=re),ul(o,e,t.length,0),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(re),s.push(re)}else ul(o,e,H>-1?H:K,tv(n[i?K:H],u,!i&&r));!i&&r&&X&&n[K].componentProviders++}}}function ul(e,t,n,r){const i=Dr(t),o=function n0(e){return!!e.useClass}(t);if(i||o){const u=(o?we(t.useClass):t).prototype.ngOnDestroy;if(u){const l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function tv(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function cl(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function cM(e,t,n,r){return ll(this.multi,[])}function lM(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Er(n,n[ce],this.providerFactory.index,r);o=a.slice(0,s),ll(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],ll(i,o);return o}function ll(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function ze(e,t=[]){return n=>{n.providersResolver=(r,i)=>function uM(e,t,n){const r=Oe();if(r.firstCreatePass){const i=sn(e);al(n,r.data,r.blueprint,i,!0),al(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class bi{}class fM{}class dl extends bi{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lm(this);const i=function $t(e,t){const n=e[ip]||null;if(!n&&!0===t)throw new Error(`Type ${lt(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function Vn(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=Gg(t,n,[{provide:bi,useValue:this},{provide:Us,useValue:this.componentFactoryResolver},...r],lt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class fl extends fM{constructor(t){super(),this.moduleType=t}create(t){return new dl(this.moduleType,t,[])}}function hl(e){return t=>{setTimeout(e,void 0,t)}}const St=class WM extends ae{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const u=t;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=hl(o),i&&(i=hl(i)),s&&(s=hl(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof U&&t.add(a),a}},Gv=new fe("Application Initializer");let Tl=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Le(Gv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(ea(o))n.push(o);else if(km(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ne({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const $n=new fe("LocaleId",{providedIn:"root",factory:()=>Le($n,_e.Optional|_e.SkipSelf)||function LP(){return typeof $localize<"u"&&$localize.locale||Di}()});let Al=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new me(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ne({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Jv(...e){}class ot{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function jP(){let e=Ge.requestAnimationFrame,t=Ge.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function $P(e){const t=()=>{!function GP(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ge,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Pl(e),e.isCheckStableRunning=!0,Ml(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Pl(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return zv(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),qv(e)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return zv(e),n.invoke(i,o,s,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),qv(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Pl(e),Ml(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ot.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(ot.isInAngularZone())throw new oe(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,WP,Jv,Jv);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const WP={};function Ml(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Pl(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function zv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function qv(e){e._nesting--,Ml(e)}class KP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new St,this.onMicrotaskEmpty=new St,this.onStable=new St,this.onError=new St}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Xv=new fe("",{providedIn:"root",factory:Zv});function Zv(){const e=Le(ot);let t=!0;return iu(new Y(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Y(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{ot.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(qf()))}const Yv=new fe(""),la=new fe("");let kl,xl=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kl||(function JP(e){kl=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(Me(ot),Me(Rl),Me(la))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})(),Rl=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return kl?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ne({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),ir=null;const Qv=new fe("AllowMultipleToken"),Ol=new fe("PlatformDestroyListeners"),e_=new fe("appBootstrapListener");function r_(e,t,n=[]){const r=`Platform: ${t}`,i=new fe(r);return(o=[])=>{let s=Nl();if(!s||s.injector.get(Qv,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function XP(e){if(ir&&!ir.get(Qv,!1))throw new oe(400,!1);(function t_(){!function xD(e){Ip=e}(()=>{throw new oe(600,!1)})})(),ir=e;const t=e.get(o_);(function n_(e){e.get(vg,null)?.forEach(n=>n())})(e)}(function i_(e=[],t){return Hn.create({name:t,providers:[{provide:mc,useValue:"platform"},{provide:Ol,useValue:new Set([()=>ir=null])},...e]})}(a,r))}return function YP(e){const t=Nl();if(!t)throw new oe(401,!1);return t}()}}function Nl(){return ir?.get(o_)??null}let o_=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function QP(e="zone.js",t){return"noop"===e?new KP:"zone.js"===e?new ot(t):e}(r?.ngZone,function s_(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function hM(e,t,n){return new dl(e,t,n)}(n.moduleType,this.injector,function d_(e){return[{provide:ot,useFactory:e},{provide:xs,multi:!0,useFactory:()=>{const t=Le(t1,{optional:!0});return()=>t.initialize()}},{provide:l_,useFactory:e1},{provide:Xv,useFactory:Zv}]}(()=>i)),s=o.injector.get(Ir,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{da(this._modules,o),a.unsubscribe()})}),function a_(e,t,n){try{const r=n();return ea(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(Tl);return a.runInitializers(),a.donePromise.then(()=>(function xy(e){Zt(e,"Expected localeId to be defined"),"string"==typeof e&&(Py=e.toLowerCase().replace(/_/g,"-"))}(o.injector.get($n,Di)||Di),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=u_({},r);return function zP(e,t,n){const r=new fl(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Ti);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new oe(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Ol,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Me(Hn))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function u_(e,t){return Array.isArray(t)?t.reduce(u_,e):{...e,...t}}let Ti=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Le(l_),this.zoneIsStable=Le(Xv),this.componentTypes=[],this.components=[],this.isStable=Le(Al).hasPendingTasks.pipe(Hr(n=>n?Vr(!1):this.zoneIsStable),function BC(e,t=G){return e=e??jC,pe((n,r)=>{let i,o=!0;n.subscribe(ke(r,s=>{const a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}(),qf()),this._injector=Le(br)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Sg;if(!this._injector.get(Tl).done)throw!i&&function Vi(e){const t=Ve(e)||_t(e)||Ft(e);return null!==t&&t.standalone}(n),new oe(405,!1);let s;s=i?n:this._injector.get(Us).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function qP(e){return e.isBoundToModule}(s)?void 0:this._injector.get(bi),l=s.create(Hn.NULL,[],r||s.selector,a),h=l.location.nativeElement,C=l.injector.get(Yv,null);return C?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),da(this.components,l),C?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;da(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(e_,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>da(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new oe(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ne({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function da(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const l_=new fe("",{providedIn:"root",factory:()=>Le(Ir).handleError.bind(void 0)});function e1(){const e=Le(ot),t=Le(Ir);return n=>e.runOutsideAngular(()=>t.handleError(n))}let t1=(()=>{class e{constructor(){this.zone=Le(ot),this.applicationRef=Le(Ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ne({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const v1=r_(null,"core",[]);let _1=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Me(Ti))},e.\u0275mod=gn({type:e}),e.\u0275inj=nn({}),e})(),Wl=null;function Mo(){return Wl}class P1{}const or=new fe("DocumentToken");function F_(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}let $x=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=gn({type:e}),e.\u0275inj=nn({}),e})();const W_="browser";function G_(e){return e===W_}function $_(e){return"server"===e}class J_{}class vR extends P1{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sd extends vR{static makeCurrent(){!function M1(e){Wl||(Wl=e)}(new sd)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function _R(){return ko=ko||document.querySelector("base"),ko?ko.getAttribute("href"):null}();return null==n?null:function wR(e){Ta=Ta||document.createElement("a"),Ta.setAttribute("href",e);const t=Ta.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return F_(document.cookie,t)}}let Ta,ko=null,CR=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();const ad=new fe("EventManagerPlugins");let Y_=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(n,r),r}}return e.\u0275fac=function(n){return new(n||e)(Me(ad),Me(ot))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();class Q_{constructor(t){this._doc=t}}const ud="ng-app-id";let ew=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$_(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${ud}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(ud),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ud,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(Me(or),Me(Ns),Me(_g,8),Me(Ln))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();const cd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ld=/%COMP%/g,IR=new fe("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function nw(e,t){return t.map(n=>n.replace(ld,e))}let rw=(()=>{class e{constructor(n,r,i,o,s,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=$_(a),this.defaultRenderer=new dd(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Gt.ShadowDom&&(r={...r,encapsulation:Gt.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof ow?i.applyToHost(n):i instanceof fd&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestory,C=this.platformIsServer;switch(r.encapsulation){case Gt.Emulated:o=new ow(u,l,r,this.appId,h,s,a,C);break;case Gt.ShadowDom:return new PR(u,l,n,r,s,a,this.nonce,C);default:o=new fd(u,l,r,h,s,a,C)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return e.\u0275fac=function(n){return new(n||e)(Me(Y_),Me(ew),Me(Ns),Me(IR),Me(or),Me(Ln),Me(ot),Me(_g))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();class dd{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(cd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(iw(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(iw(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new oe(5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=cd[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=cd[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Ht.DashCase|Ht.Important)?t.style.setProperty(n,r,i&Ht.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ht.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=Mo().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function iw(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class PR extends dd{constructor(t,n,r,i,o,s,a,u){super(t,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=nw(i.id,i.styles);for(const h of l){const C=document.createElement("style");a&&C.setAttribute("nonce",a),C.textContent=h,this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class fd extends dd{constructor(t,n,r,i,o,s,a,u){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=u?nw(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class ow extends fd{constructor(t,n,r,i,o,s,a,u){const l=i+"-"+r.id;super(t,n,r,o,s,a,u,l),this.contentAttr=function TR(e){return"_ngcontent-%COMP%".replace(ld,e)}(l),this.hostAttr=function AR(e){return"_nghost-%COMP%".replace(ld,e)}(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let xR=(()=>{class e extends Q_{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(Me(or))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();const sw=["alt","control","meta","shift"],RR={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kR={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let OR=(()=>{class e extends Q_{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mo().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),sw.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=RR[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),sw.forEach(s=>{s!==i&&(0,kR[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(Me(or))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();const VR=r_(v1,"browser",[{provide:Ln,useValue:W_},{provide:vg,useValue:function NR(){sd.makeCurrent()},multi:!0},{provide:or,useFactory:function LR(){return function PS(e){ac=e}(document),document},deps:[]}]),HR=new fe(""),cw=[{provide:la,useClass:class ER{addToWindow(t){Ge.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new oe(5103,!1);return o},Ge.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ge.getAllAngularRootElements=()=>t.getAllRootElements(),Ge.frameworkStabilizers||(Ge.frameworkStabilizers=[]),Ge.frameworkStabilizers.push(r=>{const i=Ge.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Mo().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Yv,useClass:xl,deps:[ot,Rl,la]},{provide:xl,useClass:xl,deps:[ot,Rl,la]}],lw=[{provide:mc,useValue:"root"},{provide:Ir,useFactory:function FR(){return new Ir},deps:[]},{provide:ad,useClass:xR,multi:!0,deps:[or,ot,Ln]},{provide:ad,useClass:OR,multi:!0,deps:[or]},rw,ew,Y_,{provide:Tg,useExisting:rw},{provide:J_,useClass:CR,deps:[]},[]];let UR=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Ns,useValue:n.appId}]}}}return e.\u0275fac=function(n){return new(n||e)(Me(HR,12))},e.\u0275mod=gn({type:e}),e.\u0275inj=nn({providers:[...lw,...cw],imports:[$x,_1]}),e})();function hw(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(l){return void n(l)}a.done?t(u):Promise.resolve(u).then(r,i)}function Ai(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(u){hw(o,r,i,s,a,"next",u)}function a(u){hw(o,r,i,s,a,"throw",u)}s(void 0)})}}typeof window<"u"&&window;const{isArray:JR}=Array,{getPrototypeOf:zR,prototype:qR,keys:XR}=Object;const{isArray:QR}=Array;function gw(e){return Ke(t=>function ek(e,t){return QR(t)?e(...t):e(t)}(e,t))}function tk(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function nk(...e){const t=function kC(e){return v(nu(e))?e.pop():void 0}(e),{args:n,keys:r}=function ZR(e){if(1===e.length){const t=e[0];if(JR(t))return{args:t,keys:null};if(function YR(e){return e&&"object"==typeof e&&zR(e)===qR}(t)){const n=XR(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e),i=new Y(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,l=s;for(let h=0;h<s;h++){let C=!1;kt(n[h]).subscribe(ke(o,R=>{C||(C=!0,l--),a[h]=R},()=>u--,void 0,()=>{(!u||!C)&&(l||o.next(r?tk(r,a):a),o.complete())}))}});return t?i.pipe(gw(t)):i}let mw=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(ie(Sr),ie(an))},e.\u0275dir=Se({type:e}),e})(),Rr=(()=>{class e extends mw{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=function Ct(e){return Pn(()=>{const t=e.prototype.constructor,n=t[xn]||Lu(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[xn]||Lu(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}(e)))(r||e)}}(),e.\u0275dir=Se({type:e,features:[je]}),e})();const Tn=new fe("NgValueAccessor"),ik={provide:Tn,useExisting:We(()=>Aa),multi:!0},sk=new fe("CompositionEventMode");let Aa=(()=>{class e extends mw{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ok(){const e=Mo()?Mo().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(ie(Sr),ie(an),ie(sk,8))},e.\u0275dir=Se({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Xt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[ze([ik]),je]}),e})();const It=new fe("NgValidators"),ur=new fe("NgAsyncValidators");function Tw(e){return null!=e}function Aw(e){return ea(e)?ki(e):e}function Mw(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function Pw(e,t){return t.map(n=>n(e))}function xw(e){return e.map(t=>function uk(e){return!e.validate}(t)?t:n=>t.validate(n))}function hd(e){return null!=e?function Rw(e){if(!e)return null;const t=e.filter(Tw);return 0==t.length?null:function(n){return Mw(Pw(n,t))}}(xw(e)):null}function gd(e){return null!=e?function kw(e){if(!e)return null;const t=e.filter(Tw);return 0==t.length?null:function(n){return nk(Pw(n,t).map(Aw)).pipe(Ke(Mw))}}(xw(e)):null}function Ow(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Nw(e){return e._rawValidators}function Fw(e){return e._rawAsyncValidators}function md(e){return e?Array.isArray(e)?e:[e]:[]}function Pa(e,t){return Array.isArray(e)?e.includes(t):e===t}function Lw(e,t){const n=md(t);return md(e).forEach(i=>{Pa(n,i)||n.push(i)}),n}function Vw(e,t){return md(t).filter(n=>!Pa(e,n))}class Hw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=hd(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=gd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class cr extends Hw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Uw{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Bw=(()=>{class e extends Uw{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(ie(cr,2))},e.\u0275dir=Se({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&na("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[je]}),e})();const Oo="VALID",Ra="INVALID",Mi="PENDING",No="DISABLED";function ka(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class $w{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Oo}get invalid(){return this.status===Ra}get pending(){return this.status==Mi}get disabled(){return this.status===No}get enabled(){return this.status!==No}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Lw(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Lw(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Vw(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Vw(t,this._rawAsyncValidators))}hasValidator(t){return Pa(this._rawValidators,t)}hasAsyncValidator(t){return Pa(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Mi,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=No,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Oo,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oo||this.status===Mi)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?No:Oo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Mi,this._hasOwnPendingAsyncValidator=!0;const n=Aw(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new St,this.statusChanges=new St}_calculateStatus(){return this._allControlsDisabled()?No:this.errors?Ra:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mi)?Mi:this._anyControlsHaveStatus(Ra)?Ra:Oo}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ka(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function pk(e){return Array.isArray(e)?hd(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function hk(e){return Array.isArray(e)?gd(e):e||null}(this._rawAsyncValidators)}}const Pi=new fe("CallSetDisabledState",{providedIn:"root",factory:()=>Oa}),Oa="always";function Fo(e,t,n=Oa){(function Cd(e,t){const n=Nw(e);null!==t.validator?e.setValidators(Ow(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=Fw(e);null!==t.asyncValidator?e.setAsyncValidators(Ow(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();La(t._rawValidators,i),La(t._rawAsyncValidators,i)})(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function yk(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Kw(e,t)})}(e,t),function _k(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function vk(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Kw(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function mk(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Fa(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),function Va(e,t){let n=!1;if(null!==e){if(null!==t.validator){const i=Nw(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(null!==t.asyncValidator){const i=Fw(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}const r=()=>{};return La(t._rawValidators,r),La(t._rawAsyncValidators,r),n}(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function La(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Kw(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function qw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Xw(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const xi=class extends $w{constructor(t=null,n,r){super(function _d(e){return(ka(e)?e.validators:e)||null}(n),function wd(e,t){return(ka(t)?t.asyncValidators:e)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ka(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Xw(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){qw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){qw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Xw(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let nE=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=gn({type:e}),e.\u0275inj=nn({}),e})();const Td=new fe("NgModelWithFormControlWarning"),kk={provide:cr,useExisting:We(()=>Ad)};let Ad=(()=>{class e extends cr{set isDisabled(n){}constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this.update=new St,this._ngModelWarningSent=!1,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function Sd(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===Aa?n=o:function Ck(e){return Object.getPrototypeOf(e.constructor)===Rr}(o)?r=o:i=o}),i||r||n||null}(0,i)}ngOnChanges(n){if(this._isControlChanged(n)){const r=n.form.previousValue;r&&Fa(r,this,!1),Fo(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function bd(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)})(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Fa(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(n){return new(n||e)(ie(It,10),ie(ur,10),ie(Tn,10),ie(Td,8),ie(Pi,8))},e.\u0275dir=Se({type:e,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[ze([kk]),je,kn]}),e})(),Yk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=gn({type:e}),e.\u0275inj=nn({imports:[nE]}),e})(),eO=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Td,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Pi,useValue:n.callSetDisabledState??Oa}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=gn({type:e}),e.\u0275inj=nn({imports:[Yk]}),e})();const Or=new TextEncoder,Nd=new TextDecoder;const Ua=e=>(e=>{let t=e;"string"==typeof t&&(t=Or.encode(t));const r=[];for(let i=0;i<t.length;i+=32768)r.push(String.fromCharCode.apply(null,t.subarray(i,i+32768)));return btoa(r.join(""))})(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");class Hd extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var n;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(n=Error.captureStackTrace)||void 0===n||n.call(Error,this,this.constructor)}}class _E extends Hd{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Vo extends Hd{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class iO extends Hd{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}const Ba=crypto,wE=e=>e instanceof CryptoKey;Ba.getRandomValues.bind(Ba);Symbol();const vO=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,TE=e=>{const t=vO.exec(e);if(!t)throw new TypeError("Invalid time period format");const n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*n);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*n);case"day":case"days":case"d":return Math.round(86400*n);case"week":case"weeks":case"w":return Math.round(604800*n);default:return Math.round(31557600*n)}};function vt(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function dr(e,t){return e.name===t}function ja(e){return parseInt(e.name.slice(4),10)}function CO(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!dr(e.algorithm,"HMAC"))throw vt("HMAC");const r=parseInt(t.slice(2),10);if(ja(e.algorithm.hash)!==r)throw vt(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!dr(e.algorithm,"RSASSA-PKCS1-v1_5"))throw vt("RSASSA-PKCS1-v1_5");const r=parseInt(t.slice(2),10);if(ja(e.algorithm.hash)!==r)throw vt(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!dr(e.algorithm,"RSA-PSS"))throw vt("RSA-PSS");const r=parseInt(t.slice(2),10);if(ja(e.algorithm.hash)!==r)throw vt(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw vt("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!dr(e.algorithm,"ECDSA"))throw vt("ECDSA");const r=function EO(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw vt(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}!function ME(e,t){if(t.length&&!t.some(n=>e.usages.includes(n))){let n="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const r=t.pop();n+=`one of ${t.join(", ")}, or ${r}.`}else n+=2===t.length?`one of ${t[0]} or ${t[1]}.`:`${t[0]}.`;throw new TypeError(n)}}(e,n)}function PE(e,t,...n){if(n.length>2){const r=n.pop();e+=`one of type ${n.join(", ")}, or ${r}.`}else e+=2===n.length?`one of type ${n[0]} or ${n[1]}.`:`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const xE=(e,...t)=>PE("Key must be ",e,...t);function RE(e,t,...n){return PE(`Key for the ${e} algorithm must be `,t,...n)}const kE=e=>wE(e),An=["CryptoKey"],bO=function(){var e=Ai(function*(t,n,r){const i=yield function DO(e,t,n){if(wE(t))return CO(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(xE(t,...An));return Ba.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(xE(t,...An,"Uint8Array"))}(t,n,"sign");((e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if("number"!=typeof n||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}})(t,i);const o=yield Ba.subtle.sign(function gO(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new _E(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(t,i.algorithm),i,r);return new Uint8Array(o)});return function(n,r,i){return e.apply(this,arguments)}}();class MO{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}sign(t,n){var r=this;return Ai(function*(){if(!r._protectedHeader&&!r._unprotectedHeader)throw new Vo("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!((...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let n;for(const r of t){const i=Object.keys(r);if(n&&0!==n.size)for(const o of i){if(n.has(o))return!1;n.add(o)}else n=new Set(i)}return!0})(r._protectedHeader,r._unprotectedHeader))throw new Vo("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...r._protectedHeader,...r._unprotectedHeader};let s=!0;if(function dO(e,t,n,r,i){if(void 0!==i.crit&&void 0===r.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r.crit)return new Set;if(!Array.isArray(r.crit)||0===r.crit.length||r.crit.some(s=>"string"!=typeof s||0===s.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==n?new Map([...Object.entries(n),...t.entries()]):t;for(const s of r.crit){if(!o.has(s))throw new _E(`Extension Header Parameter "${s}" is not recognized`);if(void 0===i[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&void 0===r[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(r.crit)}(Vo,new Map([["b64",!0]]),n?.crit,r._protectedHeader,i).has("b64")&&(s=r._protectedHeader.b64,"boolean"!=typeof s))throw new Vo('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=i;if("string"!=typeof a||!a)throw new Vo('JWS "alg" (Algorithm) Header Parameter missing or invalid');((e,t,n)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?((e,t)=>{if(!(t instanceof Uint8Array)){if(!kE(t))throw new TypeError(RE(e,t,...An,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${An.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e,t):((e,t,n)=>{if(!kE(t))throw new TypeError(RE(e,t,...An));if("secret"===t.type)throw new TypeError(`${An.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===n&&"public"===t.type)throw new TypeError(`${An.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===n&&"public"===t.type)throw new TypeError(`${An.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===n&&"private"===t.type)throw new TypeError(`${An.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===n&&"private"===t.type)throw new TypeError(`${An.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,t,n)})(a,t,"sign");let l,u=r._payload;s&&(u=Or.encode(Ua(u))),l=Or.encode(r._protectedHeader?Ua(JSON.stringify(r._protectedHeader)):"");const h=function Fd(...e){const t=e.reduce((i,{length:o})=>i+o,0),n=new Uint8Array(t);let r=0;return e.forEach(i=>{n.set(i,r),r+=i.length}),n}(l,Or.encode("."),u),C=yield bO(a,t,h),R={signature:Ua(C),payload:""};return s&&(R.payload=Nd.decode(u)),r._unprotectedHeader&&(R.header=r._unprotectedHeader),r._protectedHeader&&(R.protected=Nd.decode(l)),R})()}}class PO{constructor(t){this._flattened=new MO(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}sign(t,n){var r=this;return Ai(function*(){const i=yield r._flattened.sign(t,n);if(void 0===i.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${i.protected}.${i.payload}.${i.signature}`})()}}const gf=e=>Math.floor(e.getTime()/1e3);class OO{constructor(t){if(!function kO(e){if(!function RO(e){return"object"==typeof e&&null!==e}(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return this._payload="number"==typeof t?{...this._payload,nbf:t}:{...this._payload,nbf:gf(new Date)+TE(t)},this}setExpirationTime(t){return this._payload="number"==typeof t?{...this._payload,exp:t}:{...this._payload,exp:gf(new Date)+TE(t)},this}setIssuedAt(t){return this._payload=typeof t>"u"?{...this._payload,iat:gf(new Date)}:{...this._payload,iat:t},this}}class NO extends OO{setProtectedHeader(t){return this._protectedHeader=t,this}sign(t,n){var r=this;return Ai(function*(){var i;const o=new PO(Or.encode(JSON.stringify(r._payload)));if(o.setProtectedHeader(r._protectedHeader),Array.isArray(null===(i=r._protectedHeader)||void 0===i?void 0:i.crit)&&r._protectedHeader.crit.includes("b64")&&!1===r._protectedHeader.b64)throw new iO("JWTs MUST NOT use unencoded payload");return o.sign(t,n)})()}}function LO(e,t){this.v=e,this.k=t}function Wa(e){var t,n;function r(o,s){try{var a=e[o](s),u=a.value,l=u instanceof LO;Promise.resolve(l?u.v:u).then(function(h){if(l){var C="return"===o?"return":"next";if(!u.k||h.done)return r(C,h);h=e[C](h).value}i(a.done?"return":"normal",h)},function(h){r("throw",h)})}catch(h){i("throw",h)}}function i(o,s){switch(o){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(o,s){return new Promise(function(a,u){var l={key:o,arg:s,resolve:a,reject:u,next:null};n?n=n.next=l:(t=n=l,r(o,s))})},"function"!=typeof e.return&&(this.return=void 0)}Wa.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Wa.prototype.next=function(e){return this._invoke("next",e)},Wa.prototype.throw=function(e){return this._invoke("throw",e)},Wa.prototype.return=function(e){return this._invoke("return",e)};var $O=S(128);let KO=(()=>{class e{constructor(){this.accSidControl=new xi(""),this.keySidControl=new xi(""),this.secretControl=new xi(""),this.identityControl=new xi(""),this.device=null}login(){var n=this;return Ai(function*(){const r=yield JO({accountSid:n.accSidControl.value.trim(),keySid:n.keySidControl.value.trim(),secret:n.secretControl.value.trim(),identity:n.identityControl.value.trim()});n.createDevice(r)})()}logout(){this.device?.destroy(),this.device=null}createDevice(n){const r=new $O.AS(n);r.on("incoming",i=>i.accept()),r.register(),this.device=r}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=hp({type:e,selectors:[["app-root"]],decls:20,vars:4,consts:[[3,"formControl"],[3,"click"]],template:function(n,r){1&n&&(jn(0,"span"),Mr(1,"Accound"),Wn(),wi(2,"input",0)(3,"br"),jn(4,"span"),Mr(5,"Key"),Wn(),wi(6,"input",0)(7,"br"),jn(8,"span"),Mr(9,"Secret"),Wn(),wi(10,"input",0)(11,"br"),jn(12,"span"),Mr(13,"Identity"),Wn(),wi(14,"input",0)(15,"br"),jn(16,"button",1),Xt("click",function(){return r.login()}),Mr(17,"Login"),Wn(),jn(18,"button",1),Xt("click",function(){return r.logout()}),Mr(19,"Logout"),Wn()),2&n&&(co(2),_i("formControl",r.accSidControl),co(4),_i("formControl",r.keySidControl),co(4),_i("formControl",r.secretControl),co(4),_i("formControl",r.identityControl))},dependencies:[Aa,Bw,Ad]}),e})();const JO=function(){var e=Ai(function*({accountSid:t,keySid:n,secret:r,identity:i}){const o=Math.floor(Date.now()/1e3);return yield new NO({jti:n+"-"+o.toString(),iss:n,sub:t,iat:o,exp:o+36e3,grants:{identity:i,voice:{incoming:{allow:!0}}}}).setProtectedHeader({typ:"JWT",alg:"HS256",cty:"twilio-fpa;v=1"}).sign((new TextEncoder).encode(r))});return function(n){return e.apply(this,arguments)}}();function NE(e){return new Y(t=>{kt(e()).subscribe(t)})}const qO=["addListener","removeListener"],XO=["addEventListener","removeEventListener"],ZO=["on","off"];function Ga(e,t,n,r){if(v(n)&&(r=n,n=void 0),r)return Ga(e,t,n).pipe(gw(r));const[i,o]=function eN(e){return v(e.addEventListener)&&v(e.removeEventListener)}(e)?XO.map(s=>a=>e[s](t,a,n)):function YO(e){return v(e.addListener)&&v(e.removeListener)}(e)?qO.map(FE(e,t)):function QO(e){return v(e.on)&&v(e.off)}(e)?ZO.map(FE(e,t)):[];if(!i&&eu(e))return Lr(s=>Ga(s,t,n))(kt(e));if(!i)throw new TypeError("Invalid event target");return new Y(s=>{const a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function FE(e,t){return n=>r=>e[n](t,r)}function LE(...e){return function tN(){return Gf(1)}()(ki(e,ru(e)))}const pr=new Y(b);function Nr(e,t){return pe((n,r)=>{let i=0;n.subscribe(ke(r,o=>e.call(t,o,i++)&&r.next(o)))})}class rN extends Y{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ce(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new U;const n=this.getSubject();t.add(this.source.subscribe(ke(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=U.EMPTY)}return t}refCount(){return function nN(){return pe((e,t)=>{let n=null;e._refCount++;const r=ke(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}()(this)}}const oN={connector:()=>new ae};function VE(e,t=oN){const{connector:n}=t;return pe((r,i)=>{const o=n();kt(e(function iN(e){return new Y(t=>e.subscribe(t))}(o))).subscribe(i),i.add(r.subscribe(o))})}function hr(e){return e<=0?()=>tu:pe((t,n)=>{let r=0;t.subscribe(ke(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}class cN extends U{constructor(t,n){super()}schedule(t,n=0){return this}}const $a={setInterval(e,t,...n){const{delegate:r}=$a;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=$a;return(t?.clearInterval||clearInterval)(e)},delegate:void 0},HE={now:()=>(HE.delegate||Date).now(),delegate:void 0};class Ho{constructor(t,n=Ho.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}Ho.now=HE.now;const UE=new class dN extends Ho{constructor(t,n=Ho.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}(class lN extends cN{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return $a.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&$a.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,P(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}),fN=UE;function BE(e,t){return t?n=>LE(t.pipe(hr(1),function pN(){return pe((e,t)=>{e.subscribe(ke(t,b))})}()),n.pipe(BE(e))):Lr((n,r)=>kt(e(n,r)).pipe(hr(1),function hN(e){return Ke(()=>e)}(n)))}const Uo="Service workers are disabled or not supported by this browser";class Ka{constructor(t){if(this.serviceWorker=t,t){const r=Ga(t,"controllerchange").pipe(Ke(()=>t.controller)),o=LE(NE(()=>Vr(t.controller)),r);this.worker=o.pipe(Nr(h=>!!h)),this.registration=this.worker.pipe(Hr(()=>t.getRegistration()));const l=Ga(t,"message").pipe(Ke(h=>h.data)).pipe(Nr(h=>h&&h.type)).pipe(function aN(e){return e?t=>VE(e)(t):t=>function sN(e,t){const n=v(e)?e:()=>e;return v(t)?VE(t,{connector:n}):r=>new rN(r,n)}(new ae)(t)}());l.connect(),this.events=l}else this.worker=this.events=this.registration=function vN(e){return NE(()=>function zO(e,t){const n=v(e)?e:()=>e,r=i=>i.error(n());return new Y(t?i=>t.schedule(r,0,i):r)}(new Error(e)))}(Uo)}postMessage(t,n){return this.worker.pipe(hr(1),function uN(e,t,n){const r=v(e)||t||n?{next:e,error:t,complete:n}:e;return r?pe((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(ke(o,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),o.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):G}(r=>{r.postMessage({action:t,...n})})).toPromise().then(()=>{})}postMessageWithOperation(t,n,r){const i=this.waitForOperationCompleted(r),o=this.postMessage(t,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let n;return n="string"==typeof t?r=>r.type===t:r=>t.includes(r.type),this.events.pipe(Nr(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(hr(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Nr(n=>n.nonce===t),hr(1),Ke(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let jE=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new ae,!n.isEnabled)return this.messages=pr,this.notificationClicks=pr,void(this.subscription=pr);this.messages=this.sw.eventsOfType("PUSH").pipe(Ke(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ke(i=>i.data)),this.pushManager=this.sw.registration.pipe(Ke(i=>i.pushManager));const r=this.pushManager.pipe(Hr(i=>i.getSubscription()));this.subscription=iu(r,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Uo));const r={userVisibleOnly:!0};let i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,this.pushManager.pipe(Hr(s=>s.subscribe(r)),hr(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(hr(1),Hr(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Uo))}decodeBase64(n){return atob(n)}}return e.\u0275fac=function(n){return new(n||e)(Me(Ka))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})(),WE=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=pr,this.available=pr,this.activated=pr,void(this.unrecoverable=pr);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Nr(r=>"VERSION_READY"===r.type),Ke(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Uo));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Uo));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}}return e.\u0275fac=function(n){return new(n||e)(Me(Ka))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();const GE=new fe("NGSW_REGISTER_SCRIPT");function _N(e,t,n,r){return()=>{if(!G_(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)i=n.registrationStrategy();else{const[s,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Vr(null);break;case"registerWithDelay":i=$E(+a[0]||0);break;case"registerWhenStable":i=a[0]?iu(KE(e),$E(+a[0])):KE(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}e.get(ot).runOutsideAngular(()=>i.pipe(hr(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(s=>console.error("Service worker registration failed with:",s))))}}function $E(e){return Vr(null).pipe(function yN(e,t=UE){const n=function mN(e=0,t,n=fN){let r=-1;return null!=t&&($f(t)?n=t:r=t),new Y(i=>{let o=function gN(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(e,t);return BE(()=>n)}(e))}function KE(e){return e.get(Ti).isStable.pipe(Nr(n=>n))}function wN(e,t){return new Ka(G_(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}class Sf{}function EN(e,t={}){return Rs([jE,WE,{provide:GE,useValue:e},{provide:Sf,useValue:t},{provide:Ka,useFactory:wN,deps:[Sf,Ln]},{provide:Gv,useFactory:_N,deps:[Hn,GE,Sf,Ln],multi:!0}])}let CN=(()=>{class e{static register(n,r={}){return{ngModule:e,providers:[EN(n,r)]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=gn({type:e}),e.\u0275inj=nn({providers:[jE,WE]}),e})();function JE(e){return pe((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class Ja{}class za{}class Mn{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof Mn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new Mn;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Mn?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const i=("a"===t.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(t,n){const r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class bN{encodeKey(t){return zE(t)}encodeValue(t){return zE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const IN=/%(\d[a-f0-9])/gi,TN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zE(e){return encodeURIComponent(e).replace(IN,(t,n)=>TN[n]??t)}function qa(e){return`${e}`}class gr{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new bN,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function SN(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],i=Array.isArray(r)?r.map(qa):[qa(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new gr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(qa(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(qa(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class AN{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function qE(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function XE(e){return typeof Blob<"u"&&e instanceof Blob}function ZE(e){return typeof FormData<"u"&&e instanceof FormData}class Bo{constructor(t,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function MN(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Mn),this.context||(this.context=new AN),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new gr,this.urlWithParams=n}serializeBody(){return null===this.body?null:qE(this.body)||XE(this.body)||ZE(this.body)||function PN(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ZE(this.body)?null:XE(this.body)?this.body.type||null:qE(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,l=t.params||this.params;const h=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((C,R)=>C.set(R,t.setHeaders[R]),u)),t.setParams&&(l=Object.keys(t.setParams).reduce((C,R)=>C.set(R,t.setParams[R]),l)),new Bo(n,r,o,{params:l,headers:u,context:h,reportProgress:a,responseType:i,withCredentials:s})}}var ut=(()=>((ut=ut||{})[ut.Sent=0]="Sent",ut[ut.UploadProgress=1]="UploadProgress",ut[ut.ResponseHeader=2]="ResponseHeader",ut[ut.DownloadProgress=3]="DownloadProgress",ut[ut.Response=4]="Response",ut[ut.User=5]="User",ut))();class If{constructor(t,n=200,r="OK"){this.headers=t.headers||new Mn,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Tf extends If{constructor(t={}){super(t),this.type=ut.ResponseHeader}clone(t={}){return new Tf({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ri extends If{constructor(t={}){super(t),this.type=ut.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Ri({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class YE extends If{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Af(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let xN=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Bo)o=n;else{let u,l;u=i.headers instanceof Mn?i.headers:new Mn(i.headers),i.params&&(l=i.params instanceof gr?i.params:new gr({fromObject:i.params})),o=new Bo(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Vr(o).pipe(function DN(e,t){return v(t)?Lr(e,t,1):Lr(e,1)}(u=>this.handler.handle(u)));if(n instanceof Bo||"events"===i.observe)return s;const a=s.pipe(Nr(u=>u instanceof Ri));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ke(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(Ke(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(Ke(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(Ke(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new gr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Af(i,r))}post(n,r,i={}){return this.request("POST",n,Af(i,r))}put(n,r,i={}){return this.request("PUT",n,Af(i,r))}}return e.\u0275fac=function(n){return new(n||e)(Me(Ja))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();function tC(e,t){return t(e)}function kN(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}const NN=new fe(""),jo=new fe(""),nC=new fe("");function FN(){let e=null;return(t,n)=>{null===e&&(e=(Le(NN,{optional:!0})??[]).reduceRight(kN,tC));const r=Le(Al),i=r.add();return e(t,n).pipe(JE(()=>r.remove(i)))}}let rC=(()=>{class e extends Ja{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=Le(Al)}handle(n){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(jo),...this.injector.get(nC,[])]));this.chain=i.reduceRight((o,s)=>function ON(e,t,n){return(r,i)=>n.runInContext(()=>t(r,o=>e(o,i)))}(o,s,this.injector),tC)}const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(JE(()=>this.pendingTasks.remove(r)))}}return e.\u0275fac=function(n){return new(n||e)(Me(za),Me(br))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();const UN=/^\)\]\}',?\n/;let oC=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new oe(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?ki(r.\u0275loadImpl()):Vr(null)).pipe(Hr(()=>new Y(o=>{const s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((J,X)=>s.setRequestHeader(J,X.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const J=n.detectContentTypeHeader();null!==J&&s.setRequestHeader("Content-Type",J)}if(n.responseType){const J=n.responseType.toLowerCase();s.responseType="json"!==J?J:"text"}const a=n.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const J=s.statusText||"OK",X=new Mn(s.getAllResponseHeaders()),re=function BN(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(s)||n.url;return u=new Tf({headers:X,status:s.status,statusText:J,url:re}),u},h=()=>{let{headers:J,status:X,statusText:re,url:Z}=l(),se=null;204!==X&&(se=typeof s.response>"u"?s.responseText:s.response),0===X&&(X=se?200:0);let ge=X>=200&&X<300;if("json"===n.responseType&&"string"==typeof se){const Ee=se;se=se.replace(UN,"");try{se=""!==se?JSON.parse(se):null}catch(gt){se=Ee,ge&&(ge=!1,se={error:gt,text:se})}}ge?(o.next(new Ri({body:se,headers:J,status:X,statusText:re,url:Z||void 0})),o.complete()):o.error(new YE({error:se,headers:J,status:X,statusText:re,url:Z||void 0}))},C=J=>{const{url:X}=l(),re=new YE({error:J,status:s.status||0,statusText:s.statusText||"Unknown Error",url:X||void 0});o.error(re)};let R=!1;const H=J=>{R||(o.next(l()),R=!0);let X={type:ut.DownloadProgress,loaded:J.loaded};J.lengthComputable&&(X.total=J.total),"text"===n.responseType&&s.responseText&&(X.partialText=s.responseText),o.next(X)},K=J=>{let X={type:ut.UploadProgress,loaded:J.loaded};J.lengthComputable&&(X.total=J.total),o.next(X)};return s.addEventListener("load",h),s.addEventListener("error",C),s.addEventListener("timeout",C),s.addEventListener("abort",C),n.reportProgress&&(s.addEventListener("progress",H),null!==a&&s.upload&&s.upload.addEventListener("progress",K)),s.send(a),o.next({type:ut.Sent}),()=>{s.removeEventListener("error",C),s.removeEventListener("abort",C),s.removeEventListener("load",h),s.removeEventListener("timeout",C),n.reportProgress&&(s.removeEventListener("progress",H),null!==a&&s.upload&&s.upload.removeEventListener("progress",K)),s.readyState!==s.DONE&&s.abort()}})))}}return e.\u0275fac=function(n){return new(n||e)(Me(J_))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();const Mf=new fe("XSRF_ENABLED"),sC=new fe("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),aC=new fe("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class uC{}let GN=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=F_(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(Me(or),Me(Ln),Me(sC))},e.\u0275prov=Ne({token:e,factory:e.\u0275fac}),e})();function $N(e,t){const n=e.url.toLowerCase();if(!Le(Mf)||"GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t(e);const r=Le(uC).getToken(),i=Le(aC);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var qe=(()=>((qe=qe||{})[qe.Interceptors=0]="Interceptors",qe[qe.LegacyInterceptors=1]="LegacyInterceptors",qe[qe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",qe[qe.NoXsrfProtection=3]="NoXsrfProtection",qe[qe.JsonpSupport=4]="JsonpSupport",qe[qe.RequestsMadeViaParent=5]="RequestsMadeViaParent",qe[qe.Fetch=6]="Fetch",qe))();function Fr(e,t){return{\u0275kind:e,\u0275providers:t}}function KN(...e){const t=[xN,oC,rC,{provide:Ja,useExisting:rC},{provide:za,useExisting:oC},{provide:jo,useValue:$N,multi:!0},{provide:Mf,useValue:!0},{provide:uC,useClass:GN}];for(const n of e)t.push(...n.\u0275providers);return Rs(t)}const cC=new fe("LEGACY_INTERCEPTOR_FN");let zN=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=gn({type:e}),e.\u0275inj=nn({providers:[KN(Fr(qe.LegacyInterceptors,[{provide:cC,useFactory:FN},{provide:jo,useExisting:cC,multi:!0}]))]}),e})(),eF=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=gn({type:e,bootstrap:[KO]}),e.\u0275inj=nn({imports:[UR,eO,zN,CN.register("./app-pwa/ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]}),e})();VR().bootstrapModule(eF).catch(e=>console.error(e))},128:(de,T,S)=>{"use strict";T.AS=void 0,S(487);var L=S(915);T.AS=L.default,S(287);S(990),S(579)},360:function(de,T,S){"use strict";var v=this&&this.__awaiter||function(U,k,N,A){return new(N||(N=Promise))(function(E,_){function b(p){try{m(A.next(p))}catch(d){_(d)}}function y(p){try{m(A.throw(p))}catch(d){_(d)}}function m(p){p.done?E(p.value):function O(E){return E instanceof N?E:new N(function(_){_(E)})}(p.value).then(b,y)}m((A=A.apply(U,k||[])).next())})},M=this&&this.__generator||function(U,k){var A,O,E,_,N={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return _={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function b(m){return function(p){return function y(m){if(A)throw new TypeError("Generator is already executing.");for(;N;)try{if(A=1,O&&(E=2&m[0]?O.return:m[0]?O.throw||((E=O.return)&&E.call(O),0):O.next)&&!(E=E.call(O,m[1])).done)return E;switch(O=0,E&&(m=[2&m[0],E.value]),m[0]){case 0:case 1:E=m;break;case 4:return N.label++,{value:m[1],done:!1};case 5:N.label++,O=m[1],m=[0];continue;case 7:m=N.ops.pop(),N.trys.pop();continue;default:if(!(E=(E=N.trys).length>0&&E[E.length-1])&&(6===m[0]||2===m[0])){N=0;continue}if(3===m[0]&&(!E||m[1]>E[0]&&m[1]<E[3])){N.label=m[1];break}if(6===m[0]&&N.label<E[1]){N.label=E[1],E=m;break}if(E&&N.label<E[2]){N.label=E[2],N.ops.push(m);break}E[2]&&N.ops.pop(),N.trys.pop();continue}m=k.call(U,N)}catch(p){m=[6,p],O=0}finally{A=E=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,p])}}};Object.defineProperty(T,"__esModule",{value:!0}),T.AsyncQueue=void 0;var L=S(765),P=function(){function U(){this._operations=[]}return U.prototype.enqueue=function(k){var N=!!this._operations.length,A=new L.default;return this._operations.push({deferred:A,callback:k}),N||this._processQueue(),A.promise},U.prototype._processQueue=function(){return v(this,void 0,void 0,function(){var k,N,A,O,E,_,b;return M(this,function(y){switch(y.label){case 0:if(!this._operations.length)return[3,5];N=(k=this._operations[0]).deferred,A=k.callback,O=void 0,E=void 0,_=void 0,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,A()];case 2:return O=y.sent(),_=!0,[3,4];case 3:return b=y.sent(),E=b,[3,4];case 4:return this._operations.shift(),_?N.resolve(O):N.reject(E),[3,0];case 5:return[2]}})})},U}();T.AsyncQueue=P},170:function(de,T,S){"use strict";var b,v=this&&this.__extends||(b=function(y,m){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(p[c]=d[c])})(y,m)},function(y,m){function p(){this.constructor=y}b(y,m),y.prototype=null===m?Object.create(m):(p.prototype=m.prototype,new p)});Object.defineProperty(T,"__esModule",{value:!0});var M=S(16),L=S(915),P=S(287),U=S(990),k=S(178),N=S(199),A=S(292),O=S(819),E={audioinput:"Audio Input",audiooutput:"Audio Output"},_=function(b){function y(m,p,d,c){var g,f=b.call(this)||this;f.availableInputDevices=new Map,f.availableOutputDevices=new Map,f._audioConstraints=null,f._enabledSounds=((g={})[L.default.SoundName.Disconnect]=!0,g[L.default.SoundName.Incoming]=!0,g[L.default.SoundName.Outgoing]=!0,g),f._inputDevice=null,f._inputStream=null,f._isPollingInputVolume=!1,f._log=U.default.getInstance(),f._unknownDeviceIndexes={audioinput:{},audiooutput:{}},f._removeLostInput=function(V){if(!f.inputDevice||f.inputDevice.deviceId!==V.deviceId)return!1;f._replaceStream(null),f._inputDevice=null,f._maybeStopPollingVolume();var q=f.availableInputDevices.get("default")||Array.from(f.availableInputDevices.values())[0];return q&&f.setInputDevice(q.deviceId),!0},f._removeLostOutput=function(V){var q=f.speakerDevices.delete(V),z=f.ringtoneDevices.delete(V);return q||z},f._updateAvailableDevices=function(){return f._mediaDevices&&f._enumerateDevices?f._enumerateDevices().then(function(V){f._updateDevices(V.filter(function(z){return"audiooutput"===z.kind}),f.availableOutputDevices,f._removeLostOutput),f._updateDevices(V.filter(function(z){return"audioinput"===z.kind}),f.availableInputDevices,f._removeLostInput);var q=f.availableOutputDevices.get("default")||Array.from(f.availableOutputDevices.values())[0];[f.speakerDevices,f.ringtoneDevices].forEach(function(z){!z.get().size&&f.availableOutputDevices.size&&f.isOutputSelectionSupported&&z.set(q.deviceId).catch(function(ne){f._log.warn("Unable to set audio output devices. "+ne)})})}):Promise.reject("Enumeration not supported")},c=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},c),f._getUserMedia=d,f._mediaDevices=c.mediaDevices||A.default(),f._onActiveInputChanged=p,f._enumerateDevices="function"==typeof c.enumerateDevices?c.enumerateDevices:f._mediaDevices&&f._mediaDevices.enumerateDevices;var I=!(!c.AudioContext&&!c.audioContext),D=!!f._enumerateDevices;return f.isOutputSelectionSupported=D&&"function"==typeof c.setSinkId,f.isVolumeSupported=I,f.isVolumeSupported&&(f._audioContext=c.audioContext||c.AudioContext&&new c.AudioContext,f._audioContext&&(f._inputVolumeAnalyser=f._audioContext.createAnalyser(),f._inputVolumeAnalyser.fftSize=32,f._inputVolumeAnalyser.smoothingTimeConstant=.3)),f.ringtoneDevices=new k.default("ringtone",f.availableOutputDevices,m,f.isOutputSelectionSupported),f.speakerDevices=new k.default("speaker",f.availableOutputDevices,m,f.isOutputSelectionSupported),f.addListener("newListener",function(V){"inputVolume"===V&&f._maybeStartPollingVolume()}),f.addListener("removeListener",function(V){"inputVolume"===V&&f._maybeStopPollingVolume()}),f.once("newListener",function(){f.isOutputSelectionSupported||f._log.warn("Warning: This browser does not support audio output selection."),f.isVolumeSupported||f._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),D&&f._initializeEnumeration(),f}return v(y,b),Object.defineProperty(y.prototype,"audioConstraints",{get:function(){return this._audioConstraints},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"inputDevice",{get:function(){return this._inputDevice},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"inputStream",{get:function(){return this._inputStream},enumerable:!1,configurable:!0}),y.prototype._maybeStartPollingVolume=function(){var m=this;if(this.isVolumeSupported&&this._inputStream&&(this._updateVolumeSource(),!this._isPollingInputVolume&&this._inputVolumeAnalyser)){var d=new Uint8Array(this._inputVolumeAnalyser.frequencyBinCount);this._isPollingInputVolume=!0;var c=function(){if(m._isPollingInputVolume){if(m._inputVolumeAnalyser){m._inputVolumeAnalyser.getByteFrequencyData(d);var g=O.average(d);m.emit("inputVolume",g/255)}requestAnimationFrame(c)}};requestAnimationFrame(c)}},y.prototype._maybeStopPollingVolume=function(){this.isVolumeSupported&&(!this._isPollingInputVolume||this._inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))},y.prototype._unbind=function(){if(!this._mediaDevices||!this._enumerateDevices)throw new P.NotSupportedError("Enumeration is not supported");this._mediaDevices.removeEventListener&&(this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices),this._mediaDevices.removeEventListener("deviceinfochange",this._updateAvailableDevices))},y.prototype.disconnect=function(m){return this._maybeEnableSound(L.default.SoundName.Disconnect,m)},y.prototype.incoming=function(m){return this._maybeEnableSound(L.default.SoundName.Incoming,m)},y.prototype.outgoing=function(m){return this._maybeEnableSound(L.default.SoundName.Outgoing,m)},y.prototype.setAudioConstraints=function(m){return this._audioConstraints=Object.assign({},m),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()},y.prototype.setInputDevice=function(m){return O.isFirefox()?Promise.reject(new P.NotSupportedError("Firefox does not currently support opening multiple audio input tracks simultaneously, even across different tabs. As a result, Device.audio.setInputDevice is disabled on Firefox until support is added.\nRelated BugZilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324")):this._setInputDevice(m,!1)},y.prototype.unsetAudioConstraints=function(){return this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()},y.prototype.unsetInputDevice=function(){var m=this;return this.inputDevice?this._onActiveInputChanged(null).then(function(){m._replaceStream(null),m._inputDevice=null,m._maybeStopPollingVolume()}):Promise.resolve()},y.prototype._getUnknownDeviceIndex=function(m){var p=m.deviceId,d=m.kind,c=this._unknownDeviceIndexes[d][p];return c||(c=Object.keys(this._unknownDeviceIndexes[d]).length+1,this._unknownDeviceIndexes[d][p]=c),c},y.prototype._initializeEnumeration=function(){var m=this;if(!this._mediaDevices||!this._enumerateDevices)throw new P.NotSupportedError("Enumeration is not supported");this._mediaDevices.addEventListener&&(this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._mediaDevices.addEventListener("deviceinfochange",this._updateAvailableDevices)),this._updateAvailableDevices().then(function(){m.isOutputSelectionSupported&&Promise.all([m.speakerDevices.set("default"),m.ringtoneDevices.set("default")]).catch(function(p){m._log.warn("Warning: Unable to set audio output devices. "+p)})})},y.prototype._maybeEnableSound=function(m,p){return typeof p<"u"&&(this._enabledSounds[m]=p),this._enabledSounds[m]},y.prototype._replaceStream=function(m){this._inputStream&&this._inputStream.getTracks().forEach(function(p){p.stop()}),this._inputStream=m},y.prototype._setInputDevice=function(m,p){var d=this;if("string"!=typeof m)return Promise.reject(new P.InvalidArgumentError("Must specify the device to set"));var c=this.availableInputDevices.get(m);if(!c)return Promise.reject(new P.InvalidArgumentError("Device not found: "+m));if(this._inputDevice&&this._inputDevice.deviceId===m&&this._inputStream){if(!p)return Promise.resolve();this._inputStream.getTracks().forEach(function(f){f.stop()})}var g={audio:Object.assign({deviceId:{exact:m}},this.audioConstraints)};return this._getUserMedia(g).then(function(f){return d._onActiveInputChanged(f).then(function(){d._replaceStream(f),d._inputDevice=c,d._maybeStartPollingVolume()})})},y.prototype._updateDevices=function(m,p,d){var c=this,g=m.map(function(V){return V.deviceId}),f=Array.from(p.values()).map(function(V){return V.deviceId}),I=[],D=O.difference(f,g);D.forEach(function(V){var q=p.get(V);q&&(p.delete(V),d(q)&&I.push(q))});var x=!1;m.forEach(function(V){var q=p.get(V.deviceId),z=c._wrapMediaDeviceInfo(V);(!q||q.label!==z.label)&&(p.set(V.deviceId,z),x=!0)}),(x||D.length)&&(null!==this.inputDevice&&"default"===this.inputDevice.deviceId&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),this._setInputDevice(this.inputDevice.deviceId,!0)),this.emit("deviceChange",I))},y.prototype._updateVolumeSource=function(){if(this._inputStream&&this._audioContext&&this._inputVolumeAnalyser){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this._inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(m){this._log.warn("Unable to update volume source",m),delete this._inputVolumeSource}}},y.prototype._wrapMediaDeviceInfo=function(m){var p={deviceId:m.deviceId,groupId:m.groupId,kind:m.kind,label:m.label};if(!p.label)if("default"===p.deviceId)p.label="Default";else{var d=this._getUnknownDeviceIndex(m);p.label="Unknown "+E[p.kind]+" Device "+d}return new N.default(p)},y}(M.EventEmitter);_||(_={}),T.default=_},358:function(de,T,S){"use strict";var A,v=this&&this.__extends||(A=function(O,E){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(_[y]=b[y])})(O,E)},function(O,E){function _(){this.constructor=O}A(O,E),O.prototype=null===E?Object.create(E):(_.prototype=E.prototype,new _)}),M=this&&this.__awaiter||function(A,O,E,_){return new(E||(E=Promise))(function(y,m){function p(g){try{c(_.next(g))}catch(f){m(f)}}function d(g){try{c(_.throw(g))}catch(f){m(f)}}function c(g){g.done?y(g.value):function b(y){return y instanceof E?y:new E(function(m){m(y)})}(g.value).then(p,d)}c((_=_.apply(A,O||[])).next())})},L=this&&this.__generator||function(A,O){var _,b,y,m,E={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return m={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function p(c){return function(g){return function d(c){if(_)throw new TypeError("Generator is already executing.");for(;E;)try{if(_=1,b&&(y=2&c[0]?b.return:c[0]?b.throw||((y=b.return)&&y.call(b),0):b.next)&&!(y=y.call(b,c[1])).done)return y;switch(b=0,y&&(c=[2&c[0],y.value]),c[0]){case 0:case 1:y=c;break;case 4:return E.label++,{value:c[1],done:!1};case 5:E.label++,b=c[1],c=[0];continue;case 7:c=E.ops.pop(),E.trys.pop();continue;default:if(!(y=(y=E.trys).length>0&&y[y.length-1])&&(6===c[0]||2===c[0])){E=0;continue}if(3===c[0]&&(!y||c[1]>y[0]&&c[1]<y[3])){E.label=c[1];break}if(6===c[0]&&E.label<y[1]){E.label=y[1],y=c;break}if(y&&E.label<y[2]){E.label=y[2],E.ops.push(c);break}y[2]&&E.ops.pop(),E.trys.pop();continue}c=O.call(A,E)}catch(g){c=[6,g],b=0}finally{_=y=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,g])}}};Object.defineProperty(T,"__esModule",{value:!0});var P=S(148),k=function(A){function O(E,_,b){void 0===_&&(_={}),void 0===b&&(b={});var y=A.call(this)||this;return y._audioNode=null,y._loop=!1,y._pendingPlayDeferreds=[],y._sinkId="default",y._src="","string"!=typeof _&&(b=_),y._audioContext=E,y._audioElement=new(b.AudioFactory||Audio),y._bufferPromise=y._createPlayDeferred().promise,y._destination=y._audioContext.destination,y._gainNode=y._audioContext.createGain(),y._gainNode.connect(y._destination),y._XMLHttpRequest=b.XMLHttpRequestFactory||XMLHttpRequest,y.addEventListener("canplaythrough",function(){y._resolvePlayDeferreds()}),"string"==typeof _&&(y.src=_),y}return v(O,A),Object.defineProperty(O.prototype,"destination",{get:function(){return this._destination},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"loop",{get:function(){return this._loop},set:function(E){var _=this;!E&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",function b(){_._audioNode.removeEventListener("ended",b),_.pause()}),this._loop=E},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"muted",{get:function(){return 0===this._gainNode.gain.value},set:function(E){this._gainNode.gain.value=E?0:1},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"paused",{get:function(){return null===this._audioNode},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"src",{get:function(){return this._src},set:function(E){this._load(E)},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"srcObject",{get:function(){return this._audioElement.srcObject},set:function(E){this._audioElement.srcObject=E},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"sinkId",{get:function(){return this._sinkId},enumerable:!1,configurable:!0}),O.prototype.load=function(){this._load(this._src)},O.prototype.pause=function(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))},O.prototype.play=function(){return M(this,void 0,void 0,function(){var E,_=this;return L(this,function(b){switch(b.label){case 0:return this.paused?[3,2]:[4,this._bufferPromise];case 1:if(b.sent(),!this.paused)return[2];throw new Error("The play() request was interrupted by a call to pause().");case 2:return this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",function(){_._audioNode&&_._audioNode.loop||_.dispatchEvent("ended")}),[4,this._bufferPromise];case 3:if(E=b.sent(),this.paused)throw new Error("The play() request was interrupted by a call to pause().");return this._audioNode.buffer=E,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject?[2,this._audioElement.play()]:[2]}})})},O.prototype.setSinkId=function(E){return M(this,void 0,void 0,function(){return L(this,function(_){switch(_.label){case 0:if("function"!=typeof this._audioElement.setSinkId)throw new Error("This browser does not support setSinkId.");return E===this.sinkId?[2]:"default"===E?(this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=E,[2]):[4,this._audioElement.setSinkId(E)];case 1:return _.sent(),this._audioElement.srcObject||(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=E,this._gainNode.connect(this._destination)),[2]}})})},O.prototype._createPlayDeferred=function(){var E=new P.default;return this._pendingPlayDeferreds.push(E),E},O.prototype._load=function(E){var _=this;this._src&&this._src!==E&&this.pause(),this._src=E,this._bufferPromise=new Promise(function(b,y){return M(_,void 0,void 0,function(){var m;return L(this,function(p){switch(p.label){case 0:return E?[4,N(this._audioContext,this._XMLHttpRequest,E)]:[2,this._createPlayDeferred().promise];case 1:return m=p.sent(),this.dispatchEvent("canplaythrough"),b(m),[2]}})})})},O.prototype._rejectPlayDeferreds=function(E){var _=this._pendingPlayDeferreds;_.splice(0,_.length).forEach(function(b){return(0,b.reject)(E)})},O.prototype._resolvePlayDeferreds=function(E){var _=this._pendingPlayDeferreds;_.splice(0,_.length).forEach(function(b){return(0,b.resolve)(E)})},O}(S(94).default);function N(A,O,E){return M(this,void 0,void 0,function(){var _,b;return L(this,function(y){switch(y.label){case 0:return(_=new O).open("GET",E,!0),_.responseType="arraybuffer",[4,new Promise(function(m){_.addEventListener("load",m),_.send()})];case 1:b=y.sent();try{return[2,A.decodeAudioData(b.target.response)]}catch{return[2,new Promise(function(p){A.decodeAudioData(b.target.response,p)})]}return[2]}})})}T.default=k},148:(de,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var S=function(){function v(){var M=this;this.promise=new Promise(function(L,P){M._resolve=L,M._reject=P})}return Object.defineProperty(v.prototype,"reject",{get:function(){return this._reject},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"resolve",{get:function(){return this._resolve},enumerable:!1,configurable:!0}),v}();T.default=S},94:function(de,T,S){"use strict";var v=this&&this.__spreadArrays||function(){for(var P=0,U=0,k=arguments.length;U<k;U++)P+=arguments[U].length;var N=Array(P),A=0;for(U=0;U<k;U++)for(var O=arguments[U],E=0,_=O.length;E<_;E++,A++)N[A]=O[E];return N};Object.defineProperty(T,"__esModule",{value:!0});var M=S(16),L=function(){function P(){this._eventEmitter=new M.EventEmitter}return P.prototype.addEventListener=function(U,k){return this._eventEmitter.addListener(U,k)},P.prototype.dispatchEvent=function(U){for(var k,N=[],A=1;A<arguments.length;A++)N[A-1]=arguments[A];return(k=this._eventEmitter).emit.apply(k,v([U],N))},P.prototype.removeEventListener=function(U,k){return this._eventEmitter.removeListener(U,k)},P}();T.default=L},39:function(de,T,S){"use strict";var P,v=this&&this.__extends||(P=function(U,k){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,A){N.__proto__=A}||function(N,A){for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(N[O]=A[O])})(U,k)},function(U,k){function N(){this.constructor=U}P(U,k),U.prototype=null===k?Object.create(k):(N.prototype=k.prototype,new N)});Object.defineProperty(T,"__esModule",{value:!0});var L=function(P){function U(k){var N=P.call(this)||this;return Object.defineProperties(N,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var A=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var O=Math.random(),E=Math.floor(O*this._jitter*A);A=1&Math.floor(10*O)?A+E:A-E}return 0|Math.min(A,this._max)}},_factor:{value:k.factor||2},_jitter:{value:k.jitter>0&&k.jitter<=1?k.jitter:0},_max:{value:k.max||1e4},_min:{value:k.min||100},_timeoutID:{value:null,writable:!0}}),N}return v(U,P),U.prototype.backoff=function(){var k=this,N=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,N),this._timeoutID=setTimeout(function(){k.emit("ready",k._attempts,N),k._attempts++},N)},U.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},U}(S(16).EventEmitter);T.default=L},487:function(de,T,S){"use strict";var Q,v=this&&this.__extends||(Q=function(F,B){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,w){G.__proto__=w}||function(G,w){for(var j in w)Object.prototype.hasOwnProperty.call(w,j)&&(G[j]=w[j])})(F,B)},function(F,B){function G(){this.constructor=F}Q(F,B),F.prototype=null===B?Object.create(B):(G.prototype=B.prototype,new G)}),M=this&&this.__assign||function(){return M=Object.assign||function(Q){for(var F,B=1,G=arguments.length;B<G;B++)for(var w in F=arguments[B])Object.prototype.hasOwnProperty.call(F,w)&&(Q[w]=F[w]);return Q},M.apply(this,arguments)};Object.defineProperty(T,"__esModule",{value:!0});var L=S(16),P=S(39),U=S(915),k=S(287),N=S(990),A=S(813),O=S(168),E=S(563),_=S(753),b=S(819),y=S(941),m=S(186).RELEASE_VERSION,p={factor:1.1,jitter:.5,max:3e4,min:1},D={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new k.MediaErrors.ConnectionError}},x={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},V={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},q={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"},z=function(Q){function F(B,G){var w=Q.call(this)||this;w.parameters={},w._inputVolumeStreak=0,w._isAnswered=!1,w._isCancelled=!1,w._isRejected=!1,w._latestInputVolume=0,w._latestOutputVolume=0,w._log=N.default.getInstance(),w._mediaStatus=F.State.Pending,w._messages=new Map,w._metricsSamples=[],w._options={MediaHandler:A.PeerConnection,offerSdp:null,shouldPlayDisconnect:function(){return!0},voiceEventSidGenerator:y.generateVoiceEventSid},w._outputVolumeStreak=0,w._shouldSendHangup=!0,w._signalingStatus=F.State.Pending,w._soundcache=new Map,w._status=F.State.Pending,w._wasConnected=!1,w.toString=function(){return"[Twilio.Call instance]"},w._emitWarning=function(W,$,ee,ae,be,me){var pe=W+"warning"+(be?"-cleared":"-raised");if("constant-audio-input-level"!==$||!w.isMuted()){var ke=be?"info":"warning";"constant-audio-output-level"===$&&(ke="info");var ct={threshold:ee};ae&&(ae instanceof Array?ct.values=ae.map(function(jt){return"number"==typeof jt?Math.round(100*jt)/100:ae}):ct.value=ae),w._publisher.post(ke,pe,$,{data:ct},w),"constant-audio-output-level"!==$&&w.emit(be?"warning-cleared":"warning",$,me&&!be?me:null)}},w._onAck=function(W){var ee=W.callsid;w.parameters.CallSid===ee?"message"===W.acktype&&w._onMessageSent(W.voiceeventsid):w._log.warn("Received ack from a different callsid: "+ee)},w._onAnswer=function(W){"string"==typeof W.reconnect&&(w._signalingReconnectToken=W.reconnect),(!w._isAnswered||w._status===F.State.Reconnecting)&&(w._setCallSid(W),w._isAnswered=!0,w._maybeTransitionToOpen())},w._onCancel=function(W){w.parameters.CallSid===W.callsid&&(w._isCancelled=!0,w._publisher.info("connection","cancel",null,w),w._cleanupEventListeners(),w._mediaHandler.close(),w._status=F.State.Closed,w.emit("cancel"),w._pstream.removeListener("cancel",w._onCancel))},w._onConnected=function(){w._log.info("Received connected from pstream"),w._signalingReconnectToken&&w._pstream.reconnect(w._mediaHandler.version.getSDP(),w.parameters.CallSid,w._signalingReconnectToken)},w._onHangup=function(W){if(w.status()!==F.State.Closed){if(W.callsid&&(w.parameters.CallSid||w.outboundConnectionId)){if(W.callsid!==w.parameters.CallSid&&W.callsid!==w.outboundConnectionId)return}else if(W.callsid)return;if(w._log.info("Received HANGUP from gateway"),W.error){var $=new k.GeneralErrors.ConnectionError("Error sent from gateway in HANGUP");w._log.error("Received an error from the gateway:",$),w.emit("error",$)}w._shouldSendHangup=!1,w._publisher.info("connection","disconnected-by-remote",null,w),w._disconnect(null,!0),w._cleanupEventListeners()}},w._onMediaFailure=function(W){var $=F.MediaFailure,ee=$.ConnectionDisconnected,ae=$.ConnectionFailed,me=$.LowBytes,Ce=W===ae||W===$.IceGatheringFailed;if(!b.isChrome(window,window.navigator)&&W===ae)return w._mediaHandler.onerror(D);if(w._mediaStatus!==F.State.Reconnecting){var pe=w._mediaHandler.version.pc,ke=pe&&"disconnected"===pe.iceConnectionState,ct=w._monitor.hasActiveWarning("bytesSent","min")||w._monitor.hasActiveWarning("bytesReceived","min");if(W===me&&ke||W===ee&&ct||Ce){var Ke=new k.MediaErrors.ConnectionError("Media connection failed.");w._log.warn("ICE Connection disconnected."),w._publisher.warn("connection","error",Ke,w),w._publisher.info("connection","reconnecting",null,w),w._mediaReconnectStartTime=Date.now(),w._status=F.State.Reconnecting,w._mediaStatus=F.State.Reconnecting,w._mediaReconnectBackoff.reset(),w._mediaReconnectBackoff.backoff(),w.emit("reconnecting",Ke)}}else if(Ce){if(Date.now()-w._mediaReconnectStartTime>p.max)return w._log.info("Exceeded max ICE retries"),w._mediaHandler.onerror(D);try{w._mediaReconnectBackoff.backoff()}catch(jt){if(!jt.message||"Backoff in progress."!==jt.message)throw jt}}},w._onMediaReconnected=function(){w._mediaStatus===F.State.Reconnecting&&(w._log.info("ICE Connection reestablished."),w._mediaStatus=F.State.Open,w._signalingStatus===F.State.Open&&(w._publisher.info("connection","reconnected",null,w),w.emit("reconnected"),w._status=F.State.Open))},w._onMessageReceived=function(W){var $=W.callsid;w.parameters.CallSid===$?w.emit("messageReceived",{content:W.content,contentType:W.contenttype,messageType:W.messagetype,voiceEventSid:W.voiceeventsid}):w._log.warn("Received a message from a different callsid: "+$)},w._onMessageSent=function(W){if(w._messages.has(W)){var $=w._messages.get(W);w._messages.delete(W),w.emit("messageSent",$)}else w._log.warn("Received a messageSent with a voiceEventSid that doesn't exists: "+W)},w._onRinging=function(W){if(w._setCallSid(W),w._status===F.State.Connecting||w._status===F.State.Ringing){var $=!!W.sdp;w._status=F.State.Ringing,w._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:$},w),w.emit("ringing",$)}},w._onRTCSample=function(W){var $=M(M({},W),{inputVolume:w._latestInputVolume,outputVolume:w._latestOutputVolume});w._codec=$.codecName,w._metricsSamples.push($),w._metricsSamples.length>=10&&w._publishMetrics(),w.emit("sample",W)},w._onSignalingError=function(W){var $=W.callsid,ee=W.voiceeventsid;w.parameters.CallSid===$?ee&&w._messages.has(ee)&&(w._messages.delete(ee),w._log.warn("Received an error while sending a message.",W)):w._log.warn("Received an error from a different callsid: "+$)},w._onSignalingReconnected=function(){w._signalingStatus===F.State.Reconnecting&&(w._log.info("Signaling Connection reestablished."),w._signalingStatus=F.State.Open,w._mediaStatus===F.State.Open&&(w._publisher.info("connection","reconnected",null,w),w.emit("reconnected"),w._status=F.State.Open))},w._onTransportClose=function(){w._log.error("Received transportClose from pstream"),w.emit("transportClose"),w._signalingReconnectToken?(w._status=F.State.Reconnecting,w._signalingStatus=F.State.Reconnecting,w.emit("reconnecting",new k.SignalingErrors.ConnectionDisconnected)):(w._status=F.State.Closed,w._signalingStatus=F.State.Closed)},w._reemitWarning=function(W,$){var be,ee=/^audio/.test(W.name)?"audio-level-":"network-quality-";W.name in x?be=x[W.name][W.threshold.name]:W.name in V&&(be=V[W.name]),w._emitWarning(ee,q[W.threshold.name]+be,W.threshold.value,W.values||W.value,$,W)},w._reemitWarningCleared=function(W){w._reemitWarning(W,!0)},w._isUnifiedPlanDefault=B.isUnifiedPlanDefault,w._soundcache=B.soundcache,"function"==typeof B.onIgnore&&(w._onIgnore=B.onIgnore),w.customParameters=new Map(Object.entries(G&&G.twimlParams||{}).map(function(W){return[W[0],String(W[1])]})),Object.assign(w._options,G),w._options.callParameters&&(w.parameters=w._options.callParameters),w._options.reconnectToken&&(w._signalingReconnectToken=w._options.reconnectToken),w._voiceEventSidGenerator=w._options.voiceEventSidGenerator||y.generateVoiceEventSid,w._direction=w.parameters.CallSid?F.CallDirection.Incoming:F.CallDirection.Outgoing,w.callerInfo=w._direction===F.CallDirection.Incoming&&w.parameters&&w.parameters.StirStatus?{isVerified:"TN-Validation-Passed-A"===w.parameters.StirStatus}:null,w._mediaReconnectBackoff=new P.default(p),w._mediaReconnectBackoff.on("ready",function(){return w._mediaHandler.iceRestart()}),w.outboundConnectionId=function ne(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Q){var F=16*Math.random()|0;return("x"===Q?F:3&F|8).toString(16)})}();var Y=w._publisher=B.publisher;w._direction===F.CallDirection.Incoming?Y.info("connection","incoming",null,w):Y.info("connection","outgoing",{preflight:w._options.preflight},w);var le=w._monitor=new(w._options.StatsMonitor||_.default);return le.on("sample",w._onRTCSample),le.disableWarnings(),setTimeout(function(){return le.enableWarnings()},5e3),le.on("warning",function(W,$){("bytesSent"===W.name||"bytesReceived"===W.name)&&w._onMediaFailure(F.MediaFailure.LowBytes),w._reemitWarning(W,$)}),le.on("warning-cleared",function(W){w._reemitWarningCleared(W)}),w._mediaHandler=new w._options.MediaHandler(B.audioHelper,B.pstream,B.getUserMedia,{RTCPeerConnection:w._options.RTCPeerConnection,codecPreferences:w._options.codecPreferences,dscp:w._options.dscp,forceAggressiveIceNomination:w._options.forceAggressiveIceNomination,isUnifiedPlan:w._isUnifiedPlanDefault,maxAverageBitrate:w._options.maxAverageBitrate,preflight:w._options.preflight}),w.on("volume",function(W,$){w._inputVolumeStreak=w._checkVolume(W,w._inputVolumeStreak,w._latestInputVolume,"input"),w._outputVolumeStreak=w._checkVolume($,w._outputVolumeStreak,w._latestOutputVolume,"output"),w._latestInputVolume=W,w._latestOutputVolume=$}),w._mediaHandler.onaudio=function(W){w._log.info("Remote audio created"),w.emit("audio",W)},w._mediaHandler.onvolume=function(W,$,ee,ae){le.addVolumes(ee/255*32767,ae/255*32767),w.emit("volume",W,$)},w._mediaHandler.ondtlstransportstatechange=function(W){w._publisher.post("failed"===W?"error":"debug","dtls-transport-state",W,null,w)},w._mediaHandler.onpcconnectionstatechange=function(W){var $="debug",ee=w._mediaHandler.getRTCDtlsTransport();"failed"===W&&($=ee&&"failed"===ee.state?"error":"warning"),w._publisher.post($,"pc-connection-state",W,null,w)},w._mediaHandler.onicecandidate=function(W){var $=new O.IceCandidate(W).toPayload();w._publisher.debug("ice-candidate","ice-candidate",$,w)},w._mediaHandler.onselectedcandidatepairchange=function(W){var $=new O.IceCandidate(W.local).toPayload(),ee=new O.IceCandidate(W.remote,!0).toPayload();w._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:$,remote_candidate:ee},w)},w._mediaHandler.oniceconnectionstatechange=function(W){w._publisher.post("failed"===W?"error":"debug","ice-connection-state",W,null,w)},w._mediaHandler.onicegatheringfailure=function(W){w._publisher.warn("ice-gathering-state",W,null,w),w._onMediaFailure(F.MediaFailure.IceGatheringFailed)},w._mediaHandler.onicegatheringstatechange=function(W){w._publisher.debug("ice-gathering-state",W,null,w)},w._mediaHandler.onsignalingstatechange=function(W){w._publisher.debug("signaling-state",W,null,w)},w._mediaHandler.ondisconnected=function(W){w._log.info(W),w._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:W},w),w.emit("warning","ice-connectivity-lost"),w._onMediaFailure(F.MediaFailure.ConnectionDisconnected)},w._mediaHandler.onfailed=function(W){w._onMediaFailure(F.MediaFailure.ConnectionFailed)},w._mediaHandler.onconnected=function(){w._status===F.State.Reconnecting&&w._onMediaReconnected()},w._mediaHandler.onreconnected=function(W){w._log.info(W),w._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:W},w),w.emit("warning-cleared","ice-connectivity-lost"),w._onMediaReconnected()},w._mediaHandler.onerror=function(W){!0===W.disconnect&&w._disconnect(W.info&&W.info.message);var $=W.info.twilioError||new k.GeneralErrors.UnknownError(W.info.message);w._log.error("Received an error from MediaStream:",W),w.emit("error",$)},w._mediaHandler.onopen=function(){w._status===F.State.Open||w._status===F.State.Reconnecting||(w._status===F.State.Ringing||w._status===F.State.Connecting?(w.mute(!1),w._mediaStatus=F.State.Open,w._maybeTransitionToOpen()):w._mediaHandler.close())},w._mediaHandler.onclose=function(){w._status=F.State.Closed,w._options.shouldPlayDisconnect&&w._options.shouldPlayDisconnect()&&!w._isCancelled&&!w._isRejected&&w._soundcache.get(U.default.SoundName.Disconnect).play(),le.disable(),w._publishMetrics(),!w._isCancelled&&!w._isRejected&&w.emit("disconnect",w)},w._pstream=B.pstream,w._pstream.on("ack",w._onAck),w._pstream.on("cancel",w._onCancel),w._pstream.on("error",w._onSignalingError),w._pstream.on("ringing",w._onRinging),w._pstream.on("transportClose",w._onTransportClose),w._pstream.on("connected",w._onConnected),w._pstream.on("message",w._onMessageReceived),w.on("error",function(W){w._publisher.error("connection","error",{code:W.code,message:W.message},w),w._pstream&&"disconnected"===w._pstream.status&&w._cleanupEventListeners()}),w.on("disconnect",function(){w._cleanupEventListeners()}),w}return v(F,Q),Object.defineProperty(F.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"codec",{get:function(){return this._codec},enumerable:!1,configurable:!0}),F.prototype._setInputTracksFromStream=function(B){return this._mediaHandler.setInputTracksFromStream(B)},F.prototype._setSinkIds=function(B){return this._mediaHandler._setSinkIds(B)},F.prototype.accept=function(B){var G=this;if(this._status===F.State.Pending){var w=(B=B||{}).rtcConfiguration||this._options.rtcConfiguration,j=B.rtcConstraints||this._options.rtcConstraints||{},Y=j.audio||{audio:!0};this._status=F.State.Connecting,this._options.beforeAccept&&this._options.beforeAccept(this);var W="function"==typeof this._options.getInputStream&&this._options.getInputStream();(W?this._mediaHandler.setInputTracksFromStream(W):this._mediaHandler.openWithConstraints(Y)).then(function(){G._publisher.info("get-user-media","succeeded",{data:{audioConstraints:Y}},G),function(){if(G._status!==F.State.Connecting)return G._cleanupEventListeners(),void G._mediaHandler.close();var ee=function(me,Ce){G._publisher.info("connection",G._direction===F.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote",null,G),"string"==typeof Ce&&(G._signalingReconnectToken=Ce);var ke=E.getPreferredCodecInfo(G._mediaHandler.version.getSDP());G._publisher.info("settings","codec",{codec_params:ke.codecParams,selected_codec:ke.codecName},G),G._monitor.enable(me)},ae="function"==typeof G._options.getSinkIds&&G._options.getSinkIds();if(Array.isArray(ae)&&G._mediaHandler._setSinkIds(ae).catch(function(){}),G._pstream.addListener("hangup",G._onHangup),G._direction===F.CallDirection.Incoming)G._isAnswered=!0,G._pstream.on("answer",G._onAnswer),G._mediaHandler.answerIncomingCall(G.parameters.CallSid,G._options.offerSdp,j,w,ee);else{var be=Array.from(G.customParameters.entries()).map(function(me){return encodeURIComponent(me[0])+"="+encodeURIComponent(me[1])}).join("&");G._pstream.on("answer",G._onAnswer),G._mediaHandler.makeOutgoingCall(G._pstream.token,be,G.outboundConnectionId,j,w,ee)}}()},function(ee){var ae;31208===ee.code||-1!==["PermissionDeniedError","NotAllowedError"].indexOf(ee.name)?(ae=new k.UserMediaErrors.PermissionDeniedError,G._publisher.error("get-user-media","denied",{data:{audioConstraints:Y,error:ee}},G)):(ae=new k.UserMediaErrors.AcquisitionFailedError,G._publisher.error("get-user-media","failed",{data:{audioConstraints:Y,error:ee}},G)),G._disconnect(),G.emit("error",ae)})}},F.prototype.disconnect=function(){this._disconnect()},F.prototype.getLocalStream=function(){return this._mediaHandler&&this._mediaHandler.stream},F.prototype.getRemoteStream=function(){return this._mediaHandler&&this._mediaHandler._remoteStream},F.prototype.ignore=function(){this._status===F.State.Pending&&(this._status=F.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore())},F.prototype.isMuted=function(){return this._mediaHandler.isMuted},F.prototype.mute=function(B){void 0===B&&(B=!0);var G=this._mediaHandler.isMuted;this._mediaHandler.mute(B);var w=this._mediaHandler.isMuted;G!==w&&(this._publisher.info("connection",w?"muted":"unmuted",null,this),this.emit("mute",w,this))},F.prototype.postFeedback=function(B,G){if(typeof B>"u"||null===B)return this._postFeedbackDeclined();if(!Object.values(F.FeedbackScore).includes(B))throw new k.InvalidArgumentError("Feedback score must be one of: "+Object.values(F.FeedbackScore));if(typeof G<"u"&&null!==G&&!Object.values(F.FeedbackIssue).includes(G))throw new k.InvalidArgumentError("Feedback issue must be one of: "+Object.values(F.FeedbackIssue));return this._publisher.info("feedback","received",{issue_name:G,quality_score:B},this,!0)},F.prototype.reject=function(){this._status===F.State.Pending&&(this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=F.State.Closed,this.emit("reject"))},F.prototype.sendDigits=function(B){if(B.match(/[^0-9*#w]/))throw new k.InvalidArgumentError("Illegal character passed into sendDigits");var G=[];B.split("").forEach(function(le){var W="w"!==le?"dtmf"+le:"";"dtmf*"===W&&(W="dtmfs"),"dtmf#"===W&&(W="dtmfh"),G.push(W)}),function le(W,$){var ee=G.shift();ee&&($?$.play(ee):W.get(ee).play()),G.length&&setTimeout(le.bind(null,W),200)}(this._soundcache,this._options.dialtonePlayer);var w=this._mediaHandler.getOrCreateDTMFSender();if(w){if(!("canInsertDTMF"in w)||w.canInsertDTMF)return this._log.info("Sending digits using RTCDTMFSender"),void function j(le){if(le.length){var W=le.shift();W&&W.length&&w.insertDTMF(W,160,70),setTimeout(j.bind(null,le),500)}}(B.split("w"));this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),null!==this._pstream&&"disconnected"!==this._pstream.status)this._pstream.dtmf(this.parameters.CallSid,B);else{var Y=new k.GeneralErrors.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this.emit("error",Y)}},F.prototype.sendMessage=function(B){var G=B.content,w=B.contentType,j=B.messageType;if(typeof G>"u"||null===G)throw new k.InvalidArgumentError("`content` is empty");if("string"!=typeof j)throw new k.InvalidArgumentError("`messageType` must be an enumeration value of `Call.MessageType` or a string.");if(0===j.length)throw new k.InvalidArgumentError("`messageType` must be a non-empty string.");if(null===this._pstream)throw new k.InvalidStateError("Could not send CallMessage; Signaling channel is disconnected");var Y=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new k.InvalidStateError("Could not send CallMessage; Call has no CallSid");var le=this._voiceEventSidGenerator();return this._messages.set(le,{content:G,contentType:w,messageType:j,voiceEventSid:le}),this._pstream.sendMessage(Y,G,w,j,le),le},F.prototype.status=function(){return this._status},F.prototype._checkVolume=function(B,G,w,j){var Y=G>=10,le=0;return w===B&&(le=G),le>=10?this._emitWarning("audio-level-","constant-audio-"+j+"-level",10,le,!1):Y&&this._emitWarning("audio-level-","constant-audio-"+j+"-level",10,le,!0),le},F.prototype._cleanupEventListeners=function(){var B=this,G=function(){B._pstream&&(B._pstream.removeListener("ack",B._onAck),B._pstream.removeListener("answer",B._onAnswer),B._pstream.removeListener("cancel",B._onCancel),B._pstream.removeListener("error",B._onSignalingError),B._pstream.removeListener("hangup",B._onHangup),B._pstream.removeListener("ringing",B._onRinging),B._pstream.removeListener("transportClose",B._onTransportClose),B._pstream.removeListener("connected",B._onConnected),B._pstream.removeListener("message",B._onMessageReceived))};G(),setTimeout(G,0)},F.prototype._createMetricPayload=function(){var B={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:m};return this._options.gateway&&(B.gateway=this._options.gateway),B.direction=this._direction,B},F.prototype._disconnect=function(B,G){if(B="string"==typeof B?B:null,this._status===F.State.Open||this._status===F.State.Connecting||this._status===F.State.Reconnecting||this._status===F.State.Ringing){if(this._log.info("Disconnecting..."),null!==this._pstream&&"disconnected"!==this._pstream.status&&this._shouldSendHangup){var w=this.parameters.CallSid||this.outboundConnectionId;w&&this._pstream.hangup(w,B)}this._cleanupEventListeners(),this._mediaHandler.close(),G||this._publisher.info("connection","disconnected-by-local",null,this)}},F.prototype._maybeTransitionToOpen=function(){this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=F.State.Open,this._mediaHandler&&"open"===this._mediaHandler.status&&(this._status=F.State.Open,this._wasConnected||(this._wasConnected=!0,this.emit("accept",this))))},F.prototype._postFeedbackDeclined=function(){return this._publisher.info("feedback","received-none",null,this,!0)},F.prototype._publishMetrics=function(){var B=this;0!==this._metricsSamples.length&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(function(G){B._log.warn("Unable to post metrics to Insights. Received error:",G)})},F.prototype._setCallSid=function(B){var G=B.callsid;G&&(this.parameters.CallSid=G,this._mediaHandler.callSid=G)},F.toString=function(){return"[Twilio.Call class]"},F}(L.EventEmitter);!function(Q){var $;($=Q.State||(Q.State={})).Closed="closed",$.Connecting="connecting",$.Open="open",$.Pending="pending",$.Reconnecting="reconnecting",$.Ringing="ringing",function($){$.AudioLatency="audio-latency",$.ChoppyAudio="choppy-audio",$.DroppedCall="dropped-call",$.Echo="echo",$.NoisyCall="noisy-call",$.OneWayAudio="one-way-audio"}(Q.FeedbackIssue||(Q.FeedbackIssue={})),function($){$[$.One=1]="One",$[$.Two=2]="Two",$[$.Three=3]="Three",$[$.Four=4]="Four",$[$.Five=5]="Five"}(Q.FeedbackScore||(Q.FeedbackScore={})),function($){$.Incoming="INCOMING",$.Outgoing="OUTGOING"}(Q.CallDirection||(Q.CallDirection={})),function($){$.Opus="opus",$.PCMU="pcmu"}(Q.Codec||(Q.Codec={})),function($){$.None="none",$.Timeout="timeout"}(Q.IceGatheringFailureReason||(Q.IceGatheringFailureReason={})),function($){$.ConnectionDisconnected="ConnectionDisconnected",$.ConnectionFailed="ConnectionFailed",$.IceGatheringFailed="IceGatheringFailed",$.LowBytes="LowBytes"}(Q.MediaFailure||(Q.MediaFailure={})),function($){$.UserDefinedMessage="user-defined-message"}(Q.MessageType||(Q.MessageType={}))}(z||(z={})),T.default=z},186:(de,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SOUNDS_BASE_URL=T.RELEASE_VERSION=T.PACKAGE_NAME=T.ECHO_TEST_DURATION=T.COWBELL_AUDIO_URL=void 0,T.PACKAGE_NAME="@twilio/voice-sdk";var v="2.6.0";T.RELEASE_VERSION=v;var M="https://sdk.twilio.com/js/client/sounds/releases/1.0.0";T.SOUNDS_BASE_URL=M,T.COWBELL_AUDIO_URL=M+"/cowbell.mp3?cache="+v,T.ECHO_TEST_DURATION=2e4},765:(de,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var S=function(){function v(){var M=this;this._promise=new Promise(function(L,P){M._resolve=L,M._reject=P})}return Object.defineProperty(v.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),v.prototype.reject=function(M){this._reject(M)},v.prototype.resolve=function(M){this._resolve(M)},v}();T.default=S},915:function(de,T,S){"use strict";var Q,v=this&&this.__extends||(Q=function(F,B){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,w){G.__proto__=w}||function(G,w){for(var j in w)Object.prototype.hasOwnProperty.call(w,j)&&(G[j]=w[j])})(F,B)},function(F,B){function G(){this.constructor=F}Q(F,B),F.prototype=null===B?Object.create(B):(G.prototype=B.prototype,new G)}),M=this&&this.__assign||function(){return M=Object.assign||function(Q){for(var F,B=1,G=arguments.length;B<G;B++)for(var w in F=arguments[B])Object.prototype.hasOwnProperty.call(F,w)&&(Q[w]=F[w]);return Q},M.apply(this,arguments)},L=this&&this.__awaiter||function(Q,F,B,G){return new(B||(B=Promise))(function(j,Y){function le(ee){try{$(G.next(ee))}catch(ae){Y(ae)}}function W(ee){try{$(G.throw(ee))}catch(ae){Y(ae)}}function $(ee){ee.done?j(ee.value):function w(j){return j instanceof B?j:new B(function(Y){Y(j)})}(ee.value).then(le,W)}$((G=G.apply(Q,F||[])).next())})},P=this&&this.__generator||function(Q,F){var G,w,j,Y,B={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return Y={next:le(0),throw:le(1),return:le(2)},"function"==typeof Symbol&&(Y[Symbol.iterator]=function(){return this}),Y;function le($){return function(ee){return function W($){if(G)throw new TypeError("Generator is already executing.");for(;B;)try{if(G=1,w&&(j=2&$[0]?w.return:$[0]?w.throw||((j=w.return)&&j.call(w),0):w.next)&&!(j=j.call(w,$[1])).done)return j;switch(w=0,j&&($=[2&$[0],j.value]),$[0]){case 0:case 1:j=$;break;case 4:return B.label++,{value:$[1],done:!1};case 5:B.label++,w=$[1],$=[0];continue;case 7:$=B.ops.pop(),B.trys.pop();continue;default:if(!(j=(j=B.trys).length>0&&j[j.length-1])&&(6===$[0]||2===$[0])){B=0;continue}if(3===$[0]&&(!j||$[1]>j[0]&&$[1]<j[3])){B.label=$[1];break}if(6===$[0]&&B.label<j[1]){B.label=j[1],j=$;break}if(j&&B.label<j[2]){B.label=j[2],B.ops.push($);break}j[2]&&B.ops.pop(),B.trys.pop();continue}$=F.call(Q,B)}catch(ee){$=[6,ee],w=0}finally{G=j=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([$,ee])}}};Object.defineProperty(T,"__esModule",{value:!0});var U=S(16),k=S(182),N=S(170),A=S(487),O=S(186),E=S(9),_=S(287),b=S(694),y=S(990),m=S(579),p=S(696),d=S(351),c=S(813),g=S(11),f=S(68),I=S(819),D=S(941),ne=function(Q){function F(B,G){var w;void 0===G&&(G={});var j=Q.call(this)||this;if(j._activeCall=null,j._audio=null,j._callInputStream=null,j._calls=[],j._callSinkIds=["default"],j._chunderURIs=[],j._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[A.default.Codec.PCMU,A.default.Codec.Opus],dscp:!0,forceAggressiveIceNomination:!1,logLevel:k.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:D.generateVoiceEventSid},j._edge=null,j._home=null,j._identity=null,j._log=y.default.getInstance(),j._options={},j._preferredURI=null,j._publisher=null,j._region=null,j._regTimer=null,j._shouldReRegister=!1,j._soundcache=new Map,j._state=F.State.Unregistered,j._stateEventMapping=((w={})[F.State.Destroyed]=F.EventName.Destroyed,w[F.State.Unregistered]=F.EventName.Unregistered,w[F.State.Registering]=F.EventName.Registering,w[F.State.Registered]=F.EventName.Registered,w),j._stream=null,j._streamConnectedPromise=null,j._tokenWillExpireTimeout=null,j._createDefaultPayload=function($){var ee={aggressive_nomination:j._options.forceAggressiveIceNomination,browser_extension:j._isBrowserExtension,dscp:!!j._options.dscp,ice_restart_enabled:!0,platform:c.getMediaEngine(),sdk_version:O.RELEASE_VERSION};function ae(me,Ce){Ce&&(ee[me]=Ce)}if($){var be=$.parameters.CallSid;ae("call_sid",/^TJ/.test(be)?void 0:be),ae("temp_call_sid",$.outboundConnectionId),ae("audio_codec",$.codec),ee.direction=$.direction}return ae("gateway",j._stream&&j._stream.gateway),ae("region",j._stream&&j._stream.region),ee},j._onSignalingClose=function(){j._stream=null,j._streamConnectedPromise=null},j._onSignalingConnected=function($){var ee,ae=d.getRegionShortcode($.region);if(j._edge=$.edge||d.regionToEdge[ae]||$.region,j._region=ae||$.region,j._home=$.home,null===(ee=j._publisher)||void 0===ee||ee.setHost(d.createEventGatewayURI($.home)),$.token&&(j._identity=$.token.identity,"number"==typeof $.token.ttl&&"number"==typeof j._options.tokenRefreshMs)){var me=Math.max(0,1e3*$.token.ttl-j._options.tokenRefreshMs);j._tokenWillExpireTimeout=setTimeout(function(){j.emit("tokenWillExpire",j),j._tokenWillExpireTimeout&&(clearTimeout(j._tokenWillExpireTimeout),j._tokenWillExpireTimeout=null)},me)}var Ce=d.getChunderURIs(j._edge);Ce.length>0?j._preferredURI=d.createSignalingEndpointURL(Ce[0]):j._log.info("Could not parse a preferred URI from the stream#connected event."),j._shouldReRegister&&j.register()},j._onSignalingError=function($){if("object"==typeof $){var ee=$.error,ae=$.callsid;if("object"==typeof ee){var be="string"==typeof ae&&j._findCall(ae)||void 0,me=ee.code,Ce=ee.message,pe=ee.twilioError;"number"==typeof me&&(31201===me?pe=new _.AuthorizationErrors.AuthenticationFailed(ee):31204===me?pe=new _.AuthorizationErrors.AccessTokenInvalid(ee):31205===me?(j._stopRegistrationTimer(),pe=new _.AuthorizationErrors.AccessTokenExpired(ee)):_.hasErrorByCode(me)&&(pe=new(_.getErrorByCode(me))(ee))),pe||(j._log.error("Unknown signaling error: ",ee),pe=new _.GeneralErrors.UnknownError(Ce,ee)),j._log.info("Received error: ",pe),j.emit(F.EventName.Error,pe,be)}}},j._onSignalingInvite=function($){return L(j,void 0,void 0,function(){var ee,ae,be,me,Ce,ke,pe=this;return P(this,function(ct){switch(ct.label){case 0:return(ee=!!this._activeCall)&&!this._options.allowIncomingWhileBusy?(this._log.info("Device busy; ignoring incoming invite"),[2]):$.callsid&&$.sdp?((ae=$.parameters||{}).CallSid=ae.CallSid||$.callsid,be=Object.assign({},I.queryToJson(ae.Params)),[4,this._makeCall(be,{callParameters:ae,offerSdp:$.sdp,reconnectToken:$.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator})]):(this.emit(F.EventName.Error,new _.ClientErrors.BadRequest("Malformed invite from gateway")),[2]);case 1:return me=ct.sent(),this._calls.push(me),me.once("accept",function(){pe._soundcache.get(F.SoundName.Incoming).stop(),pe._publishNetworkChange()}),Ce=null!==(ke=this._audio)&&void 0!==ke&&ke.incoming()&&!ee?function(){return pe._soundcache.get(F.SoundName.Incoming).play()}:function(){return Promise.resolve()},this._showIncomingCall(me,Ce),[2]}})})},j._onSignalingOffline=function(){j._log.info("Stream is offline"),j._edge=null,j._region=null,j._shouldReRegister=j.state!==F.State.Unregistered,j._setState(F.State.Unregistered)},j._onSignalingReady=function(){j._log.info("Stream is ready"),j._setState(F.State.Registered)},j._publishNetworkChange=function(){j._activeCall&&j._networkInformation&&j._publisher.info("network-information","network-change",{connection_type:j._networkInformation.type,downlink:j._networkInformation.downlink,downlinkMax:j._networkInformation.downlinkMax,effective_type:j._networkInformation.effectiveType,rtt:j._networkInformation.rtt},j._activeCall)},j._updateInputStream=function($){var ee=j._activeCall;return ee&&!$?Promise.reject(new _.InvalidStateError("Cannot unset input device while a call is in progress.")):(j._callInputStream=$,ee?ee._setInputTracksFromStream($):Promise.resolve())},j._updateSinkIds=function($,ee){return("ringtone"===$?j._updateRingtoneSinkIds(ee):j._updateSpeakerSinkIds(ee)).then(function(){j._publisher.info("audio",$+"-devices-set",{audio_device_ids:ee},j._activeCall)},function(be){throw j._publisher.error("audio",$+"-devices-set-failed",{audio_device_ids:ee,message:be.message},j._activeCall),be})},j.updateToken(B),I.isLegacyEdge())throw new _.NotSupportedError("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!F.isSupported&&G.ignoreBrowserSupport)throw window&&window.location&&"http:"===window.location.protocol?new _.NotSupportedError("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new _.NotSupportedError("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");if(window){var Y=window,le=Y.msBrowser||Y.browser||Y.chrome;j._isBrowserExtension=!!le&&!!le.runtime&&!!le.runtime.id||!!Y.safari&&!!Y.safari.extension}if(j._isBrowserExtension&&j._log.info("Running as browser extension."),navigator){var W=navigator;j._networkInformation=W.connection||W.mozConnection||W.webkitConnection}return j._networkInformation&&"function"==typeof j._networkInformation.addEventListener&&j._networkInformation.addEventListener("change",j._publishNetworkChange),F._getOrCreateAudioContext(),F._audioContext&&(F._dialtonePlayer||(F._dialtonePlayer=new E.default(F._audioContext))),typeof F._isUnifiedPlanDefault>"u"&&(F._isUnifiedPlanDefault=typeof window<"u"&&typeof RTCPeerConnection<"u"&&typeof RTCRtpTransceiver<"u"&&I.isUnifiedPlanDefault(window,window.navigator,RTCPeerConnection,RTCRtpTransceiver)),j._boundDestroy=j.destroy.bind(j),j._boundConfirmClose=j._confirmClose.bind(j),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",j._boundDestroy),window.addEventListener("pagehide",j._boundDestroy)),j.updateOptions(G),j}return v(F,Q),Object.defineProperty(F,"audioContext",{get:function(){return F._audioContext},enumerable:!1,configurable:!0}),Object.defineProperty(F,"extension",{get:function(){var G,w,B=typeof document<"u"?document.createElement("audio"):{canPlayType:!1};try{G=B.canPlayType&&!!B.canPlayType("audio/mpeg").replace(/no/,"")}catch{G=!1}try{w=B.canPlayType&&!!B.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{w=!1}return w&&!G?"ogg":"mp3"},enumerable:!1,configurable:!0}),Object.defineProperty(F,"isSupported",{get:function(){return c.enabled()},enumerable:!1,configurable:!0}),Object.defineProperty(F,"packageName",{get:function(){return O.PACKAGE_NAME},enumerable:!1,configurable:!0}),F.runPreflight=function(B,G){return new m.PreflightTest(B,M({audioContext:F._getOrCreateAudioContext()},G))},F.toString=function(){return"[Twilio.Device class]"},Object.defineProperty(F,"version",{get:function(){return O.RELEASE_VERSION},enumerable:!1,configurable:!0}),F._getOrCreateAudioContext=function(){return F._audioContext||(typeof AudioContext<"u"?F._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(F._audioContext=new webkitAudioContext)),F._audioContext},Object.defineProperty(F.prototype,"audio",{get:function(){return this._audio},enumerable:!1,configurable:!0}),F.prototype.connect=function(B){return void 0===B&&(B={}),L(this,void 0,void 0,function(){var G,w;return P(this,function(j){switch(j.label){case 0:if(this._throwIfDestroyed(),this._activeCall)throw new _.InvalidStateError("A Call is already active");return w=this,[4,this._makeCall(B.params||{},{rtcConfiguration:B.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator})];case 1:return G=w._activeCall=j.sent(),this._calls.splice(0).forEach(function(Y){return Y.ignore()}),this._soundcache.get(F.SoundName.Incoming).stop(),G.accept({rtcConstraints:B.rtcConstraints}),this._publishNetworkChange(),[2,G]}})})},Object.defineProperty(F.prototype,"calls",{get:function(){return this._calls},enumerable:!1,configurable:!0}),F.prototype.destroy=function(){this.disconnectAll(),this._stopRegistrationTimer(),this._audio&&this._audio._unbind(),this._destroyStream(),this._destroyPublisher(),this._destroyAudioHelper(),this._networkInformation&&"function"==typeof this._networkInformation.removeEventListener&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(F.State.Destroyed),U.EventEmitter.prototype.removeAllListeners.call(this)},F.prototype.disconnectAll=function(){this._calls.splice(0).forEach(function(G){return G.disconnect()}),this._activeCall&&this._activeCall.disconnect()},Object.defineProperty(F.prototype,"edge",{get:function(){return this._edge},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"home",{get:function(){return this._home},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"identity",{get:function(){return this._identity},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"isBusy",{get:function(){return!!this._activeCall},enumerable:!1,configurable:!0}),F.prototype.register=function(){return L(this,void 0,void 0,function(){var G,w=this;return P(this,function(j){switch(j.label){case 0:if(this.state!==F.State.Unregistered)throw new _.InvalidStateError('Attempt to register when device is in state "'+this.state+'". Must be "'+F.State.Unregistered+'".');return this._setState(F.State.Registering),[4,this._streamConnectedPromise||this._setupStream()];case 1:return j.sent(),G=new Promise(function(Y){w.once(F.State.Registered,Y)}),[4,this._sendPresence(!0)];case 2:return j.sent(),[4,G];case 3:return j.sent(),[2]}})})},Object.defineProperty(F.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),F.prototype.toString=function(){return"[Twilio.Device instance]"},F.prototype.unregister=function(){return L(this,void 0,void 0,function(){var B,G;return P(this,function(w){switch(w.label){case 0:if(this.state!==F.State.Registered)throw new _.InvalidStateError('Attempt to unregister when device is in state "'+this.state+'". Must be "'+F.State.Registered+'".');return this._shouldReRegister=!1,[4,this._streamConnectedPromise];case 1:return B=w.sent(),G=new Promise(function(j){B.on("offline",j)}),[4,this._sendPresence(!1)];case 2:return w.sent(),[4,G];case 3:return w.sent(),[2]}})})},F.prototype.updateOptions=function(B){if(void 0===B&&(B={}),this.state===F.State.Destroyed)throw new _.InvalidStateError('Attempt to "updateOptions" when device is in state "'+this.state+'".');this._options=M(M(M({},this._defaultOptions),this._options),B);var G=new Set(this._chunderURIs),w="string"==typeof this._options.chunderw?[this._options.chunderw]:Array.isArray(this._options.chunderw)&&this._options.chunderw,j=this._chunderURIs=(w||d.getChunderURIs(this._options.edge)).map(d.createSignalingEndpointURL),Y=G.size!==j.length;if(!Y)for(var le=0,W=j;le<W.length;le++)if(!G.has(W[le])){Y=!0;break}if(this.isBusy&&Y)throw new _.InvalidStateError("Cannot change Edge while on an active Call");this._log.setDefaultLevel("number"==typeof this._options.logLevel?this._options.logLevel:k.levels.ERROR),this._options.dscp&&(this._options.rtcConstraints||(this._options.rtcConstraints={}),this._options.rtcConstraints.optional=[{googDscp:!0}]);for(var ee=0,ae=Object.keys(F._defaultSounds);ee<ae.length;ee++){var be=ae[ee],me=F._defaultSounds[be],ke=new(this._options.Sound||f.default)(be,this._options.sounds&&this._options.sounds[be]||O.SOUNDS_BASE_URL+"/"+me.filename+"."+F.extension+"?cache="+O.RELEASE_VERSION,{audioContext:this._options.disableAudioContextSounds?null:F.audioContext,maxDuration:me.maxDuration,shouldLoop:me.shouldLoop});this._soundcache.set(be,ke)}this._setupAudioHelper(),this._setupPublisher(),Y&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&"function"==typeof window.addEventListener&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))},F.prototype.updateToken=function(B){if(this.state===F.State.Destroyed)throw new _.InvalidStateError('Attempt to "updateToken" when device is in state "'+this.state+'".');if("string"!=typeof B)throw new _.InvalidArgumentError('Parameter "token" must be of type "string".');this._token=B,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)},F.prototype._confirmClose=function(B){if(!this._activeCall)return"";var G=this._options.closeProtection||!1,w="string"!=typeof G?"A call is currently in-progress. Leaving or reloading this page will end the call.":G;return(B||window.event).returnValue=w,w},F.prototype._destroyAudioHelper=function(){this._audio&&(this._audio.removeAllListeners(),this._audio=null)},F.prototype._destroyPublisher=function(){this._publisher&&(this._publisher=null)},F.prototype._destroyStream=function(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null},F.prototype._findCall=function(B){return this._calls.find(function(G){return G.parameters.CallSid===B||G.outboundConnectionId===B})||null},F.prototype._makeCall=function(B,G){return L(this,void 0,void 0,function(){var w,j,Y,le,W=this;return P(this,function($){switch($.label){case 0:if(typeof F._isUnifiedPlanDefault>"u")throw new _.InvalidStateError("Device has not been initialized.");return le={audioHelper:this._audio,getUserMedia:this._options.getUserMedia||g.default,isUnifiedPlanDefault:F._isUnifiedPlanDefault,onIgnore:function(){W._soundcache.get(F.SoundName.Incoming).stop()}},[4,this._streamConnectedPromise||this._setupStream()];case 1:return le.pstream=$.sent(),le.publisher=this._publisher,le.soundcache=this._soundcache,w=le,G=Object.assign({MediaStream:this._options.MediaStream||c.PeerConnection,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:function(ee){!W._activeCall||W._activeCall===ee||(W._activeCall.disconnect(),W._removeCall(W._activeCall))},codecPreferences:this._options.codecPreferences,dialtonePlayer:F._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:function(){return W._options.fileInputStream||W._callInputStream},getSinkIds:function(){return W._callSinkIds},maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:function(){var ee;return null===(ee=W._audio)||void 0===ee?void 0:ee.disconnect()},twimlParams:B,voiceEventSidGenerator:this._options.voiceEventSidGenerator},G),j=function(){W._stream?null===W._activeCall&&0===W._calls.length&&W._stream.updatePreferredURI(null):W._log.warn("UnsetPreferredUri called without a stream")},Y=new(this._options.Call||A.default)(w,G),this._publisher.info("settings","init",{RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},Y),Y.once("accept",function(){var ee;W._stream.updatePreferredURI(W._preferredURI),W._removeCall(Y),W._activeCall=Y,W._audio&&W._audio._maybeStartPollingVolume(),Y.direction===A.default.CallDirection.Outgoing&&null!==(ee=W._audio)&&void 0!==ee&&ee.outgoing()&&W._soundcache.get(F.SoundName.Outgoing).play();var ae={edge:W._edge||W._region};W._options.edge&&(ae.selected_edge=Array.isArray(W._options.edge)?W._options.edge:[W._options.edge]),W._publisher.info("settings","edge",ae,Y)}),Y.addListener("error",function(ee){"closed"===Y.status()&&(W._removeCall(Y),j()),W._audio&&W._audio._maybeStopPollingVolume(),W._maybeStopIncomingSound()}),Y.once("cancel",function(){W._log.info("Canceled: "+Y.parameters.CallSid),W._removeCall(Y),j(),W._audio&&W._audio._maybeStopPollingVolume(),W._maybeStopIncomingSound()}),Y.once("disconnect",function(){W._audio&&W._audio._maybeStopPollingVolume(),W._removeCall(Y),j(),W._maybeStopIncomingSound()}),Y.once("reject",function(){W._log.info("Rejected: "+Y.parameters.CallSid),W._audio&&W._audio._maybeStopPollingVolume(),W._removeCall(Y),j(),W._maybeStopIncomingSound()}),Y.on("transportClose",function(){Y.status()===A.default.State.Pending&&(W._audio&&W._audio._maybeStopPollingVolume(),W._removeCall(Y),W._maybeStopIncomingSound())}),[2,Y]}})})},F.prototype._maybeStopIncomingSound=function(){this._calls.length||this._soundcache.get(F.SoundName.Incoming).stop()},F.prototype._removeCall=function(B){this._activeCall===B&&(this._activeCall=null);for(var G=this._calls.length-1;G>=0;G--)B===this._calls[G]&&this._calls.splice(G,1)},F.prototype._sendPresence=function(B){return L(this,void 0,void 0,function(){var G;return P(this,function(w){switch(w.label){case 0:return[4,this._streamConnectedPromise];case 1:return(G=w.sent())?(G.register({audio:B}),B?this._startRegistrationTimer():this._stopRegistrationTimer(),[2]):[2]}})})},F.prototype._setState=function(B){B!==this.state&&(this._state=B,this.emit(this._stateEventMapping[B]))},F.prototype._setupAudioHelper=function(){var B=this;this._audio&&(this._log.info("Found existing audio helper; destroying..."),this._destroyAudioHelper()),this._audio=new(this._options.AudioHelper||N.default)(this._updateSinkIds,this._updateInputStream,this._options.getUserMedia||g.default,{audioContext:F.audioContext,enumerateDevices:this._options.enumerateDevices}),this._audio.on("deviceChange",function(G){var w=B._activeCall,j=G.map(function(Y){return Y.deviceId});B._publisher.info("audio","device-change",{lost_active_device_ids:j},w),w&&w._mediaHandler._onInputDevicesChanged()})},F.prototype._setupPublisher=function(){var B=this;this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());var G={defaultPayload:this._createDefaultPayload,log:this._log,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(G.host=this._options.eventgw),this._home&&(G.host=d.createEventGatewayURI(this._home)),this._publisher=new(this._options.Publisher||b.default)("twilio-js-sdk",this.token,G),!1===this._options.publishEvents?this._publisher.disable():this._publisher.on("error",function(w){B._log.warn("Cannot connect to insights.",w)}),this._publisher},F.prototype._setupStream=function(){var B=this;return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||p.default)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=new Promise(function(G){return B._stream.once("connected",function(){G(B._stream)})})},F.prototype._showIncomingCall=function(B,G){var j,w=this;return Promise.race([G(),new Promise(function(Y,le){j=setTimeout(function(){le(new Error("Playing incoming ringtone took too long; it might not play. Continuing execution..."))},2e3)})]).catch(function(Y){w._log.info(Y.message)}).then(function(){clearTimeout(j),w.emit(F.EventName.Incoming,B)})},F.prototype._startRegistrationTimer=function(){var B=this;this._stopRegistrationTimer(),this._regTimer=setTimeout(function(){B._sendPresence(!0)},3e4)},F.prototype._stopRegistrationTimer=function(){this._regTimer&&clearTimeout(this._regTimer)},F.prototype._throwIfDestroyed=function(){if(this.state===F.State.Destroyed)throw new _.InvalidStateError("Device has been destroyed.")},F.prototype._updateRingtoneSinkIds=function(B){return Promise.resolve(this._soundcache.get(F.SoundName.Incoming).setSinkIds(B))},F.prototype._updateSpeakerSinkIds=function(B){Array.from(this._soundcache.entries()).filter(function(w){return w[0]!==F.SoundName.Incoming}).forEach(function(w){return w[1].setSinkIds(B)}),this._callSinkIds=B;var G=this._activeCall;return G?G._setSinkIds(B):Promise.resolve()},F._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}},F}(U.EventEmitter);(function(Q){var w;(w=Q.EventName||(Q.EventName={})).Error="error",w.Incoming="incoming",w.Destroyed="destroyed",w.Unregistered="unregistered",w.Registering="registering",w.Registered="registered",w.TokenWillExpire="tokenWillExpire",function(w){w.Destroyed="destroyed",w.Unregistered="unregistered",w.Registering="registering",w.Registered="registered"}(Q.State||(Q.State={})),function(w){w.Incoming="incoming",w.Outgoing="outgoing",w.Disconnect="disconnect",w.Dtmf0="dtmf0",w.Dtmf1="dtmf1",w.Dtmf2="dtmf2",w.Dtmf3="dtmf3",w.Dtmf4="dtmf4",w.Dtmf5="dtmf5",w.Dtmf6="dtmf6",w.Dtmf7="dtmf7",w.Dtmf8="dtmf8",w.Dtmf9="dtmf9",w.DtmfS="dtmfs",w.DtmfH="dtmfh"}(Q.SoundName||(Q.SoundName={}))})(ne||(ne={})),T.default=ne},9:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=S(287),M={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]},L=function(){function P(U){var k=this;this._context=U,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(function(N){N.connect(k._context.destination),N.gain.value=.1,k._gainNodes.push(N)})}return P.prototype.cleanup=function(){this._gainNodes.forEach(function(U){U.disconnect()})},P.prototype.play=function(U){var k=this,N=M[U];if(!N)throw new v.InvalidArgumentError("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach(function(O,E){O.type="sine",O.frequency.value=N[E],O.connect(k._gainNodes[E]),O.start(),O.stop(k._context.currentTime+.1),O.addEventListener("ended",function(){return O.disconnect()})})},P}();T.default=L},888:function(de,T,S){"use strict";var E,v=this&&this.__extends||(E=function(_,b){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(y[p]=m[p])})(_,b)},function(_,b){function y(){this.constructor=_}E(_,b),_.prototype=null===b?Object.create(b):(y.prototype=b.prototype,new y)});Object.defineProperty(T,"__esModule",{value:!0}),T.errorsByCode=T.MediaErrors=T.SignalingErrors=T.UserMediaErrors=T.MalformedRequestErrors=T.GeneralErrors=T.ClientErrors=T.AuthorizationErrors=T.TwilioError=void 0;var L,P,U,k,N,A,O,M=S(71);T.TwilioError=M.default,function(E){var _=function(m){function p(d,c){var g=m.call(this,d,c)||this;g.causes=[],g.code=20101,g.description="Invalid access token",g.explanation="Twilio was unable to validate your Access Token",g.name="AccessTokenInvalid",g.solutions=[],Object.setPrototypeOf(g,E.AccessTokenInvalid.prototype);var I="object"==typeof d?d:c;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(p,m),p}(M.default);E.AccessTokenInvalid=_;var b=function(m){function p(d,c){var g=m.call(this,d,c)||this;g.causes=[],g.code=20104,g.description="Access token expired or expiration date invalid",g.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",g.name="AccessTokenExpired",g.solutions=[],Object.setPrototypeOf(g,E.AccessTokenExpired.prototype);var I="object"==typeof d?d:c;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(p,m),p}(M.default);E.AccessTokenExpired=b;var y=function(m){function p(d,c){var g=m.call(this,d,c)||this;g.causes=[],g.code=20151,g.description="Authentication Failed",g.explanation="The Authentication with the provided JWT failed",g.name="AuthenticationFailed",g.solutions=[],Object.setPrototypeOf(g,E.AuthenticationFailed.prototype);var I="object"==typeof d?d:c;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(p,m),p}(M.default);E.AuthenticationFailed=y}(T.AuthorizationErrors||(T.AuthorizationErrors={})),function(E){var _=function(b){function y(m,p){var d=b.call(this,m,p)||this;d.causes=[],d.code=31400,d.description="Bad Request (HTTP/SIP)",d.explanation="The request could not be understood due to malformed syntax.",d.name="BadRequest",d.solutions=[],Object.setPrototypeOf(d,E.BadRequest.prototype);var g="object"==typeof m?m:p;return d.message=d.name+" ("+d.code+"): "+("string"==typeof m?m:d.explanation),d.originalError=g,d}return v(y,b),y}(M.default);E.BadRequest=_}(P=T.ClientErrors||(T.ClientErrors={})),function(E){var _=function(p){function d(c,g){var f=p.call(this,c,g)||this;f.causes=[],f.code=31e3,f.description="Unknown Error",f.explanation="An unknown error has occurred. See error details for more information.",f.name="UnknownError",f.solutions=[],Object.setPrototypeOf(f,E.UnknownError.prototype);var D="object"==typeof c?c:g;return f.message=f.name+" ("+f.code+"): "+("string"==typeof c?c:f.explanation),f.originalError=D,f}return v(d,p),d}(M.default);E.UnknownError=_;var b=function(p){function d(c,g){var f=p.call(this,c,g)||this;f.causes=[],f.code=31005,f.description="Connection error",f.explanation="A connection error occurred during the call",f.name="ConnectionError",f.solutions=[],Object.setPrototypeOf(f,E.ConnectionError.prototype);var D="object"==typeof c?c:g;return f.message=f.name+" ("+f.code+"): "+("string"==typeof c?c:f.explanation),f.originalError=D,f}return v(d,p),d}(M.default);E.ConnectionError=b;var y=function(p){function d(c,g){var f=p.call(this,c,g)||this;f.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],f.code=31008,f.description="Call cancelled",f.explanation="Unable to answer because the call has ended",f.name="CallCancelledError",f.solutions=[],Object.setPrototypeOf(f,E.CallCancelledError.prototype);var D="object"==typeof c?c:g;return f.message=f.name+" ("+f.code+"): "+("string"==typeof c?c:f.explanation),f.originalError=D,f}return v(d,p),d}(M.default);E.CallCancelledError=y;var m=function(p){function d(c,g){var f=p.call(this,c,g)||this;f.causes=[],f.code=31009,f.description="Transport error",f.explanation="No transport available to send or receive messages",f.name="TransportError",f.solutions=[],Object.setPrototypeOf(f,E.TransportError.prototype);var D="object"==typeof c?c:g;return f.message=f.name+" ("+f.code+"): "+("string"==typeof c?c:f.explanation),f.originalError=D,f}return v(d,p),d}(M.default);E.TransportError=m}(U=T.GeneralErrors||(T.GeneralErrors={})),function(E){var _=function(b){function y(m,p){var d=b.call(this,m,p)||this;d.causes=["Invalid content or MessageType passed to sendMessage method."],d.code=31100,d.description="The request had malformed syntax.",d.explanation="The request could not be understood due to malformed syntax.",d.name="MalformedRequestError",d.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(d,E.MalformedRequestError.prototype);var g="object"==typeof m?m:p;return d.message=d.name+" ("+d.code+"): "+("string"==typeof m?m:d.explanation),d.originalError=g,d}return v(y,b),y}(M.default);E.MalformedRequestError=_}(k=T.MalformedRequestErrors||(T.MalformedRequestErrors={})),function(E){var _=function(y){function m(p,d){var c=y.call(this,p,d)||this;c.causes=["Rate limit exceeded."],c.code=31206,c.description="Rate exceeded authorized limit.",c.explanation="The request performed exceeds the authorized limit.",c.name="RateExceededError",c.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(c,E.RateExceededError.prototype);var f="object"==typeof p?p:d;return c.message=c.name+" ("+c.code+"): "+("string"==typeof p?p:c.explanation),c.originalError=f,c}return v(m,y),m}(M.default);E.RateExceededError=_;var b=function(y){function m(p,d){var c=y.call(this,p,d)||this;c.causes=["The payload size of Call Message Event exceeds the authorized limit."],c.code=31209,c.description="Call Message Event Payload size exceeded authorized limit.",c.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",c.name="PayloadSizeExceededError",c.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(c,E.PayloadSizeExceededError.prototype);var f="object"==typeof p?p:d;return c.message=c.name+" ("+c.code+"): "+("string"==typeof p?p:c.explanation),c.originalError=f,c}return v(m,y),m}(M.default);E.PayloadSizeExceededError=b}(L=T.AuthorizationErrors||(T.AuthorizationErrors={})),function(E){var _=function(y){function m(p,d){var c=y.call(this,p,d)||this;c.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],c.code=31401,c.description="UserMedia Permission Denied Error",c.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",c.name="PermissionDeniedError",c.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(c,E.PermissionDeniedError.prototype);var f="object"==typeof p?p:d;return c.message=c.name+" ("+c.code+"): "+("string"==typeof p?p:c.explanation),c.originalError=f,c}return v(m,y),m}(M.default);E.PermissionDeniedError=_;var b=function(y){function m(p,d){var c=y.call(this,p,d)||this;c.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],c.code=31402,c.description="UserMedia Acquisition Failed Error",c.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",c.name="AcquisitionFailedError",c.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(c,E.AcquisitionFailedError.prototype);var f="object"==typeof p?p:d;return c.message=c.name+" ("+c.code+"): "+("string"==typeof p?p:c.explanation),c.originalError=f,c}return v(m,y),m}(M.default);E.AcquisitionFailedError=b}(N=T.UserMediaErrors||(T.UserMediaErrors={})),function(E){var _=function(y){function m(p,d){var c=y.call(this,p,d)||this;c.causes=[],c.code=53e3,c.description="Signaling connection error",c.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",c.name="ConnectionError",c.solutions=[],Object.setPrototypeOf(c,E.ConnectionError.prototype);var f="object"==typeof p?p:d;return c.message=c.name+" ("+c.code+"): "+("string"==typeof p?p:c.explanation),c.originalError=f,c}return v(m,y),m}(M.default);E.ConnectionError=_;var b=function(y){function m(p,d){var c=y.call(this,p,d)||this;c.causes=["The device running your application lost its Internet connection."],c.code=53001,c.description="Signaling connection disconnected",c.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",c.name="ConnectionDisconnected",c.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(c,E.ConnectionDisconnected.prototype);var f="object"==typeof p?p:d;return c.message=c.name+" ("+c.code+"): "+("string"==typeof p?p:c.explanation),c.originalError=f,c}return v(m,y),m}(M.default);E.ConnectionDisconnected=b}(A=T.SignalingErrors||(T.SignalingErrors={})),function(E){var _=function(m){function p(d,c){var g=m.call(this,d,c)||this;g.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],g.code=53400,g.description="Client is unable to create or apply a local media description",g.explanation="Raised whenever a Client is unable to create or apply a local media description.",g.name="ClientLocalDescFailed",g.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(g,E.ClientLocalDescFailed.prototype);var I="object"==typeof d?d:c;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(p,m),p}(M.default);E.ClientLocalDescFailed=_;var b=function(m){function p(d,c){var g=m.call(this,d,c)||this;g.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],g.code=53402,g.description="Client is unable to apply a remote media description",g.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",g.name="ClientRemoteDescFailed",g.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(g,E.ClientRemoteDescFailed.prototype);var I="object"==typeof d?d:c;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(p,m),p}(M.default);E.ClientRemoteDescFailed=b;var y=function(m){function p(d,c){var g=m.call(this,d,c)||this;g.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],g.code=53405,g.description="Media connection failed",g.explanation="Raised by the Client or Server whenever a media connection fails.",g.name="ConnectionError",g.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(g,E.ConnectionError.prototype);var I="object"==typeof d?d:c;return g.message=g.name+" ("+g.code+"): "+("string"==typeof d?d:g.explanation),g.originalError=I,g}return v(p,m),p}(M.default);E.ConnectionError=y}(O=T.MediaErrors||(T.MediaErrors={})),T.errorsByCode=new Map([[20101,L.AccessTokenInvalid],[20104,L.AccessTokenExpired],[20151,L.AuthenticationFailed],[31400,P.BadRequest],[31e3,U.UnknownError],[31005,U.ConnectionError],[31008,U.CallCancelledError],[31009,U.TransportError],[31100,k.MalformedRequestError],[31206,L.RateExceededError],[31209,L.PayloadSizeExceededError],[31401,N.PermissionDeniedError],[31402,N.AcquisitionFailedError],[53e3,A.ConnectionError],[53001,A.ConnectionDisconnected],[53400,O.ClientLocalDescFailed],[53402,O.ClientRemoteDescFailed],[53405,O.ConnectionError]]),Object.freeze(T.errorsByCode)},287:function(de,T,S){"use strict";var A,v=this&&this.__extends||(A=function(O,E){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(_[y]=b[y])})(O,E)},function(O,E){function _(){this.constructor=O}A(O,E),O.prototype=null===E?Object.create(E):(_.prototype=E.prototype,new _)});Object.defineProperty(T,"__esModule",{value:!0}),T.UserMediaErrors=T.TwilioError=T.SignalingErrors=T.MediaErrors=T.GeneralErrors=T.ClientErrors=T.AuthorizationErrors=T.hasErrorByCode=T.getErrorByCode=T.NotSupportedError=T.InvalidStateError=T.InvalidArgumentError=void 0;var M=S(888);Object.defineProperty(T,"AuthorizationErrors",{enumerable:!0,get:function(){return M.AuthorizationErrors}}),Object.defineProperty(T,"ClientErrors",{enumerable:!0,get:function(){return M.ClientErrors}}),Object.defineProperty(T,"GeneralErrors",{enumerable:!0,get:function(){return M.GeneralErrors}}),Object.defineProperty(T,"MediaErrors",{enumerable:!0,get:function(){return M.MediaErrors}}),Object.defineProperty(T,"SignalingErrors",{enumerable:!0,get:function(){return M.SignalingErrors}}),Object.defineProperty(T,"TwilioError",{enumerable:!0,get:function(){return M.TwilioError}}),Object.defineProperty(T,"UserMediaErrors",{enumerable:!0,get:function(){return M.UserMediaErrors}});var L=function(A){function O(E){var _=A.call(this,E)||this;return _.name="InvalidArgumentError",_}return v(O,A),O}(Error);T.InvalidArgumentError=L;var P=function(A){function O(E){var _=A.call(this,E)||this;return _.name="InvalidStateError",_}return v(O,A),O}(Error);T.InvalidStateError=P;var U=function(A){function O(E){var _=A.call(this,E)||this;return _.name="NotSupportedError",_}return v(O,A),O}(Error);T.NotSupportedError=U,T.getErrorByCode=function k(A){var O=M.errorsByCode.get(A);if(!O)throw new L("Error code "+A+" not found");return O},T.hasErrorByCode=function N(A){return M.errorsByCode.has(A)}},71:function(de,T){"use strict";var M,S=this&&this.__extends||(M=function(L,P){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,k){U.__proto__=k}||function(U,k){for(var N in k)Object.prototype.hasOwnProperty.call(k,N)&&(U[N]=k[N])})(L,P)},function(L,P){function U(){this.constructor=L}M(L,P),L.prototype=null===P?Object.create(P):(U.prototype=P.prototype,new U)});Object.defineProperty(T,"__esModule",{value:!0});var v=function(M){function L(P,U){var k=M.call(this)||this;Object.setPrototypeOf(k,L.prototype);var A="object"==typeof P?P:U;return k.message=k.name+" ("+k.code+"): "+("string"==typeof P?P:k.explanation),k.originalError=A,k}return S(L,M),L}(Error);T.default=v},694:function(de,T,S){"use strict";var k,v=this&&this.__extends||(k=function(N,A){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,E){O.__proto__=E}||function(O,E){for(var _ in E)Object.prototype.hasOwnProperty.call(E,_)&&(O[_]=E[_])})(N,A)},function(N,A){function O(){this.constructor=N}k(N,A),N.prototype=null===A?Object.create(A):(O.prototype=A.prototype,new O)});Object.defineProperty(T,"__esModule",{value:!0});var M=S(16),L=S(74),P=function(k){function N(A,O,E){var _=k.call(this)||this;if(!(_ instanceof N))return new N(A,O,E);var b=(E=Object.assign({defaultPayload:function(){return{}}},E)).defaultPayload;"function"!=typeof b&&(b=function(){return Object.assign({},E.defaultPayload)});var y=!0,m=Object.assign({app_name:void 0,app_version:void 0},E.metadata);return Object.defineProperties(_,{_defaultPayload:{value:b},_host:{value:E.host,writable:!0},_isEnabled:{get:function(){return y},set:function(p){y=p}},_log:{value:E.log},_request:{value:E.request||L.default,writable:!0},_token:{value:O,writable:!0},isEnabled:{enumerable:!0,get:function(){return y}},metadata:{enumerable:!0,get:function(){return m}},productName:{enumerable:!0,value:A},token:{enumerable:!0,get:function(){return this._token}}}),_}return v(N,k),N}(M.EventEmitter);function U(k){return{audio_codec:k.codecName,audio_level_in:k.audioInputLevel,audio_level_out:k.audioOutputLevel,bytes_received:k.bytesReceived,bytes_sent:k.bytesSent,call_volume_input:k.inputVolume,call_volume_output:k.outputVolume,jitter:k.jitter,mos:k.mos&&Math.round(100*k.mos)/100,packets_lost:k.packetsLost,packets_lost_fraction:k.packetsLostFraction&&Math.round(100*k.packetsLostFraction)/100,packets_received:k.packetsReceived,rtt:k.rtt,timestamp:new Date(k.timestamp).toISOString(),total_bytes_received:k.totals.bytesReceived,total_bytes_sent:k.totals.bytesSent,total_packets_lost:k.totals.packetsLost,total_packets_received:k.totals.packetsReceived,total_packets_sent:k.totals.packetsSent}}P.prototype._post=function(N,A,O,E,_,b,y){var m=this;if(!((this.isEnabled||y)&&this._host&&b&&(b.parameters&&b.parameters.CallSid||b.outboundConnectionId)))return Promise.resolve();var p={group:O,level:A.toUpperCase(),name:E,payload:_&&_.forEach?_.slice(0):Object.assign(this._defaultPayload(b),_),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:(new Date).toISOString()};this.metadata&&(p.publisher_metadata=this.metadata);var d={body:p,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:"https://"+this._host+"/v4/"+N};return new Promise(function(c,g){m._request.post(d,function(f){f?(m.emit("error",f),g(f)):c()})}).catch(function(c){m._log.warn("Unable to post "+O+" "+E+" event to Insights. Received error: "+c)})},P.prototype.post=function(N,A,O,E,_,b){return this._post("EndpointEvents",N,A,O,E,_,b)},P.prototype.debug=function(N,A,O,E){return this.post("debug",N,A,O,E)},P.prototype.info=function(N,A,O,E){return this.post("info",N,A,O,E)},P.prototype.warn=function(N,A,O,E){return this.post("warning",N,A,O,E)},P.prototype.error=function(N,A,O,E){return this.post("error",N,A,O,E)},P.prototype.postMetrics=function(N,A,O,E,_){var b=this;return new Promise(function(y){var m=O.map(U).map(function(p){return Object.assign(p,E)});y(b._post("EndpointMetrics","info",N,A,m,_))})},P.prototype.setHost=function(N){this._host=N},P.prototype.setToken=function(N){this._token=N},P.prototype.enable=function(){this._isEnabled=!0},P.prototype.disable=function(){this._isEnabled=!1},T.default=P},990:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Logger=void 0;var v=S(182),M=S(186),L=function(){function P(U){try{this._log=(U&&U.LogLevelModule?U.LogLevelModule:v).getLogger(M.PACKAGE_NAME)}catch{console.warn("Cannot create custom logger"),this._log=console}}return P.getInstance=function(){return P.instance||(P.instance=new P),P.instance},P.prototype.debug=function(){for(var U,k=[],N=0;N<arguments.length;N++)k[N]=arguments[N];(U=this._log).debug.apply(U,k)},P.prototype.error=function(){for(var U,k=[],N=0;N<arguments.length;N++)k[N]=arguments[N];(U=this._log).error.apply(U,k)},P.prototype.getLogLevelInstance=function(){return this._log},P.prototype.info=function(){for(var U,k=[],N=0;N<arguments.length;N++)k[N]=arguments[N];(U=this._log).info.apply(U,k)},P.prototype.setDefaultLevel=function(U){this._log.setDefaultLevel?this._log.setDefaultLevel(U):console.warn("Logger cannot setDefaultLevel")},P.prototype.warn=function(){for(var U,k=[],N=0;N<arguments.length;N++)k[N]=arguments[N];(U=this._log).warn.apply(U,k)},P.levels=v.levels,P}();T.Logger=L.getInstance().getLogLevelInstance(),T.default=L},178:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=S(186),M=S(287),L=v.SOUNDS_BASE_URL+"/outgoing.mp3",P=function(){function U(k,N,A,O){this._name=k,this._availableDevices=N,this._beforeChange=A,this._isSupported=O,this._activeDevices=new Set}return U.prototype.delete=function(k){var N=!!this._activeDevices.delete(k),A=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&A&&this._activeDevices.add(A);var O=Array.from(this._activeDevices.values()).map(function(E){return E.deviceId});return this._beforeChange(this._name,O),!!N},U.prototype.get=function(){return this._activeDevices},U.prototype.set=function(k){var N=this;if(!this._isSupported)return Promise.reject(new M.NotSupportedError("This browser does not support audio output selection"));var A=Array.isArray(k)?k:[k];if(!A.length)return Promise.reject(new M.InvalidArgumentError("Must specify at least one device to set"));var O=[],E=A.map(function(_){var b=N._availableDevices.get(_);return b||O.push(_),b});return O.length?Promise.reject(new M.InvalidArgumentError("Devices not found: "+O.join(", "))):new Promise(function(_){_(N._beforeChange(N._name,A))}).then(function(){N._activeDevices.clear(),E.forEach(N._activeDevices.add,N._activeDevices)})},U.prototype.test=function(k){return void 0===k&&(k=L),this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(function(N){var A;return new Promise(function(O){(A=new Audio(k)).oncanplay=O}).then(function(){return A.setSinkId(N.deviceId).then(function(){return A.play()})})})):Promise.reject(new M.InvalidStateError("No active output devices to test")):Promise.reject(new M.NotSupportedError("This browser does not support audio output selection"))},U}();T.default=P},579:function(de,T,S){"use strict";var b,v=this&&this.__extends||(b=function(y,m){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(p[c]=d[c])})(y,m)},function(y,m){function p(){this.constructor=y}b(y,m),y.prototype=null===m?Object.create(m):(p.prototype=m.prototype,new p)}),M=this&&this.__assign||function(){return M=Object.assign||function(b){for(var y,m=1,p=arguments.length;m<p;m++)for(var d in y=arguments[m])Object.prototype.hasOwnProperty.call(y,d)&&(b[d]=y[d]);return b},M.apply(this,arguments)},L=this&&this.__awaiter||function(b,y,m,p){return new(m||(m=Promise))(function(c,g){function f(x){try{D(p.next(x))}catch(V){g(V)}}function I(x){try{D(p.throw(x))}catch(V){g(V)}}function D(x){x.done?c(x.value):function d(c){return c instanceof m?c:new m(function(g){g(c)})}(x.value).then(f,I)}D((p=p.apply(b,y||[])).next())})},P=this&&this.__generator||function(b,y){var p,d,c,g,m={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function f(D){return function(x){return function I(D){if(p)throw new TypeError("Generator is already executing.");for(;m;)try{if(p=1,d&&(c=2&D[0]?d.return:D[0]?d.throw||((c=d.return)&&c.call(d),0):d.next)&&!(c=c.call(d,D[1])).done)return c;switch(d=0,c&&(D=[2&D[0],c.value]),D[0]){case 0:case 1:c=D;break;case 4:return m.label++,{value:D[1],done:!1};case 5:m.label++,d=D[1],D=[0];continue;case 7:D=m.ops.pop(),m.trys.pop();continue;default:if(!(c=(c=m.trys).length>0&&c[c.length-1])&&(6===D[0]||2===D[0])){m=0;continue}if(3===D[0]&&(!c||D[1]>c[0]&&D[1]<c[3])){m.label=D[1];break}if(6===D[0]&&m.label<c[1]){m.label=c[1],c=D;break}if(c&&m.label<c[2]){m.label=c[2],m.ops.push(D);break}c[2]&&m.ops.pop(),m.trys.pop();continue}D=y.call(b,m)}catch(x){D=[6,x],d=0}finally{p=c=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([D,x])}}};Object.defineProperty(T,"__esModule",{value:!0}),T.PreflightTest=void 0;var U=S(16),k=S(487),N=S(915),A=S(287),O=S(610),E=S(186),_=function(b){function y(m,p){var d=b.call(this)||this;return d._hasInsightsErrored=!1,d._networkTiming={},d._options={codecPreferences:[k.default.Codec.PCMU,k.default.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},d._status=y.Status.Connecting,Object.assign(d._options,p),d._samples=[],d._warnings=[],d._startTime=Date.now(),d._initDevice(m,M(M({},d._options),{fileInputStream:d._options.fakeMicInput?d._getStreamFromFile():void 0})),d}return v(y,b),y.prototype.stop=function(){var m=this,p=new A.GeneralErrors.CallCancelledError;this._device?(this._device.once(N.default.EventName.Unregistered,function(){return m._onFailed(p)}),this._device.destroy()):this._onFailed(p)},y.prototype._emitWarning=function(m,p,d){var c={name:m,description:p};d&&(c.rtcWarning=d),this._warnings.push(c),this.emit(y.Events.Warning,c)},y.prototype._getCallQuality=function(m){return m>4.2?y.CallQuality.Excellent:m>=4.1&&m<=4.2?y.CallQuality.Great:m>=3.7&&m<=4?y.CallQuality.Good:m>=3.1&&m<=3.6?y.CallQuality.Fair:y.CallQuality.Degraded},y.prototype._getReport=function(){var m=this._getRTCStats(),p={start:this._startTime};this._endTime&&(p.end=this._endTime,p.duration=this._endTime-this._startTime);var d={callSid:this._callSid,edge:this._edge,iceCandidateStats:this._rtcIceCandidateStatsReport.iceCandidateStats,networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:m,testTiming:p,totals:this._getRTCSampleTotals(),warnings:this._warnings},c=this._rtcIceCandidateStatsReport.selectedIceCandidatePairStats;return c&&(d.selectedIceCandidatePairStats=c,d.isTurnRequired="relay"===c.localCandidate.candidateType||"relay"===c.remoteCandidate.candidateType),m&&(d.callQuality=this._getCallQuality(m.mos.average)),d},y.prototype._getRTCSampleTotals=function(){if(this._latestSample)return M({},this._latestSample.totals)},y.prototype._getRTCStats=function(){var m=this._samples.findIndex(function(d){return"number"==typeof d.mos&&d.mos>0}),p=m>=0?this._samples.slice(m):[];if(p&&p.length)return["jitter","mos","rtt"].reduce(function(d,c){var g,f=p.map(function(I){return I[c]});return M(M({},d),((g={})[c]={average:Number((f.reduce(function(I,D){return I+D})/f.length).toPrecision(5)),max:Math.max.apply(Math,f),min:Math.min.apply(Math,f)},g))},{})},y.prototype._getStreamFromFile=function(){var m=this._options.audioContext;if(!m)throw new A.NotSupportedError("Cannot fake input audio stream: AudioContext is not supported by this browser.");var p=new Audio(E.COWBELL_AUDIO_URL);p.addEventListener("canplaythrough",function(){return p.play()}),"function"==typeof p.setAttribute&&p.setAttribute("crossorigin","anonymous");var d=m.createMediaElementSource(p),c=m.createMediaStreamDestination();return d.connect(c),c.stream},y.prototype._initDevice=function(m,p){var d=this;try{this._device=new(p.deviceFactory||N.default)(m,{codecPreferences:p.codecPreferences,edge:p.edge,fileInputStream:p.fileInputStream,logLevel:p.logLevel,preflight:!0}),this._device.once(N.default.EventName.Registered,function(){d._onDeviceRegistered()}),this._device.once(N.default.EventName.Error,function(c){d._onDeviceError(c)}),this._device.register()}catch(c){return void setTimeout(function(){d._onFailed(c)})}this._signalingTimeoutTimer=setTimeout(function(){d._onDeviceError(new A.SignalingErrors.ConnectionError("WebSocket Connection Timeout"))},p.signalingTimeoutMs)},y.prototype._onDeviceError=function(m){this._device.destroy(),this._onFailed(m)},y.prototype._onDeviceRegistered=function(){return L(this,void 0,void 0,function(){var m,p,c=this;return P(this,function(g){switch(g.label){case 0:return clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),m=this,[4,this._device.connect({rtcConfiguration:this._options.rtcConfiguration})];case 1:return m._call=g.sent(),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput&&(this._echoTimer=setTimeout(function(){return c._device.disconnectAll()},E.ECHO_TEST_DURATION),(p=this._device.audio)&&(p.disconnect(!1),p.outgoing(!1))),this._call.once("disconnect",function(){c._device.once(N.default.EventName.Unregistered,function(){return c._onUnregistered()}),c._device.destroy()}),this._call._publisher.on("error",function(){c._hasInsightsErrored||c._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),c._hasInsightsErrored=!0}),[2]}})})},y.prototype._onFailed=function(m){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=y.Status.Failed,this.emit(y.Events.Failed,m)},y.prototype._onUnregistered=function(){var m=this;setTimeout(function(){m._status!==y.Status.Failed&&(clearTimeout(m._echoTimer),clearTimeout(m._signalingTimeoutTimer),m._releaseHandlers(),m._endTime=Date.now(),m._status=y.Status.Completed,m._report=m._getReport(),m.emit(y.Events.Completed,m._report))},10)},y.prototype._releaseHandlers=function(){[this._device,this._call].forEach(function(m){m&&m.eventNames().forEach(function(p){return m.removeAllListeners(p)})})},y.prototype._setupCallHandlers=function(m){var p=this;this._options.fakeMicInput&&m.once("volume",function(){m._mediaHandler.outputs.forEach(function(d){return d.audio.muted=!0})}),m.on("warning",function(d,c){p._emitWarning(d,"Received an RTCWarning. See .rtcWarning for the RTCWarning",c)}),m.once("accept",function(){p._callSid=m._mediaHandler.callSid,p._status=y.Status.Connected,p.emit(y.Events.Connected)}),m.on("sample",function(d){return L(p,void 0,void 0,function(){var c;return P(this,function(g){switch(g.label){case 0:return this._latestSample?[3,2]:(c=this,[4,(this._options.getRTCIceCandidateStatsReport||O.getRTCIceCandidateStatsReport)(m._mediaHandler.version.pc)]);case 1:c._rtcIceCandidateStatsReport=g.sent(),g.label=2;case 2:return this._latestSample=d,this._samples.push(d),this.emit(y.Events.Sample,d),[2]}})})}),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(function(d){var g=d.reportLabel,f="on"+d.type+"statechange",I=m._mediaHandler[f];m._mediaHandler[f]=function(D){var x=p._networkTiming[g]=p._networkTiming[g]||{start:0};"connecting"===D||"checking"===D?x.start=Date.now():("connected"===D||"stable"===D)&&!x.duration&&(x.end=Date.now(),x.duration=x.end-x.start),I(D)}})},Object.defineProperty(y.prototype,"callSid",{get:function(){return this._callSid},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"endTime",{get:function(){return this._endTime},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"latestSample",{get:function(){return this._latestSample},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"report",{get:function(){return this._report},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"startTime",{get:function(){return this._startTime},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),y}(U.EventEmitter);T.PreflightTest=_,function(b){var d;(d=b.CallQuality||(b.CallQuality={})).Excellent="excellent",d.Great="great",d.Good="good",d.Fair="fair",d.Degraded="degraded",function(d){d.Completed="completed",d.Connected="connected",d.Failed="failed",d.Sample="sample",d.Warning="warning"}(b.Events||(b.Events={})),function(d){d.Connecting="connecting",d.Connected="connected",d.Completed="completed",d.Failed="failed"}(b.Status||(b.Status={}))}(_=T.PreflightTest||(T.PreflightTest={})),T.PreflightTest=_},696:function(de,T,S){"use strict";var E,v=this&&this.__extends||(E=function(_,b){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(y[p]=m[p])})(_,b)},function(_,b){function y(){this.constructor=_}E(_,b),_.prototype=null===b?Object.create(b):(y.prototype=b.prototype,new y)});Object.defineProperty(T,"__esModule",{value:!0});var M=S(16),L=S(186),P=S(287),U=S(990),k=S(483),A=function(E){function _(b,y,m){var p=E.call(this)||this;if(!(p instanceof _))return new _(b,y,m);var d={TransportFactory:k.default};for(var c in m=m||{},d)c in m||(m[c]=d[c]);p.options=m,p.token=b||"",p.status="disconnected",p.gateway=null,p.region=null,p._messageQueue=[],p._preferredUri=null,p._uris=y,p._handleTransportClose=p._handleTransportClose.bind(p),p._handleTransportError=p._handleTransportError.bind(p),p._handleTransportMessage=p._handleTransportMessage.bind(p),p._handleTransportOpen=p._handleTransportOpen.bind(p),p._log=U.default.getInstance(),p.on("error",function(){p._log.warn("Unexpected error handled in pstream")});var g=p;return p.addListener("ready",function(){g.status="ready"}),p.addListener("offline",function(){g.status="offline"}),p.addListener("close",function(){g._log.info('Received "close" from server. Destroying PStream...'),g._destroy()}),p.transport=new p.options.TransportFactory(p._uris,{backoffMaxMs:p.options.backoffMaxMs,maxPreferredDurationMs:p.options.maxPreferredDurationMs}),Object.defineProperties(p,{uri:{enumerable:!0,get:function(){return this.transport.uri}}}),p.transport.on("close",p._handleTransportClose),p.transport.on("error",p._handleTransportError),p.transport.on("message",p._handleTransportMessage),p.transport.on("open",p._handleTransportOpen),p.transport.open(),p}return v(_,E),_}(M.EventEmitter);function O(){var E=typeof navigator<"u"?navigator:{};return{browser:{platform:E.platform||"unknown",userAgent:E.userAgent||"unknown"},p:"browser",plugin:"rtc",v:L.RELEASE_VERSION}}A.prototype._handleTransportClose=function(){this.emit("transportClose"),"disconnected"!==this.status&&("offline"!==this.status&&this.emit("offline",this),this.status="disconnected")},A.prototype._handleTransportError=function(E){this.emit("error",E?typeof E.code<"u"?{error:E}:E:{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new P.SignalingErrors.ConnectionDisconnected}})},A.prototype._handleTransportMessage=function(E){if(E&&E.data&&"string"==typeof E.data){var _=JSON.parse(E.data),b=_.type,y=_.payload,m=void 0===y?{}:y;this.gateway=m.gateway||this.gateway,this.region=m.region||this.region,"error"===b&&m.error&&(m.error.twilioError=new P.SignalingErrors.ConnectionError),this.emit(b,m)}},A.prototype._handleTransportOpen=function(){var E=this;this.status="connected",this.setToken(this.token),this.emit("transportOpen"),this._messageQueue.splice(0,this._messageQueue.length).forEach(function(b){return E._publish.apply(E,b)})},A.toString=function(){return"[Twilio.PStream class]"},A.prototype.toString=function(){return"[Twilio.PStream instance]"},A.prototype.setToken=function(E){this._log.info("Setting token and publishing listen"),this.token=E;var _={browserinfo:O(),token:E};this._publish("listen",_)},A.prototype.sendMessage=function(E,_,b,y,m){void 0===b&&(b="application/json"),this._publish("message",{callsid:E,content:_,contenttype:b,messagetype:y,voiceeventsid:m},!0)},A.prototype.register=function(E){this._publish("register",{media:E},!0)},A.prototype.invite=function(E,_,b,y){this._publish("invite",{callsid:_,preflight:!!b,sdp:E,twilio:y?{params:y}:{}},!0)},A.prototype.reconnect=function(E,_,b,y){this._publish("invite",{callsid:_,preflight:!1,reconnect:b,sdp:E,twilio:y?{params:y}:{}},!0)},A.prototype.answer=function(E,_){this._publish("answer",{sdp:E,callsid:_},!0)},A.prototype.dtmf=function(E,_){this._publish("dtmf",{callsid:E,dtmf:_},!0)},A.prototype.hangup=function(E,_){this._publish("hangup",_?{callsid:E,message:_}:{callsid:E},!0)},A.prototype.reject=function(E){this._publish("reject",{callsid:E},!0)},A.prototype.reinvite=function(E,_){this._publish("reinvite",{sdp:E,callsid:_},!1)},A.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)},A.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this},A.prototype.updatePreferredURI=function(E){this._preferredUri=E,this.transport.updatePreferredURI(E)},A.prototype.updateURIs=function(E){this._uris=E,this.transport.updateURIs(this._uris)},A.prototype.publish=function(E,_){return this._publish(E,_,!0)},A.prototype._publish=function(E,_,b){var y=JSON.stringify({payload:_,type:E,version:"1.6"});this.transport.send(y)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new P.GeneralErrors.TransportError}}),b&&this._messageQueue.push([E,_,!0]))},T.default=A},351:(de,T,S)=>{"use strict";var v;Object.defineProperty(T,"__esModule",{value:!0}),T.getRegionShortcode=T.getChunderURIs=T.createSignalingEndpointURL=T.createEventGatewayURI=T.defaultEdge=T.regionToEdge=T.regionShortcodes=T.Region=T.Edge=void 0;var L,_,P,M=S(287);function k(_){return"voice-js."+_+".twilio.com"}(_=L=T.Edge||(T.Edge={})).Sydney="sydney",_.SaoPaulo="sao-paulo",_.Dublin="dublin",_.Frankfurt="frankfurt",_.Tokyo="tokyo",_.Singapore="singapore",_.Ashburn="ashburn",_.Umatilla="umatilla",_.Roaming="roaming",_.AshburnIx="ashburn-ix",_.SanJoseIx="san-jose-ix",_.LondonIx="london-ix",_.FrankfurtIx="frankfurt-ix",_.SingaporeIx="singapore-ix",_.SydneyIx="sydney-ix",_.TokyoIx="tokyo-ix",function(_){_.Au1="au1",_.Au1Ix="au1-ix",_.Br1="br1",_.De1="de1",_.De1Ix="de1-ix",_.Gll="gll",_.Ie1="ie1",_.Ie1Ix="ie1-ix",_.Ie1Tnx="ie1-tnx",_.Jp1="jp1",_.Jp1Ix="jp1-ix",_.Sg1="sg1",_.Sg1Ix="sg1-ix",_.Sg1Tnx="sg1-tnx",_.Us1="us1",_.Us1Ix="us1-ix",_.Us1Tnx="us1-tnx",_.Us2="us2",_.Us2Ix="us2-ix",_.Us2Tnx="us2-tnx"}(P=T.Region||(T.Region={})),T.regionShortcodes={ASIAPAC_SINGAPORE:P.Sg1,ASIAPAC_SYDNEY:P.Au1,ASIAPAC_TOKYO:P.Jp1,EU_FRANKFURT:P.De1,EU_IRELAND:P.Ie1,SOUTH_AMERICA_SAO_PAULO:P.Br1,US_EAST_VIRGINIA:P.Us1,US_WEST_OREGON:P.Us2},T.regionToEdge=((v={})[P.Au1]=L.Sydney,v[P.Br1]=L.SaoPaulo,v[P.Ie1]=L.Dublin,v[P.De1]=L.Frankfurt,v[P.Jp1]=L.Tokyo,v[P.Sg1]=L.Singapore,v[P.Us1]=L.Ashburn,v[P.Us2]=L.Umatilla,v[P.Gll]=L.Roaming,v[P.Us1Ix]=L.AshburnIx,v[P.Us2Ix]=L.SanJoseIx,v[P.Ie1Ix]=L.LondonIx,v[P.De1Ix]=L.FrankfurtIx,v[P.Sg1Ix]=L.SingaporeIx,v[P.Au1Ix]=L.SydneyIx,v[P.Jp1Ix]=L.TokyoIx,v[P.Us1Tnx]=L.AshburnIx,v[P.Us2Tnx]=L.AshburnIx,v[P.Ie1Tnx]=L.LondonIx,v[P.Sg1Tnx]=L.SingaporeIx,v),T.defaultEdge=L.Roaming,T.createEventGatewayURI=function N(_){return _?"eventgw."+_+".twilio.com":"eventgw.twilio.com"},T.createSignalingEndpointURL=function A(_){return"wss://"+_+"/signal"},T.getChunderURIs=function O(_){if(_&&"string"!=typeof _&&!Array.isArray(_))throw new M.InvalidArgumentError("If `edge` is provided, it must be of type `string` or an array of strings.");return _?(Array.isArray(_)?_:[_]).map(function(m){return k(m)}):[k(T.defaultEdge)]},T.getRegionShortcode=function E(_){return T.regionShortcodes[_]||null}},74:(de,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function S(M,L,P){var U=JSON.stringify(L.body||{}),k=new Headers;L.headers=L.headers||[],Object.entries(L.headers).forEach(function(N){return k.append(N[0],N[1])}),fetch(L.url,{body:U,headers:k,method:M}).then(function(N){return N.text()},P).then(function(N){return P(null,N)},P)};v.get=function(L,P){return new this("GET",L,P)},v.post=function(L,P){return new this("POST",L,P)},T.default=v},11:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=S(287),M=S(819);T.default=function L(P,U){return(U=U||{}).util=U.util||M,U.navigator=U.navigator||(typeof navigator<"u"?navigator:null),new Promise(function(k,N){if(!U.navigator)throw new v.NotSupportedError("getUserMedia is not supported");switch("function"){case typeof(U.navigator.mediaDevices&&U.navigator.mediaDevices.getUserMedia):return k(U.navigator.mediaDevices.getUserMedia(P));case typeof U.navigator.webkitGetUserMedia:return U.navigator.webkitGetUserMedia(P,k,N);case typeof U.navigator.mozGetUserMedia:return U.navigator.mozGetUserMedia(P,k,N);case typeof U.navigator.getUserMedia:return U.navigator.getUserMedia(P,k,N);default:throw new v.NotSupportedError("getUserMedia is not supported")}}).catch(function(k){throw U.util.isFirefox()&&"NotReadableError"===k.name?new v.NotSupportedError("Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.\nRelated Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324"):k})}},168:(de,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.IceCandidate=void 0;var S=function(){function v(M,L){void 0===L&&(L=!1),this.deleted=!1;var P,U=M.candidate.split("network-cost ");U[1]&&(P=parseInt(U[1],10)),this.candidateType=M.type,this.ip=M.ip||M.address,this.isRemote=L,this.networkCost=P,this.port=M.port,this.priority=M.priority,this.protocol=M.protocol,this.relatedAddress=M.relatedAddress,this.relatedPort=M.relatedPort,this.tcpType=M.tcpType,this.transportId=M.sdpMid}return v.prototype.toPayload=function(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}},v}();T.IceCandidate=S},813:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PeerConnection=T.getMediaEngine=T.enabled=void 0;var v=S(578);T.PeerConnection=v.default;var M=S(110);T.enabled=function L(){return M.default.test()},T.getMediaEngine=function P(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}},986:(de,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=typeof window<"u"?window.RTCStatsReport:void 0;function M(f){if(!(this instanceof M))return new M(f);var I=this;Object.defineProperties(this,{_map:{value:f},size:{enumerable:!0,get:function(){return I._map.size}}}),this[Symbol.iterator]=f[Symbol.iterator]}function L(f){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:f.id,localCertificateId:f.stat("localCertificateId"),remoteCertificateId:f.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:f.stat("selectedCandidatePairId"),timestamp:Date.parse(f.timestamp),type:"transport"}}function k(f,I){return{associateStatsId:void 0,codecId:"codec-"+f.id,firCount:I?p(f,"googFirsSent"):void 0,id:f.id,isRemote:void 0,mediaType:f.stat("mediaType"),nackCount:p(f,I?"googNacksSent":"googNacksReceived"),pliCount:p(f,I?"googPlisSent":"googPlisReceived"),qpSum:p(f,"qpSum"),sliCount:void 0,ssrc:f.stat("ssrc"),timestamp:Date.parse(f.timestamp),trackId:"track-"+f.id,transportId:f.stat("transportId")}}function O(f,I){return{candidateType:m(f.stat("candidateType")),deleted:void 0,id:f.id,ip:f.stat("ipAddress"),isRemote:I,port:p(f,"portNumber"),priority:d(f,"priority"),protocol:f.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(f.timestamp),transportId:void 0,type:I?"remote-candidate":"local-candidate",url:void 0}}function y(f){return isNaN(f)||""===f?void 0:parseInt(f,10)/1e3}function m(f){switch(f){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";default:return f}}function p(f,I){var D=f.stat(I);return g(f,I)?parseInt(D,10):void 0}function d(f,I){var D=f.stat(I);return g(f,I)?parseFloat(D):void 0}function c(f,I){var D=f.stat(I);return g(f,I)?"true"===D||!0===D:void 0}function g(f,I){var D=f.stat(I);return typeof D<"u"&&""!==D}v&&((M.prototype=Object.create(v.prototype)).constructor=M),["entries","forEach","get","has","keys","values"].forEach(function(f){M.prototype[f]=function(){for(var I,D=[],x=0;x<arguments.length;x++)D[x]=arguments[x];return(I=this._map)[f].apply(I,D)}}),M.fromArray=function(I){return new M(I.reduce(function(D,x){return D.set(x.id,x),D},new Map))},M.fromRTCStatsResponse=function(I){var D,x=new Map,V=I.result().reduce(function(z,ne){var Q=ne.id;switch(ne.type){case"googCertificate":z.set(Q,function _(f){return{base64Certificate:f.stat("googDerBase64"),fingerprint:f.stat("googFingerprint"),fingerprintAlgorithm:f.stat("googFingerprintAlgorithm"),id:f.id,issuerCertificateId:f.stat("googIssuerId"),timestamp:Date.parse(f.timestamp),type:"certificate"}}(ne));break;case"datachannel":z.set(Q,function b(f){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:f.stat("datachannelid"),id:f.id,label:f.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:f.stat("protocol"),state:f.stat("state"),timestamp:Date.parse(f.timestamp),transportId:f.stat("transportId"),type:"data-channel"}}(ne));break;case"googCandidatePair":c(ne,"googActiveConnection")&&(D=Q),z.set(Q,function E(f){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:p(f,"bytesReceived"),bytesSent:p(f,"bytesSent"),consentRequestsSent:p(f,"consentRequestsSent"),currentRoundTripTime:y(f.stat("googRtt")),id:f.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:f.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:f.stat("remoteCandidateId"),requestsReceived:p(f,"requestsReceived"),requestsSent:p(f,"requestsSent"),responsesReceived:p(f,"responsesReceived"),responsesSent:p(f,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(f.timestamp),totalRoundTripTime:void 0,transportId:f.stat("googChannelId"),type:"candidate-pair",writable:c(f,"googWritable")}}(ne));break;case"localcandidate":z.set(Q,O(ne,!1));break;case"remotecandidate":z.set(Q,O(ne,!0));break;case"ssrc":g(ne,"packetsReceived")?z.set("rtp-"+Q,function N(f){var I=k(f,!0);return Object.assign(I,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:p(f,"bytesReceived"),fractionLost:void 0,framesDecoded:p(f,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:y(f.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:p(f,"packetsLost"),packetsReceived:p(f,"packetsReceived"),packetsRepaired:void 0,roundTripTime:y(f.stat("googRtt")),type:"inbound-rtp"}),I}(ne)):z.set("rtp-"+Q,function A(f){var I=k(f,!1);return Object.assign(I,{bytesSent:p(f,"bytesSent"),framesEncoded:p(f,"framesEncoded"),packetsSent:p(f,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),I}(ne)),z.set("track-"+Q,function U(f){return{audioLevel:g(f,"audioOutputLevel")?p(f,"audioOutputLevel")/32767:(p(f,"audioInputLevel")||0)/32767,detached:void 0,echoReturnLoss:d(f,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:d(f,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:g(f,"googFrameHeightReceived")?p(f,"googFrameHeightReceived"):p(f,"googFrameHeightSent"),frameWidth:g(f,"googFrameWidthReceived")?p(f,"googFrameWidthReceived"):p(f,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:p(f,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:p(f,"framesEncoded"),fullFramesLost:void 0,id:f.id,kind:f.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(f.timestamp),trackIdentifier:f.stat("googTrackId"),type:"track"}}(ne)),z.set("codec-"+Q,function P(f){return{channels:void 0,clockRate:void 0,id:f.id,implementation:void 0,mimeType:f.stat("mediaType")+"/"+f.stat("googCodecName"),payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(f.timestamp),type:"codec"}}(ne));break;case"googComponent":var F=L(ne);x.set(F.selectedCandidatePairId,Q),z.set(Q,L(ne))}return z},new Map);if(D){var q=x.get(D);q&&(V.get(q).dtlsState="connected")}return new M(V)},T.default=M},938:(de,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.isNonNegativeNumber=T.calculate=void 0;var S=94.768;function v(L,P,U){if("number"!=typeof L||"number"!=typeof P||"number"!=typeof U||!M(L)||!M(P)||!M(U))return null;var k=L+2*P+10,N=0;switch(!0){case k<160:N=S-k/40;break;case k<1e3:N=S-(k-120)/10}return 1+.035*(N=1==U<=N/2.5?Math.max(N-2.5*U,6.52):0)+7e-6*N*(N-60)*(100-N)}function M(L){return"number"==typeof L&&!isNaN(L)&&isFinite(L)&&L>=0}T.calculate=v,T.isNonNegativeNumber=M,T.default={calculate:v,isNonNegativeNumber:M}},578:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=S(287),M=S(990),L=S(819),P=S(110),U=S(563);function _(d,c,g,f){if(!d||!c||!g)throw new v.InvalidArgumentError("Audiohelper, pstream and getUserMedia are required arguments");if(!(this instanceof _))return new _(d,c,g,f);function I(){this._log.warn("Unexpected noop call in peerconnection")}this._log=M.default.getInstance(),this.onaudio=I,this.onopen=I,this.onerror=I,this.onclose=I,this.ondisconnected=I,this.onfailed=I,this.onconnected=I,this.onreconnected=I,this.onsignalingstatechange=I,this.ondtlstransportstatechange=I,this.onicegatheringfailure=I,this.onicegatheringstatechange=I,this.oniceconnectionstatechange=I,this.onpcconnectionstatechange=I,this.onicecandidate=I,this.onselectedcandidatepairchange=I,this.onvolume=I,this.version=null,this.pstream=c,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1,this.getUserMedia=g;var D=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!D&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=D&&d._audioContext,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=I,this._onHangup=I,this._remoteStream=null,this._shouldManageStream=!0,this._iceState="new",this._isUnifiedPlan=f.isUnifiedPlan,this.options=f=f||{},this.navigator=f.navigator||(typeof navigator<"u"?navigator:null),this.util=f.util||L,this.codecPreferences=f.codecPreferences,this}function b(d,c){"function"==typeof d.addTrack?c.getAudioTracks().forEach(function(g){d.addTrack(g,c)}):d.addStream(c)}function y(d){var c=typeof MediaStream<"u"?new MediaStream:new webkitMediaStream;return d.getAudioTracks().forEach(c.addTrack,c),c}function p(d,c){if(typeof d.srcObject<"u")d.srcObject=c;else if(typeof d.mozSrcObject<"u")d.mozSrcObject=c;else{if(!(typeof d.src<"u"))return!1;var g=d.options.window||window;d.src=(g.URL||g.webkitURL).createObjectURL(c)}return!0}_.prototype.uri=function(){return this._uri},_.prototype.openWithConstraints=function(d){return this.getUserMedia({audio:d}).then(this._setInputTracksFromStream.bind(this,!1))},_.prototype.setInputTracksFromStream=function(d){var c=this;return this._setInputTracksFromStream(!0,d).then(function(){c._shouldManageStream=!1})},_.prototype._createAnalyser=function(d,c){c=Object.assign({fftSize:32,smoothingTimeConstant:.3},c);var g=d.createAnalyser();for(var f in c)g[f]=c[f];return g},_.prototype._setVolumeHandler=function(d){this.onvolume=d},_.prototype._startPollingVolume=function(){if(this._audioContext&&this.stream&&this._remoteStream){var d=this._audioContext,c=this._inputAnalyser=this._createAnalyser(d),f=new Uint8Array(c.frequencyBinCount);this._inputAnalyser2=this._createAnalyser(d,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});var I=this._outputAnalyser=this._createAnalyser(d),x=new Uint8Array(I.frequencyBinCount);this._outputAnalyser2=this._createAnalyser(d,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);var V=this;setTimeout(function q(){if(V._audioContext){if("closed"===V.status)return V._inputAnalyser.disconnect(),V._outputAnalyser.disconnect(),V._inputAnalyser2.disconnect(),void V._outputAnalyser2.disconnect();V._inputAnalyser.getByteFrequencyData(f);var z=V.util.average(f);V._inputAnalyser2.getByteFrequencyData(f);var ne=V.util.average(f);V._outputAnalyser.getByteFrequencyData(x);var Q=V.util.average(x);V._outputAnalyser2.getByteFrequencyData(x);var F=V.util.average(x);V.onvolume(z/255,Q/255,ne,F),setTimeout(q,50)}},50)}},_.prototype._stopStream=function(c){this._shouldManageStream&&("function"==typeof MediaStreamTrack.prototype.stop?("function"==typeof c.getAudioTracks?c.getAudioTracks():c.audioTracks).forEach(function(f){f.stop()}):c.stop())},_.prototype._updateInputStreamSource=function(d){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(d),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(c){this._log.warn("Unable to update input MediaStreamSource",c),this._inputStreamSource=null}},_.prototype._updateOutputStreamSource=function(d){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(d),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(c){this._log.warn("Unable to update output MediaStreamSource",c),this._outputStreamSource=null}},_.prototype._setInputTracksFromStream=function(d,c){return this._isUnifiedPlan?this._setInputTracksForUnifiedPlan(d,c):this._setInputTracksForPlanB(d,c)},_.prototype._setInputTracksForPlanB=function(d,c){var g=this;if(!c)return Promise.reject(new v.InvalidArgumentError("Can not set input stream to null while in a call"));if(!c.getAudioTracks().length)return Promise.reject(new v.InvalidArgumentError("Supplied input stream has no audio tracks"));var f=this.stream;return f?(this._stopStream(f),function m(d,c){"function"==typeof d.removeTrack?d.getSenders().forEach(function(g){d.removeTrack(g)}):d.removeStream(c)}(this.version.pc,f),f.getAudioTracks().forEach(f.removeTrack,f),c.getAudioTracks().forEach(f.addTrack,f),b(this.version.pc,c),this._updateInputStreamSource(this.stream)):this.stream=d?y(c):c,this.mute(this.isMuted),this.version?new Promise(function(I,D){g.version.createOffer(g.options.maxAverageBitrate,g.codecPreferences,{audio:!0},function(){g.version.processAnswer(g.codecPreferences,g._answerSdp,function(){I(g.stream)},D)},D)}):Promise.resolve(this.stream)},_.prototype._setInputTracksForUnifiedPlan=function(d,c){var g=this;if(!c)return Promise.reject(new v.InvalidArgumentError("Can not set input stream to null while in a call"));if(!c.getAudioTracks().length)return Promise.reject(new v.InvalidArgumentError("Supplied input stream has no audio tracks"));var f=this.stream,I=function(){return g.mute(g.isMuted),Promise.resolve(g.stream)};return f?(this._shouldManageStream&&this._stopStream(f),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(c.getAudioTracks()[0]).then(function(){return g._updateInputStreamSource(c),I()})):(this.stream=d?y(c):c,I())},_.prototype._onInputDevicesChanged=function(){this.stream&&this.stream.getAudioTracks().every(function(c){return"ended"===c.readyState})&&this._shouldManageStream&&this.openWithConstraints(!0)},_.prototype._onIceGatheringFailure=function(d){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(d)},_.prototype._onMediaConnectionStateChange=function(d){var g,c=this._iceState;if(c!==d&&("connected"===d||"disconnected"===d||"failed"===d))switch(this._iceState=d,d){case"connected":"disconnected"===c||"failed"===c?(this._log.info(g="ICE liveliness check succeeded. Connection with Twilio restored"),this.onreconnected(g)):(this._log.info(g="Media connection established."),this.onconnected(g)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":this._log.info(g="ICE liveliness check failed. May be having trouble connecting to Twilio"),this.ondisconnected(g);break;case"failed":this._log.info(g="Connection with Twilio was interrupted."),this.onfailed(g)}},_.prototype._setSinkIds=function(d){return this._isSinkSupported?(this.sinkIds=new Set(d.forEach?d:[d]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new v.NotSupportedError("Audio output selection is not supported by this browser"))},_.prototype._startIceGatheringTimeout=function(){var c=this;this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(function(){c._onIceGatheringFailure("timeout")},15e3)},_.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)},_.prototype._updateAudioOutputs=function(){var c=Array.from(this.sinkIds).filter(function(D){return!this.outputs.has(D)},this),g=Array.from(this.outputs.keys()).filter(function(D){return!this.sinkIds.has(D)},this),f=this,I=c.map(this._createAudioOutput,this);return Promise.all(I).then(function(){return Promise.all(g.map(f._removeAudioOutput,f))})},_.prototype._createAudio=function(c){var g=new Audio(c);return this.onaudio(g),g},_.prototype._createAudioOutput=function(c){var g=null;this._mediaStreamSource&&(g=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(g));var f=this._createAudio();p(f,g&&g.stream?g.stream:this.pcStream);var I=this;return f.setSinkId(c).then(function(){return f.play()}).then(function(){I.outputs.set(c,{audio:f,dest:g})})},_.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)},_.prototype._disableOutput=function(c,g){var f=c.outputs.get(g);f&&(f.audio&&(f.audio.pause(),f.audio.src=""),f.dest&&f.dest.disconnect())},_.prototype._reassignMasterOutput=function(c,g){var f=c.outputs.get(g);c.outputs.delete(g);var I=this,D=Array.from(c.outputs.keys())[0]||"default";return f.audio.setSinkId(D).then(function(){I._disableOutput(c,D),c.outputs.set(D,f),c._masterAudioDeviceId=D}).catch(function(){c.outputs.set(g,f),I._log.info("Could not reassign master output. Attempted to roll back.")})},_.prototype._removeAudioOutput=function(c){return this._masterAudioDeviceId===c?this._reassignMasterOutput(this,c):(this._disableOutput(this,c),this.outputs.delete(c),Promise.resolve())},_.prototype._onAddTrack=function(c,g){var f=c._masterAudio=this._createAudio();p(f,g),f.play();var I=Array.from(c.outputs.keys())[0]||"default";c._masterAudioDeviceId=I,c.outputs.set(I,{audio:f});try{c._mediaStreamSource=c._audioContext.createMediaStreamSource(g)}catch(D){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",D),this._mediaStreamSource=null}c.pcStream=g,c._updateAudioOutputs()},_.prototype._fallbackOnAddTrack=function(c,g){var f=document&&document.createElement("audio");f.autoplay=!0,p(f,g)||c._log.info("Error attaching stream to element."),c.outputs.set("default",{audio:f})},_.prototype._setEncodingParameters=function(d){if(d&&this._sender&&"function"==typeof this._sender.getParameters&&"function"==typeof this._sender.setParameters){var c=this._sender.getParameters();!c.priority&&(!c.encodings||!c.encodings.length)||(c.priority="high",c.encodings&&c.encodings.length&&c.encodings.forEach(function(g){g.priority="high",g.networkPriority="high"}),this._sender.setParameters(c))}},_.prototype._setupPeerConnection=function(d,c){var g=this,f=this,I=new(this.options.rtcpcFactory||P.default)({RTCPeerConnection:this.options.RTCPeerConnection});return I.create(d,c),b(I.pc,this.stream),I.pc["ontrack"in I.pc?"ontrack":"onaddstream"]=function(x){var V=f._remoteStream=x.stream||x.streams[0];"function"==typeof I.pc.getSenders&&(g._sender=I.pc.getSenders()[0]),f._isSinkSupported?f._onAddTrack(f,V):f._fallbackOnAddTrack(f,V),f._startPollingVolume()},I},_.prototype._maybeSetIceAggressiveNomination=function(d){return this.options.forceAggressiveIceNomination?U.setIceAggressiveNomination(d):d},_.prototype._setupChannel=function(){var d=this,c=this.version.pc;this.version.pc.onopen=function(){d.status="open",d.onopen()},this.version.pc.onstatechange=function(){d.version.pc&&"stable"===d.version.pc.readyState&&(d.status="open",d.onopen())},this.version.pc.onsignalingstatechange=function(){d._log.info('signalingState is "'+c.signalingState+'"'),d.version.pc&&"stable"===d.version.pc.signalingState&&(d.status="open",d.onopen()),d.onsignalingstatechange(c.signalingState)},c.onconnectionstatechange=function(g){var f=c.connectionState;if(!f&&g&&g.target){var I=g.target;d._log.info("pc.connectionState not detected. Using target PC. State="+(f=I.connectionState||I.connectionState_))}f?d._log.info('pc.connectionState is "'+f+'"'):d._log.warn('onconnectionstatechange detected but state is "'+f+'"'),d.onpcconnectionstatechange(f),d._onMediaConnectionStateChange(f)},c.onicecandidate=function(g){var f=g.candidate;f&&(d._hasIceCandidates=!0,d.onicecandidate(f),d._setupRTCIceTransportListener()),d._log.info("ICE Candidate: "+JSON.stringify(f))},c.onicegatheringstatechange=function(){var g=c.iceGatheringState;"gathering"===g?d._startIceGatheringTimeout():"complete"===g&&(d._stopIceGatheringTimeout(),d._hasIceCandidates||d._onIceGatheringFailure("none"),d._hasIceCandidates&&d._hasIceGatheringFailures&&d._startIceGatheringTimeout()),d._log.info('pc.iceGatheringState is "'+c.iceGatheringState+'"'),d.onicegatheringstatechange(g)},c.oniceconnectionstatechange=function(){d._log.info('pc.iceConnectionState is "'+c.iceConnectionState+'"'),d.oniceconnectionstatechange(c.iceConnectionState),d._onMediaConnectionStateChange(c.iceConnectionState)}},_.prototype._initializeMediaStream=function(d,c){return"open"!==this.status&&("disconnected"===this.pstream.status?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new v.SignalingErrors.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(d,c),this._setupChannel(),!0))},_.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))},_.prototype._setupRTCDtlsTransportListener=function(){var d=this,c=this.getRTCDtlsTransport();if(c&&!c.onstatechange){var g=function(){d._log.info('dtlsTransportState is "'+c.state+'"'),d.ondtlstransportstatechange(c.state)};g(),c.onstatechange=g}},_.prototype._setupRTCIceTransportListener=function(){var d=this,c=this._getRTCIceTransport();!c||c.onselectedcandidatepairchange||(c.onselectedcandidatepairchange=function(){return d.onselectedcandidatepairchange(c.getSelectedCandidatePair())})},_.prototype.iceRestart=function(){var d=this;this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,this.codecPreferences,{iceRestart:!0}).then(function(){d._removeReconnectionListeners(),d._onAnswerOrRinging=function(c){if(d._removeReconnectionListeners(),c.sdp&&"have-local-offer"===d.version.pc.signalingState){var f=d._maybeSetIceAggressiveNomination(c.sdp);d._answerSdp=f,"closed"!==d.status&&d.version.processAnswer(d.codecPreferences,f,null,function(I){d._log.info("Failed to process answer during ICE Restart. Error: "+(I&&I.message?I.message:I))})}else d._log.info("Invalid state or param during ICE Restart:hasSdp:"+!!c.sdp+", signalingState:"+d.version.pc.signalingState)},d._onHangup=function(){d._log.info("Received hangup during ICE Restart"),d._removeReconnectionListeners()},d.pstream.on("answer",d._onAnswerOrRinging),d.pstream.on("hangup",d._onHangup),d.pstream.reinvite(d.version.getSDP(),d.callSid)}).catch(function(c){var g=c&&c.message?c.message:c;d._log.info("Failed to createOffer during ICE Restart. Error: "+g),d.onfailed(g)})},_.prototype.makeOutgoingCall=function(d,c,g,f,I,D){var x=this;if(this._initializeMediaStream(f,I)){var V=this;this.callSid=g,this._onAnswerOrRinging=function(F){if(F.sdp){var B=x._maybeSetIceAggressiveNomination(F.sdp);V._answerSdp=B,"closed"!==V.status&&V.version.processAnswer(x.codecPreferences,B,q,z),V.pstream.removeListener("answer",V._onAnswerOrRinging),V.pstream.removeListener("ringing",V._onAnswerOrRinging)}},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging),this.version.createOffer(this.options.maxAverageBitrate,this.codecPreferences,{audio:!0},function ne(){"closed"!==V.status&&(V.pstream.invite(V.version.getSDP(),V.callSid,V.options.preflight,c),V._setupRTCDtlsTransportListener())},function Q(F){V.onerror({info:{code:31e3,message:"Error creating the offer: "+(F.message||F),twilioError:new v.MediaErrors.ClientLocalDescFailed}})})}function q(){V.options&&V._setEncodingParameters(V.options.dscp),D(V.version.pc)}function z(F){V.onerror({info:{code:31e3,message:"Error processing answer: "+(F.message||F),twilioError:new v.MediaErrors.ClientRemoteDescFailed}})}},_.prototype.answerIncomingCall=function(d,c,g,f,I){if(this._initializeMediaStream(g,f)){c=this._maybeSetIceAggressiveNomination(c),this._answerSdp=c.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=d;var D=this;this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,c,{audio:!0},function x(){"closed"!==D.status&&(D.pstream.answer(D.version.getSDP(),d),D.options&&D._setEncodingParameters(D.options.dscp),I(D.version.pc),D._setupRTCDtlsTransportListener())},function V(q){D.onerror({info:{code:31e3,message:"Error creating the answer: "+(q.message||q),twilioError:new v.MediaErrors.ClientRemoteDescFailed}})})}},_.prototype.close=function(){this.version&&this.version.pc&&("closed"!==this.version.pc.signalingState&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream(this.stream)),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(function(){}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()},_.prototype.reject=function(d){this.callSid=d},_.prototype.ignore=function(d){this.callSid=d},_.prototype.mute=function(d){this.isMuted=d,this.stream&&(this._sender&&this._sender.track?this._sender.track.enabled=!d:("function"==typeof this.stream.getAudioTracks?this.stream.getAudioTracks():this.stream.audioTracks).forEach(function(g){g.enabled=!d}))},_.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;var c=this,g=this.version.pc;if(!g)return this._log.info("No RTCPeerConnection available to call createDTMFSender on"),null;if("function"==typeof g.getSenders&&("function"==typeof RTCDTMFSender||"function"==typeof RTCDtmfSender)){var f=g.getSenders().find(function(D){return D.dtmf});if(f)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=f.dtmf,this._dtmfSender}if("function"==typeof g.createDTMFSender&&"function"==typeof g.getLocalStreams){var I=g.getLocalStreams().map(function(D){var x=c._getAudioTracks(D);return x&&x[0]})[0];return I?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=g.createDTMFSender(I),this._dtmfSender):(this._log.info("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null},_.prototype.getRTCDtlsTransport=function(){var c=this.version&&this.version.pc&&"function"==typeof this.version.pc.getSenders&&this.version.pc.getSenders()[0];return c&&c.transport||null},_.prototype._canStopMediaStreamTrack=function(){return"function"==typeof MediaStreamTrack.prototype.stop},_.prototype._getAudioTracks=function(d){return"function"==typeof d.getAudioTracks?d.getAudioTracks():d.audioTracks},_.prototype._getRTCIceTransport=function(){var c=this.getRTCDtlsTransport();return c&&c.iceTransport||null},_.protocol=P.default.test()?new P.default:null,_.enabled=P.default.test(),T.default=_},110:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=S(990),M=S(819),L=S(563),P=S(191);function U(O){typeof window>"u"?this.log.info("No RTCPeerConnection implementation available. The window object was not found."):O&&O.RTCPeerConnection?this.RTCPeerConnection=O.RTCPeerConnection:M.isLegacyEdge()?this.RTCPeerConnection=new P(typeof window<"u"?window:global):"function"==typeof window.RTCPeerConnection?this.RTCPeerConnection=window.RTCPeerConnection:"function"==typeof window.webkitRTCPeerConnection?this.RTCPeerConnection=webkitRTCPeerConnection:"function"==typeof window.mozRTCPeerConnection?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}function k(O,E,_,b){return function(){var y=Array.prototype.slice.call(arguments);return new Promise(function(m){var p=O.apply(E,y);if(b){if("object"!=typeof p||"function"!=typeof p.then)throw new Error;m(p)}else m(p)}).catch(function(){return new Promise(function(m,p){O.apply(E,_?[m,p].concat(y):y.concat([m,p]))})})}}function N(O,E){return k(O,E,!0,!0)}function A(O,E){return k(O,E,!1,!1)}U.prototype.create=function(O,E){this.log=v.default.getInstance(),this.pc=new this.RTCPeerConnection(E,O)},U.prototype.createModernConstraints=function(O){if(typeof O>"u")return null;var E=Object.assign({},O);return typeof webkitRTCPeerConnection<"u"&&!M.isLegacyEdge()?(E.mandatory={},typeof O.audio<"u"&&(E.mandatory.OfferToReceiveAudio=O.audio),typeof O.video<"u"&&(E.mandatory.OfferToReceiveVideo=O.video)):(typeof O.audio<"u"&&(E.offerToReceiveAudio=O.audio),typeof O.video<"u"&&(E.offerToReceiveVideo=O.video)),delete E.audio,delete E.video,E},U.prototype.createOffer=function(O,E,_,b,y){var m=this;return _=this.createModernConstraints(_),N(this.pc.createOffer,this.pc)(_).then(function(p){if(!m.pc)return Promise.resolve();var d=L.setMaxAverageBitrate(p.sdp,O);return A(m.pc.setLocalDescription,m.pc)(new RTCSessionDescription({sdp:L.setCodecPreferences(d,E),type:"offer"}))}).then(b,y)},U.prototype.createAnswer=function(O,E,_,b,y){var m=this;return _=this.createModernConstraints(_),N(this.pc.createAnswer,this.pc)(_).then(function(p){if(!m.pc)return Promise.resolve();var d=L.setMaxAverageBitrate(p.sdp,O);return A(m.pc.setLocalDescription,m.pc)(new RTCSessionDescription({sdp:L.setCodecPreferences(d,E),type:"answer"}))}).then(b,y)},U.prototype.processSDP=function(O,E,_,b,y,m){var p=this;_=L.setCodecPreferences(_,E);var d=new RTCSessionDescription({sdp:_,type:"offer"});return A(this.pc.setRemoteDescription,this.pc)(d).then(function(){p.createAnswer(O,E,b,y,m)})},U.prototype.getSDP=function(){return this.pc.localDescription.sdp},U.prototype.processAnswer=function(O,E,_,b){return this.pc?(E=L.setCodecPreferences(E,O),A(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:E,type:"answer"})).then(_,b)):Promise.resolve()},U.test=function(){if("object"==typeof navigator){var O=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(M.isLegacyEdge(navigator))return!1;if(O&&"function"==typeof window.RTCPeerConnection)return!0;if(O&&"function"==typeof window.webkitRTCPeerConnection)return!0;if(O&&"function"==typeof window.mozRTCPeerConnection){try{if("function"!=typeof(new window.mozRTCPeerConnection).getLocalStreams)return!1}catch{return!1}return!0}if(typeof RTCIceGatherer<"u")return!0}return!1},T.default=U},563:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setMaxAverageBitrate=T.setIceAggressiveNomination=T.setCodecPreferences=T.getPreferredCodecInfo=void 0;var v=S(819),M={0:"PCMU",8:"PCMA"};T.getPreferredCodecInfo=function k(d){var c=/a=rtpmap:(\d+) (\S+)/m.exec(d)||[null,"",""];return{codecName:c[2],codecParams:(new RegExp("a=fmtp:"+c[1]+" (\\S+)","m").exec(d)||[null,""])[1]}},T.setIceAggressiveNomination=function N(d){return v.isChrome(window,window.navigator)?d.split("\n").filter(function(c){return-1===c.indexOf("a=ice-lite")}).join("\n"):d},T.setMaxAverageBitrate=function A(d,c){if("number"!=typeof c||c<6e3||c>51e4)return d;var g=/a=rtpmap:(\d+) opus/m.exec(d),I=new RegExp("a=fmtp:"+(g&&g.length?g[1]:111));return d.split("\n").map(function(x){return I.test(x)?x+";maxaveragebitrate="+c:x}).join("\n")},T.setCodecPreferences=function O(d,c){var g=function E(d,c,g){return d.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(f){return"m="+f}).filter(function(f){var I=new RegExp("m="+(c||".*"),"gm"),D=new RegExp("a="+(g||".*"),"gm");return I.test(f)&&D.test(f)})}(d);return[d.split("\r\nm=")[0]].concat(g.map(function(I){if(!/^m=(audio|video)/.test(I))return I;var D=I.match(/^m=(audio|video)/)[1],x=function _(d){return Array.from(function m(d){return function p(d){var g=d.split("\r\n")[0].match(/([0-9]+)/g);return g?g.slice(1).map(function(f){return parseInt(f,10)}):[]}(d).reduce(function(c,g){var f=new RegExp("a=rtpmap:"+g+" ([^/]+)"),I=d.match(f),D=I?I[1].toLowerCase():M[g]?M[g].toLowerCase():"";return c.set(g,D)},new Map)}(d)).reduce(function(c,g){var f=g[0],I=g[1],D=c.get(I)||[];return c.set(I,D.concat(f))},new Map)}(I),V=function b(d,c){c=c.map(function(D){return D.toLowerCase()});var g=v.flatMap(c,function(D){return d.get(D)||[]}),f=v.difference(Array.from(d.keys()),c),I=v.flatMap(f,function(D){return d.get(D)});return g.concat(I)}(x,c),q=function y(d,c){var g=c.split("\r\n"),f=g[0],I=g.slice(1);return[f=f.replace(/([0-9]+\s?)+$/,d.join(" "))].concat(I).join("\r\n")}(V,I),z=x.get("pcma")||[],ne=x.get("pcmu")||[];return("audio"===D?new Set(z.concat(ne)):new Set).has(V[0])?q.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):q})).join("\r\n")}},610:function(de,T,S){"use strict";var v=this&&this.__spreadArrays||function(){for(var b=0,y=0,m=arguments.length;y<m;y++)b+=arguments[y].length;var p=Array(b),d=0;for(y=0;y<m;y++)for(var c=arguments[y],g=0,f=c.length;g<f;g++,d++)p[d]=c[g];return p};Object.defineProperty(T,"__esModule",{value:!0}),T.getRTCIceCandidateStatsReport=T.getRTCStats=void 0;var M=S(287),L=S(986);function k(b,y){return"function"==typeof b.get?b.get(y):b.find(function(m){return m.id===y})}function N(b){if(!b)return Promise.reject(new M.InvalidArgumentError("PeerConnection is null"));if("function"!=typeof b.getStats)return Promise.reject(new M.NotSupportedError("WebRTC statistics are unsupported"));var y;try{y=b.getStats()}catch{y=new Promise(function(p){return b.getStats(p)}).then(L.default.fromRTCStatsResponse)}return y}function E(){}function _(b){var p,y=null,m=new E;Array.from(b.values()).forEach(function(I){if(!I.isRemote){var D=I.type.replace("-","");if(p=p||I.timestamp,I.remoteId){var x=k(b,I.remoteId);x&&x.roundTripTime&&(m.rtt=1e3*x.roundTripTime)}switch(D){case"inboundrtp":m.timestamp=m.timestamp||I.timestamp,m.jitter=1e3*I.jitter,m.packetsLost=I.packetsLost,m.packetsReceived=I.packetsReceived,m.bytesReceived=I.bytesReceived;break;case"outboundrtp":if(m.timestamp=I.timestamp,m.packetsSent=I.packetsSent,m.bytesSent=I.bytesSent,I.codecId){var V=k(b,I.codecId);m.codecName=V?V.mimeType&&V.mimeType.match(/(.*\/)?(.*)/)[2]:I.codecId}break;case"transport":y=I.id}}}),m.timestamp||(m.timestamp=p);var d=k(b,y);if(!d)return m;var c=k(b,d.selectedCandidatePairId);if(!c)return m;var g=k(b,c.localCandidateId),f=k(b,c.remoteCandidateId);return m.rtt||(m.rtt=c&&1e3*c.currentRoundTripTime),Object.assign(m,{localAddress:g&&(g.address||g.ip),remoteAddress:f&&(f.address||f.ip)}),m}T.getRTCStats=function A(b,y){return y=Object.assign({createRTCSample:_},y),N(b).then(y.createRTCSample)},T.getRTCIceCandidateStatsReport=function O(b){return N(b).then(function(y){var I,m=Array.from(y.values()).reduce(function(D,x){switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(function(V){D[V]||(D[V]=[])}),x.type){case"candidate-pair":D.candidatePairs.push(x);break;case"local-candidate":D.localCandidates.push(x);break;case"remote-candidate":D.remoteCandidates.push(x);break;case"transport":x.selectedCandidatePairId&&(D.transport=x)}return D},{}),d=m.localCandidates,c=m.remoteCandidates,g=m.transport,f=m.candidatePairs.find(function(D){return D.selected||g&&D.id===g.selectedCandidatePairId});return f&&(I={localCandidate:d.find(function(D){return D.id===f.localCandidateId}),remoteCandidate:c.find(function(D){return D.id===f.remoteCandidateId})}),{iceCandidateStats:v(d,c),selectedIceCandidatePairStats:I}})}},556:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=S(16);function M(){Object.defineProperties(this,{_eventEmitter:{value:new v.EventEmitter},_handlers:{value:{}}})}M.prototype.dispatchEvent=function(P){return this._eventEmitter.emit(P.type,P)},M.prototype.addEventListener=function(){var P;return(P=this._eventEmitter).addListener.apply(P,arguments)},M.prototype.removeEventListener=function(){var P;return(P=this._eventEmitter).removeListener.apply(P,arguments)},M.prototype._defineEventHandler=function(P){var U=this;Object.defineProperty(this,"on"+P,{get:function(){return U._handlers[P]},set:function(k){var N=U._handlers[P];N&&("function"==typeof k||typeof k>"u"||null===k)&&(U._handlers[P]=null,U.removeEventListener(P,N)),"function"==typeof k&&(U._handlers[P]=k,U.addEventListener(P,k))}})},T.default=M},199:(de,T)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function v(M){Object.defineProperties(this,{deviceId:{get:function(){return M.deviceId}},groupId:{get:function(){return M.groupId}},kind:{get:function(){return M.kind}},label:{get:function(){return M.label}}})}},292:function(de,T,S){"use strict";var m,v=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])})(p,d)},function(p,d){function c(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)});Object.defineProperty(T,"__esModule",{value:!0});var M=S(556),P=null,U=function(m){function p(){var d=m.call(this)||this;d._defineEventHandler("devicechange"),d._defineEventHandler("deviceinfochange");var c=[];return Object.defineProperties(d,{_deviceChangeIsNative:{value:_(d,"devicechange")},_deviceInfoChangeIsNative:{value:_(d,"deviceinfochange")},_knownDevices:{value:c},_pollInterval:{value:null,writable:!0}}),"function"==typeof P.enumerateDevices&&P.enumerateDevices().then(function(g){g.sort(b).forEach(function(f){return c.push(f)})}),d._eventEmitter.on("newListener",function(f){"devicechange"!==f&&"deviceinfochange"!==f||(this._pollInterval=this._pollInterval||setInterval(O.bind(null,this),500))}.bind(d)),d._eventEmitter.on("removeListener",function(){this._pollInterval&&!function A(m){return["devicechange","deviceinfochange"].reduce(function(p,d){return p+m._eventEmitter.listenerCount(d)},0)>0}(this)&&(clearInterval(this._pollInterval),this._pollInterval=null)}.bind(d)),d}return v(p,m),p}(M.default);function O(m){P.enumerateDevices().then(function(p){var d=m._knownDevices,c=d.slice();[].splice.apply(d,[0,d.length].concat(p.sort(b))),!m._deviceChangeIsNative&&function N(m,p){return m.length!==p.length||function E(m,p,d){return p.some(function(c,g){return c[m]!==d[g][m]})}("deviceId",m,p)}(d,c)&&m.dispatchEvent(new Event("devicechange")),!m._deviceInfoChangeIsNative&&function k(m,p){if(m=m.filter(function(c){return"audioinput"===c.kind||"audiooutput"===c.kind}),(p=p.filter(function(c){return"audioinput"===c.kind||"audiooutput"===c.kind})).some(function(c){return!c.deviceId})&&m.some(function(c){return!!c.deviceId}))return!0;var d=p.reduce(function(c,g){return c.set(g.deviceId+"-"+g.kind,g.label)},new Map);return m.some(function(c){var g=d.get(c.deviceId+"-"+c.kind);return typeof g<"u"&&g!==c.label})}(d,c)&&m.dispatchEvent(new Event("deviceinfochange"))})}function _(m,p){var d="on"+p;function c(g){m.dispatchEvent(g)}return d in P&&("addEventListener"in P?P.addEventListener(p,c):P[d]=c,!0)}function b(m,p){return m.deviceId<p.deviceId}U.prototype.enumerateDevices=function(){return P&&"function"==typeof P.enumerateDevices?P.enumerateDevices.apply(P,arguments):null},U.prototype.getUserMedia=function(){return P.getUserMedia.apply(P,arguments)},T.default=function(){return(P=typeof navigator<"u"?navigator.mediaDevices:null)?new U:null}},68:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=S(360),M=S(358),L=S(287);function P(k,N,A){if(!(this instanceof P))return new P(k,N,A);if(!k||!N)throw new L.InvalidArgumentError("name and url are required arguments");(A=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},A)).AudioPlayer=A.audioContext?M.default.bind(M.default,A.audioContext):A.AudioFactory,Object.defineProperties(this,{_Audio:{value:A.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:null!==A.AudioFactory&&"function"==typeof A.AudioFactory.prototype.setSinkId},_maxDuration:{value:A.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new v.AsyncQueue},_playPromise:{value:null,writable:!0},_shouldLoop:{value:A.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get:function(){return!!this._playPromise}},name:{enumerable:!0,value:k},url:{enumerable:!0,value:N}}),this._Audio&&this._play(!0,!1)}function U(k){k&&(k.pause(),k.src="",k.srcObject=null,k.load())}P.prototype._playAudioElement=function(N,A,O){var E=this,_=this._activeEls.get(N);if(!_)throw new L.InvalidArgumentError('sinkId: "'+N+"\" doesn't have an audio element");return _.muted=!!A,_.loop=!!O,_.play().then(function(){return _}).catch(function(b){throw U(_),E._activeEls.delete(N),b})},P.prototype._play=function(N,A){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),A="boolean"==typeof A?A:this._shouldLoop;var O=this;return this._playPromise=Promise.all(this._sinkIds.map(function(b){if(!O._Audio)return Promise.resolve();var y=O._activeEls.get(b);return y?O._playAudioElement(b,N,A):("function"==typeof(y=new O._Audio(O.url)).setAttribute&&y.setAttribute("crossorigin","anonymous"),new Promise(function(m){y.addEventListener("canplaythrough",m)}).then(function(){return(O._isSinkSupported?y.setSinkId(b):Promise.resolve()).then(function(){return O._activeEls.set(b,y),O._playPromise?O._playAudioElement(b,N,A):Promise.resolve()})}))}))},P.prototype._stop=function(){var N=this;this._activeEls.forEach(function(A,O){N._sinkIds.includes(O)?(A.pause(),A.currentTime=0):(U(A),N._activeEls.delete(O))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null},P.prototype.setSinkIds=function(N){this._isSinkSupported&&[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(N=N.forEach?N:[N]))},P.prototype.stop=function(){var N=this;this._operations.enqueue(function(){return N._stop(),Promise.resolve()})},P.prototype.play=function(){var N=this;return this._operations.enqueue(function(){return N._play()})},T.default=P},753:function(de,T,S){"use strict";var I,v=this&&this.__extends||(I=function(D,x){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,q){V.__proto__=q}||function(V,q){for(var z in q)Object.prototype.hasOwnProperty.call(q,z)&&(V[z]=q[z])})(D,x)},function(D,x){function V(){this.constructor=D}I(D,x),D.prototype=null===x?Object.create(x):(V.prototype=x.prototype,new V)}),M=this&&this.__assign||function(){return M=Object.assign||function(I){for(var D,x=1,V=arguments.length;x<V;x++)for(var q in D=arguments[x])Object.prototype.hasOwnProperty.call(D,q)&&(I[q]=D[q]);return I},M.apply(this,arguments)},L=this&&this.__spreadArrays||function(){for(var I=0,D=0,x=arguments.length;D<x;D++)I+=arguments[D].length;var V=Array(I),q=0;for(D=0;D<x;D++)for(var z=arguments[D],ne=0,Q=z.length;ne<Q;ne++,q++)V[q]=z[ne];return V};Object.defineProperty(T,"__esModule",{value:!0});var P=S(16),U=S(287),k=S(938),N=S(610),A=S(819),m={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}},f=function(I){function D(x){var V=I.call(this)||this;V._activeWarnings=new Map,V._currentStreaks=new Map,V._inputVolumes=[],V._outputVolumes=[],V._sampleBuffer=[],V._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},V._warningsEnabled=!0,V._getRTCStats=(x=x||{}).getRTCStats||N.getRTCStats,V._mos=x.Mos||k.default,V._peerConnection=x.peerConnection,V._thresholds=M(M({},m),x.thresholds);var q=Object.values(V._thresholds).map(function(z){return z.sampleCount}).filter(function(z){return!!z});return V._maxSampleCount=Math.max.apply(Math,L([5],q)),V._peerConnection&&V.enable(V._peerConnection),V}return v(D,I),D.prototype.addVolumes=function(x,V){this._inputVolumes.push(x),this._outputVolumes.push(V)},D.prototype.disable=function(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this},D.prototype.disableWarnings=function(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this},D.prototype.enable=function(x){if(x){if(this._peerConnection&&x!==this._peerConnection)throw new U.InvalidArgumentError("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=x}if(!this._peerConnection)throw new U.InvalidArgumentError("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),1e3),this},D.prototype.enableWarnings=function(){return this._warningsEnabled=!0,this},D.prototype.hasActiveWarning=function(x,V){return!!this._activeWarnings.get(x+":"+V)},D.prototype._addSample=function(x){var V=this._sampleBuffer;V.push(x),V.length>this._maxSampleCount&&V.splice(0,V.length-this._maxSampleCount)},D.prototype._clearWarning=function(x,V,q){var z=x+":"+V,ne=this._activeWarnings.get(z);!ne||Date.now()-ne.timeRaised<5e3||(this._activeWarnings.delete(z),this.emit("warning-cleared",M(M({},q),{name:x,threshold:{name:V,value:this._thresholds[x][V]}})))},D.prototype._createSample=function(x,V){var B=x.bytesSent-(V&&V.totals.bytesSent||0),G=x.bytesReceived-(V&&V.totals.bytesReceived||0),w=x.packetsSent-(V&&V.totals.packetsSent||0),j=x.packetsReceived-(V&&V.totals.packetsReceived||0),Y=x.packetsLost-(V&&V.totals.packetsLost||0),le=j+Y,W=le>0?Y/le*100:0,$=x.packetsReceived+x.packetsLost,ee=$>0?x.packetsLost/$*100:100,ae="number"!=typeof x.rtt&&V?V.rtt:x.rtt,be=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(be);var me=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(me),{audioInputLevel:Math.round(A.average(be)),audioOutputLevel:Math.round(A.average(me)),bytesReceived:G,bytesSent:B,codecName:x.codecName,jitter:x.jitter,mos:this._mos.calculate(ae,x.jitter,V&&W),packetsLost:Y,packetsLostFraction:W,packetsReceived:j,packetsSent:w,rtt:ae,timestamp:x.timestamp,totals:{bytesReceived:x.bytesReceived,bytesSent:x.bytesSent,packetsLost:x.packetsLost,packetsLostFraction:ee,packetsReceived:x.packetsReceived,packetsSent:x.packetsSent}}},D.prototype._fetchSample=function(){var x=this;this._getSample().then(function(V){x._addSample(V),x._raiseWarnings(),x.emit("sample",V)}).catch(function(V){x.disable(),x.emit("error",V)})},D.prototype._getSample=function(){var x=this;return this._getRTCStats(this._peerConnection).then(function(V){var q=null;return x._sampleBuffer.length&&(q=x._sampleBuffer[x._sampleBuffer.length-1]),x._createSample(V,q)})},D.prototype._raiseWarning=function(x,V,q){var z=x+":"+V;if(!this._activeWarnings.has(z)){this._activeWarnings.set(z,{timeRaised:Date.now()});var Q,ne=this._thresholds[x];if(Array.isArray(ne)){var F=ne.find(function(B){return V in B});F&&(Q=F[V])}else Q=this._thresholds[x][V];this.emit("warning",M(M({},q),{name:x,threshold:{name:V,value:Q}}))}},D.prototype._raiseWarnings=function(){var x=this;this._warningsEnabled&&Object.keys(this._thresholds).forEach(function(V){return x._raiseWarningsForStat(V)})},D.prototype._raiseWarningsForStat=function(x){var V=this;(Array.isArray(this._thresholds[x])?this._thresholds[x]:[this._thresholds[x]]).forEach(function(z){var ne=V._sampleBuffer,Q=z.clearCount||0,F=z.raiseCount||3,B=z.sampleCount||V._maxSampleCount,G=ne.slice(-B),w=G.map(function(Ce){return Ce[x]});if(!w.some(function(Ce){return typeof Ce>"u"||null===Ce})){var Y;if("number"==typeof z.max&&(Y=function p(I,D){return D.reduce(function(x,V){return x+(V>I?1:0)},0)}(z.max,w),Y>=F?V._raiseWarning(x,"max",{values:w,samples:G}):Y<=Q&&V._clearWarning(x,"max",{values:w,samples:G})),"number"==typeof z.min&&(Y=function d(I,D){return D.reduce(function(x,V){return x+(V<I?1:0)},0)}(z.min,w),Y>=F?V._raiseWarning(x,"min",{values:w,samples:G}):Y<=Q&&V._clearWarning(x,"min",{values:w,samples:G})),"number"==typeof z.maxDuration&&ne.length>1){var le=(G=ne.slice(-2))[0][x],W=G[1][x],$=V._currentStreaks.get(x)||0,ee=le===W?$+1:0;V._currentStreaks.set(x,ee),ee>=z.maxDuration?V._raiseWarning(x,"maxDuration",{value:ee}):0===ee&&V._clearWarning(x,"maxDuration",{value:$})}if("number"==typeof z.minStandardDeviation){var ae=V._supplementalSampleBuffers[x];if(!ae||ae.length<z.sampleCount)return;ae.length>z.sampleCount&&ae.splice(0,ae.length-z.sampleCount);var be=function g(I){return I.reduce(function(D,x){return L(D,x)},[])}(ae.slice(-B)),me=function c(I){if(I.length<=0)return null;var D=I.reduce(function(q,z){return q+z},0)/I.length,x=I.map(function(q){return Math.pow(q-D,2)});return Math.sqrt(x.reduce(function(q,z){return q+z},0)/x.length)}(be);if("number"!=typeof me)return;me<z.minStandardDeviation?V._raiseWarning(x,"minStandardDeviation",{value:me}):V._clearWarning(x,"minStandardDeviation",{value:me})}[["maxAverage",function(Ce,pe){return Ce>pe}],["minAverage",function(Ce,pe){return Ce<pe}]].forEach(function(Ce){var pe=Ce[0],ke=Ce[1];if("number"==typeof z[pe]&&w.length>=B){var ct=A.average(w);ke(ct,z[pe])?V._raiseWarning(x,pe,{values:w,samples:G}):ke(ct,z.clearValue||z[pe])||V._clearWarning(x,pe,{values:w,samples:G})}})}})},D}(P.EventEmitter);T.default=f},819:(de,T)=>{"use strict";function S(b){if(!(this instanceof S))return new S(b);this.message=b}function L(b){return!!b.userAgent.match("Electron")}function P(b,y){var m=!!y.userAgent.match("CriOS"),p=!!y.userAgent.match("HeadlessChrome"),d=typeof b.chrome<"u"&&"Google Inc."===y.vendor&&-1===y.userAgent.indexOf("OPR")&&-1===y.userAgent.indexOf("Edge");return m||L(y)||d||p}function U(b){return!!(b=b||(typeof window>"u"?global.navigator:window.navigator))&&"string"==typeof b.userAgent&&/firefox|fxios/i.test(b.userAgent)}function N(b){return!!b.vendor&&-1!==b.vendor.indexOf("Apple")&&b.userAgent&&-1===b.userAgent.indexOf("CriOS")&&-1===b.userAgent.indexOf("FxiOS")}Object.defineProperty(T,"__esModule",{value:!0}),T.flatMap=T.queryToJson=T.isUnifiedPlanDefault=T.isSafari=T.isLegacyEdge=T.isFirefox=T.isChrome=T.isElectron=T.difference=T.average=T.Exception=void 0,S.prototype.toString=function(){return"Twilio.Exception: "+this.message},T.average=function v(b){return b&&b.length?b.reduce(function(y,m){return y+m})/b.length:0},T.difference=function M(b,y,m){m=m||function(d){return d};var p=new Set(y.map(m));return b.filter(function(d){return!p.has(m(d))})},T.isElectron=L,T.isChrome=P,T.isFirefox=U,T.isLegacyEdge=function k(b){return!!(b=b||(typeof window>"u"?global.navigator:window.navigator))&&"string"==typeof b.userAgent&&/edge\/\d+/i.test(b.userAgent)},T.isSafari=N,T.isUnifiedPlanDefault=function A(b,y,m,p){if(typeof b>"u"||typeof y>"u"||typeof m>"u"||typeof p>"u"||typeof m.prototype>"u"||typeof p.prototype>"u")return!1;if(P(b,y)&&m.prototype.addTransceiver){var d=new m,c=!0;try{d.addTransceiver("audio")}catch{c=!1}return d.close(),c}return!!U(y)||!!N(y)&&"currentDirection"in p.prototype},T.queryToJson=function O(b){return b?b.split("&").reduce(function(y,m){var p=m.split("="),d=p[0],c=decodeURIComponent((p[1]||"").replace(/\+/g,"%20"));return d&&(y[d]=c),y},{}):""},T.flatMap=function E(b,y){var m=b instanceof Map||b instanceof Set?Array.from(b.values()):b;return y=y||function(p){return p},m.reduce(function(p,d){var c=y(d);return p.concat(c)},[])},T.Exception=S},941:(de,T,S)=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.generateVoiceEventSid=void 0;var v=S(95),M=S(287);T.generateVoiceEventSid=function P(){return"KX"+function L(){if("object"!=typeof window)throw new M.NotSupportedError("This platform is not supported.");var U=window.crypto;if("object"!=typeof U)throw new M.NotSupportedError("The `crypto` module is not available on this platform.");if(typeof(U.randomUUID||U.getRandomValues)>"u")throw new M.NotSupportedError("Neither `crypto.randomUUID` or `crypto.getRandomValues` are available on this platform.");if(typeof window.Uint32Array>"u")throw new M.NotSupportedError("The `Uint32Array` module is not available on this platform.");return v(("function"==typeof U.randomUUID?function(){return U.randomUUID()}:function(){return U.getRandomValues(new Uint32Array(32)).toString()})())}()}},483:function(de,T,S){"use strict";var c,v=this&&this.__extends||(c=function(g,f){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var x in D)Object.prototype.hasOwnProperty.call(D,x)&&(I[x]=D[x])})(g,f)},function(g,f){function I(){this.constructor=g}c(g,f),g.prototype=null===f?Object.create(f):(I.prototype=f.prototype,new I)}),M=this&&this.__assign||function(){return M=Object.assign||function(c){for(var g,f=1,I=arguments.length;f<I;f++)for(var D in g=arguments[f])Object.prototype.hasOwnProperty.call(g,D)&&(c[D]=g[D]);return c},M.apply(this,arguments)};Object.defineProperty(T,"__esModule",{value:!0}),T.WSTransportState=void 0;var p,L=S(16),P=S(39),U=S(287),k=S(990),N=globalThis.WebSocket;!function(c){c.Connecting="connecting",c.Closed="closed",c.Open="open"}(p=T.WSTransportState||(T.WSTransportState={}));var d=function(c){function g(f,I){void 0===I&&(I={});var D=c.call(this)||this;return D.state=p.Closed,D._backoffStartTime={preferred:null,primary:null},D._connectedUri=null,D._log=k.default.getInstance(),D._shouldFallback=!1,D._uriIndex=0,D._moveUriIndex=function(){D._uriIndex++,D._uriIndex>=D._uris.length&&(D._uriIndex=0)},D._onSocketClose=function(x){D._log.info("Received websocket close event code: "+x.code+". Reason: "+x.reason),(1006===x.code||1015===x.code)&&(D.emit("error",{code:31005,message:x.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new U.SignalingErrors.ConnectionError}),(D._shouldFallback||!(D.state===p.Open||D._previousState===p.Open))&&D._moveUriIndex(),D._shouldFallback=!0),D._closeSocket()},D._onSocketError=function(x){D._log.info("WebSocket received error: "+x.message),D.emit("error",{code:31e3,message:x.message||"WSTransport socket error",twilioError:new U.SignalingErrors.ConnectionDisconnected})},D._onSocketMessage=function(x){D._setHeartbeatTimeout(),D._socket&&"\n"===x.data?D._socket.send("\n"):D.emit("message",x)},D._onSocketOpen=function(){D._log.info("WebSocket opened successfully."),D._timeOpened=Date.now(),D._shouldFallback=!1,D._setState(p.Open),clearTimeout(D._connectTimeout),D._resetBackoffs(),D._setHeartbeatTimeout(),D.emit("open")},D._options=M(M({},g.defaultConstructorOptions),I),D._uris=f,D._backoff=D._setupBackoffs(),D}return v(g,c),g.prototype.close=function(){this._log.info("WSTransport.close() called..."),this._close()},g.prototype.open=function(){this._log.info("WSTransport.open() called..."),!this._socket||this._socket.readyState!==N.CONNECTING&&this._socket.readyState!==N.OPEN?this._connect(this._preferredUri?this._preferredUri:this._uris[this._uriIndex]):this._log.info("WebSocket already open.")},g.prototype.send=function(f){if(!this._socket||this._socket.readyState!==N.OPEN)return!1;try{this._socket.send(f)}catch(I){return this._log.info("Error while sending message:",I.message),this._closeSocket(),!1}return!0},g.prototype.updatePreferredURI=function(f){this._preferredUri=f},g.prototype.updateURIs=function(f){"string"==typeof f&&(f=[f]),this._uris=f,this._uriIndex=0},g.prototype._close=function(){this._setState(p.Closed),this._closeSocket()},g.prototype._closeSocket=function(){clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),this._socket?(this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===N.CONNECTING||this._socket.readyState===N.OPEN)&&this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>1e4&&this._resetBackoffs(),this.state!==p.Closed&&this._performBackoff(),delete this._socket,this.emit("close")):this._log.info("No WebSocket to clean up.")},g.prototype._connect=function(f,I){var D=this;this._log.info("number"==typeof I?"Attempting to reconnect (retry #"+I+")...":"Attempting to connect..."),this._closeSocket(),this._setState(p.Connecting),this._connectedUri=f;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(x){return this._log.info("Could not connect to endpoint:",x.message),this._close(),void this.emit("error",{code:31e3,message:x.message||"Could not connect to "+this._connectedUri,twilioError:new U.SignalingErrors.ConnectionDisconnected})}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(function(){D._log.info("WebSocket connection attempt timed out."),D._moveUriIndex(),D._closeSocket()},this._options.connectTimeoutMs)},g.prototype._performBackoff=function(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())},g.prototype._resetBackoffs=function(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null},g.prototype._setHeartbeatTimeout=function(){var f=this;clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(function(){f._log.info("No messages received in 15 seconds. Reconnecting..."),f._shouldFallback=!0,f._closeSocket()},15e3)},g.prototype._setState=function(f){this._previousState=this.state,this.state=f},g.prototype._setupBackoffs=function(){var f=this,I={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",I);var D=new P.default(I);D.on("backoff",function(q,z){f.state!==p.Closed?(f._log.info("Will attempt to reconnect Websocket to preferred URI in "+z+"ms"),0===q&&(f._backoffStartTime.preferred=Date.now(),f._log.info("Preferred backoff start; "+f._backoffStartTime.preferred))):f._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.")}),D.on("ready",function(q,z){if(f.state!==p.Closed){if(null!==f._backoffStartTime.preferred)return Date.now()-f._backoffStartTime.preferred>f._options.maxPreferredDurationMs?(f._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),f._preferredUri=null,void f._backoff.primary.backoff()):"string"!=typeof f._preferredUri?(f._log.info("Preferred URI cleared; falling back to primary backoff."),f._preferredUri=null,void f._backoff.primary.backoff()):void f._connect(f._preferredUri,q+1);f._log.info("Preferred backoff start time invalid; not attempting a connection.")}else f._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.")});var x={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(4001*Math.random())+1e3:100};this._log.info("Initializing primary transport backoff using config: ",x);var V=new P.default(x);return V.on("backoff",function(q,z){f.state!==p.Closed?(f._log.info("Will attempt to reconnect WebSocket in "+z+"ms"),0===q&&(f._backoffStartTime.primary=Date.now(),f._log.info("Primary backoff start; "+f._backoffStartTime.primary))):f._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.")}),V.on("ready",function(q,z){f.state!==p.Closed?null!==f._backoffStartTime.primary?Date.now()-f._backoffStartTime.primary>f._options.maxPrimaryDurationMs?f._log.info("Max primary backoff attempt time exceeded; not attempting a connection."):f._connect(f._uris[f._uriIndex],q+1):f._log.info("Primary backoff start time invalid; not attempting a connection."):f._log.info("Primary backoff ready but transport state is closed; not attempting a connection.")}),{preferred:D,primary:V}},Object.defineProperty(g.prototype,"uri",{get:function(){return this._connectedUri},enumerable:!1,configurable:!0}),g.defaultConstructorOptions={WebSocket:N,connectTimeoutMs:5e3,maxPreferredDelayMs:1e3,maxPreferredDurationMs:15e3,maxPrimaryDelayMs:2e4,maxPrimaryDurationMs:1/0},g}(L.EventEmitter);T.default=d},870:de=>{var T={utf8:{stringToBytes:function(S){return T.bin.stringToBytes(unescape(encodeURIComponent(S)))},bytesToString:function(S){return decodeURIComponent(escape(T.bin.bytesToString(S)))}},bin:{stringToBytes:function(S){for(var v=[],M=0;M<S.length;M++)v.push(255&S.charCodeAt(M));return v},bytesToString:function(S){for(var v=[],M=0;M<S.length;M++)v.push(String.fromCharCode(S[M]));return v.join("")}}};de.exports=T},962:de=>{var T,S;T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",de.exports=S={rotl:function(v,M){return v<<M|v>>>32-M},rotr:function(v,M){return v<<32-M|v>>>M},endian:function(v){if(v.constructor==Number)return 16711935&S.rotl(v,8)|4278255360&S.rotl(v,24);for(var M=0;M<v.length;M++)v[M]=S.endian(v[M]);return v},randomBytes:function(v){for(var M=[];v>0;v--)M.push(Math.floor(256*Math.random()));return M},bytesToWords:function(v){for(var M=[],L=0,P=0;L<v.length;L++,P+=8)M[P>>>5]|=v[L]<<24-P%32;return M},wordsToBytes:function(v){for(var M=[],L=0;L<32*v.length;L+=8)M.push(v[L>>>5]>>>24-L%32&255);return M},bytesToHex:function(v){for(var M=[],L=0;L<v.length;L++)M.push((v[L]>>>4).toString(16)),M.push((15&v[L]).toString(16));return M.join("")},hexToBytes:function(v){for(var M=[],L=0;L<v.length;L+=2)M.push(parseInt(v.substr(L,2),16));return M},bytesToBase64:function(v){for(var M=[],L=0;L<v.length;L+=3)for(var P=v[L]<<16|v[L+1]<<8|v[L+2],U=0;U<4;U++)M.push(8*L+6*U<=8*v.length?T.charAt(P>>>6*(3-U)&63):"=");return M.join("")},base64ToBytes:function(v){v=v.replace(/[^A-Z0-9+\/]/gi,"");for(var M=[],L=0,P=0;L<v.length;P=++L%4)0!=P&&M.push((T.indexOf(v.charAt(L-1))&Math.pow(2,-2*P+8)-1)<<2*P|T.indexOf(v.charAt(L))>>>6-2*P);return M}}},16:de=>{"use strict";var v,T="object"==typeof Reflect?Reflect:null,S=T&&"function"==typeof T.apply?T.apply:function(I,D,x){return Function.prototype.apply.call(I,D,x)};v=T&&"function"==typeof T.ownKeys?T.ownKeys:Object.getOwnPropertySymbols?function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.getOwnPropertyNames(I)};var L=Number.isNaN||function(I){return I!=I};function P(){P.init.call(this)}de.exports=P,de.exports.once=function d(f,I){return new Promise(function(D,x){function V(z){f.removeListener(I,q),x(z)}function q(){"function"==typeof f.removeListener&&f.removeListener("error",V),D([].slice.call(arguments))}g(f,I,q,{once:!0}),"error"!==I&&function c(f,I,D){"function"==typeof f.on&&g(f,"error",I,D)}(f,V,{once:!0})})},P.EventEmitter=P,P.prototype._events=void 0,P.prototype._eventsCount=0,P.prototype._maxListeners=void 0;var U=10;function k(f){if("function"!=typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}function N(f){return void 0===f._maxListeners?P.defaultMaxListeners:f._maxListeners}function A(f,I,D,x){var V,q,z;if(k(D),void 0===(q=f._events)?(q=f._events=Object.create(null),f._eventsCount=0):(void 0!==q.newListener&&(f.emit("newListener",I,D.listener?D.listener:D),q=f._events),z=q[I]),void 0===z)z=q[I]=D,++f._eventsCount;else if("function"==typeof z?z=q[I]=x?[D,z]:[z,D]:x?z.unshift(D):z.push(D),(V=N(f))>0&&z.length>V&&!z.warned){z.warned=!0;var ne=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");ne.name="MaxListenersExceededWarning",ne.emitter=f,ne.type=I,ne.count=z.length,function M(f){console&&console.warn&&console.warn(f)}(ne)}return f}function O(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(f,I,D){var x={fired:!1,wrapFn:void 0,target:f,type:I,listener:D},V=O.bind(x);return V.listener=D,x.wrapFn=V,V}function _(f,I,D){var x=f._events;if(void 0===x)return[];var V=x[I];return void 0===V?[]:"function"==typeof V?D?[V.listener||V]:[V]:D?function p(f){for(var I=new Array(f.length),D=0;D<I.length;++D)I[D]=f[D].listener||f[D];return I}(V):y(V,V.length)}function b(f){var I=this._events;if(void 0!==I){var D=I[f];if("function"==typeof D)return 1;if(void 0!==D)return D.length}return 0}function y(f,I){for(var D=new Array(I),x=0;x<I;++x)D[x]=f[x];return D}function g(f,I,D,x){if("function"==typeof f.on)x.once?f.once(I,D):f.on(I,D);else{if("function"!=typeof f.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof f);f.addEventListener(I,function V(q){x.once&&f.removeEventListener(I,V),D(q)})}}Object.defineProperty(P,"defaultMaxListeners",{enumerable:!0,get:function(){return U},set:function(f){if("number"!=typeof f||f<0||L(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");U=f}}),P.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},P.prototype.setMaxListeners=function(I){if("number"!=typeof I||I<0||L(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this},P.prototype.getMaxListeners=function(){return N(this)},P.prototype.emit=function(I){for(var D=[],x=1;x<arguments.length;x++)D.push(arguments[x]);var V="error"===I,q=this._events;if(void 0!==q)V=V&&void 0===q.error;else if(!V)return!1;if(V){var z;if(D.length>0&&(z=D[0]),z instanceof Error)throw z;var ne=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw ne.context=z,ne}var Q=q[I];if(void 0===Q)return!1;if("function"==typeof Q)S(Q,this,D);else{var F=Q.length,B=y(Q,F);for(x=0;x<F;++x)S(B[x],this,D)}return!0},P.prototype.on=P.prototype.addListener=function(I,D){return A(this,I,D,!1)},P.prototype.prependListener=function(I,D){return A(this,I,D,!0)},P.prototype.once=function(I,D){return k(D),this.on(I,E(this,I,D)),this},P.prototype.prependOnceListener=function(I,D){return k(D),this.prependListener(I,E(this,I,D)),this},P.prototype.off=P.prototype.removeListener=function(I,D){var x,V,q,z,ne;if(k(D),void 0===(V=this._events))return this;if(void 0===(x=V[I]))return this;if(x===D||x.listener===D)0==--this._eventsCount?this._events=Object.create(null):(delete V[I],V.removeListener&&this.emit("removeListener",I,x.listener||D));else if("function"!=typeof x){for(q=-1,z=x.length-1;z>=0;z--)if(x[z]===D||x[z].listener===D){ne=x[z].listener,q=z;break}if(q<0)return this;0===q?x.shift():function m(f,I){for(;I+1<f.length;I++)f[I]=f[I+1];f.pop()}(x,q),1===x.length&&(V[I]=x[0]),void 0!==V.removeListener&&this.emit("removeListener",I,ne||D)}return this},P.prototype.removeAllListeners=function(I){var D,x,V;if(void 0===(x=this._events))return this;if(void 0===x.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==x[I]&&(0==--this._eventsCount?this._events=Object.create(null):delete x[I]),this;if(0===arguments.length){var z,q=Object.keys(x);for(V=0;V<q.length;++V)"removeListener"!==(z=q[V])&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(D=x[I]))this.removeListener(I,D);else if(void 0!==D)for(V=D.length-1;V>=0;V--)this.removeListener(I,D[V]);return this},P.prototype.listeners=function(I){return _(this,I,!0)},P.prototype.rawListeners=function(I){return _(this,I,!1)},P.listenerCount=function(f,I){return"function"==typeof f.listenerCount?f.listenerCount(I):b.call(f,I)},P.prototype.listenerCount=b,P.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},678:de=>{function T(v){return!!v.constructor&&"function"==typeof v.constructor.isBuffer&&v.constructor.isBuffer(v)}de.exports=function(v){return null!=v&&(T(v)||function S(v){return"function"==typeof v.readFloatLE&&"function"==typeof v.slice&&T(v.slice(0,0))}(v)||!!v._isBuffer)}},182:function(de,T,S){var v,M;!function(L,P){"use strict";v=function(){var L=function(){},P="undefined",U=typeof window!==P&&typeof window.navigator!==P&&/Trident\/|MSIE /.test(window.navigator.userAgent),k=["trace","debug","info","warn","error"];function N(c,g){var f=c[g];if("function"==typeof f.bind)return f.bind(c);try{return Function.prototype.bind.call(f,c)}catch{return function(){return Function.prototype.apply.apply(f,[c,arguments])}}}function A(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function E(c,g){for(var f=0;f<k.length;f++){var I=k[f];this[I]=f<c?L:this.methodFactory(I,c,g)}this.log=this.debug}function _(c,g,f){return function(){typeof console!==P&&(E.call(this,g,f),this[c].apply(this,arguments))}}function b(c,g,f){return function O(c){return"debug"===c&&(c="log"),typeof console!==P&&("trace"===c&&U?A:void 0!==console[c]?N(console,c):void 0!==console.log?N(console,"log"):L)}(c)||_.apply(this,arguments)}function y(c,g,f){var D,I=this,x="loglevel";function q(){var ne;if(typeof window!==P){try{ne=window.localStorage[x]}catch{}if(typeof ne===P)try{var Q=window.document.cookie,F=Q.indexOf(encodeURIComponent(x)+"=");-1!==F&&(ne=/^([^;]+)/.exec(Q.slice(F))[1])}catch{}return void 0===I.levels[ne]&&(ne=void 0),ne}}c&&(x+=":"+c),I.name=c,I.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},I.methodFactory=f||b,I.getLevel=function(){return D},I.setLevel=function(ne,Q){if("string"==typeof ne&&void 0!==I.levels[ne.toUpperCase()]&&(ne=I.levels[ne.toUpperCase()]),!("number"==typeof ne&&ne>=0&&ne<=I.levels.SILENT))throw"log.setLevel() called with invalid level: "+ne;if(D=ne,!1!==Q&&function V(ne){var Q=(k[ne]||"silent").toUpperCase();if(typeof window!==P){try{return void(window.localStorage[x]=Q)}catch{}try{window.document.cookie=encodeURIComponent(x)+"="+Q+";"}catch{}}}(ne),E.call(I,ne,c),typeof console===P&&ne<I.levels.SILENT)return"No console available for logging"},I.setDefaultLevel=function(ne){q()||I.setLevel(ne,!1)},I.enableAll=function(ne){I.setLevel(I.levels.TRACE,ne)},I.disableAll=function(ne){I.setLevel(I.levels.SILENT,ne)};var z=q();null==z&&(z=g??"WARN"),I.setLevel(z,!1)}var m=new y,p={};m.getLogger=function(g){if("string"!=typeof g||""===g)throw new TypeError("You must supply a name when creating a logger.");var f=p[g];return f||(f=p[g]=new y(g,m.getLevel(),m.methodFactory)),f};var d=typeof window!==P?window.log:void 0;return m.noConflict=function(){return typeof window!==P&&window.log===m&&(window.log=d),m},m.getLoggers=function(){return p},m},void 0!==(M=v.call(T,S,T,de))&&(de.exports=M)}()},95:(de,T,S)=>{var v,M,L,P,U;v=S(962),M=S(870).utf8,L=S(678),P=S(870).bin,(U=function(k,N){k.constructor==String?k=N&&"binary"===N.encoding?P.stringToBytes(k):M.stringToBytes(k):L(k)?k=Array.prototype.slice.call(k,0):!Array.isArray(k)&&k.constructor!==Uint8Array&&(k=k.toString());for(var A=v.bytesToWords(k),O=8*k.length,E=1732584193,_=-271733879,b=-1732584194,y=271733878,m=0;m<A.length;m++)A[m]=16711935&(A[m]<<8|A[m]>>>24)|4278255360&(A[m]<<24|A[m]>>>8);A[O>>>5]|=128<<O%32,A[14+(O+64>>>9<<4)]=O;var p=U._ff,d=U._gg,c=U._hh,g=U._ii;for(m=0;m<A.length;m+=16){var f=E,I=_,D=b,x=y;E=p(E,_,b,y,A[m+0],7,-680876936),y=p(y,E,_,b,A[m+1],12,-389564586),b=p(b,y,E,_,A[m+2],17,606105819),_=p(_,b,y,E,A[m+3],22,-1044525330),E=p(E,_,b,y,A[m+4],7,-176418897),y=p(y,E,_,b,A[m+5],12,1200080426),b=p(b,y,E,_,A[m+6],17,-1473231341),_=p(_,b,y,E,A[m+7],22,-45705983),E=p(E,_,b,y,A[m+8],7,1770035416),y=p(y,E,_,b,A[m+9],12,-1958414417),b=p(b,y,E,_,A[m+10],17,-42063),_=p(_,b,y,E,A[m+11],22,-1990404162),E=p(E,_,b,y,A[m+12],7,1804603682),y=p(y,E,_,b,A[m+13],12,-40341101),b=p(b,y,E,_,A[m+14],17,-1502002290),E=d(E,_=p(_,b,y,E,A[m+15],22,1236535329),b,y,A[m+1],5,-165796510),y=d(y,E,_,b,A[m+6],9,-1069501632),b=d(b,y,E,_,A[m+11],14,643717713),_=d(_,b,y,E,A[m+0],20,-373897302),E=d(E,_,b,y,A[m+5],5,-701558691),y=d(y,E,_,b,A[m+10],9,38016083),b=d(b,y,E,_,A[m+15],14,-660478335),_=d(_,b,y,E,A[m+4],20,-405537848),E=d(E,_,b,y,A[m+9],5,568446438),y=d(y,E,_,b,A[m+14],9,-1019803690),b=d(b,y,E,_,A[m+3],14,-187363961),_=d(_,b,y,E,A[m+8],20,1163531501),E=d(E,_,b,y,A[m+13],5,-1444681467),y=d(y,E,_,b,A[m+2],9,-51403784),b=d(b,y,E,_,A[m+7],14,1735328473),E=c(E,_=d(_,b,y,E,A[m+12],20,-1926607734),b,y,A[m+5],4,-378558),y=c(y,E,_,b,A[m+8],11,-2022574463),b=c(b,y,E,_,A[m+11],16,1839030562),_=c(_,b,y,E,A[m+14],23,-35309556),E=c(E,_,b,y,A[m+1],4,-1530992060),y=c(y,E,_,b,A[m+4],11,1272893353),b=c(b,y,E,_,A[m+7],16,-155497632),_=c(_,b,y,E,A[m+10],23,-1094730640),E=c(E,_,b,y,A[m+13],4,681279174),y=c(y,E,_,b,A[m+0],11,-358537222),b=c(b,y,E,_,A[m+3],16,-722521979),_=c(_,b,y,E,A[m+6],23,76029189),E=c(E,_,b,y,A[m+9],4,-640364487),y=c(y,E,_,b,A[m+12],11,-421815835),b=c(b,y,E,_,A[m+15],16,530742520),E=g(E,_=c(_,b,y,E,A[m+2],23,-995338651),b,y,A[m+0],6,-198630844),y=g(y,E,_,b,A[m+7],10,1126891415),b=g(b,y,E,_,A[m+14],15,-1416354905),_=g(_,b,y,E,A[m+5],21,-57434055),E=g(E,_,b,y,A[m+12],6,1700485571),y=g(y,E,_,b,A[m+3],10,-1894986606),b=g(b,y,E,_,A[m+10],15,-1051523),_=g(_,b,y,E,A[m+1],21,-2054922799),E=g(E,_,b,y,A[m+8],6,1873313359),y=g(y,E,_,b,A[m+15],10,-30611744),b=g(b,y,E,_,A[m+6],15,-1560198380),_=g(_,b,y,E,A[m+13],21,1309151649),E=g(E,_,b,y,A[m+4],6,-145523070),y=g(y,E,_,b,A[m+11],10,-1120210379),b=g(b,y,E,_,A[m+2],15,718787259),_=g(_,b,y,E,A[m+9],21,-343485551),E=E+f>>>0,_=_+I>>>0,b=b+D>>>0,y=y+x>>>0}return v.endian([E,_,b,y])})._ff=function(k,N,A,O,E,_,b){var y=k+(N&A|~N&O)+(E>>>0)+b;return(y<<_|y>>>32-_)+N},U._gg=function(k,N,A,O,E,_,b){var y=k+(N&O|A&~O)+(E>>>0)+b;return(y<<_|y>>>32-_)+N},U._hh=function(k,N,A,O,E,_,b){var y=k+(N^A^O)+(E>>>0)+b;return(y<<_|y>>>32-_)+N},U._ii=function(k,N,A,O,E,_,b){var y=k+(A^(N|~O))+(E>>>0)+b;return(y<<_|y>>>32-_)+N},U._blocksize=16,U._digestsize=16,de.exports=function(k,N){if(null==k)throw new Error("Illegal argument "+k);var A=v.wordsToBytes(U(k,N));return N&&N.asBytes?A:N&&N.asString?P.bytesToString(A):v.bytesToHex(A)}},191:(de,T,S)=>{"use strict";var v=S(917);function M(A,O,E,_,b){var y=v.writeRtpDescription(A.kind,O);if(y+=v.writeIceParameters(A.iceGatherer.getLocalParameters()),y+=v.writeDtlsParameters(A.dtlsTransport.getLocalParameters(),"offer"===E?"actpass":b||"active"),y+="a=mid:"+A.mid+"\r\n",y+=A.rtpSender&&A.rtpReceiver?"a=sendrecv\r\n":A.rtpSender?"a=sendonly\r\n":A.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",A.rtpSender){var m=A.rtpSender._initialTrackId||A.rtpSender.track.id;A.rtpSender._initialTrackId=m;var p="msid:"+(_?_.id:"-")+" "+m+"\r\n";y+="a="+p,y+="a=ssrc:"+A.sendEncodingParameters[0].ssrc+" "+p,A.sendEncodingParameters[0].rtx&&(y+="a=ssrc:"+A.sendEncodingParameters[0].rtx.ssrc+" "+p,y+="a=ssrc-group:FID "+A.sendEncodingParameters[0].ssrc+" "+A.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return y+="a=ssrc:"+A.sendEncodingParameters[0].ssrc+" cname:"+v.localCName+"\r\n",A.rtpSender&&A.sendEncodingParameters[0].rtx&&(y+="a=ssrc:"+A.sendEncodingParameters[0].rtx.ssrc+" cname:"+v.localCName+"\r\n"),y}function P(A,O){var E={codecs:[],headerExtensions:[],fecMechanisms:[]},_=function(y,m){y=parseInt(y,10);for(var p=0;p<m.length;p++)if(m[p].payloadType===y||m[p].preferredPayloadType===y)return m[p]},b=function(y,m,p,d){var c=_(y.parameters.apt,p),g=_(m.parameters.apt,d);return c&&g&&c.name.toLowerCase()===g.name.toLowerCase()};return A.codecs.forEach(function(y){for(var m=0;m<O.codecs.length;m++){var p=O.codecs[m];if(y.name.toLowerCase()===p.name.toLowerCase()&&y.clockRate===p.clockRate){if("rtx"===y.name.toLowerCase()&&y.parameters&&p.parameters.apt&&!b(y,p,A.codecs,O.codecs))continue;(p=JSON.parse(JSON.stringify(p))).numChannels=Math.min(y.numChannels,p.numChannels),E.codecs.push(p),p.rtcpFeedback=p.rtcpFeedback.filter(function(d){for(var c=0;c<y.rtcpFeedback.length;c++)if(y.rtcpFeedback[c].type===d.type&&y.rtcpFeedback[c].parameter===d.parameter)return!0;return!1});break}}}),A.headerExtensions.forEach(function(y){for(var m=0;m<O.headerExtensions.length;m++){var p=O.headerExtensions[m];if(y.uri===p.uri){E.headerExtensions.push(p);break}}}),E}function U(A,O,E){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[O][A].indexOf(E)}function k(A,O){var E=A.getRemoteCandidates().find(function(_){return O.foundation===_.foundation&&O.ip===_.ip&&O.port===_.port&&O.priority===_.priority&&O.protocol===_.protocol&&O.type===_.type});return E||A.addRemoteCandidate(O),!E}function N(A,O){var E=new Error(O);return E.name=A,E}de.exports=function(A,O){function E(p,d){d.addTrack(p),d.dispatchEvent(new A.MediaStreamTrackEvent("addtrack",{track:p}))}function b(p,d,c,g){var f=new Event("track");f.track=d,f.receiver=c,f.transceiver={receiver:c},f.streams=g,A.setTimeout(function(){p._dispatchEvent("track",f)})}var y=function(p){var d=this,c=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(f){d[f]=c[f].bind(c)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",p=JSON.parse(JSON.stringify(p||{})),this.usingBundle="max-bundle"===p.bundlePolicy,"negotiate"===p.rtcpMuxPolicy)throw N("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(p.rtcpMuxPolicy||(p.rtcpMuxPolicy="require"),p.iceTransportPolicy){case"all":case"relay":break;default:p.iceTransportPolicy="all"}switch(p.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:p.bundlePolicy="balanced"}if(p.iceServers=function L(A,O){var E=!1;return(A=JSON.parse(JSON.stringify(A))).filter(function(_){if(_&&(_.urls||_.url)){var b=_.urls||_.url;_.url&&!_.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var y="string"==typeof b;return y&&(b=[b]),b=b.filter(function(m){return 0!==m.indexOf("turn:")||-1===m.indexOf("transport=udp")||-1!==m.indexOf("turn:[")||E?0===m.indexOf("stun:")&&O>=14393&&-1===m.indexOf("?transport=udp"):(E=!0,!0)}),delete _.url,_.urls=y?b[0]:b,!!b.length}})}(p.iceServers||[],O),this._iceGatherers=[],p.iceCandidatePoolSize)for(var g=p.iceCandidatePoolSize;g>0;g--)this._iceGatherers.push(new A.RTCIceGatherer({iceServers:p.iceServers,gatherPolicy:p.iceTransportPolicy}));else p.iceCandidatePoolSize=0;this._config=p,this.transceivers=[],this._sdpSessionId=v.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};y.prototype.onicecandidate=null,y.prototype.onaddstream=null,y.prototype.ontrack=null,y.prototype.onremovestream=null,y.prototype.onsignalingstatechange=null,y.prototype.oniceconnectionstatechange=null,y.prototype.onicegatheringstatechange=null,y.prototype.onnegotiationneeded=null,y.prototype.ondatachannel=null,y.prototype._dispatchEvent=function(p,d){this._isClosed||(this.dispatchEvent(d),"function"==typeof this["on"+p]&&this["on"+p](d))},y.prototype._emitGatheringStateChange=function(){var p=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",p)},y.prototype.getConfiguration=function(){return this._config},y.prototype.getLocalStreams=function(){return this.localStreams},y.prototype.getRemoteStreams=function(){return this.remoteStreams},y.prototype._createTransceiver=function(p){var c={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:p,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)c.iceTransport=this.transceivers[0].iceTransport,c.dtlsTransport=this.transceivers[0].dtlsTransport;else{var g=this._createIceAndDtlsTransports();c.iceTransport=g.iceTransport,c.dtlsTransport=g.dtlsTransport}return this.transceivers.push(c),c},y.prototype.addTrack=function(p,d){if(this._isClosed)throw N("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(I){return I.track===p}))throw N("InvalidAccessError","Track already exists.");for(var g,f=0;f<this.transceivers.length;f++)!this.transceivers[f].track&&this.transceivers[f].kind===p.kind&&(g=this.transceivers[f]);return g||(g=this._createTransceiver(p.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(d)&&this.localStreams.push(d),g.track=p,g.stream=d,g.rtpSender=new A.RTCRtpSender(p,g.dtlsTransport),g.rtpSender},y.prototype.addStream=function(p){var d=this;if(O>=15025)p.getTracks().forEach(function(g){d.addTrack(g,p)});else{var c=p.clone();p.getTracks().forEach(function(g,f){var I=c.getTracks()[f];g.addEventListener("enabled",function(D){I.enabled=D.enabled})}),c.getTracks().forEach(function(g){d.addTrack(g,c)})}},y.prototype.removeTrack=function(p){if(this._isClosed)throw N("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(p instanceof A.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var d=this.transceivers.find(function(f){return f.rtpSender===p});if(!d)throw N("InvalidAccessError","Sender was not created by this connection.");var c=d.stream;d.rtpSender.stop(),d.rtpSender=null,d.track=null,d.stream=null,-1===this.transceivers.map(function(f){return f.stream}).indexOf(c)&&this.localStreams.indexOf(c)>-1&&this.localStreams.splice(this.localStreams.indexOf(c),1),this._maybeFireNegotiationNeeded()},y.prototype.removeStream=function(p){var d=this;p.getTracks().forEach(function(c){var g=d.getSenders().find(function(f){return f.track===c});g&&d.removeTrack(g)})},y.prototype.getSenders=function(){return this.transceivers.filter(function(p){return!!p.rtpSender}).map(function(p){return p.rtpSender})},y.prototype.getReceivers=function(){return this.transceivers.filter(function(p){return!!p.rtpReceiver}).map(function(p){return p.rtpReceiver})},y.prototype._createIceGatherer=function(p,d){var c=this;if(d&&p>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var g=new A.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(g,"state",{value:"new",writable:!0}),this.transceivers[p].bufferedCandidateEvents=[],this.transceivers[p].bufferCandidates=function(f){var I=!f.candidate||0===Object.keys(f.candidate).length;g.state=I?"completed":"gathering",null!==c.transceivers[p].bufferedCandidateEvents&&c.transceivers[p].bufferedCandidateEvents.push(f)},g.addEventListener("localcandidate",this.transceivers[p].bufferCandidates),g},y.prototype._gather=function(p,d){var c=this,g=this.transceivers[d].iceGatherer;if(!g.onlocalcandidate){var f=this.transceivers[d].bufferedCandidateEvents;this.transceivers[d].bufferedCandidateEvents=null,g.removeEventListener("localcandidate",this.transceivers[d].bufferCandidates),g.onlocalcandidate=function(I){if(!(c.usingBundle&&d>0)){var D=new Event("icecandidate");D.candidate={sdpMid:p,sdpMLineIndex:d};var x=I.candidate,V=!x||0===Object.keys(x).length;if(V)("new"===g.state||"gathering"===g.state)&&(g.state="completed");else{"new"===g.state&&(g.state="gathering"),x.component=1;var q=v.writeCandidate(x);D.candidate=Object.assign(D.candidate,v.parseCandidate(q)),D.candidate.candidate=q}var z=v.getMediaSections(c.localDescription.sdp);z[D.candidate.sdpMLineIndex]+=V?"a=end-of-candidates\r\n":"a="+D.candidate.candidate+"\r\n",c.localDescription.sdp=v.getDescription(c.localDescription.sdp)+z.join("");var ne=c.transceivers.every(function(Q){return Q.iceGatherer&&"completed"===Q.iceGatherer.state});"gathering"!==c.iceGatheringState&&(c.iceGatheringState="gathering",c._emitGatheringStateChange()),V||c._dispatchEvent("icecandidate",D),ne&&(c._dispatchEvent("icecandidate",new Event("icecandidate")),c.iceGatheringState="complete",c._emitGatheringStateChange())}},A.setTimeout(function(){f.forEach(function(I){g.onlocalcandidate(I)})},0)}},y.prototype._createIceAndDtlsTransports=function(){var p=this,d=new A.RTCIceTransport(null);d.onicestatechange=function(){p._updateConnectionState()};var c=new A.RTCDtlsTransport(d);return c.ondtlsstatechange=function(){p._updateConnectionState()},c.onerror=function(){Object.defineProperty(c,"state",{value:"failed",writable:!0}),p._updateConnectionState()},{iceTransport:d,dtlsTransport:c}},y.prototype._disposeIceAndDtlsTransports=function(p){var d=this.transceivers[p].iceGatherer;d&&(delete d.onlocalcandidate,delete this.transceivers[p].iceGatherer);var c=this.transceivers[p].iceTransport;c&&(delete c.onicestatechange,delete this.transceivers[p].iceTransport);var g=this.transceivers[p].dtlsTransport;g&&(delete g.ondtlsstatechange,delete g.onerror,delete this.transceivers[p].dtlsTransport)},y.prototype._transceive=function(p,d,c){var g=P(p.localCapabilities,p.remoteCapabilities);d&&p.rtpSender&&(g.encodings=p.sendEncodingParameters,g.rtcp={cname:v.localCName,compound:p.rtcpParameters.compound},p.recvEncodingParameters.length&&(g.rtcp.ssrc=p.recvEncodingParameters[0].ssrc),p.rtpSender.send(g)),c&&p.rtpReceiver&&g.codecs.length>0&&("video"===p.kind&&p.recvEncodingParameters&&O<15019&&p.recvEncodingParameters.forEach(function(f){delete f.rtx}),g.encodings=p.recvEncodingParameters.length?p.recvEncodingParameters:[{}],g.rtcp={compound:p.rtcpParameters.compound},p.rtcpParameters.cname&&(g.rtcp.cname=p.rtcpParameters.cname),p.sendEncodingParameters.length&&(g.rtcp.ssrc=p.sendEncodingParameters[0].ssrc),p.rtpReceiver.receive(g))},y.prototype.setLocalDescription=function(p){var c,g,d=this;if(-1===["offer","answer"].indexOf(p.type))return Promise.reject(N("TypeError",'Unsupported type "'+p.type+'"'));if(!U("setLocalDescription",p.type,d.signalingState)||d._isClosed)return Promise.reject(N("InvalidStateError","Can not set local "+p.type+" in state "+d.signalingState));if("offer"===p.type)c=v.splitSections(p.sdp),g=c.shift(),c.forEach(function(I,D){var x=v.parseRtpParameters(I);d.transceivers[D].localCapabilities=x}),d.transceivers.forEach(function(I,D){d._gather(I.mid,D)});else if("answer"===p.type){c=v.splitSections(d.remoteDescription.sdp),g=c.shift();var f=v.matchPrefix(g,"a=ice-lite").length>0;c.forEach(function(I,D){var x=d.transceivers[D],V=x.iceGatherer,q=x.iceTransport,z=x.dtlsTransport,ne=x.localCapabilities,Q=x.remoteCapabilities;if(!(v.isRejected(I)&&0===v.matchPrefix(I,"a=bundle-only").length||x.isDatachannel)){var B=v.getIceParameters(I,g),G=v.getDtlsParameters(I,g);f&&(G.role="server"),(!d.usingBundle||0===D)&&(d._gather(x.mid,D),"new"===q.state&&q.start(V,B,f?"controlling":"controlled"),"new"===z.state&&z.start(G));var w=P(ne,Q);d._transceive(x,w.codecs.length>0,!1)}})}return d.localDescription={type:p.type,sdp:p.sdp},d._updateSignalingState("offer"===p.type?"have-local-offer":"stable"),Promise.resolve()},y.prototype.setRemoteDescription=function(p){var d=this;if(-1===["offer","answer"].indexOf(p.type))return Promise.reject(N("TypeError",'Unsupported type "'+p.type+'"'));if(!U("setRemoteDescription",p.type,d.signalingState)||d._isClosed)return Promise.reject(N("InvalidStateError","Can not set remote "+p.type+" in state "+d.signalingState));var c={};d.remoteStreams.forEach(function(q){c[q.id]=q});var g=[],f=v.splitSections(p.sdp),I=f.shift(),D=v.matchPrefix(I,"a=ice-lite").length>0,x=v.matchPrefix(I,"a=group:BUNDLE ").length>0;d.usingBundle=x;var V=v.matchPrefix(I,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!V&&V.substr(14).split(" ").indexOf("trickle")>=0,f.forEach(function(q,z){var ne=v.splitLines(q),Q=v.getKind(q),F=v.isRejected(q)&&0===v.matchPrefix(q,"a=bundle-only").length,B=ne[0].substr(2).split(" ")[2],G=v.getDirection(q,I),w=v.parseMsid(q),j=v.getMid(q)||v.generateIdentifier();if("application"!==Q||"DTLS/SCTP"!==B){var Y,le,W,$,ee,ae,be,me,Ce,ke,ct,pe=v.parseRtpParameters(q);F||(ke=v.getIceParameters(q,I),(ct=v.getDtlsParameters(q,I)).role="client"),be=v.parseRtpEncodingParameters(q);var Ke=v.parseRtcpParameters(q),jt=v.matchPrefix(q,"a=end-of-candidates",I).length>0,Jn=v.matchPrefix(q,"a=candidate:").map(function(Rt){return v.parseCandidate(Rt)}).filter(function(Rt){return 1===Rt.component});if(("offer"===p.type||"answer"===p.type)&&!F&&x&&z>0&&d.transceivers[z]&&(d._disposeIceAndDtlsTransports(z),d.transceivers[z].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[z].iceTransport=d.transceivers[0].iceTransport,d.transceivers[z].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[z].rtpSender&&d.transceivers[z].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[z].rtpReceiver&&d.transceivers[z].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==p.type||F)"answer"===p.type&&!F&&(le=(Y=d.transceivers[z]).iceGatherer,W=Y.iceTransport,$=Y.dtlsTransport,ee=Y.rtpReceiver,ae=Y.sendEncodingParameters,me=Y.localCapabilities,d.transceivers[z].recvEncodingParameters=be,d.transceivers[z].remoteCapabilities=pe,d.transceivers[z].rtcpParameters=Ke,Jn.length&&"new"===W.state&&(!D&&!jt||x&&0!==z?Jn.forEach(function(Rt){k(Y.iceTransport,Rt)}):W.setRemoteCandidates(Jn)),(!x||0===z)&&("new"===W.state&&W.start(le,ke,"controlling"),"new"===$.state&&$.start(ct)),d._transceive(Y,"sendrecv"===G||"recvonly"===G,"sendrecv"===G||"sendonly"===G),!ee||"sendrecv"!==G&&"sendonly"!==G?delete Y.rtpReceiver:(Ce=ee.track,w?(c[w.stream]||(c[w.stream]=new A.MediaStream),E(Ce,c[w.stream]),g.push([Ce,ee,c[w.stream]])):(c.default||(c.default=new A.MediaStream),E(Ce,c.default),g.push([Ce,ee,c.default]))));else{(Y=d.transceivers[z]||d._createTransceiver(Q)).mid=j,Y.iceGatherer||(Y.iceGatherer=d._createIceGatherer(z,x)),Jn.length&&"new"===Y.iceTransport.state&&(!jt||x&&0!==z?Jn.forEach(function(Rt){k(Y.iceTransport,Rt)}):Y.iceTransport.setRemoteCandidates(Jn)),me=A.RTCRtpReceiver.getCapabilities(Q),O<15019&&(me.codecs=me.codecs.filter(function(Rt){return"rtx"!==Rt.name})),ae=Y.sendEncodingParameters||[{ssrc:1001*(2*z+2)}];var zn,mr=!1;"sendrecv"===G||"sendonly"===G?(mr=!Y.rtpReceiver,ee=Y.rtpReceiver||new A.RTCRtpReceiver(Y.dtlsTransport,Q),mr&&(Ce=ee.track,w&&"-"===w.stream||(w?(c[w.stream]||(c[w.stream]=new A.MediaStream,Object.defineProperty(c[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(Ce,"id",{get:function(){return w.track}}),zn=c[w.stream]):(c.default||(c.default=new A.MediaStream),zn=c.default)),zn&&(E(Ce,zn),Y.associatedRemoteMediaStreams.push(zn)),g.push([Ce,ee,zn]))):Y.rtpReceiver&&Y.rtpReceiver.track&&(Y.associatedRemoteMediaStreams.forEach(function(Rt){var Wo=Rt.getTracks().find(function(Pf){return Pf.id===Y.rtpReceiver.track.id});Wo&&function _(p,d){d.removeTrack(p),d.dispatchEvent(new A.MediaStreamTrackEvent("removetrack",{track:p}))}(Wo,Rt)}),Y.associatedRemoteMediaStreams=[]),Y.localCapabilities=me,Y.remoteCapabilities=pe,Y.rtpReceiver=ee,Y.rtcpParameters=Ke,Y.sendEncodingParameters=ae,Y.recvEncodingParameters=be,d._transceive(d.transceivers[z],!1,mr)}}else d.transceivers[z]={mid:j,isDatachannel:!0}}),void 0===d._dtlsRole&&(d._dtlsRole="offer"===p.type?"active":"passive"),d.remoteDescription={type:p.type,sdp:p.sdp},d._updateSignalingState("offer"===p.type?"have-remote-offer":"stable"),Object.keys(c).forEach(function(q){var z=c[q];if(z.getTracks().length){if(-1===d.remoteStreams.indexOf(z)){d.remoteStreams.push(z);var ne=new Event("addstream");ne.stream=z,A.setTimeout(function(){d._dispatchEvent("addstream",ne)})}g.forEach(function(Q){z.id===Q[2].id&&b(d,Q[0],Q[1],[z])})}}),g.forEach(function(q){q[2]||b(d,q[0],q[1],[])}),A.setTimeout(function(){d&&d.transceivers&&d.transceivers.forEach(function(q){q.iceTransport&&"new"===q.iceTransport.state&&q.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),q.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},y.prototype.close=function(){this.transceivers.forEach(function(p){p.iceTransport&&p.iceTransport.stop(),p.dtlsTransport&&p.dtlsTransport.stop(),p.rtpSender&&p.rtpSender.stop(),p.rtpReceiver&&p.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},y.prototype._updateSignalingState=function(p){this.signalingState=p;var d=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",d)},y.prototype._maybeFireNegotiationNeeded=function(){var p=this;"stable"!==this.signalingState||!0===this.needNegotiation||(this.needNegotiation=!0,A.setTimeout(function(){if(p.needNegotiation){p.needNegotiation=!1;var d=new Event("negotiationneeded");p._dispatchEvent("negotiationneeded",d)}},0))},y.prototype._updateConnectionState=function(){var p,d={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(g){d[g.iceTransport.state]++,d[g.dtlsTransport.state]++}),d.connected+=d.completed,p="new",d.failed>0?p="failed":d.connecting>0||d.checking>0?p="connecting":d.disconnected>0?p="disconnected":d.new>0?p="new":(d.connected>0||d.completed>0)&&(p="connected"),p!==this.iceConnectionState){this.iceConnectionState=p;var c=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",c)}},y.prototype.createOffer=function(){var p=this;if(p._isClosed)return Promise.reject(N("InvalidStateError","Can not call createOffer after close"));var d=p.transceivers.filter(function(D){return"audio"===D.kind}).length,c=p.transceivers.filter(function(D){return"video"===D.kind}).length,g=arguments[0];if(g){if(g.mandatory||g.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==g.offerToReceiveAudio&&(d=!0===g.offerToReceiveAudio?1:!1===g.offerToReceiveAudio?0:g.offerToReceiveAudio),void 0!==g.offerToReceiveVideo&&(c=!0===g.offerToReceiveVideo?1:!1===g.offerToReceiveVideo?0:g.offerToReceiveVideo)}for(p.transceivers.forEach(function(D){"audio"===D.kind?--d<0&&(D.wantReceive=!1):"video"===D.kind&&--c<0&&(D.wantReceive=!1)});d>0||c>0;)d>0&&(p._createTransceiver("audio"),d--),c>0&&(p._createTransceiver("video"),c--);var f=v.writeSessionBoilerplate(p._sdpSessionId,p._sdpSessionVersion++);p.transceivers.forEach(function(D,x){var V=D.track,q=D.kind,z=D.mid||v.generateIdentifier();D.mid=z,D.iceGatherer||(D.iceGatherer=p._createIceGatherer(x,p.usingBundle));var ne=A.RTCRtpSender.getCapabilities(q);O<15019&&(ne.codecs=ne.codecs.filter(function(F){return"rtx"!==F.name})),ne.codecs.forEach(function(F){"H264"===F.name&&void 0===F.parameters["level-asymmetry-allowed"]&&(F.parameters["level-asymmetry-allowed"]="1"),D.remoteCapabilities&&D.remoteCapabilities.codecs&&D.remoteCapabilities.codecs.forEach(function(B){F.name.toLowerCase()===B.name.toLowerCase()&&F.clockRate===B.clockRate&&(F.preferredPayloadType=B.payloadType)})}),ne.headerExtensions.forEach(function(F){(D.remoteCapabilities&&D.remoteCapabilities.headerExtensions||[]).forEach(function(G){F.uri===G.uri&&(F.id=G.id)})});var Q=D.sendEncodingParameters||[{ssrc:1001*(2*x+1)}];V&&O>=15019&&"video"===q&&!Q[0].rtx&&(Q[0].rtx={ssrc:Q[0].ssrc+1}),D.wantReceive&&(D.rtpReceiver=new A.RTCRtpReceiver(D.dtlsTransport,q)),D.localCapabilities=ne,D.sendEncodingParameters=Q}),"max-compat"!==p._config.bundlePolicy&&(f+="a=group:BUNDLE "+p.transceivers.map(function(D){return D.mid}).join(" ")+"\r\n"),f+="a=ice-options:trickle\r\n",p.transceivers.forEach(function(D,x){f+=M(D,D.localCapabilities,"offer",D.stream,p._dtlsRole),f+="a=rtcp-rsize\r\n",D.iceGatherer&&"new"!==p.iceGatheringState&&(0===x||!p.usingBundle)&&(D.iceGatherer.getLocalCandidates().forEach(function(V){V.component=1,f+="a="+v.writeCandidate(V)+"\r\n"}),"completed"===D.iceGatherer.state&&(f+="a=end-of-candidates\r\n"))});var I=new A.RTCSessionDescription({type:"offer",sdp:f});return Promise.resolve(I)},y.prototype.createAnswer=function(){var p=this;if(p._isClosed)return Promise.reject(N("InvalidStateError","Can not call createAnswer after close"));var d=v.writeSessionBoilerplate(p._sdpSessionId,p._sdpSessionVersion++);p.usingBundle&&(d+="a=group:BUNDLE "+p.transceivers.map(function(f){return f.mid}).join(" ")+"\r\n");var c=v.getMediaSections(p.remoteDescription.sdp).length;p.transceivers.forEach(function(f,I){if(!(I+1>c)){if(f.isDatachannel)return void(d+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+f.mid+"\r\n");var D;f.stream&&("audio"===f.kind?D=f.stream.getAudioTracks()[0]:"video"===f.kind&&(D=f.stream.getVideoTracks()[0]),D&&O>=15019&&"video"===f.kind&&!f.sendEncodingParameters[0].rtx&&(f.sendEncodingParameters[0].rtx={ssrc:f.sendEncodingParameters[0].ssrc+1}));var x=P(f.localCapabilities,f.remoteCapabilities);!x.codecs.filter(function(q){return"rtx"===q.name.toLowerCase()}).length&&f.sendEncodingParameters[0].rtx&&delete f.sendEncodingParameters[0].rtx,d+=M(f,x,"answer",f.stream,p._dtlsRole),f.rtcpParameters&&f.rtcpParameters.reducedSize&&(d+="a=rtcp-rsize\r\n")}});var g=new A.RTCSessionDescription({type:"answer",sdp:d});return Promise.resolve(g)},y.prototype.addIceCandidate=function(p){var c,d=this;return p&&void 0===p.sdpMLineIndex&&!p.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(g,f){if(!d.remoteDescription)return f(N("InvalidStateError","Can not add ICE candidate without a remote description"));if(p&&""!==p.candidate){var D=p.sdpMLineIndex;if(p.sdpMid)for(var x=0;x<d.transceivers.length;x++)if(d.transceivers[x].mid===p.sdpMid){D=x;break}var V=d.transceivers[D];if(!V)return f(N("OperationError","Can not add ICE candidate"));if(V.isDatachannel)return g();var q=Object.keys(p.candidate).length>0?v.parseCandidate(p.candidate):{};if("tcp"===q.protocol&&(0===q.port||9===q.port)||q.component&&1!==q.component)return g();if((0===D||D>0&&V.iceTransport!==d.transceivers[0].iceTransport)&&!k(V.iceTransport,q))return f(N("OperationError","Can not add ICE candidate"));var z=p.candidate.trim();0===z.indexOf("a=")&&(z=z.substr(2)),(c=v.getMediaSections(d.remoteDescription.sdp))[D]+="a="+(q.type?z:"end-of-candidates")+"\r\n",d.remoteDescription.sdp=c.join("")}else for(var I=0;I<d.transceivers.length&&(d.transceivers[I].isDatachannel||(d.transceivers[I].iceTransport.addRemoteCandidate({}),(c=v.getMediaSections(d.remoteDescription.sdp))[I]+="a=end-of-candidates\r\n",d.remoteDescription.sdp=v.getDescription(d.remoteDescription.sdp)+c.join(""),!d.usingBundle));I++);g()})},y.prototype.getStats=function(){var p=[];return this.transceivers.forEach(function(c){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(g){c[g]&&p.push(c[g].getStats())})}),new Promise(function(c){var g=new Map;Promise.all(p).then(function(f){f.forEach(function(I){Object.keys(I).forEach(function(D){I[D].type=function(c){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[c.type]||c.type}(I[D]),g.set(D,I[D])})}),c(g)})})};var m=["createOffer","createAnswer"];return m.forEach(function(p){var d=y.prototype[p];y.prototype[p]=function(){var c=arguments;return"function"==typeof c[0]||"function"==typeof c[1]?d.apply(this,[arguments[2]]).then(function(g){"function"==typeof c[0]&&c[0].apply(null,[g])},function(g){"function"==typeof c[1]&&c[1].apply(null,[g])}):d.apply(this,arguments)}}),(m=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(p){var d=y.prototype[p];y.prototype[p]=function(){var c=arguments;return"function"==typeof c[1]||"function"==typeof c[2]?d.apply(this,arguments).then(function(){"function"==typeof c[1]&&c[1].apply(null)},function(g){"function"==typeof c[2]&&c[2].apply(null,[g])}):d.apply(this,arguments)}}),["getStats"].forEach(function(p){var d=y.prototype[p];y.prototype[p]=function(){var c=arguments;return"function"==typeof c[1]?d.apply(this,arguments).then(function(){"function"==typeof c[1]&&c[1].apply(null)}):d.apply(this,arguments)}}),y}},917:de=>{"use strict";var T={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};T.localCName=T.generateIdentifier(),T.splitLines=function(S){return S.trim().split("\n").map(function(v){return v.trim()})},T.splitSections=function(S){return S.split("\nm=").map(function(M,L){return(L>0?"m="+M:M).trim()+"\r\n"})},T.getDescription=function(S){var v=T.splitSections(S);return v&&v[0]},T.getMediaSections=function(S){var v=T.splitSections(S);return v.shift(),v},T.matchPrefix=function(S,v){return T.splitLines(S).filter(function(M){return 0===M.indexOf(v)})},T.parseCandidate=function(S){for(var v,M={foundation:(v=0===S.indexOf("a=candidate:")?S.substring(12).split(" "):S.substring(10).split(" "))[0],component:parseInt(v[1],10),protocol:v[2].toLowerCase(),priority:parseInt(v[3],10),ip:v[4],address:v[4],port:parseInt(v[5],10),type:v[7]},L=8;L<v.length;L+=2)switch(v[L]){case"raddr":M.relatedAddress=v[L+1];break;case"rport":M.relatedPort=parseInt(v[L+1],10);break;case"tcptype":M.tcpType=v[L+1];break;case"ufrag":M.ufrag=v[L+1],M.usernameFragment=v[L+1];break;default:M[v[L]]=v[L+1]}return M},T.writeCandidate=function(S){var v=[];v.push(S.foundation),v.push(S.component),v.push(S.protocol.toUpperCase()),v.push(S.priority),v.push(S.address||S.ip),v.push(S.port);var M=S.type;return v.push("typ"),v.push(M),"host"!==M&&S.relatedAddress&&S.relatedPort&&(v.push("raddr"),v.push(S.relatedAddress),v.push("rport"),v.push(S.relatedPort)),S.tcpType&&"tcp"===S.protocol.toLowerCase()&&(v.push("tcptype"),v.push(S.tcpType)),(S.usernameFragment||S.ufrag)&&(v.push("ufrag"),v.push(S.usernameFragment||S.ufrag)),"candidate:"+v.join(" ")},T.parseIceOptions=function(S){return S.substr(14).split(" ")},T.parseRtpMap=function(S){var v=S.substr(9).split(" "),M={payloadType:parseInt(v.shift(),10)};return v=v[0].split("/"),M.name=v[0],M.clockRate=parseInt(v[1],10),M.channels=3===v.length?parseInt(v[2],10):1,M.numChannels=M.channels,M},T.writeRtpMap=function(S){var v=S.payloadType;void 0!==S.preferredPayloadType&&(v=S.preferredPayloadType);var M=S.channels||S.numChannels||1;return"a=rtpmap:"+v+" "+S.name+"/"+S.clockRate+(1!==M?"/"+M:"")+"\r\n"},T.parseExtmap=function(S){var v=S.substr(9).split(" ");return{id:parseInt(v[0],10),direction:v[0].indexOf("/")>0?v[0].split("/")[1]:"sendrecv",uri:v[1]}},T.writeExtmap=function(S){return"a=extmap:"+(S.id||S.preferredId)+(S.direction&&"sendrecv"!==S.direction?"/"+S.direction:"")+" "+S.uri+"\r\n"},T.parseFmtp=function(S){for(var M,v={},L=S.substr(S.indexOf(" ")+1).split(";"),P=0;P<L.length;P++)v[(M=L[P].trim().split("="))[0].trim()]=M[1];return v},T.writeFmtp=function(S){var v="",M=S.payloadType;if(void 0!==S.preferredPayloadType&&(M=S.preferredPayloadType),S.parameters&&Object.keys(S.parameters).length){var L=[];Object.keys(S.parameters).forEach(function(P){L.push(S.parameters[P]?P+"="+S.parameters[P]:P)}),v+="a=fmtp:"+M+" "+L.join(";")+"\r\n"}return v},T.parseRtcpFb=function(S){var v=S.substr(S.indexOf(" ")+1).split(" ");return{type:v.shift(),parameter:v.join(" ")}},T.writeRtcpFb=function(S){var v="",M=S.payloadType;return void 0!==S.preferredPayloadType&&(M=S.preferredPayloadType),S.rtcpFeedback&&S.rtcpFeedback.length&&S.rtcpFeedback.forEach(function(L){v+="a=rtcp-fb:"+M+" "+L.type+(L.parameter&&L.parameter.length?" "+L.parameter:"")+"\r\n"}),v},T.parseSsrcMedia=function(S){var v=S.indexOf(" "),M={ssrc:parseInt(S.substr(7,v-7),10)},L=S.indexOf(":",v);return L>-1?(M.attribute=S.substr(v+1,L-v-1),M.value=S.substr(L+1)):M.attribute=S.substr(v+1),M},T.parseSsrcGroup=function(S){var v=S.substr(13).split(" ");return{semantics:v.shift(),ssrcs:v.map(function(M){return parseInt(M,10)})}},T.getMid=function(S){var v=T.matchPrefix(S,"a=mid:")[0];if(v)return v.substr(6)},T.parseFingerprint=function(S){var v=S.substr(14).split(" ");return{algorithm:v[0].toLowerCase(),value:v[1]}},T.getDtlsParameters=function(S,v){return{role:"auto",fingerprints:T.matchPrefix(S+v,"a=fingerprint:").map(T.parseFingerprint)}},T.writeDtlsParameters=function(S,v){var M="a=setup:"+v+"\r\n";return S.fingerprints.forEach(function(L){M+="a=fingerprint:"+L.algorithm+" "+L.value+"\r\n"}),M},T.parseCryptoLine=function(S){var v=S.substr(9).split(" ");return{tag:parseInt(v[0],10),cryptoSuite:v[1],keyParams:v[2],sessionParams:v.slice(3)}},T.writeCryptoLine=function(S){return"a=crypto:"+S.tag+" "+S.cryptoSuite+" "+("object"==typeof S.keyParams?T.writeCryptoKeyParams(S.keyParams):S.keyParams)+(S.sessionParams?" "+S.sessionParams.join(" "):"")+"\r\n"},T.parseCryptoKeyParams=function(S){if(0!==S.indexOf("inline:"))return null;var v=S.substr(7).split("|");return{keyMethod:"inline",keySalt:v[0],lifeTime:v[1],mkiValue:v[2]?v[2].split(":")[0]:void 0,mkiLength:v[2]?v[2].split(":")[1]:void 0}},T.writeCryptoKeyParams=function(S){return S.keyMethod+":"+S.keySalt+(S.lifeTime?"|"+S.lifeTime:"")+(S.mkiValue&&S.mkiLength?"|"+S.mkiValue+":"+S.mkiLength:"")},T.getCryptoParameters=function(S,v){return T.matchPrefix(S+v,"a=crypto:").map(T.parseCryptoLine)},T.getIceParameters=function(S,v){var M=T.matchPrefix(S+v,"a=ice-ufrag:")[0],L=T.matchPrefix(S+v,"a=ice-pwd:")[0];return M&&L?{usernameFragment:M.substr(12),password:L.substr(10)}:null},T.writeIceParameters=function(S){return"a=ice-ufrag:"+S.usernameFragment+"\r\na=ice-pwd:"+S.password+"\r\n"},T.parseRtpParameters=function(S){for(var v={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},L=T.splitLines(S)[0].split(" "),P=3;P<L.length;P++){var U=L[P],k=T.matchPrefix(S,"a=rtpmap:"+U+" ")[0];if(k){var N=T.parseRtpMap(k),A=T.matchPrefix(S,"a=fmtp:"+U+" ");switch(N.parameters=A.length?T.parseFmtp(A[0]):{},N.rtcpFeedback=T.matchPrefix(S,"a=rtcp-fb:"+U+" ").map(T.parseRtcpFb),v.codecs.push(N),N.name.toUpperCase()){case"RED":case"ULPFEC":v.fecMechanisms.push(N.name.toUpperCase())}}}return T.matchPrefix(S,"a=extmap:").forEach(function(O){v.headerExtensions.push(T.parseExtmap(O))}),v},T.writeRtpDescription=function(S,v){var M="";M+="m="+S+" ",M+=v.codecs.length>0?"9":"0",M+=" UDP/TLS/RTP/SAVPF ",M+=v.codecs.map(function(P){return void 0!==P.preferredPayloadType?P.preferredPayloadType:P.payloadType}).join(" ")+"\r\n",M+="c=IN IP4 0.0.0.0\r\n",M+="a=rtcp:9 IN IP4 0.0.0.0\r\n",v.codecs.forEach(function(P){M+=T.writeRtpMap(P),M+=T.writeFmtp(P),M+=T.writeRtcpFb(P)});var L=0;return v.codecs.forEach(function(P){P.maxptime>L&&(L=P.maxptime)}),L>0&&(M+="a=maxptime:"+L+"\r\n"),M+="a=rtcp-mux\r\n",v.headerExtensions&&v.headerExtensions.forEach(function(P){M+=T.writeExtmap(P)}),M},T.parseRtpEncodingParameters=function(S){var N,v=[],M=T.parseRtpParameters(S),L=-1!==M.fecMechanisms.indexOf("RED"),P=-1!==M.fecMechanisms.indexOf("ULPFEC"),U=T.matchPrefix(S,"a=ssrc:").map(function(E){return T.parseSsrcMedia(E)}).filter(function(E){return"cname"===E.attribute}),k=U.length>0&&U[0].ssrc,A=T.matchPrefix(S,"a=ssrc-group:FID").map(function(E){return E.substr(17).split(" ").map(function(b){return parseInt(b,10)})});A.length>0&&A[0].length>1&&A[0][0]===k&&(N=A[0][1]),M.codecs.forEach(function(E){if("RTX"===E.name.toUpperCase()&&E.parameters.apt){var _={ssrc:k,codecPayloadType:parseInt(E.parameters.apt,10)};k&&N&&(_.rtx={ssrc:N}),v.push(_),L&&((_=JSON.parse(JSON.stringify(_))).fec={ssrc:k,mechanism:P?"red+ulpfec":"red"},v.push(_))}}),0===v.length&&k&&v.push({ssrc:k});var O=T.matchPrefix(S,"b=");return O.length&&(O=0===O[0].indexOf("b=TIAS:")?parseInt(O[0].substr(7),10):0===O[0].indexOf("b=AS:")?1e3*parseInt(O[0].substr(5),10)*.95-16e3:void 0,v.forEach(function(E){E.maxBitrate=O})),v},T.parseRtcpParameters=function(S){var v={},M=T.matchPrefix(S,"a=ssrc:").map(function(U){return T.parseSsrcMedia(U)}).filter(function(U){return"cname"===U.attribute})[0];M&&(v.cname=M.value,v.ssrc=M.ssrc);var L=T.matchPrefix(S,"a=rtcp-rsize");v.reducedSize=L.length>0,v.compound=0===L.length;var P=T.matchPrefix(S,"a=rtcp-mux");return v.mux=P.length>0,v},T.parseMsid=function(S){var v,M=T.matchPrefix(S,"a=msid:");if(1===M.length)return{stream:(v=M[0].substr(7).split(" "))[0],track:v[1]};var L=T.matchPrefix(S,"a=ssrc:").map(function(P){return T.parseSsrcMedia(P)}).filter(function(P){return"msid"===P.attribute});return L.length>0?{stream:(v=L[0].value.split(" "))[0],track:v[1]}:void 0},T.parseSctpDescription=function(S){var L,v=T.parseMLine(S),M=T.matchPrefix(S,"a=max-message-size:");M.length>0&&(L=parseInt(M[0].substr(19),10)),isNaN(L)&&(L=65536);var P=T.matchPrefix(S,"a=sctp-port:");if(P.length>0)return{port:parseInt(P[0].substr(12),10),protocol:v.fmt,maxMessageSize:L};if(T.matchPrefix(S,"a=sctpmap:").length>0){var k=T.matchPrefix(S,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(k[0],10),protocol:k[1],maxMessageSize:L}}},T.writeSctpDescription=function(S,v){var M=[];return M="DTLS/SCTP"!==S.protocol?["m="+S.kind+" 9 "+S.protocol+" "+v.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+v.port+"\r\n"]:["m="+S.kind+" 9 "+S.protocol+" "+v.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+v.port+" "+v.protocol+" 65535\r\n"],void 0!==v.maxMessageSize&&M.push("a=max-message-size:"+v.maxMessageSize+"\r\n"),M.join("")},T.generateSessionId=function(){return Math.random().toString().substr(2,21)},T.writeSessionBoilerplate=function(S,v,M){var P=void 0!==v?v:2;return"v=0\r\no="+(M||"thisisadapterortc")+" "+(S||T.generateSessionId())+" "+P+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},T.writeMediaSection=function(S,v,M,L){var P=T.writeRtpDescription(S.kind,v);if(P+=T.writeIceParameters(S.iceGatherer.getLocalParameters()),P+=T.writeDtlsParameters(S.dtlsTransport.getLocalParameters(),"offer"===M?"actpass":"active"),P+="a=mid:"+S.mid+"\r\n",P+=S.direction?"a="+S.direction+"\r\n":S.rtpSender&&S.rtpReceiver?"a=sendrecv\r\n":S.rtpSender?"a=sendonly\r\n":S.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",S.rtpSender){var U="msid:"+L.id+" "+S.rtpSender.track.id+"\r\n";P+="a="+U,P+="a=ssrc:"+S.sendEncodingParameters[0].ssrc+" "+U,S.sendEncodingParameters[0].rtx&&(P+="a=ssrc:"+S.sendEncodingParameters[0].rtx.ssrc+" "+U,P+="a=ssrc-group:FID "+S.sendEncodingParameters[0].ssrc+" "+S.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return P+="a=ssrc:"+S.sendEncodingParameters[0].ssrc+" cname:"+T.localCName+"\r\n",S.rtpSender&&S.sendEncodingParameters[0].rtx&&(P+="a=ssrc:"+S.sendEncodingParameters[0].rtx.ssrc+" cname:"+T.localCName+"\r\n"),P},T.getDirection=function(S,v){for(var M=T.splitLines(S),L=0;L<M.length;L++)switch(M[L]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return M[L].substr(2)}return v?T.getDirection(v):"sendrecv"},T.getKind=function(S){return T.splitLines(S)[0].split(" ")[0].substr(2)},T.isRejected=function(S){return"0"===S.split(" ",2)[1]},T.parseMLine=function(S){var M=T.splitLines(S)[0].substr(2).split(" ");return{kind:M[0],port:parseInt(M[1],10),protocol:M[2],fmt:M.slice(3).join(" ")}},T.parseOLine=function(S){var M=T.matchPrefix(S,"o=")[0].substr(2).split(" ");return{username:M[0],sessionId:M[1],sessionVersion:parseInt(M[2],10),netType:M[3],addressType:M[4],address:M[5]}},T.isValidSDP=function(S){if("string"!=typeof S||0===S.length)return!1;for(var v=T.splitLines(S),M=0;M<v.length;M++)if(v[M].length<2||"="!==v[M].charAt(1))return!1;return!0},de.exports=T}},de=>{de(de.s=376)}]);